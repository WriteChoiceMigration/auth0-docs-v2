---
og:description: Describes how to migrate your Passwordless API calls and responses
  from /oauth/ro to /oauth/token.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Migrez votre échange d’informations d’identification sans mot de passe du
  propriétaire de la ressource
og:url: https://auth0.com/docs/
permalink: resource-owner-passwordless-credentials-exchange
title: Migrez votre échange d’informations d’identification sans mot de passe du propriétaire
  de la ressource
twitter:description: Describes how to migrate your Passwordless API calls and responses
  from /oauth/ro to /oauth/token.
twitter:title: Migrez votre échange d’informations d’identification sans mot de passe
  du propriétaire de la ressource
---



## Caractéristiques affectées

Cette modification vous concerne si vous utilisez l’échange d’informations d’identification sans mot de passe du propriétaire de la ressource et appelez `/oauth/ro` directement sans utiliser de bibliothèques ou de trousses SDK Auth0.



## Actions

### Demander des modifications

Auparavant, la charge utile d’une requête vers `/oauth/ro` ressemblait à ceci :



Voici les changements apportés à la nouvelle implémentation :

* Le point de terminaison pour exécuter les échanges de jetons est désormais `/oauth/token`.
* Le type d’autorisation propre à Auth0 est utilisé pour authentifier les utilisateurs à partir d’une connexion (ou d’une partition) spécifique.
* Auth0 prend en charge les permissions OIDC standard, ainsi que les permissions que vous avez définies dans votre API personnalisée.
* Une permission qui ne s’inscrit pas dans l’une de ces catégories, comme `favorite_color` ci-dessus, n’est plus une permission valide.
* Le paramètre `device` a été retiré.
* Le paramètre `audience` est facultatif.

Voici un exemple de la charge utile d’une requête vers `/oauth/token` :



* Le type d’autorisation est spécifié ici comme `http://auth0.com/oauth/grant-type/passwordless/otp`.
* Les paramètres `client_id` et `username` sont inchangés.
* Le `client_secret` doit être spécifié pour les clients confidentiels (par exemple, les applications Web classiques).
* Le mot de passe à usage unique doit être envoyé dans le paramètre `otp` au lieu du paramètre `password`.
* Le `realm` est utilisé pour identifier la connexion et remplace le paramètre `connection` des appels précédents.
* Le paramètre `scope` est sensiblement le même, mais il n’accepte pas les valeurs non OIDC.
* Le paramètre `audience` peut être ajouté et indique le type d’audience de l’API auquel le jeton est destiné.

### Changements dans les réponses

Les réponses provenant de `/oauth/ro` avait un format similaire à celui-ci :



* Le jeton d’accès renvoyé est valide pour appeler le point de terminaison ` /userinfo` (à condition que l’API spécifiée par le paramètre `audience` utilise RS256 comme algorithme de signature) et éventuellement l’API personnalisée si elle a été spécifiée.
* Le jeton d’ID sera signé de force à l’aide de l’algorithme RS256 si un client public en fait la demande.
* Un jeton d’actualisation sera renvoyé seulement si la permission `offline_access` a été octroyée et que l’option **Autoriser l’accès hors ligne**  est activée dans l’API.

Voici un exemple de réponse conforme à OIDC provenant de `/oauth/token` :



### Modifications du code lors de l’utilisation des trousses SDK

Si votre application utilise les bibliothèques natives Auth0 pour Android ou iOS, assurez-vous que la version de la bibliothèque que vous incluez est au moins égale au minimum répertorié ci-dessous (ou supérieure). Assurez-vous également de définir le drapeau `OIDC Conformant` sur `true` lors de la configuration des bibliothèques.



### Vérifier la migration

1. Pour vérifier si vous utilisez le point de terminaison obsolète, vérifiez le filtre [tenant logs](%24%7Bmanage_url%7D/#/logs), par **Deprecation Notice (Avis d’obsolescence)** et puis vérifiez les journaux indiquant `**oauth/ro**`** sans mot de passe : Cette fonctionnalité est en cours d’abandon**. Vous pouvez également effectuer cette recherche directement en utilisant la requête suivante : `type:depnote AND description:*passwordless*`.
2. Une fois que vous avez migré votre base de code et que vous avez la certitude que vos applications ne sont pas en train d’appeler le point de terminaison, accédez à [Dashboard ](%24%7Bmanage_url%7D/#/tenant/advanced) sous **Tenant Settings (Paramètres du locataire) > Advanced (Avancés)**.
3. Faites défiler vers le bas jusqu’à **Migrations** et désactivez **Hérité**`**/oauth/ro**`** Point de terminaison**. Ce bouton à bascule permet de désactiver le point de terminaison obsolète pour votre locataire, et empêche ainsi toute utilisation ultérieure.

Si la désactivation du commutateur entraîne des échecs de connexion, c’est le signe que vous n’avez pas encore supprimé toutes les instances de code hérité de vos applications.

Une fois que les migrations ont bien été effectuées dans les environnements de production, le commutateur peut être désactivé et ignoré, afin de s’assurer que les fonctionnalités obsolètes ne peuvent plus être utilisées.