---
og:description: Describes the migration steps you need to take because Auth0 is deprecating
  the usage of the /passwordless/start endpoint from confidential applications without
  a client secret in the request.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Migrez vers un point de terminaison sans mot de passe à partir d’applications
  confidentielles
og:url: https://auth0.com/docs/
permalink: migrate-to-passwordless
title: Migrez vers un point de terminaison sans mot de passe à partir d’applications
  confidentielles
twitter:description: Describes the migration steps you need to take because Auth0
  is deprecating the usage of the /passwordless/start endpoint from confidential applications
  without a client secret in the request.
twitter:title: Migrez vers un point de terminaison sans mot de passe à partir d’applications
  confidentielles
---

Auth0 déconseille l’utilisation du point de terminaison `/passwordless/start` à partir d’applications confidentielles lorsque Auth0 n’est pas en mesure d’authentifier que l’appel est effectué au nom de l’application.

<Tooltip tip="OAuth 2.0: Authorization framework that defines authorization protocols and workflows." cta="View Glossary" href="/docs/glossary?term=OAuth">OAuth</Tooltip> uses the term 'confidential' for applications that can store secrets. In Auth0, those are 'Regular Web Applications', which serve web pages from a backend app. Single Page Applications and Native Applications are considered 'public' applications, and are not affected by this change.

Auth0 peut authentifier les appels à `/passwordless/start` lorsqu’ils incluent un `client_secret` en tant que paramètre, ou lorsque les appels sont effectués à partir de la page de connexion personnalisée dans la connexion universelle et transmettent le paramètre `state`.

## Caractéristiques affectées

If any of your applications currently call the `/passwordless/start` endpoint directly to begin <Tooltip tip="Passwordless: Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=passwordless">passwordless</Tooltip> authentication from a Web Application, and you are not sending the `client_secret` as a parameter, this deprecation does affect you.

Si vous implémentez l’authentification sans mot de passe à partir de la page de connexion universelle et avez modifié le mode d’initialisation par défaut des bibliothèques Auth0, vous pourriez également être touché.

You can verify whether you are affected by checking the [tenant logs](https://manage.auth0.com/#/logs), filtering by "Deprecation Notice" and check for logs saying "Enforce client authentication for passwordless connections". You can also perform this search directly with the following query: `type:depnote AND description:*passwordless*`. Note that this specific query will only work for public cloud tenants, as private cloud logs cannot be searched on the description field.

## Actions

Si vous appelez le point de terminaison `/passwordless/start`, sans authentification d’application appropriée, vous devez :

* Suivre les instructions décrites ci-dessous pour ajuster le code afin d’appeler correctement le point de terminaison `/passwordless/start`.
* Check your [tenant logs](https://manage.auth0.com/#/logs) to verify the change was made correctly and no deprecation logs are being generated for "Enforce client authentication for passwordless connections".
* Dans la section **Migrations** de **Paramètres avancés du locataire**, activez le bouton bascule **Appliquer l’authentification client pour les connexions sans mot de passe**.

Il existe quelques cas d’utilisation qui pourraient être touchés, mais pour chacun d’eux, le chemin de migration est assez simple :

### Appels API depuis le système dorsal

For any calls from your backend to the `/passwordless/start` endpoint, your call must include the <Tooltip tip="Client Secret: Secret used by a client (application) to authenticate with the Authorization Server; it should be known to only the client and the Authorization Server and must be sufficiently random to not be guessable." cta="View Glossary" href="/docs/glossary?term=client+secret">client secret</Tooltip> as a parameter.

Si vous faites une requête POST directement à `/passwordless/start`, vous devez inclure le `client_secret` dans le cadre de la charge utile :

{/* codeblockOld.header.login.logInButton codeblockOld.header.login.configureSnippet */}

```json lines
POST https://{yourDomain}/passwordless/start
    Content-Type: application/json
    {
      "client_id": "{yourClientId}",
      "client_secret": "{yourClientSecret}",
      "connection": "email|sms",
      "email": "{userEmailAddress}", //set for connection=email
      "phone_number": "{userPhoneNumber}", //set for connection=sms
      "send": "link|code",
      "authParams": { 
          "scope": "openid",
          "state": "{yourState}"
        }
      }
```






Si vous utilisez une trousse SDK, ajoutez le paramètre à la méthode qui lance le flux sans mot de passe. Cela varie selon chaque trousse SDK, et toutes n’ont pas encore été mises à jour. Si vous utilisez une trousse SDK qui n’a pas encore été mise à jour, vous pouvez effectuer l’appel HTTP directement en attendant que cette mise à jour soit réalisée.

### Auth0.js ou Lock.js dans la page de connexion universelle

Pour ce qui est de l’authentification sans mot de passe dans une application Web à partir de la page de connexion universelle, celle-ci effectuera des appels au point de terminaison `/passwordless/start` en utilisant Lock.js ou Auth0.js.

Étant donné qu’il n’est pas possible de stocker un secret client dans une page Web, la méthode d’authentification de l’appel consiste à transmettre le paramètre `state` reçu sur la page de connexion universelle au point de terminaison `/passwordless/start`. Ce paramètre est stocké dans le champ `config.internalOptions` dans la page de connexion personnalisée.

Les modèles par défaut pour la personnalisation de la page de connexion l’utilisent de la manière suivante lors de l’initialisation de Lock.js ou Auth0.js :

```javascript lines
var lock = new Auth0Lock(
  config.clientID, 
  config.auth0Domain, 
  {
    auth: {
      // .. other fields set
      params: {
       scope: config.internalOptions.scope,
       _csrf: config.internalOptions._csrf,
       state: config.internalOptions.state,
      }
    }
  });
```






```javascript lines
var params = Object.assign({
    scope: config.internalOptions.scope,
    _csrf: config.internalOptions._csrf,
    state: config.internalOptions.state,
  }, {
    // ...auth params
  });

var webAuth = new auth0.WebAuth(params);
```






Veuillez vérifier dans la mise en œuvre de votre page personnalisée que vous n’avez pas supprimé ce code.

### Appeler /passwordless/start depuis le client dans une application Web

Si vous appelez le point de terminaison `/passwordless/start` à partir d’une page utilisant JavaScript (p. ex., en utilisant Auth0.js sur la page) à partir d’applications Web classiques, vous ne pourrez pas préciser un secret client dans un appel effectué en utilisant JavaScript. Si tel est le cas pour votre application, vous devrez modifier vos applications afin que `/passwordless/start` soit appelé depuis le système dorsal de votre application Web, plutôt que du côté client.

### Limites anti-attaques

A consequence of adding client authentication to `/passwordless/start` is that Auth0 can trust the headers sent with the request. If you set the `auth0-forwarded-for` header, the IP address will show in the logs and be used for <Tooltip tip="Attack Protection: Features that Auth0 provides to detect and mitigate attacks, including brute-force protection, suspicious IP throttling, breached password detection, bot detection, and adaptive multi-factor authentication." cta="View Glossary" href="/docs/glossary?term=attack+protection">attack protection</Tooltip> purposes.

Les requêtes authentifiées vers `/passwordless/start` seront considérées comme des requêtes API authentifiées classiques, et la limite anti-attaque globale de l’Authentication API correspondante s’appliquera.