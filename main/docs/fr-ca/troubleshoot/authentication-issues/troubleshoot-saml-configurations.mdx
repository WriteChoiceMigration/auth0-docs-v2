---
og:description: Describes troubleshooting for SAML configuration issues.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Dépanner des configurations SAML
og:url: https://auth0.com/docs/
permalink: troubleshoot-saml-configurations
title: Dépanner des configurations SAML
twitter:description: Describes troubleshooting for SAML configuration issues.
twitter:title: Dépanner des configurations SAML
---

Lors du dépannage, il est important de comprendre votre configuration.

* **Is Auth0 serving as the <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=SAML">SAML</Tooltip> Service Provider (SP), the SAML <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=Identity+Provider">Identity Provider</Tooltip> (IdP), or both?**

  Le SP redirige les utilisateurs vers une autre destination pour l’authentification. L’IdP authentifie l’utilisateur en lui demandant de se connecter et en validant les informations fournies. Si votre application redirige l’utilisateur vers Auth0 pour l’authentification via SAML, alors Auth0 est l’IdP. Si Auth0 redirige les utilisateurs via une connexion vers un IdP distant via SAML, alors Auth0 est le SP de l’IdP distant. Auth0 peut agir comme fournisseur de services (SP), fournisseur d’identité (IdP), ou les deux.
* **Votre flux d’authentification utilise-t-il un modèle initié par le SP, un modèle initié par l’IdP, ou les deux?**

  Les flux d’authentification initiés par le SP débutent par un utilisateur qui se rend sur l’application du SP et qui est redirigé vers l’IdP pour se connecter. Un flux initié par l’IdP signifie que l’utilisateur se rend sur l’IdP, se connecte, puis est redirigé vers l’application du SP.

  Dans les configurations d’entreprise, le flux initié par l’IdP est le plus courant.
* **Quel attribut de profil utilisateur identifie l’utilisateur au niveau de l’IdP (lors de la connexion) et dans chaque application?**

  Si l’attribut de nom diffère entre l’IdP et la(les) application(s), vous allez devoir configurer les mappages appropriés dans Auth0 afin qu’il envoie les bons attributs de profil utilisateur à la(les) application(s).

  + Sur la base de notre expérience, nous pouvons affirmer qu’utiliser l’adresse courriel comme identifiant unique est l’option la plus simple, bien qu’elle pose des problèmes de confidentialité.
  + Les organizations d’entreprise utilisent souvent un identifiant interne de type quelconque avec l’IdP, qui doit être mappé à un autre attribut significatif pour les applications SaaS externalisées
* **Vos demandes d’authentification sont-elles signées?**
* **Vos assertions d’authentification sont-elles cryptées?**

Lors du dépannage, nous recommandons de commencer par rassembler des informations qui aident à répondre aux questions suivantes :

1. How many users experience the issue? Just one user? All users?
2. Is this an issue with a new setup, or is this an existing integration that's stopped working?
3. How many applications does the issue affect?
4. What is the expected behavior? What is the behavior you're seeing?
5. How far through the login sequence does the user get?

## Vérifiez les utilisateurs affectés.

* Vérifiez le profil de l’utilisateur, le navigateur ou l’appareil pour détecter d’éventuels problèmes.
* Vérifiez si cela se produit dans tous les navigateurs pour les utilisateurs affectés (indiquant un problème de données) ou uniquement dans certains types de navigateurs (indiquant un problème spécifique au navigateur).
* Vérifiez si JavaScript et les témoins sont activés dans le navigateur.
* Vérifiez que la touche de verrouillage des majuscules est désactivée.
* Si l’utilisateur utilise un appareil mobile, vérifiez s’il y a des logiciels susceptibles d’impacter l’authentification et/ou l’autorisation (par exemple, ne pas exécuter certains types de logiciels requis).
* Check to see if the user can access some of the app's key URLs, such as the IdP's <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=Single+Sign-on">Single Sign-on</Tooltip> (SSO) URL (indicating a network connectivity issue).

## Dépannage d’Auth0 en tant que fournisseur de services

### Erreurs courantes

Voici quelques erreurs courantes que vous pourriez rencontrer lorsque Auth0 agit comme fournisseur de services et les étapes à suivre pour les résoudre.

#### Erreur : Connexion désactivée

Ce message indique que l’application n’a pas de connexion active associée :

`"error": "invalid_request",
"error_description": "the connection was disabled"`

1. Navigate to [Auth0 Dashboard > Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise), and select a connection type.
2. Select the name of your Connection.
3. Select the **Applications** view.
4. Enable at least one Application (if you don't see any in the list, you will need to create an application before proceeding).

#### Erreur : La connexion initiée par l’IdP n’est pas activée

This error typically occurs because the ACS URL configured in the IdP used the default Auth0 tenant domain, whereas the authentication transaction was started by calling the <Tooltip tip="Custom Domain: Third-party domain with a specialized, or vanity, name." cta="View Glossary" href="/docs/glossary?term=Custom+Domain">Custom Domain</Tooltip> `/authorize` endpoint.

`"invalid_request": "IdP-Initiated login is not enabled for connection 'CONNECTION_NAME'."`

Si vous constatez cette erreur lorsque vous utilisez un flux initié par SP, l’un des éléments suivants est manquant ou vide :

* Paramètre `RelayState`
* L’attribut `InResponseTo` dans l’assertion SAML

Si ces éléments sont manquants ou vides, Auth0 traite la connexion comme étant initiée par IdP. Vous pouvez corriger cette erreur en vérifiant la configuration afin de vous assurer que les deux champs sont remplis et retournent de manière adéquate.

Pour résoudre ce problème :

1. Navigate to [Auth0 Dashboard > Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise), and select a connection type.
2. Select the name of your Connection.
3. Select the **IdP-Initiated SSO** view.
4. Locate **IdP-Initiated SSO Behavior**, and select **Accept Requests** to enable IdP-initiated logins.
5. Select the **Default Application** and the **Response Protocol** used by that application, and (optionally) specify any additional parameters you want to be passed to the application.

#### Error: InResponseTo attribute does not match the ID in AuthNRequest

Cette erreur se produit lorsque l’attribut `InResponseTo` dans la réponse SAML n’est pas reconnu par le locataire Auth0. Cette erreur pourrait être causée par :

* témoins bloqués
* identifiant non concordant issue de la dernière requête SAML
* utilisation incohérente des domaines

Si votre locataire utilise un domaine personnalisé, vous pourriez avoir une incohérence si le flux de connexion commence sur le domaine personnalisé et se termine sur le domaine canonique. Par exemple, l’utilisateur commence sur le domaine personnalisé :

```http wrap lines
https://auth.{yourDomain}.com/authorize?client_id=abc123&redirect_uri=https://jwt.io&response_type=code&scope=openid&audience=https://example.com&connection=mysamlconnection
```






Mais le fournisseur d’identité est configuré pour renvoyer la réponse SAML à l’URL ACS sur le domaine canonique :

```http lines
https://{yourTenant}.auth0.com/login/callback
```






Si l’identifiant est renvoyé à un autre domaine dans l’attribut `InResponseTo` d’une réponse SAML, votre locataire Auth0 n’a pas un enregistrement de cela et renvoie l’erreur ci-dessus.

Pour résoudre ce problème :

Utilisez le même domaine tout au long du flux de connexion. Changez soit le domaine dans la requête initiale `/authorize` soit l’URL ACS avec votre fournisseur d’identité.

#### Erreur : Application par défaut initiée par l’IdP non configurée.

Cette erreur se produit généralement lorsque vous avez activé les flux initiés par l’IdP, mais que vous n’avez pas fourni les informations nécessaires pour exécuter le flux

`"invalid_request": "Default App for IdP-Initiated is not configured. Make sure to configure that from connection settings or include client_id in RelayState parameter."`

L’ACS doit utiliser le même domaine que la requête d’authentification initiale. Si vous utilisez des domaines personnalisés, elle doit utiliser l’URL de rappel du domaine personnalisé.

Si vous constatez cette erreur lorsque vous utilisez un flux initié par SP, l’un des éléments suivants est manquant ou vide :

* Paramètre `RelayState`
* L’attribut `InResponseTo` dans l’assertion SAML

Si ces éléments sont manquants ou vides, Auth0 traite la connexion comme étant initiée par IdP. Vous pouvez corriger cette erreur en vérifiant la configuration afin de vous assurer que les deux champs sont remplis et retournent de manière adéquate.

Pour résoudre ce problème :

1. Navigate to [Auth0 Dashboard > Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise), and select a connection type.
2. Select the name of your Connection.
3. Select the **IdP-Initiated SSO** view.
4. Select the **Default Application** and the **Response Protocol** used by that application, and (optionally) specify any additional parameters you want to be passed to the application.

#### Erreur : RelayState manquant

Cette erreur se produit lorsque le fournisseur d’identité ne renvoie pas le paramètre `RelayState` avec sa réponse.

Collaborez avec le fournisseur d’identité pour vous assurer qu’il renvoie le paramètre `RelayState` .

#### Erreur : Audience invalide

Cette erreur se produit si la valeur de l’élément `audience` de la réponse SAML du fournisseur d’identité ne correspond pas à la valeur attendue par Auth0. Auth0 attend que la valeur soit l’identifiant d’entité pour la connexion.

Trouvez l’identifiant d’entité de votre connexion :

1. Navigate to [Auth0 Dashboard > Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise), and select a connection type.
2. Select the name of your Connection.
3. Select the **Setup** view, and locate the **Common Settings** section; your **Entity ID** is the second parameter provided.

Assurez-vous que le fournisseur d’identité envoie la valeur `audience` correcte dans la réponse SAML.

#### Protocole incorrect spécifié

One common error is specifying the incorrect response protocol on the IdP-Initiated tab. The response protocol is the one used between Auth0 and the Application (not the remote identity provider). For example, if you set this value to **SAML** when your Application expects **<Tooltip tip="OpenID: Open standard for authentication that allows applications to verify users' identities without collecting and storing login information." cta="View Glossary" href="/docs/glossary?term=OpenID">OpenID</Tooltip> Connect** or **<Tooltip tip="OpenID: Open standard for authentication that allows applications to verify users' identities without collecting and storing login information." cta="View Glossary" href="/docs/glossary?term=WS-Fed">WS-Fed</Tooltip>** results in errors due to the incorrect configuration.

1. Navigate to [Auth0 Dashboard > Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise), and select a connection type.
2. Select the name of your Connection.
3. Select the **IdP-Initiated SSO** view, locate **Response Protocol**, and check its value.

#### L’utilisateur n’est pas déconnecté de l’IdP.

Lorsque ADFS est configuré en tant que IdP SAML, si l’attribut `Name ID (Identifiant de nom)` de la partie de confiance relayée par ADFS n’est pas mappé, le flux de déconnexion échoue. Par exemple, avec le paramètre fédéré `v2/logout?federated&...` l’utilisateur n’est pas redirigé vers le point de terminaison de déconnexion SAML ADFS, mais est redirigé directement vers l’URL de rappel de l’application. En conséquence, l’utilisateur n’est pas déconnecté de l’IdP dans ce cas.

Ajoutez l’attribut `Name identifiant` en tant que règle sur la partie de confiance relayée par ADFS

### Problèmes de connexion SAML

Lors du dépannage d’une connexion SAML, il y a quatre étapes principales à vérifier :

* Étape 1 : L’utilisateur est redirigé avec succès vers un IdP et peut se connecter.
* Étape 2 : Après s’être connecté avec l’IdP, l’utilisateur revient à Auth0 avec un événement de connexion réussi enregistré.
* Étape 3 : Après un événement de connexion réussi dans Auth0, le profil utilisateur dans Auth0 est correct.
* Étape 4 : L’utilisateur est redirigé avec succès vers l’application et peut y accéder.

Les sections suivantes décrivent comment vérifier chaque étape et comment identifier s’il existe des problèmes avec une étape donnée.

#### La page de connexion de l’IdP ne s’affiche pas.

1. Navigate to [Auth0 Dashboard > Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise), and select **SAML**.
2. Locate your connection, and select its **Try** (triangle/play) icon to test the interaction between Auth0 and the remote IdP. If the Connection does **not** work, continue with the steps detailed in this section. If it does, proceed to the next section.
3. Next to the SAML connection, click **Settings** (represented by the gear icon).

   <Frame>![Dashboard Authentication Enterprise SAML Connection Settings](/images/cdy7uua7fh8z/6s8p4aMck06YnPStr493sA/3e10e74fd75b504a04b0e3bb3dfb82f2/dashboard-authentication-enterprise-saml-connection-settings.png)</Frame>
4. Check and confirm the following with the IdP administrator:

   1. That the Sign In URL is the correct Single Sign-on (SSO) URL. This is the URL that Auth0 will redirect the user to for authentication.
   2. If the IdP expects HTTP-POST binding or HTTP-Redirect binding. You can switch the default binding in the **Settings** tab.
   3. If your authentication requests should be signed. If so, which signing algorithm does the IdP expect you to use? (Note that authentication requests are not commonly signed.) If you're sending signed requests, enable the Connection Settings **Sign Request** toggle and make sure the **Signing Algorithm** value matches what the IdP expects.
   4. Ask the IdP administrator to check for log entries that might provide information on the problem.

#### Les journaux n’affichent pas d’événement de connexion réussi.

Dans ce cas, l’utilisateur se connecte avec succès au fournisseur d’identité, mais les journaux d’Auth0 n’affichent pas d’événement de connexion réussi.

1. Check the [Logs](https://manage.auth0.com/#/logs) and [Users](https://manage.auth0.com/#/users) pages in the Auth0 Dashboard to see if Auth0 shows a successful login event. If Auth0's logs don't show a successful login event, there is probably an issue with the SAML Authentication Assertion returned by the IdP or Auth0 is unable to consume the assertion.
2. Check the information that Auth0 sends to the application by [capturing an HTTP trace of the login sequence](/docs/troubleshoot/troubleshooting-tools/generate-and-analyze-har-files) and analyzing the HTTP trace.

   <Warning>

   Before sharing a HAR file with anyone (including Auth0), ensure that you remove or obfuscate all sensitive data, such as:

   * Confidential user information
   * Personal identifiable information (PII)
   * Confidential application information

   To learn more, read the following articles on [Auth0 Community](https://community.auth0.com):

   * [Sanitizing HTTP Traces](https://community.auth0.com/t/sanitizing-http-traces/119488)
   * [How to Sanitize an HTTP Trace File Automatically](https://community.auth0.com/t/how-to-sanitize-a-http-trace-file-automatically/120583)
   * [How to Manually Redact Sensitive Information](https://community.auth0.com/t/how-to-manually-redact-sensitive-information/122554)
   * [HAR File is Too Large to Upload to the Support Case](https://community.auth0.com/t/har-file-is-too-large-to-upload-to-the-support-case/122488)
   </Warning>
3. You can view the HTTP trace in a HAR file analyzer, such as [Google's HAR Analyzer](https://toolbox.googleapps.com/apps/har_analyzer/).

   1. Scan through the sequence of URLs invoked in the HTTP trace.

      1. The first few will be URLs for your application.
      2. There will then be a redirect to an Auth0 URL (such as `{yourDomain}`).
   2. After one or more intervening URLs, there will be a POST back to Auth0 containing the SAML assertion with user information. The URL should be for the Assertion Consumer Service (ACS) of Auth0, which consumes the assertion and extracts the needed information.
   3. Click on the row for the POST call in the HAR analyzer.
   4. Switch to the POST Data tab, and look for the SAML response.
   5. Copy and paste the SAML response into a [SAML debugger](https://samltool.io/).
   6. Remove the "SAML response" at the beginning, as well as anything beginning with `&RelayState=` at the end.
4. After retrieving and decoding the SAML message, check the following fields:

<table class="table"><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Destination</td>
<td>Check that the destination for the SAML response is the correct Auth0 Tenant and Connection (`https://{TENANT}.auth0.com/login/callback?connection={CONNECTION}`).</td>
</tr>
<tr>
<td>Status Field</td>
<td>This field should indicate success. (<code>&lt;samlp:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success"/&gt;</code>).</td>
</tr>
<tr>
<td>Recipient</td>
<td>Check that the <code>&lt;saml:SubjectConfirmation</code> Method element contains correct tenant and connection in the “Recipient” field (`https://{TENANT}.auth0.com/login/callback?connection={CONNECTION}`).</td>
</tr>
<tr>
<td>Audience</td>
<td>Check that the SAML Audience restriction field contains the correct tenant and connection information (`<saml:AudienceRestriction><saml:Audience>urn:auth0:{TENANT}:{CONNECTION}</saml:Audience>`).</td>
</tr>
<tr>
<td>Naming</td>
<td>The attribute identified by the <code>NameIdentifier</code> field should be known to the application. If it's not, the identifier should be some other attribute within the assertion (such as an internal IdP identifier for the user or an email address).</td>
</tr>
<tr>
<td>Signature Key</td>
<td>Check that the value indicated by the <code>X509Certificate</code> element matches the value provided to your connection.</td>
</tr>
<tr>
<td>Certificate</td>
<td>Compare the certificate sent to the one that you provided to the application</td>
</tr>
</tbody>
</table>

#### Les attributs du profil utilisateur sont incorrects

Dans ce cas, l’utilisateur se connecte à l’IdP avec succès, les journaux d’Auth0 affichent un événement de connexion réussi, mais les attributs du profil de l’utilisateur ne sont **pas** corrects.

Vérifiez si le profil Auth0 de l’utilisateur est correctement rempli :

1. Go to the [Dashboard > User Management > Users](https://manage.auth0.com/#/users).
2. Find and click on the specific user to open up their profile. If there are multiple rows for a given user, be sure to open up the record associated with the SAML Connection.
3. On the user's profile, you can view their details in one of two ways. You can use the **Details** tab or the **Raw JSON** tab. This shows you what attributes Auth0 has received from the identity provider.
4. If the attribute is missing, check to see if the attribute was included in the assertion. You can do this by decoding the SAML assertion, or you can enable debugging for the connection.

   1. To enable debugging for the connection, navigate to [Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise).
   2. Open the list of **SAML** IdP connections, click **Settings**, and enable **Debug Mode**.

      <Frame>![Troubleshoot SAML Connections Enable Debug Mode screen](/images/cdy7uua7fh8z/1F6npTHy1P0c0ygXfbndBD/6185e73705d078e9bf458460000ee2ad/2025-02-27_15-32-02.png)</Frame>
   3. With **Debug Mode** enabled, **Warning During Login** log entries [in the Dashboard](https://manage.auth0.com/#/logs) have an `original_profile` property listing every attribute included in the SAML assertion by the Identity Provider. You can use this list to see the information that the IdP is sending and to help you create the mappings. If the missing attribute is not in the assertion at all, please work with the IdP to make sure it is included.
5. If an attribute value exists in the Auth0 user profile, but is not mapped to the right attribute, you can correct this via the Connection Mapping capability.

   1. You can do this by navigating to [Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise).
   2. Open the list of **SAML** IdP connections and go to the **Mappings** tab.

      <Frame>![Troubleshoot SAML Connections Mappings Tab Screen](/images/cdy7uua7fh8z/BPMjuhqE17E5vWcHukcKf/df55785b4874411199b8dd84f1576cad/2025-02-27_14-14-14.png)</Frame>
   3. Within the provided editor, there is a JSON snippet you can edit to configure your mappings. The name on the left is the Auth0 user profile attribute to which the assertion value will be mapped. The value on the right is the identifier in the SAML assertion from which the attribute comes. When Auth0 incorporates unmapped SAML attributes into the user profile, attribute identifiers containing dots `.` are replaced with semicolons `:`. While configuring your mappings, ensure the identifiers you provide match those in the SAML assertion.

#### L’utilisateur ne peut pas accéder à l’application.

Dans ce cas, l’utilisateur se connecte à l’IdP avec succès, les journaux d’Auth0 affichent un événement de connexion réussi, et les attributs du profil de l’utilisateur sont corrects, mais l’utilisateur ne peut **pas** accéder à l’application.

1. Check your application's log files to see if there are any error messages indicating why the user is unable to access the application. The two most common causes for this issue are:

   1. Missing user profile information.
   2. Incorrect or missing authorization information.
2. Check the information that Auth0 sends to the application by [capturing an HTTP trace of the login sequence](/docs/troubleshoot/troubleshooting-tools/generate-and-analyze-har-files) and analyzing the HTTP trace. You can view the HTTP trace in a HAR file analyzer, such as [Google's HAR Analyzer](https://toolbox.googleapps.com/apps/har_analyzer/).

   <Warning>

   Before sharing a HAR file with anyone (including Auth0), ensure that you remove or obfuscate all sensitive data, such as:

   * Confidential user information
   * Personal identifiable information (PII)
   * Confidential application information

   To learn more, read the following articles on [Auth0 Community](https://community.auth0.com):

   * [Sanitizing HTTP Traces](https://community.auth0.com/t/sanitizing-http-traces/119488)
   * [How to Sanitize an HTTP Trace File Automatically](https://community.auth0.com/t/how-to-sanitize-a-http-trace-file-automatically/120583)
   * [How to Manually Redact Sensitive Information](https://community.auth0.com/t/how-to-manually-redact-sensitive-information/122554)
   * [HAR File is Too Large to Upload to the Support Case](https://community.auth0.com/t/har-file-is-too-large-to-upload-to-the-support-case/122488)
   </Warning>

   1. Scan through the sequence of URLs invoked in the HTTP trace.

      1. The first few will be URLs for your application.
      2. There will then be a redirect to an Auth0 URL (such as `{yourDomain}`).
   2. After one or more intervening URLs, there will be a POST back to Auth0 containing the SAML assertion with user information. The URL should be for the Assertion Consumer Service (ACS) of Auth0, which consumes the assertion and extracts the needed information.
   3. Click on the row for the POST call in the HAR analyzer.
   4. Switch to the POST Data tab, and look for the SAML response.
   5. Copy and paste the SAML response into a [SAML debugger](https://samltool.io/).
   6. Remove the SAML response at the beginning, as well as anything beginning with `&RelayState=` at the end.
3. After retrieving and decoding the SAML message, check the following fields:

<table class="table"><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Destination</td>
<td>Check that the destination for the SAML response is the correct Auth0 Tenant and Connection (`https://{TENANT}.auth0.com/login/callback?connection={CONNECTION}`).</td>
</tr>
<tr>
<td>Status Field</td>
<td>This field should indicate success. (<code>&lt;samlp:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success"/&gt;</code>).</td>
</tr>
<tr>
<td>Recipient</td>
<td>Check that the <code>&lt;saml:SubjectConfirmation</code> Method element contains correct tenant and connection in the “Recipient” field (`https://{TENANT}.auth0.com/login/callback?connection={CONNECTION}`).</td>
</tr>
<tr>
<td>Audience</td>
<td>Check that the SAML Audience restriction field contains the correct tenant and connection information (`<saml:AudienceRestriction><saml:Audience>urn:auth0:{TENANT}:{CONNECTION}</saml:Audience>`).</td>
</tr>
<tr>
<td>Naming</td>
<td>The attribute identified by the <code>NameIdentifier</code> field should be known to the application. If it's not, the identifier should be some other attribute within the assertion (such as an internal IdP identifier for the user or an email address).</td>
</tr>
<tr>
<td>Signature Key</td>
<td>Check that the value indicated by the <code>X509Certificate</code> element matches the value provided to your connection.</td>
</tr>
<tr>
<td>Certificate</td>
<td>Compare the certificate sent to the one that you provided to the application</td>
</tr>
</tbody>
</table>
4. If your authorization flow uses an OIDC-conformant protocol, you can capture a HAR trace and view it using [Google's HAR Analyzer](https://toolbox.googleapps.com/apps/har_analyzer/).

   1. Scan through the sequence of URLs in the trace, and look for the following:

      1. The first few will be URLs for your application.
      2. There will then be a redirect to an Auth0 URL (such as `{yourDomain}`).
   2. Further down is your application's callback URL. Make sure that it's correct.
   3. Retrieve the ID Token from this call, and paste it into [a JWT decoder](https://jwt.io/). Check that the claims in the token contain the information needed by the application.
5. If you're using an IdP-initiated flow (for example, the user starts at the identity provider in a portal application), be sure that:

   1. The Assertion Consumer Service (ACS) URL at the identity provider includes the connection name (for example `https://{yourDomain}/login/callback?connection=CONNECTION_NAME`)
   2. The IdP-initiated configuration tab for the Connection is properly filled in, including:

      1. The IdP-initiated SSO behavior is set to **Accept Requests**;
      2. The application to which the user should be sent;
      3. The protocol between the application and Auth0 (which is not necessarily **SAML** like the connection, and most likely is **OpenID Connect**);
      4. Any protocol-specific values to include in the query string, such as `scope`, `response_type`, `redirect_uri`, and `audience`. These values should match the ones expected by the application when using an SP-initiated flow.
   3. Disable your rules temporarily to make sure that nothing is interfering with the login process.
   4. If you've enabled multi-factor authentication (MFA), disable it temporarily to make sure that it is not interfering with the login process.
   5. Check that the SAML Connection works in an SP-Initiated flow by using **Try** to run a Connection test.

#### La requête n’a pas pu être effectuée en raison d’une erreur de la part du répondant SAML ou de l’autorité SAML.

L’erreur peut apparaître comme suit :

`<samlp:Status>
\<samlp:StatusCodeValue="urn:oasis:names:tc:SAML:2.0:status:Responder" />
</samlp:Status>`

1. Make sure that the signature algorithm on your Auth0 connection is the same as the configuration on the ADFS side: either `rsa-sha256` or `rsa-sha1`.
2. Alternatively, you can contact your ADFS administrator to learn the expected signing method or to see if their logs contain further information about the reason for the error.

## Dépannage d’Auth0 en tant que fournisseur d’identité

Lors du dépannage d’une connexion SAML, il y a quatre étapes principales à vérifier :

* Étape 1 : L’utilisateur est redirigé avec succès vers un IdP et peut se connecter.
* Étape 2 : Après s’être connecté avec l’IdP, l’utilisateur revient à Auth0 avec un événement de connexion réussi enregistré.
* Étape 3 : Après un événement de connexion réussi dans Auth0, le profil utilisateur dans Auth0 est correct.
* Étape 4 : L’utilisateur est redirigé avec succès vers l’application et peut y accéder.

### L’événement de connexion réussi n’apparaît pas dans les journaux

Dans ce cas, l’utilisateur se connecte à l’IdP avec succès, mais un événement de connexion réussi n’apparaît pas dans les journaux d’Auth0.

1. If you're using an Auth0 Database Connection:

   1. Check that the user exists and the entered password is correct.
   2. Disable your rules temporarily to make sure that nothing is interfering with the login process.
   3. If you've enabled multi-factor authentication (MFA), disable it temporarily to make sure that it is not interfering with the login process.
2. If you're using an Auth0 Database Connection or a remote SAML connection, check that the SAML Connection works by using **Try** to run a Connection test.

### Les attributs du profil utilisateur sont incorrects

Dans ce cas, l’utilisateur se connecte à l’IdP avec succès, un événement de connexion réussi s’affiche dans les journaux d’Auth0, mais les attributs du profil de l’utilisateur ne sont pas corrects. Si l’utilisateur :

* Semble se connecter avec succès.
* The Logs and Users pages in the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip> should successful login events

La prochaine étape consiste à vérifier que le profil de l’utilisateur contient les attributs de profil utilisateur nécessaires.

1. Go to the [Dashboard > User Management > Users](https://manage.auth0.com/#/users).
2. Find and click on the specific user to open up their profile. If there are multiple rows for a given user, be sure to open up the record associated with the SAML Connection.
3. On the user's profile, you can view their details in one of two ways. You can use the **Details** tab or the **Raw JSON** tab. This shows you what attributes Auth0 has received from the identity provider. If an attribute is missing, check with the identity provider to confirm that it has the attribute and that it is returning that attribute to Auth0.

### L’utilisateur ne peut pas accéder à l’application.

Dans ce cas, l’utilisateur se connecte à l’IdP avec succès, un événement de connexion réussi s’affiche dans les journaux d’Auth0, et les attributs du profil de l’utilisateur sont corrects, mais l’utilisateur ne peut pas accéder à l’application.

1. Vérifiez si le profil Auth0 de l’utilisateur est correctement rempli :

   1. Go to [Dashboard > User Management > Users](https://manage.auth0.com/#/users).
   2. Find and click on the specific user to open up their profile. If there are multiple rows for a given user, be sure to open up the record associated with the SAML Connection.
   3. On the user's profile, view their details in one of two ways. You can use the **Details** tab or the **Raw JSON** tab. This shows you what attributes Auth0 has received from the identity provider. Ensure that the profile includes all of the details required by the application. If a user attribute is missing, check with the identity provider to confirm that it has the attribute and that it is returning that attribute to Auth0.
2. Check the application's log files to see if there are any error messages indicating why the user is unable to access the application. The two most common causes for this issue are missing user profile information or incorrect/missing authorization information.
3. Check the information that Auth0 sends to the application by [capturing an HTTP trace of the login sequence](/docs/troubleshoot/troubleshooting-tools/generate-and-analyze-har-files) and analyzing the HTTP trace. You can view the HTTP trace in a HAR file analyzer, such as [Google's HAR Analyzer](https://toolbox.googleapps.com/apps/har_analyzer/).

   <Warning>

   Before sharing a HAR file with anyone (including Auth0), ensure that you remove or obfuscate all sensitive data, such as:

   * Confidential user information
   * Personal identifiable information (PII)
   * Confidential application information

   To learn more, read the following articles on [Auth0 Community](https://community.auth0.com):

   * [Sanitizing HTTP Traces](https://community.auth0.com/t/sanitizing-http-traces/119488)
   * [How to Sanitize an HTTP Trace File Automatically](https://community.auth0.com/t/how-to-sanitize-a-http-trace-file-automatically/120583)
   * [How to Manually Redact Sensitive Information](https://community.auth0.com/t/how-to-manually-redact-sensitive-information/122554)
   * [HAR File is Too Large to Upload to the Support Case](https://community.auth0.com/t/har-file-is-too-large-to-upload-to-the-support-case/122488)
   </Warning>

   1. Scan through the sequence of URLs invoked in the HTTP trace.

      1. The first few will be URLs for your application.
      2. There will then be a redirect to an Auth0 URL (such as `{yourDomain}`).
   2. After one or more intervening URLs, there will be a POST back to Auth0 containing the SAML assertion with user information. The URL should be for the Assertion Consumer Service (ACS) of Auth0, which consumes the assertion and extracts the needed information.
   3. Click on the row for the POST call in the HAR analyzer.
   4. Switch to the POST Data tab, and look for the SAML response.
   5. Copy and paste the SAML response into a [SAML debugger](https://samltool.io/).
   6. Remove the SAML response at the beginning, as well as anything beginning with `&RelayState=` at the end.
4. After retrieving and decoding the SAML message, check the following fields:

<table class="table"><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Destination</td>
<td>Check that the destination for the SAML response is the correct Auth0 Tenant and Connection (`https://{TENANT}.auth0.com/login/callback?connection={CONNECTION}`).</td>
</tr>
<tr>
<td>Status Field</td>
<td>This field should indicate success. (<code>&lt;samlp:StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success"/&gt;</code>).</td>
</tr>
<tr>
<td>Recipient</td>
<td>Check that the <code>&lt;saml:SubjectConfirmation</code> Method element contains correct tenant and connection in the “Recipient” field (`https://{TENANT}.auth0.com/login/callback?connection={CONNECTION}`).</td>
</tr>
<tr>
<td>Audience</td>
<td>Check that the SAML Audience restriction field contains the correct tenant and connection information (`<saml:AudienceRestriction><saml:Audience>urn:auth0:{TENANT}:{CONNECTION}</saml:Audience>`).</td>
</tr>
<tr>
<td>Naming</td>
<td>The attribute identified by the <code>NameIdentifier</code> field should be known to the application. If it's not, the identifier should be some other attribute within the assertion (such as an internal IdP identifier for the user or an email address).</td>
</tr>
<tr>
<td>Signature Key</td>
<td>Check that the value indicated by the <code>X509Certificate</code> element matches the value provided to your connection.</td>
</tr>
<tr>
<td>Certificate</td>
<td>Compare the certificate sent to the one that you provided to the application</td>
</tr>
</tbody>
</table>
5. Ensure that the SAML assertion contains any additional information required by the application and that the information is present in the attributes expected by the application.

   1. If you need to alter the assertion sent from Auth0 to your application, you can add or map attributes using rules.

      1. Log into Auth0 and navigate to **Rules**.
      2. Click **Create Rule** and, on the next page, choose the **Change your SAML configuration** template.
      3. In the rules editor, uncomment the lines you want to use. Use lines 9-17 in the template to map attributes as needed. You can also add lines to implement mappings. The left side of each line specifies the identifier for the attribute in the assertion. The right side of each line references the Auth0 user profile attribute whose value will be used to populate the outgoing assertion sent to the application.

         ```text lines
         //context.samlConfiguration.mappings = {    
             // "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier":      "user_id",    
             // "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress":        "email",    
             // "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name":                "name",    
             // "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname":           "given_name",    
             // "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname":             "family_name",    
             // "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn":                 "upn",    
             // "http://schemas.xmlsoap.org/claims/Group":                                   "groups"    
             // };
         ```

         

         

### Aucune session active trouvée correspondant à l’erreur LogoutRequest

Les valeurs `SessionIndex` et `NameID` dans la requête de déconnexion SAML doivent correspondre à celles reçues par le fournisseur de services dans l’assertion SAML d’origine.

## Contacter le service d’assistance

Si les étapes de dépannage listées ci-dessus ne résolvent pas les problèmes, veuillez demander de l’aide auprès d’Auth0 en ouvrant un ticket dans le Centre d’assistance Assurez-vous d’inclure les informations suivantes :

1. The number of users experiencing this issue. One? All?
2. Whether this issue involves a new setup or if it involves an existing integration that suddenly stopped working
3. The number of applications affected
4. What the expected behavior is, as well as what the current behavior is
5. How far through the login sequence the user gets
6. The name of the application registered in Auth0 and the identity protocol it uses
7. The name of the Connection involved
8. Whether or not you're using the Auth0 Lock widget (if so, what version?)
9. Is a customized version of Lock used?
10. An HTTP trace of the SSO interaction in [a .har file](/docs/troubleshoot/troubleshooting-tools/generate-and-analyze-har-files)

    <Warning>

    Before sharing a HAR file with anyone (including Auth0), ensure that you remove or obfuscate all sensitive data, such as:

    * Confidential user information
    * Personal identifiable information (PII)
    * Confidential application information

    To learn more, read the following articles on [Auth0 Community](https://community.auth0.com):

    * [Sanitizing HTTP Traces](https://community.auth0.com/t/sanitizing-http-traces/119488)
    * [How to Sanitize an HTTP Trace File Automatically](https://community.auth0.com/t/how-to-sanitize-a-http-trace-file-automatically/120583)
    * [How to Manually Redact Sensitive Information](https://community.auth0.com/t/how-to-manually-redact-sensitive-information/122554)
    * [HAR File is Too Large to Upload to the Support Case](https://community.auth0.com/t/har-file-is-too-large-to-upload-to-the-support-case/122488)
    </Warning>
11. An Auth0 log entry for the failed authentication
12. An authentication log file from any third-party applications (such as Sharepoint) involved

## Learn more

* [SAML Single Sign-On Integrations](/docs/authenticate/protocols/saml/saml-sso-integrations)
* [Test SAML SSO with Auth0 as Service Provider and Identity Provider](/docs/authenticate/protocols/saml/saml-configuration/configure-auth0-as-service-and-identity-provider)