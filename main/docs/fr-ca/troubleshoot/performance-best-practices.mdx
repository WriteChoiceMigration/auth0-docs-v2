---
og:description: Learn about best practices for performance.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Meilleures pratiques des performances
og:url: https://auth0.com/docs/
permalink: performance-best-practices
title: Meilleures pratiques des performances
twitter:description: Learn about best practices for performance.
twitter:title: Meilleures pratiques des performances
---

Rules execute as part of a pipeline where artifacts for authenticity are generated, as described in [Custom Database Anatomy Best Practices](/docs/authenticate/database-connections/custom-db/custom-database-connections-scripts/anatomy). As such, an enabled rule will execute for every login operation (interactive or otherwise), every silent authentication, and every time a user-credentials-related <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=Access+Token">Access Token</Tooltip> is generated for an API call. This means that even in small scale deployments, performance can be a concern, which will only be exacerbated as the scale of deployment increases.

## Éviter l’exécution inutile

Préférez mettre en œuvre une exécution basée sur une logique conditionnelle. Par exemple, pour exécuter une règle uniquement pour des applications spécifiques, il convient de vérifier un clientID spécifique ou des `clientMetadata` spécifiques, en particulier lors de la vérification d’une valeur `clientMetadata` unique, commune à plusieurs applications. L’utilisation de `clientMetadata` peut également faciliter l’ajout de nouveaux clients (ainsi que la lecture du code des règles), en particulier si vous avez défini un grand nombre d’applications, en réduisant les modifications de code ou les valeurs de configuration nécessaires entre les environnements.

Client metadata for an application can be set manually via the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip> by going to [Application Settings > Advanced Settings > Application Metadata](https://manage.auth0.com/#/applications/) or programmatically via the use of the Auth0 <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>'s [Update a client endpoint](https://auth0.com/docs/api/management/v2#!/Clients/patch_clients_by_id).

## Terminer l’exécution tôt

For optimal performance, write rules that complete as soon as possible. For example, if a rule has three checks to decide if it should run, use the first check to eliminate the majority of cases, followed by the check to eliminate the next largest set of cases, and so on and so forth. At the end of each check, remember to execute the callback function, ideally combined with a (JavaScript) `return` in order to exit the (rule) function. To learn more, read [Rules Execution Best Practices.](/docs/rules-best-practices/rules-execution-best-practices)

## Réduire les requêtes API

Les requêtes aux API, en particulier les requêtes aux API tierces, peuvent ralentir le temps de réponse de la connexion et provoquer des échecs du délai d’attente de la règle en raison de la latence de l’appel, ce qui conduit finalement à des situations d’erreur d’authentification. Nous recommandons de réduire au minimum les requêtes aux API dans la mesure du possible au sein d’une règle et d’éviter les appels excessifs à des services payants. Nous vous recommandons également d’éviter toute exposition de sécurité potentielle en limitant ce qui est envoyé à une API, qu’elle soit tierce ou non.

L’objet `global` peut être utilisé pour mettre en cache les informations provenant des requêtes à l’API, lesquelles peuvent ensuite être utilisées dans toutes les règles qui s’exécutent dans le pipeline. Il est préférable d’utiliser cet objet pour stocker des informations plutôt que d’appeler plusieurs fois une API. En outre, l’objet `global` peut également être utilisé pour mettre en cache d’autres informations entre les règles en cours d’exécution.

### Limiter les requêtes aux services payants

Si vos règles font des requêtes à des services payants, tels que l’envoi de messages SMS via Twilio, veillez à n’utiliser ces services qu’en cas de nécessité. Cela permet non seulement d’améliorer les performances, mais aussi d’éviter les frais supplémentaires. Afin de réduire les requêtes aux services payants :

* Interdire les inscriptions publiques pour réduire le nombre d’utilisateurs pouvant s’inscrire et déclencher des appels à des services payants.
* Veillez à ce qu’une règle ne soit déclenchée que pour un sous-ensemble autorisé d’utilisateurs ou dans d’autres conditions appropriées. Par exemple, vous pouvez ajouter une logique qui vérifie si un utilisateur possède un domaine de messagerie, un rôle/groupe ou un niveau d’abonnement particulier avant de déclencher la requête au service payant.

### Limiter les requêtes à Management API

Try to avoid calls to the Auth0 Management API. The Auth0 Management API is rate limited, which will still be a consideration even when using the `auth0` object (so be sure to use it sparingly). To learn more, read [Management API Endpoint Rate Limits](/docs/troubleshoot/customer-support/operational-policies/rate-limit-policy/management-api-endpoint-rate-limits).

In addition, Management API functions take varying degrees of time to perform, so will incur varying degrees of latency; calling the Management API's [List or Search users endpoint](https://auth0.com/docs/api/management/v2#!/Users/get_users), for example, should be kept to a minimum and performed only where absolutely necessary—even when executed via the `auth0` object.

### Éviter les requêtes à Management API pour les détails liés à la connexion

We have expanded connection-related properties available to the rules `context` object, so you can obtain connection info from the `context` object instead of needing to call the Auth0 Management API. To learn more, read [Context Object Properties in Rules](/docs/customize/rules/context-object).

To see this in action, if you are using the **Check if user email domain matches configured domain** rule template, [check out the latest version on Github](https://github.com/auth0/rules/blob/master/src/rules/check-domains-against-connection-aliases.js) or navigate to [Auth0 Dashboard > Auth Pipeline > Rules](https://manage.auth0.com/#/rules/new), and select **Create**. Note: the recent changes will not alter functionality but will improve the performance of rules that had once relied on calls to the Management API.

La suppression des appels à Management API (ainsi que l’appel supplémentaire requis pour obtenir le jeton d’accès approprié) améliorera les performances et la fiabilité du code de votre règle.

## Utiliser des délais explicites lors des appels API

Lorsque vous appelez des API ou accédez à des services externes, pensez à spécifier des délais d’attente explicites. La valeur spécifique du délai d’attente que vous choisissez varie généralement en fonction de votre cas d’utilisation, mais en général, il est conseillé de choisir une valeur aussi basse que possible, tout en gardant à l’esprit les caractéristiques de performance du service externe.

Whether you choose to use explicit timeouts or implicit timeout processing, always be sure to cater to error and/or exception conditions that may occur as a result of any timeout period expiration. To learn more, read [Error Handling Best Practices](/docs/troubleshoot/error-handling-best-practices).

## Réduit les appels vers Auth0

Lorsque vous dépassez vos limites anti-attaques, vous devez réduire le nombre d’appels que vous passez à Auth0. Les spécificités dépendent de votre cas d’utilisation, mais voici quelques recommandations :

* Réponses `/.well-known/*` en cache : Ces informations ne changent pas fréquemment, vous pouvez donc généralement les mettre en cache pour réduire le nombre de fois où vous devez appeler Auth0.
* Envisagez de demander un `id_token` au lieu d’appeler `/userinfo` pour obtenir des informations sur l’utilisateur.
* Réduisez les appels groupés, tels que « bulk delete » ou « bulk unlock ».

## Learn more

* [Rules Best Practices](/docs/rules-best-practices)
* [Error Handling Best Practices](/docs/troubleshoot/error-handling-best-practices)
* [Debugging Best Practices](/docs/troubleshoot/debugging-best-practices)