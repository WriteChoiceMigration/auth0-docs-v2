---
og:description: Learn how to export lists of users and user metadata.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Exportations d’utilisateurs en masse
og:url: https://auth0.com/docs/
permalink: bulk-user-exports
title: Exportations d’utilisateurs en masse
twitter:description: Learn how to export lists of users and user metadata.
twitter:title: Exportations d’utilisateurs en masse
---

Vous pouvez utiliser le point de terminaison `POST /api/v2/jobs/users-exports` pour créer une tâche qui exporte tous les utilisateurs associés à une [connexion](/identityproviders), ou tous les utilisateurs du locataire.

Pour une liste des champs de profil utilisateur qui peuvent être importés et exportés, consultez [Structure du profil utilisateur](/users/user-profiles/user-profile-structure).

Lorsque vous créez votre tâche, vous devez fournir ce qui suit :

* [ID de la connexion](/get-started/dashboard/locate-the-connection-id) à partir de laquelle vous souhaitez exporter les utilisateurs (facultatif).
* Format du fichier d’exportation (CSV ou compatible JSON).
* Nombre maximum d’enregistrements d’utilisateurs à exporter (facultatif, tous les enregistrements seront exportés si cette information n’est pas fournie).
* Champs associés aux utilisateurs (ID ou nom) que vous voulez inclure dans l’exportation.

Vous aurez également besoin d’un [jeton d’accès à Management API](/api/management/v2/tokens) valide.

## **Créer le corps d’une demande**

(Facultatif) Recherchez le `connection_id` et le nom de domaine de votre locataire Auth0 dans Auth0 Dashboard. Créez un nouveau fichier texte avec le corps de la demande suivant :



Mettez à jour le `connection_id` avec votre ID de connexion à la base de données, ou supprimez-le pour exporter tous les utilisateurs du locataire.

## Exemple de demande

Permissions requises : `read:users`

````

La réponse devrait ressembler à ceci :



## Inclure les métadonnées des utilisateurs dans le fichier CSV exporté

Si vous exportez des données utilisateur au format CSV et que vous souhaitez inclure des informations sur les métadonnées, indiquez chaque champ de métadonnées que vous souhaitez exporter. Vous pouvez exporter jusqu’à 30 champs.



Par exemple, pour des métadonnées structurées comme ceci.



La demande d’exportation (pour les trois champs) ressemblerait à ceci.







### Format compatible JSON

Si vous exportez les données au format compatible JSON, vous ne devez fournir que la propriété racine; vous n’avez pas besoin de nommer chaque propriété interne puisqu’elles seront incluses automatiquement.

Les fichiers d’exportation d’Auth0 utilisent le format [NDJSON](https://github.com/ndjson/ndjson-spec) en raison de la taille importante des fichiers d’exportation, tandis que la fonctionnalité d’importation exige un fichier JSON.

Avant de pouvoir importer des utilisateurs en utilisant un export généré par Auth0, vous devrez convertir le fichier de NDJSON à JSON en utilisant la bibliothèque de votre choix (telle que [jq](https://stedolan.github.io/jq/)).

Dans ce cas, pour le même exemple que nous avons utilisé précédemment, la requête ressemblerait à ceci :



## Vérifier le statut de l’exportation

Une fois que vous avez créé votre job pour exporter vos utilisateurs, vous pouvez vérifier son statut en utilisant le [point de terminaison Get a Job](/api/management/v2#!/Jobs/get_jobs_by_id).

Indiquez l’ID de la tâche (que vous avez reçu dans la réponse lors de la création de la tâche). Si vous utilisez l’exemple de demande ci-dessous, remplacez le paramètre fictif `{yourJobId}` par la valeur de l’ID.

Permissions requises : `create:users`, `read:users`, `create:passwords_checking_job`

````

Vous devriez obtenir une réponse similaire à :



## Recherche des données d’exportation

Vous pouvez accéder à vos fichiers d’exportation en utilisant l’URL fournie comme valeur du paramètre **location**. Le nom de votre locataire est également le nom de votre fichier. Par exemple, si votre nom de locataire est `auth0docs`, votre fichier sera `auth0docs.csv` ou `auth0docs.json`. Lorsque vous naviguez vers l’URL, le téléchargement du fichier débutera automatiquement.

Le lien de téléchargement est valable pendant 60 secondes. Si ce délai expire, vous disposez de 24 heures pour l’appeler à nouveau avant que la tâche n’expire.

## Nettoyage des travaux

Toutes les données relatives à votre tâche sont automatiquement supprimées au bout de 24 heures et ne sont plus accessibles par la suite. Pour cette raison, **nous vous recommandons vivement de stocker les résultats de vos tâches en utilisant le mécanisme de stockage de votre choix**.