---
og:description: Learn how to perform bulk user imports with the Management API.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Importation d’utilisateurs par lot
og:url: https://auth0.com/docs/
permalink: bulk-user-imports
title: Importation d’utilisateurs par lot
twitter:description: Learn how to perform bulk user imports with the Management API.
twitter:title: Importation d’utilisateurs par lot
---

Vous pouvez importer les données des utilisateurs en lot dans Auth0 à l’aide du point de terminaison [Création d’une tâche d’importation d’utilisateurs](/api/management/v2#!/Jobs/post_users_imports). Les importations en lots sont utiles pour migrer les utilisateurs d’une base de données ou d’un service existant vers Auth0.



## Prérequis

Avant de lancer la tâche d’importation des utilisateurs :

* Configurez une connexion de base de données dans laquelle importer les utilisateurs et activez-la pour au moins une application.
* Assurez- vous que, si vous importez des mots de passe, ceux-ci sont hachés à l’aide de l’un des algorithmes pris en charge. Les utilisateurs dont les mots de passe sont hachés au moyen d’algorithmes non pris en charge devront réinitialiser leur mot de passe lorsqu’ils se connecteront pour la première fois après l’importation en lot.
* Si vous importez des inscriptions à la MFA, assurez-vous qu’il s’agit d’un type pris en charge : `email`, `phone`, ou`totp`.
* [Obtenir un jeton de Management API](/security/tokens/access-tokens/management-api-access-tokens) pour les requêtes de points de terminaison des tâches.



## Créer un fichier JSON pour les utilisateurs

Créez un fichier JSON avec les données de l’utilisateur que vous souhaitez importer dans Auth0. La manière dont vous exportez les données des utilisateurs vers un fichier JSON varie en fonction de votre base de données d’utilisateurs existante. Le point de terminaison de Management API prend charge des sections du fichier JSON. Ainsi, au lieu d’utiliser `fs.readFileSync`, il faut utiliser `fs.createReadStream`. Le point de terminaison attend un flux de lecture en canal au lieu du fichier JSON complet.

Pour en savoir plus sur le schéma du fichier JSON et voir des exemples, consultez [Schéma de la base de données d’importation en lots et exemples](/users/import-and-export-users/bulk-user-import-database-schema-and-examples).



## Requête d’importation d’utilisateurs en lots

Pour lancer un travail d’importation d’utilisateurs en lots, faites une requête `POST` au point de terminaison [Créer une tâche d’importation d’utilisateurs](https://auth0.com/docs/api/management/v2#!/Jobs/post_users_imports). Veillez à remplacer les valeurs fictives `MGMT_API_ACCESS_TOKEN`, `USERS_IMPORT_FILE.json`, `CONNECTION_ID` et `EXTERNAL_ID` par votre jeton d’accès de Management API, le fichier JSON des utilisateurs, le [connection ID](/get-started/dashboard/locate-the-connection-id) à la base de données et l’ID externe, respectivement.





Vous recevrez une réponse semblable à celle qui suit si la requête réussit :



L’entité renvoyée représente la tâche d’importation.

Lorsque la tâche d’importation d’utilisateurs est terminée et si la valeur `send_completion_email` est définie sur `true`, l’administrateur du locataire reçoit un courriel l’informant de l’échec ou de la réussite de la tâche. Un courriel pour un travail qui a échoué peut informer le ou les administrateurs que le fichier JSON des utilisateurs n’a pas été analysé lors de l’importation des utilisateurs.

### Tâches d’importation simultanées

Le point de terminaison [Créer une tâche d’importation d’utilisateurs](https://auth0.com/docs/api/management/v2#!/Jobs/post_users_imports) est limité à deux tâches d’importation simultanées. Si vous demandez des tâches supplémentaires alors que deux sont en attente, vous recevrez une réponse `429 Too Many Requests` :



## Vérifier l’état de la tâche

Pour vérifier l’état d’une tâche, faites une requête `GET` au point de terminaison [Obtenir une tâche](https://auth0.com/docs/api/management/v2#!/Jobs/get_jobs_by_id). Assurez-vous de remplacer les valeurs fictives `MGMT_API_ACCESS_TOKEN` et `JOB_ID` avec votre jeton d’accès à Management API et l’ID de la tâche d’importation d’utilisateurs.



Vous recevrez une réponse semblable à l’une des suivantes, en fonction de l’état de la tâche d’importation d’utilisateurs :

**En attente**

********

**Terminé**

Si une tâche est terminée, la réponse relative à l’état de la tâche comprendra les totaux des enregistrements réussis, échoués, insérés et mis à jour.



**Échec**

En cas d’erreur dans la tâche, celle-ci sera renvoyée comme ayant échoué. Notez toutefois que des informations utilisateur non valides, telles qu’un courriel non valide, n’entraîneront pas l’échec de l’ensemble de la tâche.



Pour connaître les détails des entrées qui ont échoué, consultez **Récupérer les saisies qui ont échoué** ci-dessous.

## Délais d’expiration

Toutes les tâches d’importation d’utilisateurs expirent au bout de **deux (2) heures**. Si votre tâche n’est pas terminée pas dans ce délai, elle est marquée comme ayant échoué.

De plus, toutes les données relatives à la tâche sont automatiquement supprimées au bout de 24 heures et ne peuvent plus être consultées par la suite. Pour cette raison, **nous vous conseillons vivement de stocker les résultats des tâches en utilisant le mécanisme de stockage qui vous convient le mieux.**.

## Récupérer les saisies qui ont échoué



Si des erreurs se sont produites dans la tâche d’importation d’utilisateurs, vous pouvez obtenir les détails de l’erreur en effectuant une requête `GET` au point de terminaison [Obtenir le détail des erreurs de la tâche](/api/management/v2#!/Jobs/get_errors). Assurez-vous de remplacer les valeurs fictives `MGMT_API_ACCESS_TOKEN` et `JOB_ID` avec votre jeton d’accès à Management API et l’ID de la tâche d’importation d’utilisateurs.



Vous recevrez une réponse semblable à celle qui suit si la requête réussit : Les champs à caractère confidentiel, tels que `hash.value` seront masqués dans la réponse.



Chaque objet d’erreur comprendra un code d’erreur et un message expliquant l’erreur plus en détail. Les codes d’erreur possibles sont les suivants :