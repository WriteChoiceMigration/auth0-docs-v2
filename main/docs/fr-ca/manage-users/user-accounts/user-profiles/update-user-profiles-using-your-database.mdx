---
og:description: Learn how to update user profiles when using your own database as
  an identity provider.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Mise à jour des profils utilisateur à l’aide de votre base de données
og:url: https://auth0.com/docs/
permalink: update-user-profiles-using-your-database
title: Mise à jour des profils utilisateur à l’aide de votre base de données
twitter:description: Learn how to update user profiles when using your own database
  as an identity provider.
twitter:title: Mise à jour des profils utilisateur à l’aide de votre base de données
---

Mettez à jour les profils utilisateurs lorsque [vous utilisez votre propre base de données comme fournisseur d’identité](/connections/database/custom-db) en effectuant les tâches suivantes :

* Utilisez [Management API](/api/management/v2#!/Users/patch_users_by_id).
* Mettez à jour l’utilisateur dans votre base de données.
* [Configurez la migration des utilisateurs](/users/import-and-export-users/configure-automatic-migration-from-your-database) de votre base de données vers Auth0.

## Mise à jour des utilisateurs avec Management API

Lorsque vous utilisez votre propre base de données pour l’authentification, vous pouvez utiliser l[Management API](/api/management/v2) pour mettre à jour les champs suivants :

* `app_metadata`
* `user_metadata`
* `blocked`

Si vous devez mettre à jour d’autres champs d’utilisateur, vous devrez le faire directement dans votre base de données.

## Mise à jour des utilisateurs dans votre base de données

Vous pouvez mettre à jour les profils utilisateurs dans votre base de données comme vous le faites habituellement. Auth0 mettra à jour son profil utilisateur mis en cache lors de la prochaine connexion de l’utilisateur.

Le profil utilisateur dans la base de données personnalisée peut être mis en œuvre avec n’importe quelle structure de profil utilisateur, mais vous devez le faire correspondre dans l’appel de connexion aux attributs de profil utilisateur normalisés Auth0, comme indiqué dans le modèle de base de données personnalisé « Connexion ».

Les modèles pour connexions de bases de données personnalisées sont disponibles via 
Connexions > Base de données > Base de données personnalisée. Veillez à activer l’option « Utiliser ma propre base de données » pour pouvoir modifier les scripts.

Voir la section [Cache de profil utilisateur](#user-profile-cache) ci-dessous pour un bref aperçu de la manière dont Auth0 met en cache les profils utilisateurs.

## Mise à jour des utilisateurs lors de la migration

Si vous avez [activé la migration des utilisateurs](/connections/database/migrating), et qu’un utilisateur a déjà été migré vers la base de données Auth0, alors Auth0 n’interrogera plus votre base de données pour le profil utilisateur. Par conséquent, toutes les modifications apportées à la base de données personnalisée de cet utilisateur ne seront pas prises en compte dans Auth0.

Une fois qu’un utilisateur a été migré, vous pourrez également mettre à jour les champs tels que `name`, `nickname`, `given_name`, `family_name`, `picture`, `email` et `email_verified` par le biais de Management API.

Toutefois, les règles de mise à jour des autres champs de l’utilisateur s’appliqueront toujours comme décrit dans le [Profil utilisateur normalisé](/users/user-profiles/normalized-user-profiles).

## Mise en cache du profil utilisateur

Auth0 met en cache le profil utilisateur reçu d’une [connexion à la base de données](/connections/database) avant de l’envoyer à l’application cliente. Ce cache est stocké dans la base de données Auth0 et est actualisé à chaque fois que l’utilisateur s’authentifie.

Les valeurs mises en cache pour les champs du [Profil utilisateur normalisé](/users/normalized/auth0/normalized-user-profile-schema) sont basées sur les valeurs renvoyées par le script de connexion à votre connexion de base de données personnalisée.

Le profil utilisateur est mis en cache pour plusieurs raisons. Tout d’abord, la mise en cache vous permet de mettre en œuvre [Authentification unique (SSO)](/single-sign-on) au niveau de la couche Auth0 afin d’éviter de solliciter la connexion pour chaque requête. En outre, cela vous offre une résilience en cas d’indisponibilité temporaire d’une connexion.