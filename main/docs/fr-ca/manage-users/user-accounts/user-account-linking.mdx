---
og:description: Understand how user accounts can be linked in Auth0 from various identity
  providers.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Association de comptes d’utilisateur
og:url: https://auth0.com/docs/
permalink: user-account-linking
sidebarTitle: Association de comptes d’utilisateur
title: Association de comptes d’utilisateur
twitter:description: Understand how user accounts can be linked in Auth0 from various
  identity providers.
twitter:title: Association de comptes d’utilisateur
---

Auth0 supports the linking of user accounts from various <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+providers">identity providers</Tooltip>. This allows a user to authenticate from any of their accounts and still be recognized by your app and associated with the same user profile.

<Card title="Availability varies by Auth0 plan">

Both your specific login implementation and your Auth0 plan or custom agreement affect whether this feature is available. To learn more, read [Pricing](https://auth0.com/pricing).

</Card>

Auth0 treats all identities as separate by default. For example, if a user logs in first against the Auth0 database and then via Google or Facebook, these two attempts would appear to Auth0 as two separate users. You can implement functionality to enable a user to explicitly link accounts. In this scenario, the user would log in with an initial provider, perhaps Google. Your application would provide a link or button to enable them to link another account to the first one. The user would click on this link/button and your application would make a call so that when the user logs in with the second provider, the second account is linked with the first.

## Avantages relatifs à l’association des comptes

* Permet aux utilisateurs de se connecter avec n’importe quel fournisseur d’identité sans avoir à créer un profil distinct pour chacun d’entre eux
* Allows registered users to use a new social or <Tooltip tip="Passwordless: Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=passwordless">passwordless</Tooltip> login but continue using their existing profile
* Permet aux utilisateurs qui se sont inscrits en utilisant une connexion sans mot de passe de se connecter à un compte avec un profil plus complet
* Permet à vos applications de récupérer les données de profil utilisateur stockées dans diverses connexions

## Précautions

L’association non sécurisée de comptes peut permettre à des acteurs menaçants d’accéder à des comptes d’utilisateurs légitimes. Veuillez tenir compte des éléments suivants :

For both manual and automatic account links, your tenant should request authentication for **both** accounts before linking occurs.

En outre, **chaque** liaison de compte manuelle doit inviter l’utilisateur à saisir ses identifiants.

## Fonctionnement

Le processus de liaison des comptes permet de fusionner deux profils utilisateurs existants en un seul. Lors de la liaison des comptes, un **compte principal** et un **compte secondaire** doivent être déterminés.

Vous pouvez voir ci-dessous comment se présentera le profil résultant de l’association du compte primaire et du compte secondaire de notre exemple.

<CodeGroup>
```json Profile of primary account lines expandable
{
  "email": "your0@email.com",
  "email_verified": true,
  "name": "John Doe",
  "given_name": "John",
  "family_name": "Doe",
  "picture": "https://lh3.googleusercontent..../photo.jpg",
  "gender": "male",
  "locale": "en",
  "user_id": "google-oauth2|115015401343387192604",
  "identities": [
    {
      "provider": "google-oauth2",
      "user_id": "115015401343387192604",
      "connection": "google-oauth2",
      "isSocial": true
    }
  ],
  "user_metadata": {
    "color": "red"
  },
  "app_metadata": {
    "roles": [
      "Admin"
    ]
  },
  ...
}
```

```json Profile of secondary account lines
{
  "phone_number": "+14258831929",
  "phone_verified": true,
  "name": "+14258831929",
  "updated_at": "2015-10-08T18:35:18.102Z",
  "user_id": "sms|560ebaeef609ee1adaa7c551",
  "identities": [
    {
      "user_id": "560ebaeef609ee1adaa7c551",
      "provider": "sms",
      "connection": "sms",
      "isSocial": false
    }
  ],
  "user_metadata": {
    "color": "blue"
  },
  "app_metadata": {
    "roles": [
      "AppAdmin"
    ]
  },
  ...
}
```

```json Linked profile lines expandable
{
  "email": "your0@email.com",
  "email_verified": true,
  "name": "John Doe",
  "given_name": "John",
  "family_name": "Doe",
  "picture": "https://lh3.googleusercontent..../photo.jpg",
  "gender": "male",
  "locale": "en",
  "user_id": "google-oauth2|115015401343387192604",
  "identities": [
    {
      "provider": "google-oauth2",
      "user_id": "115015401343387192604",
      "connection": "google-oauth2",
      "isSocial": true
    },
    {
      "profileData": {
        "phone_number": "+14258831929",
        "phone_verified": true,
        "name": "+14258831929"
      },
      "user_id": "560ebaeef609ee1adaa7c551",
      "provider": "sms",
      "connection": "sms",
      "isSocial": false
    }
  ],
  "user_metadata": {
    "color": "red"
  },
  "app_metadata": {
    "roles": [
      "Admin"
    ]
  },
  ...
}
```
</CodeGroup>

Remarques :

* Le `user_id` et toutes les autres propriétés principales du profil restent ceux de l’identité principale.
* La première identité dans le tableau `user.identities` est l’identité principale.
* Le compte secondaire est désormais intégré dans le tableau `user.identities` du profil principal.
* Les attributs du compte secondaire sont placés dans le champ `profileData` de l’identité correspondante à l’intérieur du tableau.
* Les `user_metadata` et `app_metadata` du compte principal n’ont pas changé.
* Les `user_metadata` et `app_metadata` du compte secondaire sont supprimés.
* Il n’y a pas de fusion automatique des profils utilisateurs avec les identités associées.
* Le compte secondaire est supprimé de la liste des utilisateurs.
* Si vous supprimez le compte principal, le compte secondaire sera automatiquement supprimé.

### Fusion de métadonnées

Metadata is not automatically merged during account linking. If you want to merge it, you have to do it manually using the Manage API [`/users/patch_users_by_id`](https://auth0.com/docs/api/v2#!/Users/patch_users_by_id) endpoint.

The [Auth0 Node.js SDK for APIv2](https://github.com/auth0/node-auth0/) is also available.

To learn more, read [Understand How Metadata Works in User Profiles](/docs/manage-users/user-accounts/metadata)

## Scénarios

Il existe deux manières différentes de mettre en œuvre l’association de comptes :

* Association de comptes initiée par l’utilisateur : permettez à vos utilisateurs d’associer leurs comptes à partir d’un écran d’administration intégré à votre application.
* Association de comptes suggérée : proposez à vos utilisateurs d’associer leurs comptes possédant la même adresse courriel.

### Association de compte initiée par l’utilisateur :

En général, l’association de comptes sera initiée par un utilisateur authentifié Votre application doit fournir l’interface utilisateur, par exemple un bouton **Link accounts (Lier des comptes)** sur la page de profil de l’utilisateur.

To learn more about how to implement user-initiated account linking in a Single Page Application, read [Client-Side Account Linking](/docs/manage-users/user-accounts/user-account-linking/user-initiated-account-linking-client-side-implementation). To learn more about how to implement user-initiated account linking in a Regular Web Application, read [Server-Side Account Linking](/docs/manage-users/user-accounts/user-account-linking/suggested-account-linking-server-side-implementation).

### Association de comptes suggérée

You can find accounts with the same email, and prompt the users to link them. For example, a user can create an account with Google with the `user@gmail.com`, and then log in with Facebook, with an account linked to the same email.

Dans ce cas, il est recommandé de présenter aux utilisateurs une liste d’options de comptes à associer, en exigeant d’abord leur authentification avec le compte initial.

You can also use the [Account Link Extension](/docs/customize/extensions/account-link-extension) to achieve the same outcome.

<Warning>

Previously, in some cases, you could use ID Tokens to link and unlink user accounts. This functionality is being deprecated. You will have to use Access Tokens in all cases.

</Warning>

## Learn more

* [Link User Accounts](/docs/manage-users/user-accounts/user-account-linking/link-user-accounts)
* [Unlink User Accounts](/docs/manage-users/user-accounts/user-account-linking/unlink-user-accounts)
* [User-Initiated Account Linking: Client-Side Implementation](/docs/manage-users/user-accounts/user-account-linking/user-initiated-account-linking-client-side-implementation)
* [User Account Linking: Server-Side Implementation](/docs/manage-users/user-accounts/user-account-linking/suggested-account-linking-server-side-implementation)