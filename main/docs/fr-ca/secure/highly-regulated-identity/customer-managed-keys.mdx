---
og:description: Learn how to manage your Keys with Customer Managed Keys.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Clés gérées par le client
og:url: https://auth0.com/docs/
permalink: customer-managed-keys
sidebarTitle: Clés gérées par le client
title: Clés gérées par le client
twitter:description: Learn how to manage your Keys with Customer Managed Keys.
twitter:title: Clés gérées par le client
---

Utilisation des clés gérées par le client Auth0 vous permet de configurer le cycle de vie de votre clé principale du locataire et d’apporter votre propre clé racine fournie par le client pour remplacer la clé racine de l’environnement pour votre locataire Auth0.

Les clés gérées par le client offrent deux méthodes de gestion des clés :

* **Control Your Own Key:** Allows users with the  [Key Management Editor role](/docs/get-started/manage-dashboard-access/add-dashboard-users) to customize the lifecycle of the Tenant Master Key in Auth0 KMS.
* **Bring Your Own Key:** Allows users with the  [Key Management Editor role](/docs/get-started/manage-dashboard-access/add-dashboard-users) to replace the Auth0 Clé de racine de l’environnement and import their own wrapped encryption key to the corresponding Auth0 Cloud Hardware Security Module (HSM).

To learn more about Auth0 Keys, [read Auth0 key hierarchy](/docs/secure/highly-regulated-identity/customer-managed-keys#auth0-key-hierarchy).

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

The Customer Managed Keys feature is available to users with the Key Management Editor role. This role is not applied to users by default and needs to be explicitly applied to a Tenant member. To learn more, read [Add Tenant Members](/docs/get-started/manage-dashboard-access/add-dashboard-users).

</Callout>

## Contrôlez votre propre clé

You can control the lifecycle of your Tenant Master Key using the Auth0 <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip> [Rekey](https://auth0.com/docs/api/management/v2/keys/post-encryption-rekey) endpoint to:

* Effectuer une rotation de l’ancienne clé principale du locataire avec une nouvelle clé principale du locataire.
* Effectuer une rotation et ré-chiffrer les clés d’espace de noms avec la nouvelle clé principale du locataire.

### Autorisations

Utilisez les autorisations suivantes pour permettre l’accès aux points de terminaison des clés de chiffrement :

<table class="table">
<thead>
<tr>
<th><b>Permissions</b></th>
<th><b>Descriptions</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>
<code>create:encryption_keys</code>
<code>update:encryption_keys</code>
</td>
<td>
Users can rotate and re-encrypt the Key hierarchy of an Auth0 tenant with the Management API Rekey endpoint.
</td>
</tr>
</tbody>
</table>

### Point de terminaison

Use the Management API [Rekey](https://auth0.com/docs/api/management/v2/keys/post-encryption-rekey) endpoint to rotate the Tenant Master Key and rotate and re-encrypt Namespace Keys.

* Effectuer une rotation de la clé principale du locataire : désactive la clé principale du locataire actuellement active et crée une nouvelle clé principale du locataire.
* Effectuer une rotation de toutes les clés d’espace de noms dans le locataire : désactiver les clés actives et activer les nouvelles clés.

  + Les nouvelles clés d’espace de noms sont utilisées dans les nouvelles opérations de chiffrement.
  + Les clés d’espace de noms désactivées sont utilisées pour déchiffrer des données précédemment chiffrées.
* Ré-chiffrer toutes les clés d’espace de noms existantes avec la nouvelle clé principale du locataire.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

The endpoint is only available to tenant members with specific authorization scopes in Auth0, by default these scopes are granted to users with the  [Key Management Editor role](/docs/get-started/manage-dashboard-access/add-dashboard-users).

</Callout>

## Apportez votre propre clé

<Warning>

By importing your own Customer Provided Root Key with Bring Your Own Key, you are implicitly deauthorizing Auth0 from managing the lifecycle of the Customer Provided Root Key, except for its deletion.

</Warning>

Apportez votre propre clé permet aux éditeurs de gestion des clés d’importer en toute sécurité une clé de chiffrement enveloppée (clé racine fournie par le client) dans un module de sécurité matérielle (HSM) FIPS 140-2 L3 dans le nuage Auth0 correspondant.

En utilisant Apportez votre propre clé, vous pouvez :

* Remplacer la clé racine de l’environnement générée par défaut par Auth0 par une nouvelle clé racine fournie par le client.
* Effectuer une rotation et ré-chiffrer la hiérarchie de clés avec la clé racine fournie par le client. Par exemple : créer et ré-chiffrer une nouvelle clé principale du locataire et une nouvelle clé d’espace de noms.

You can use the [Dashboard](/docs/secure/highly-regulated-identity/customer-managed-keys/customer-managed-keys-dashboard) or the [Management API](/docs/secure/highly-regulated-identity/customer-managed-keys/customer-managed-keys-management-api) to enable Bring Your Own Key.

## Surveiller les événements de journal des clés gérées par le client

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0 automatically rotates tenant encryption keys once a year, adding the following log events in your tenant logs:

* `kms_key_state_changed`
* `kms_key_management_success`

</Callout>

The Customer Managed Keys operations adds the following log event in your [tenant logs](/docs/deploy-monitor/logs):

Un code d’événement `sapi` indiquant :

* Créer la nouvelle clé de chiffrement
* Créer la clé d’encapsulation publique
* Importer la clé de chiffrement
* Supprimer la clé de chiffrement par son identifiant
* Recomposer la hiérarchie des clés

Un code d’événement `kms_key_management_success` indiquant une opération KMS réussie.

Un code d’événement `kms_key_management_failure` indiquant une opération KMS qui a échoué.

Un code d’événement `kms_key_state_changed` indiquant un changement d’état de clé KMS.

## Hiérarchie des clés Auth0

Au niveau de l’application Auth0, Auth0 protège les secrets et les données des clients en utilisant le chiffrement d’enveloppe.

La hiérarchie de chiffrement d’enveloppe Auth0 se compose des clés suivantes, chacune étant chiffrée à l’aide de la clé située au-dessus. Le tableau ci-dessous résume la hiérarchie des clés :

<table class="table">
<thead>
<tr>
<th><b>Key</b></th>
<th><b>Algorithm</b></th>
<th><b>Storage</b></th>
</tr>
</thead>
<tbody>
<tr>
<td>Environment Root Key</td>
<td><p>RSA 2048 OAEP (Auth0 on Azure)</p><p>AES-256-GCM (Auth0 on AWS)</p></td>
<td>FIPS 140-2 L3 Hardware Security Module</td>
</tr>
<tr>
<td>Tenant Master Key</td>
<td>AES-256-GCM</td>
<td>Auth0 KMS database</td>
</tr>
<tr>
<td>Namespace Key</td>
<td>AES-256-GCM</td>
<td>Auth0 KMS database</td>
</tr>
<tr>
<td>Data Encryption Key</td>
<td>AES-256-GCM</td>
<td>Stored next to the data</td>
</tr>
</tbody>
</table>

### Clé de racine de l’environnement

La clé racine de l’environnement représente le sommet de la hiérarchie et enveloppe la clé principale du locataire pour empêcher qu’elle soit divulguée ou altérée en dehors d’Auth0.

Une clé racine d’environnement Auth0 indépendante est générée pour chaque environnement Auth0 et stockée dans un HSM voisin. Les HSM sont déployés dans une configuration géographique multiple hautement disponible. Cela signifie que les HSM basculeront vers une autre région en cas d’incident grave à l’échelle de la région.

La clé racine de l’environnement Auth0 est partagée par tous les locataires. Les clients peuvent utiliser la fonction Apportez votre propre clé pour avoir une clé racine de l’environnement dédiée à leur locataire.

Auth0 utilise les algorithmes suivants pour envelopper la clé principale du locataire avec la clé racine de l’environnement en fonction de votre fournisseur de services infonuagiques Auth0 :

* Auth0 sur Azure : RSA 2048 OAEP
* Auth0 sur AWS : AES 256 GCM

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Using the Auth0 Dashboard or Management API, tenant Admins can replace the Auth0 Clé de racine de l’environnement with their own Customer Provided Root Key.

</Callout>

### Clés principales du locataire

Chaque locataire possède une clé principale du locataire chiffrée stockée dans le service de gestion des clés Auth0 et chiffre les clés d’espace de noms.

L’algorithme utilisé pour chiffrer la clé principale du locataire est AES256 GCM.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

When a Tenant Admin using the Auth0 Dashboard or Management API has provided their own Customer Provided Root Key, a new Tenant Master Key is created.

</Callout>

### Clés d’espace de noms

Les clés d’espace de noms séparent les clés de chiffrement utilisées à des fins différentes au sein du locataire. Le nombre et l’utilisation des clés d’espace de noms sont configurés en interne par Auth0 et non disponibles pour la personnalisation.

Le chiffrement et le déchiffrement des clés d’espace de noms nécessitent l’accès à la clé principale du locataire. Les clés d’espace de noms ne quittent jamais le service de gestion des clés Auth0 et ne sont pas accessibles aux développeurs ou aux administrateurs.

Les clés d’espace de noms sont situées dans le service de gestion des clés Auth0 et sont chiffrées au moyen de l’algorithme AES256 GCM.

### Clés de chiffrement des données

Le service de gestion des clés Auth0 génère en toute sécurité différentes clés de chiffrement des données pour les demandes ultérieures de chiffrement des données. Le service de gestion des clés Auth0 optimise la sécurité et les performances en émettant régulièrement de nouvelles clés de chiffrement des données.

Le chiffrement et le déchiffrement des clés de chiffrement des données nécessitent l’accès à la clé d’espace de noms qui lui est attribuée. Les clés de chiffrement des données ne peuvent pas être déchiffrées en dehors du service de gestion des clés Auth0 ou par les éditeurs de gestion des clés.

Les clés de chiffrement des données sont situées à côté des données et sont chiffrées au moyen de l’algorithme AES256 GCM.