---
og:description: Describes which Auth0 features can help you comply with the Conditions
  for Consent GDPR requirements.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 'RGPD : Conditions de consentement'
og:url: https://auth0.com/docs/
permalink: gdpr-conditions-for-consent
title: 'RGPD : Conditions de consentement'
twitter:description: Describes which Auth0 features can help you comply with the Conditions
  for Consent GDPR requirements.
twitter:title: 'RGPD : Conditions de consentement'
---

Conformément à l’article 7 du RGPD, vous devez demander aux utilisateurs de consentir au traitement de leurs données personnelles sous une forme claire et facilement accessible. Vous devez également montrer que l’utilisateur a consenti et lui fournir un moyen facile de retirer son consentement à tout moment.

Cet article explique comment utiliser les fonctionnalités d’Auth0 pour mettre en place ces exigences.



## Demander le consentement

Lors de l’inscription, vous devez demander le consentement de vos utilisateurs. Avec Auth0, vous pouvez enregistrer ces informations avec les métadonnées utilisateur. Plusieurs options sont disponibles en fonction de la façon dont vous utilisez Auth0 pour authentifier vos utilisateurs. Avant de concevoir votre solution à l’aide de métadonnées, assurez-vous de connaître les restrictions. Auth0 limite la taille totale des `user_metadata` à **16 Mo**. Pour en savoir plus, consultez [Noms des champs de métadonnées et types de données](/users/metadata/metadata-fields-data).



### Utiliser Lock

Vous pouvez personnaliser l’interface utilisateur Lock pour afficher des liens vers vos modalités ou vers vos pages de déclaration de confidentialité, ainsi qu’une case de consentement que l’utilisateur doit cocher pour s’inscrire. Cela peut être fait avec l’option Lock `mustAcceptTerm`. Cette propriété, une fois définie sur `true`, affiche une case à cocher à côté des modalités qui doivent être vérifiées avant de procéder à l’inscription. Les modalités peuvent être précisées à l’aide de l’option languageDictionary. Pour en savoir plus, consultez [Configuration de Lock](/libraries/lock/lock-configuration).

Une fois que l’utilisateur accepte et s’inscrit, enregistrez les informations de consentement dans `user_metadata` à l’aide d’une règle qui s’exécutera lors de la première connexion. Pour en savoir plus sur les Règles, lisez [Règles d'Auth0](/rules).

Si vous utilisez des connexions à des réseaux sociaux, l’ajout de champs personnalisés n’est pas une option, mais vous pouvez rediriger l’utilisateur vers une autre page où vous demandez son consentement et des informations supplémentaires, puis vous le redirigez pour terminer la transaction d’authentification. Cela peut être fait avec des règles de redirection. Pour en savoir plus, veuillez consulter l’article [Redirect Users from Within Rules (Rediriger les utilisateurs à partir des règles)](/rules/redirect-users). Une fois le processus d’inscription terminé, enregistrez les informations de consentement dans `user_metadata` en appelant le [point de terminaison **Mise à jour de l’utilisateur**](/api/management/v2#!/Users/patch_users_by_id) de Management API.

Si vous utilisez des connexions à des réseaux sociaux, l’ajout de champs personnalisés n’est pas une option, mais vous pouvez rediriger l’utilisateur vers une autre page où vous demandez son consentement et des informations supplémentaires, puis vous le redirigez pour terminer la transaction d’authentification. Cela peut être fait avec des règles de redirection. Pour en savoir plus, veuillez consulter l’article [Rediriger les utilisateurs à partir des règles](/rules/redirect-users). Une fois le processus d’inscription terminé, enregistrez les informations de consentement dans `user_metadata` en appelant le [point de terminaison **Mise à jour de l’utilisateur**](/api/management/v2#!/Users/patch_users_by_id) de Management API.

Pour savoir comment mettre en place l’un de ces scénarios, consultez [RGPD : Suivre le consentement avec Lock](/compliance/gdpr/gdpr-track-consent-with-lock).

### Utiliser l’interface utilisateur personnalisée

Si vous utilisez un formulaire d’inscription personnalisé avec une connexion à une base de données, vous devez ajouter un champ supplémentaire à l’écran d’inscription afin de recueillir le consentement de l’utilisateur. Ensuite, appelez le [point de terminaison **Inscription**](/api/authentication#signup) de l’Authentication API afin de créer l’utilisateur dans Auth0. À ce stade, vous pouvez définir les informations de consentement dans le cadre de `user_metadata`.

Si vous utilisez un formulaire d’inscription personnalisé avec des fournisseurs de réseaux sociaux, vous ne pouvez pas définir les informations de consentement de l’utilisateur lors de l’inscription, mais vous pouvez les mettre à jour dès que l’utilisateur est créé. Enregistrez les informations de consentement dans `user_metadata` en appelant le [point de terminaison **Update User (Mise à jour de l’utilisateur)**](/api/management/v2#!/Users/patch_users_by_id) de Management API.

Si vous utilisez un formulaire d’inscription personnalisé avec des fournisseurs de réseaux sociaux, vous ne pouvez pas définir les informations de consentement de l’utilisateur lors de l’inscription, mais vous pouvez les mettre à jour dès que l’utilisateur est créé. Une fois le processus d’inscription terminé, enregistrez les informations de consentement dans `user_metadata` en appelant le [point de terminaison **Mise à jour de l’utilisateur**](/api/management/v2#!/Users/patch_users_by_id) de la Management API.

Pour savoir comment mettre en place l’un de ces scénarios, consultez [RGPD : Suivre le consentement avec l’interface utilisateur personnalisée](/compliance/gdpr/gdpr-track-consent-with-custom-ui).

### Renouvellement du consentement et migration des utilisateurs

Si vous devez obtenir le consentement des utilisateurs actuels et que vous décidez de les migrer de votre base de données existante vers Auth0, vous pouvez utiliser notre fonction de [migration automatique des utilisateurs](/users/import-and-export-users/configure-automatic-migration-from-your-database). Cette fonction crée un compte Auth0 pour chaque utilisateur qui se connecte pour la première fois (après l’activation) sans que ce dernier ait besoin de réinitialiser son mot de passe. Voici comment procéder :

* Rédiger l’avis que les utilisateurs verront sur la façon dont les données des utilisateurs sont utilisées, combien de temps les données seront utilisées, les droits des utilisateurs, etc., et personnaliser la boîte d’inscription de l’interface utilisateur.
* Déterminer si un nouveau consentement est requis pour vos utilisateurs, en fonction de vos anciennes modalités et de vos certifications de confidentialité antérieures.

Notez que chaque fois que vos conditions générales sont modifiées, vous **devez** demander à nouveau le consentement des utilisateurs.

## Suivi du consentement

Conformément au RGPD, vous devez être en mesure de prouver que l'utilisateur a consenti au traitement de ses données à caractère personnel.

Management API offre également plusieurs options lorsqu’il s’agit de recherche d’utilisateurs et de points de terminaison pour mettre à jour les métadonnées utilisateur ou l’exportation par lots des utilisateurs.

La Management API offre également plusieurs options lorsqu’il s’agit de recherche d’utilisateurs et de points de terminaison pour mettre à jour les métadonnées utilisateur ou l’exportation par lots des utilisateurs.

Pour rechercher un utilisateur à l’aide de son adresse courriel, utilisez le [point de terminaison ](/users/user-search/user-search-best-practices)[**Rechercher un utilisateur par courriel**](/users/user-search/user-search-best-practices).

### Recherche d’utilisateurs par adresse courriel

Pour rechercher un utilisateur à l’aide de son adresse courriel, utilisez le [point de terminaison **Rechercher un utilisateur par courriel**](/users/user-search/user-search-best-practices).

Définissez le paramètre de requête **fields** sur `user_metadata` afin de limiter les champs retournés. De cette façon, seul le user_metadata sera retourné à la place du profil utilisateur complet.

Exemple de demande :



Exemple de réponse :



### Recherche d’utilisateurs par ID

Pour rechercher un utilisateur à l’aide de son ID, utilisez le [point de terminaison **Obtenir un utilisateur**](/users/user-search/user-search-best-practices).

Définissez le paramètre de requête **fields** sur `user_metadata` afin de limiter les champs retournés. De cette façon, seul le `user_metadata` sera retourné à la place du profil utilisateur complet.

Exemple de demande :



Exemple de réponse :



### Mise à jour de l’information de consentement

Pour mettre à jour la valeur des `user_metadata` d’un utilisateur, utilisez le [point de terminaison **Mettre à jour un utilisateur**](/api/management/v2#!/Users/patch_users_by_id).

La façon dont vous structurez votre demande dépend de la façon dont vous avez structuré vos métadonnées : en tant que racine ou en tant que propriétés internes.

Si vos métadonnées sont stockées en tant que propriétés racines :



Si vos métadonnées sont stockées en tant que propriétés internes :



#### Mettre à jour la propriété racine

Les mises à jour des propriétés de niveau racine sont fusionnées, il vous suffit donc d’envoyer la valeur du champ que vous souhaitez mettre à jour. Par exemple, supposons que nous voulions ajouter une date de consentement et la définir sur `2018-01-23`.



Ceci ajoutera une nouvelle propriété au profil utilisateur, **user_metadata.consentDate**, qui contiendra la date à laquelle le client a donné son consentement. La réponse sera le profil utilisateur complet. Les métadonnées mises à jour se présenteront comme suit :



#### Mettre à jour la propriété interne

Pour mettre à jour une propriété interne, vous devez envoyer l’ensemble de l'objet de métadonnées, même si vous ne mettez pas à jour plus d'une propriété. Si vous n’envoyez pas l’objet complet, Auth0 supprimera les propriétés existantes.

Ajoutons une propriété interne pour la date de consentement et fixons-la à `2018-01-23`.



Ceci ajoutera une nouvelle propriété au profil utilisateur, **user_metadata.consent.date,**, qui contiendra la date à laquelle le client a donné son consentement. La réponse sera le profil utilisateur complet. Les métadonnées mises à jour se présenteront comme suit :

Pour exporter une liste de vos utilisateurs à l’aide de Management API, utilisez le [point de terminaison ](/users/user-search/user-search-best-practices)[**User Export (Exportation d’utilisateurs)**](/users/user-search/user-search-best-practices).

### Exporter l’information sur le consentement

Pour exporter une liste de vos utilisateurs à l’aide de Management API, utilisez le point de terminaison [**User Export**](/users/user-search/user-search-best-practices).

Ce point de terminaison crée une tâche qui exporte tous les utilisateurs associés à une connexion. Vous aurez besoin de l’ID de la connexion. Pour trouver cet ID, utilisez le [point de terminaison **Obtenir les connexions**](/api/management/v2#!/Connections/get_connections). Vous pouvez définir le paramètre **name** sur le nom de la connexion pour récupérer uniquement celle-ci.

Une fois que vous disposez de l’ID de connexion et d’un jeton d’accès pour Management API, vous êtes prêt à commencer à exporter des utilisateurs. Pour voir un exemple de requête et de réponse, veuillez consulter l’article [Importer et exporter des utilisateurs](/users/import-and-export-users). Pour savoir comment obtenir un jeton d’accès pour Management API, veuillez consulter l’article [Jetons d’accès à Management API](/security/tokens/access-tokens/management-api-access-tokens).

Vous devez également :

* Déterminer la façon dont vous souhaitez suivre le consentement. Nous vous recommandons d’inclure des informations non seulement sur la date à laquelle l’utilisateur a donné son consentement, mais aussi sur la version des modalités à laquelle l’utilisateur a donné son consentement. Nous recommandons également d’inclure un tableau pour conserver des informations sur les utilisateurs qui retirent leur autorisation (rappelez-vous que l’utilisateur peut donner son consentement et le retirer à plusieurs reprise).
* Choisissez où vous voulez stocker le consentement : dans la base de données Auth0 ou ailleurs.

## Retirer son consentement

L’utilisateur doit avoir la possibilité de retirer son consentement en utilisant votre application. Cette option doit être facilement accessible et clairement indiquée. Lorsque l’utilisateur décide de retirer son consentement, vous devez prendre des mesures.

Tout d’abord, vous devez décider comment vous allez gérer le retrait du consentement : allez-vous supprimer les utilisateurs ou les marquer comme supprimés?

### Supprimer un utilisateur

Pour supprimer un utilisateur, utilisez le [point de terminaison **Supprimer un utilisateur**](/api/management/v2#!/Users/delete_users_by_id).



Le corps de la réponse de ce point de terminaison est vide. Ainsi, si vous souhaitez confirmer que l’utilisateur a été supprimé, essayez de récupérer l’utilisateur à l’aide de son adresse courriel. Si le point de terminaison renvoie une erreur, votre appel de suppression de l’utilisateur a réussi.

### Marquer l’utilisateur comme supprimé

Si vous ne souhaitez pas supprimer l’utilisateur, marquez son profil comme supprimé à l’aide du [point de terminaison **app_metadata**](/api/management/v2#!/Users/patch_users_by_id). Ajoutez ensuite du code qui fera échouer le processus d’authentification pour tout utilisateur dont le profil est marqué comme supprimé.

Cela vous permet de conserver un enregistrement des utilisateurs supprimés pour une utilisation ultérieure.

#### Marquer le profil

Pour marquer un utilisateur comme supprimé, utilisez app_metadata. Dans l’exemple suivant, nous allons vous montrer comment ajouter une propriété appelée **supprimée** au champ **app_metadata**. Cela vous permet de configurer le processus d’authentification pour traiter toutes les utilisations avec la propriété supprimée définie sur true.

Pour mettre à jour les métadonnées d’un utilisateur, utilisez le [point de terminaison **Mettre à jour un utilisateur**](/api/management/v2#!/Users/patch_users_by_id).



#### Désactiver la connexion pour les utilisateurs marqués

Ensuite, vous devez désactiver la connexion pour les utilisateurs marqués comme supprimés. Pour ce faire, vous allez ajouter une règle (un extrait de code en JavaScript qui s’exécute dans le cadre du pipeline d’authentification).

1. Accédez à [Auth0 Dashboard > Auth Pipeline Règles](%24%7Bmanage_url%7D/#/rules) et créez une règle,
2. Copiez le script ci-dessous :

Le script effectue les opérations suivantes :

1. Vérifie la valeur de la propriété de métadonnées **supprimée** (`user.app_metadata.deleted`).
2. Renvoie une erreur `Access denied (deleted user)` à votre application si `user.app_metadata.deleted = true`.
3. Donnez un nom à votre règle et enregistrez vos modifications.

Vous devez également :

* Vous assurer que la pièce de retrait du consentement est suffisamment granulaire.
* Configurer au sein de l’application la zone où les clients retireront leur consentement.