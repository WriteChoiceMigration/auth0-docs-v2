---
og:description: Describes how to install, configure, and use options for the Auth0
  Guardian for Android SDK.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Trousse SDK Guardian pour Android
og:url: https://auth0.com/docs/
permalink: guardian-for-android-sdk
title: Trousse SDK Guardian pour Android
twitter:description: Describes how to install, configure, and use options for the
  Auth0 Guardian for Android SDK.
twitter:title: Trousse SDK Guardian pour Android
---

La [trousse SDK Guardian pour Android](https://github.com/auth0/Guardian.Android) vous aide à créer des applications Android avec la fonctionnalité Guardian, offrant un accès sécurisé à l’authentification multifacteur (MFA) avec des notifications poussées. Avec cette boîte à outils, vous pouvez créer votre propre version personnalisée de l’application Guardian qui correspond à l’image de votre organization. Pour en savoir plus, consultez [Configurer les notifications poussées pour la MFA](https://auth0.com/docs/secure/multi-factor-authentication/multi-factor-authentication-factors/configure-push-notifications-for-mfa#configure-push-notifications-for-apple-using-apn-).

Une version d’API Android supérieure ou égale à 15 est requise pour utiliser la trousse SDK Guardian pour Android.

## Installer la trousse SDK Guardian pour Android

Guardian est disponible sur [Maven Central](http://search.maven.org/) et [JCenter](https://bintray.com/auth0/android/guardian).

1. Pour utiliser Guardian, ajoutez ces lignes à votre fichier de dépendances `build.gradle` :
`implementation ’com.auth0.android:guardian:0.4.0’`
Vous pouvez vérifier la version la plus récente sous l’onglet [Lancements](https://github.com/auth0/GuardianSDK.Android/releases) du répertoire, dans [Maven](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.auth0.android%22%20AND%20a%3A%22guardian%22), ou dans [JCenter](https://bintray.com/auth0/android/guardian).
2. Assurez-vous de synchroniser votre projet avec le fichier Gradle après avoir ajouté votre dépendance Gradle.

### Activer les notifications poussées de Guardian

1. Allez à [Dashboard > Sécurité > Authentification multifacteur > Notifications poussées via Gardien Auth0.](%24%7Bmanage_url%7D/#/security/mfa/guardian)
2. Basculez le commutateur vers le haut pour l’activer.

3. [Configurer les notifications poussées](https://auth0.com/docs/secure/multi-factor-authentication/multi-factor-authentication-factors/configure-push-notifications-for-mfa#configure-push-notifications-for-android-using-fcm).

## Utiliser la trousse SDK

Guardian est la portion centrale de la trousse SDK. Vous devrez créer une instance de cette classe pour l’URL de votre locataire spécifique.



ou



### Inscription

Le lien entre le deuxième facteur (une instance de votre application sur un appareil) et un compte Auth0 est appelé **inscription**.

Vous pouvez créer une inscription à l’aide de la fonction `Guardian.enroll`, mais vous devrez d’abord créer une nouvelle paire de clés RSA pour celle-ci. La clé privée sera utilisée pour signer les demandes d’autorisation ou de rejet d’une connexion. La clé publique sera envoyée pendant le processus d’inscription afin que le serveur puisse vérifier la signature de la demande par la suite.



Ensuite, obtenez les informations d’inscription en balayant le code QR de Guardian et utilisez-le pour inscrire le compte :



Vous pouvez également exécuter la requête dans un thread en arrière-plan :



Vous devez fournir les données suivantes :



### Désinscription

Pour désactiver la MFA, vous pouvez supprimer l’inscription :



### Autoriser les demandes de connexion

Une fois l’inscription en place, vous recevrez une notification poussée FCM chaque fois que l’utilisateur aura besoin d’une authentification multifacteur (MFA).

Guardian procure une méthode pour analyser les données `Map (Carte) <String, String >` dans le [RemoteMessage](https://firebase.google.com/docs/reference/android/com/google/firebase/messaging/RemoteMessage) reçu du FCM et retourner une instance de `Notification` prête à être utilisée.



Une fois que vous disposez de l’instance de notification, vous pouvez utiliser la méthode `Allow (Autoriser)` pour approuver la demande d’authentification. Vous aurez également besoin de l’inscription que vous avez obtenue précédemment. S’il y a plusieurs inscriptions, assurez-vous d’utiliser celle qui a le même `id` que la notification (la propriété `enrollmentId`).



### Rejeter les demandes de connexion

Pour refuser une demande d’authentification, utilisez plutôt ` reject (rejeter)`. Vous pouvez également ajouter un motif facultatif de rejet, qui sera disponible dans les journaux de Guardian.



### Configurer l’inscription du mot de passe à usage unique seulement sur mobile

Vous pouvez activer les mots de passe à usage unique comme facteur MFA à l’aide du Auth0 Dashboard ou de Management API. Cette option ne nécessite pas de code QR et permet aux utilisateurs de s’inscrire manuellement.

Pour inviter un utilisateur à s’inscrire, naviguez vers [Auth0 Dashboard > Gestion d’utilisateur > Utilisateurs](https://manage.auth0.com/#/users) et sélectionnez un utilisateur. Ensuite, accédez à son onglet Détails et utilisez la section Authentification multifacteur (MFA) pour envoyer une invitation d’inscription.

#### **Connecter une ressource**

Vous pouvez connecter une ressource à partir du Auth0 Dashboard ou de la trousse SDK Guardian.

##### Utilisation de Auth0 Dashboard

1. Accédez à l’invite de connexion Auth0 et copiez le code fourni ou une clé codée en base32 similaire obtenue à partir d’une autre source.
2. Après avoir obtenu votre code, ajoutez-le à la trousse SDK Guardian :

**Java**

`public String copiedCode = "{copiedCode}";`

**Kotlin**

`val copiedCode: String = "{copiedCode}"`

##### Installer la trousse SDK Guardian

Premièrement, ajoutez la classe `LoginCodeGenerator ` à votre projet. Ensuite,  utilisez `getCode (String copiedCode) pour `générer un code à usage unique à votre application

**Java**



**Kotlin**

****

#### **Saisir le code à usage unique**

Saisissez le mot de passe à usage unique généré par `getCode()` dans l’invite de connexion Auth0.` `

Après avoir sélectionné Continue (Continuer), un message s’affiche indiquant que votre application a été ajoutée comme facteur d’authentification pour votre utilisateur.

#### **Se connecter avec votre application**

Une fois le facteur inscrit, votre utilisateur peut se connecter à l’aide de votre application. Tout d’abord, choisissez l’application Guardian comme méthode d’authentification.

Pour générer le code à usage unique, appelez `getCode(copiedCode: String) ` à l’aide du code copié de l’invite de connexion Auth0.

Ensuite, saisissez le code à usage unique dans l’invite de connexion pour vérifier votre identité.