---
og:description: Describes how to build your own MFA flows using one-time password
  (OTP) as an authentication factor.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Inscription et défi des authentificateurs OTP
og:url: https://auth0.com/docs/
permalink: enroll-and-challenge-otp-authenticators
title: Inscription et défi des authentificateurs OTP
twitter:description: Describes how to build your own MFA flows using one-time password
  (OTP) as an authentication factor.
twitter:title: Inscription et défi des authentificateurs OTP
---





* [Configurez OTP](/mfa/mfa-factors/configure-otp-notifications-for-mfa) comme facteur d’authentification dans Dashboard ou à l’aide de la [Management API](/api/management/v2#!/Guardian/put_factors_by_name).

## S’inscrire avec OTP



### Inscrire des facteurs d’authentification



Pour vous inscrire avec OTP, définissez le paramètre `authenticator_types` sur `[otp]`.



Si l’étape réussie, vous recevez une réponse comme celle-ci :



Si vous recevez une erreur `User is already enrolled (Utilisateur déjà inscrit)`, l’utilisateur a déjà un facteur MFA inscrit. Avant d’associer un autre facteur à l’utilisateur, vous devez lancer un défi-réponse à l’utilisateur avec le facteur existant.



### Confirmer l’inscription OTP

Pour confirmer l’inscription, l’utilisateur final devra entrer le code secret obtenu à l’étape précédente dans une application génératrice d’OTP comme Google Authenticator. Il peut entrer le code secret en scannant un code QR avec le `barcode_uri` ou en saisissant manuellement le code secret dans cette application OTP. Vous devez donner aux utilisateurs un moyen d’obtenir le code secret sous forme de texte au cas où ils ne pourraient pas scanner le code QR (par exemple, s’ils s’inscrivent à partir d’un appareil mobile ou utilisent une application OTP sur un ordinateur de bureau).

Après que l’utilisateur a entré le code secret, l’application OTP affichera un code à 6 chiffres que l’utilisateur devra entrer dans votre application. L’application doit ensuite effectuer une requête `POST` vers le point de terminaison du jeton OAuth, en incluant cette valeur `otp`.



Si l’appel ne réussi pas, vous recevrez une réponse dans le format suivant, contenant le jeton d’accès :



À ce stade, l’authentificateur est entièrement associé et prêt à être utilisé, et vous disposez des jetons d’authentification pour l’utilisateur.

À tout moment, vous pouvez vérifier si un authentificateur a été confirmé en appelant le point de terminaison des facteurs d’authentification MFA. Si l’authentification est confirmée, la valeur passe de `active` à `réelle`.

## Défi avec OTP

### Obtenir un jeton MFA

Obtenez un jeton MFA en suivant les étapes décrites dans [Autorisation par mot de passe et MFA dans l’authentification avec le propriétaire de la ressource ](/mfa/ropg-mfa).

### Récupérer les facteurs d’authentification enregistrés

Vous pouvez énumérer toutes les authentifications à l’aide du point de terminaison des facteurs d’authentification MFA :



Vous obtiendrez une liste de facteurs d’authentification avec le format suivant :



### Compléter l’authentification à l’aide du code reçu

L’utilisateur obtiendra un mot de passe à usage unique, que vous récupérerez ensuite auprès de lui.

Vous pouvez vérifier le code et obtenir des jetons d’authentification en utilisant le point de terminaison du jeton Oauth0, tout en précisant le mot de passe à usage unique dans le paramètre `otp`.



Si l’appel réussi, vous recevrez une réponse dans le format ci-dessous, contenant le jeton d’accès :