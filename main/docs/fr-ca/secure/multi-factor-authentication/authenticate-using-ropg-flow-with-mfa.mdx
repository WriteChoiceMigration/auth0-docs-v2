---
og:description: Learn how to authenticate users using the Resource Owner Password
  Flow with MFA.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Authentifier par un flux de mot de passe du propriétaire de ressource avec
  MFA
og:url: https://auth0.com/docs/
permalink: authenticate-using-ropg-flow-with-mfa
title: Authentifier par un flux de mot de passe du propriétaire de ressource avec
  MFA
twitter:description: Learn how to authenticate users using the Resource Owner Password
  Flow with MFA.
twitter:title: Authentifier par un flux de mot de passe du propriétaire de ressource
  avec MFA
---

Vous pouvez utiliser [l’API Auth0 pour l’authentification multifacteur (MFA)](/api/authentication#multi-factor-authentication) pour compléter le flux d’authentification à l’aide du [Flux de mot de passe du propriétaire de ressource](/login/flows/resource-owner-password-flow) (parfois appelé Autorisation de mot de passe du propriétaire des ressources ou ROPG lorsque MFA est activée.



## Authentifier l’utilisateur

Lorsque vous utilisez le Flux de mot de passe du propriétaire de ressource pour l’authentification, vous appelez le point de terminaison `/oauth/token` avec le nom d’utilisateur et le mot de passe de l’utilisateur.



Lorsque MFA est activé, la réponse comprend une erreur `mfa_required` et un jeton `mfa_token`.



Après avoir reçu l’erreur ci-dessus, vous devez vérifier si l’utilisateur a un facteur MFA enregistré ou non. Appelez le point de terminaison [MFA Authenticators](/mfa/ropg-mfa/manage-authenticator-factors-mfa-api) (Authentificateurs MFA), en utilisant le jeton MFA obtenu dans la section précédente.

## Récupérer les facteurs d’authentification enregistrés

Après avoir reçu l'erreur ci-dessus, vous devez vérifier si l'utilisateur a un facteur MFA enregistré ou non. Appelez le point de terminaison [Authentificateurs MFA](/mfa/ropg-mfa/manage-authenticator-factors-mfa-api), en utilisant le jeton MFA obtenu dans la section précédente.

Vous recevrez un tableau avec les facteurs d’authentification disponibles. Le tableau sera vide si l’utilisateur n’a pas enregistré de facteur.

Vous recevrez un tableau avec les facteurs d'authentification disponibles. Le tableau sera vide si l'utilisateur n'a pas enregistré de facteur.

Si l’utilisateur n’est pas enregistré dans MFA, utilisez un jeton MFA obtenu précédemment et enregistrez-le en utilisant le point de terminaison MFA Associate. Consultez les liens suivants pour mettre en œuvre ce flux basé sur le facteur d’authentification :

## Enregistrer un facteur MFA

Si l’utilisateur est déjà enregistré pour l’authentification MFA, vous devez le défier avec l’un des facteurs existants. Utiliser le retour `authenticator_id` du point de terminaison des authentificateurs MFA lors de l’appel au point de terminaison du défi MFA.

* [SMS ou voix](/mfa/ropg-mfa/enroll-challenge-sms-voice-authenticators)
* [Mot de passe à usage unique (OTP)](/mfa/ropg-mfa/enroll-and-challenge-otp-authenticators)
* [Courriel](/mfa/ropg-mfa/enroll-and-challenge-push-authenticators)
* [Courriel](/mfa/ropg-mfa/enroll-and-challenge-email-authenticators)

## Défier l’utilisateur avec la MFA

Si l'utilisateur est déjà enregistré pour l'authentification MFA, vous devez le défier avec l'un des facteurs existants. Utiliser le retour `authenticator_id` du point de terminaison des authentificateurs MFA lors de l’appel au point de terminaison du défi MFA.

Une fois le défi terminé, appelez de nouveau le point de terminaison `/oauth/token` pour finaliser le flux d’authentification et obtenir les jetons d’authentification.

Consultez les liens ci-dessous pour mettre en œuvre ce flux en fonction du facteur d’authentification :

* [SMS ou voix](/mfa/ropg-mfa/enroll-challenge-sms-voice-authenticators)
* [Mot de passe à usage unique (OTP)](/mfa/ropg-mfa/enroll-and-challenge-otp-authenticators)
* [Courriel](/mfa/ropg-mfa/enroll-and-challenge-push-authenticators)
* [Courriel](/mfa/ropg-mfa/enroll-and-challenge-email-authenticators)

### Limitations et restrictions des codes OTP pour l’authentification MFA

**Délai d’expiration** : Le délai d’expiration des codes OTP pour l’authentification MFA est de 5 minutes. Cette valeur n’est pas configurable.

**Validation du code** : Une fois qu’un utilisateur a utilisé un code OTP pour l’authentification MFA, ce code ne peut plus être utilisé.

**Limite anti-attaques de validation des codes** : Les tentatives de validation infructueuses de l’utilisateur ont une limite anti-attaques limitée par un algorithme de tri par casiers. L’algorithme autorise 10 tentatives, puis se rafraîchit pour autoriser ensuite une nouvelle tentative toutes les 6 minutes.