---
og:description: Learn how to customize Adaptive Multi-Factor Authentication (MFA).
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Personnaliser l’authentification multifacteur (MFA) adaptative
og:url: https://auth0.com/docs/
permalink: customize-adaptive-mfa
title: Personnaliser l’authentification multifacteur (MFA) adaptative
twitter:description: Learn how to customize Adaptive Multi-Factor Authentication (MFA).
twitter:title: Personnaliser l’authentification multifacteur (MFA) adaptative
---

You can customize <Tooltip tip="Adaptive Multi-factor Authentication: Multi-factor authentication (MFA) that is only triggered for users when an attempted login is determined to be a low confidence login." cta="View Glossary" href="/docs/glossary?term=Adaptive+MFA">Adaptive MFA</Tooltip> for a variety of scenarios with [Auth0 Actions](/docs/customize/actions).

## Quand personnaliser l’authentification multifacteur (MFA) adaptative

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

You should only consider customizing Adaptive MFA if your users are enrolled in MFA and are required to use an email as an identifier.

</Callout>

If your users are not enrolled in <Tooltip tip="Multi-factor authentication (MFA): User authentication process that uses a factor in addition to username and password such as a code via SMS." cta="View Glossary" href="/docs/glossary?term=MFA">MFA</Tooltip>, you should use the default policy for Adaptive MFA. If a user is not enrolled in MFA and your Action assesses a high risk, you have limited options to stop a <Tooltip tip="Bad Actors: Entity (a person or group) that poses a threat to the business or environment with the intention to cause harm." cta="View Glossary" href="/docs/glossary?term=bad+actor">bad actor</Tooltip>.

Avant de commencer à personnaliser l’authentification multifacteur (MFA) adaptative, posez-vous quelques questions :

* À quel niveau de confiance souhaitez-vous déclencher la MFA?
* Comment voulez-vous mesurer le risque?
* Voulez-vous qu’Auth0 mesure la confiance ou souhaitez-vous une mesure personnalisée?
* Comment allez-vous gérer les utilisateurs qui ne sont pas inscrits à la MFA?

## Évaluer la confiance

Adaptive MFA calculates an overall confidence score based on the analysis of three assessments. Each assessment has its own confidence score. To learn more, read [Adaptive MFA](/docs/secure/multi-factor-authentication/adaptive-mfa).

### Pointages de confiance

Les pointages de confiance et leurs actions associées sont décrits ci-dessous :

<table class="table"><thead>
<tr>
<th><strong>Confidence score</strong></th>
<th><strong>Description</strong></th>
<th><strong>Action</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>low</code></td>
<td>Login transaction does not match patterns previously displayed by user.</td>
<td>Require MFA.</td>
</tr>
<tr>
<td><code>medium</code></td>
<td>Login transaction somewhat matches patterns previously displayed by user.</td>
<td>Do not require MFA.</td>
</tr>
<tr>
<td><code>high</code></td>
<td>Login transaction closely matches patterns previously displayed by user.</td>
<td>Do not require MFA.</td>
</tr>
<tr>
<td><code>neutral</code></td>
<td>N/A. Reserved for future use.</td>
<td>N/A. Reserved for future use.</td>
</tr>
</tbody>
</table>

### Pointage de confiance personnalisé

Si vous souhaitez implémenter votre propre méthode pour évaluer le pointage de confiance total de différents scénarios, vous pouvez utiliser les données dises dans l’objet [RiskAssessment](#riskassessment-context-object).

Consultez les exemples ci-dessous pour découvrir comment l’authentification multifacteur (MFA) adaptative évalue la confiance dans différents cas d’utilisation.

#### Exemples de scénarios à haut risque et à faible confiance

Le tableau suivant décrit les scénarios à haut risque qui entraînent un `low` pointage de confiance :

<table class="table"><thead>
<tr>
<th><strong>User State</strong></th>
<th><strong>Desired Login Friction</strong></th>
<th><strong>Desired Enrollment Policy</strong></th>
<th><strong>Implementation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Enrolled in MFA</td>
<td>Do not require MFA</td>
<td>N/A (user already enrolled)</td>
<td>Use an Action to bypass MFA</td>
</tr>
<tr>
<td>Not enrolled in MFA</td>
<td>Require email verification</td>
<td>Skip enrollment (do not collect additional authenticators)</td>
<td>Default behavior (no MFA-related Action)</td>
</tr>
<tr>
<td>Not enrolled in MFA</td>
<td>Require email verification</td>
<td>Require MFA enrollment (collect additional authenticator)</td>
<td>Use an Action to force MFA enrollment (template available)</td>
</tr>
</tbody>
</table>

#### Exemples de scénarios à haut risque et à forte confiance

Le tableau suivant décrit les scénarios à faible risque qui entraînent un pointage `high` de confiance :

<table class="table"><thead>
<tr>
<th><strong>User State</strong></th>
<th><strong>Desired Login Friction</strong></th>
<th><strong>Desired Enrollment Policy</strong></th>
<th><strong>Implementation</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Enrolled in MFA</td>
<td>No friction</td>
<td>N/A (user already enrolled)</td>
<td>Default behavior (no MFA-related Action)</td>
</tr>
<tr>
<td>Not enrolled in MFA</td>
<td>No friction</td>
<td>Skip enrollment (do not collect additional authenticators)</td>
<td>Default behavior (no MFA-related Action)</td>
</tr>
<tr>
<td>Not enrolled in MFA</td>
<td>No friction</td>
<td>Require MFA enrollment (collect additional authenticator)</td>
<td>Use an Action to force MFA enrollment (template available)</td>
</tr>
</tbody>
</table>

### Objet riskAssessment

L’objet `riskAssessment` contient le pointage de confiance total, les informations de version et les détails des évaluations individuelles.

<table class="table"><thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Description</strong></th>
<th><strong>Type</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>confidence</code></td>
<td>Overall confidence score calculated by Adaptive MFA.</td>
<td>string</td>
<td><code>low</code>, <code>medium</code>, <code>high</code>, <code>neutral</code></td>
</tr>
<tr>
<td><code>version</code></td>
<td>Version identifier of risk assessment API.</td>
<td>string</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>assessments</code></td>
<td>Object containing individual assessment details.</td>
<td>object</td>
<td>Read <a href="#assessments-object">assessments object</a></td>
</tr>
</tbody>
</table>

```js lines expandable
exports.onExecutePostLogin = async (event, api) => {
  if (event.authentication && event.authentication.riskAssessment) {
    event.authentication.riskAssessment = {
      confidence: 'low' | 'medium' | 'high' | 'neutral',
      version: '1',
      assessments: {
        UntrustedIP: {
          confidence: 'low' | 'medium' | 'high' | 'neutral',
          code: 'not_found_on_deny_list' | 'found_on_deny_list',
          details: { // only if 'found_on_deny_list'
            ip: '192.168.1.1',
            matches: '192.168.0/64',
            source: 'firehol',
            category: 'abuse'
          }
        },
        NewDevice: {
          confidence: 'low' | 'medium' | 'high' | 'neutral',
          code: 'match' | 'partial_match' | 'no_match',
          details: {
            device: 'known' | 'unknown',
            useragent: 'known' | 'unknown',
          }
        },
        ImpossibleTravel: {
          confidence: 'low' | 'medium' | 'high' | 'neutral',
          code: 'missing_geoip', | 'anonymous_proxy' | 'unknown_location' | 'initial_login' | 'location_history_not_found' | 'invalid_travel' | 'minimal_travel_from_last_login' | 'impossible_travel_from_last_login' | 'substantial_travel_from_last_login' | 'travel_from_last_login'
        } 
      },
       PhoneNumber: {
          code: "requires_verification | ok",
          confidence: "low | medium | high | neutral",
          details: {
	        	lineType: "FIXED_LINE | MOBILE | FIXED_LINE_OR_MOBILE | TOLL_FREE | PREMIUM_RATE | SHARED_COST | VOIP | PERSONAL_NUMBER | PAGER | UAN | UNKNOWN"
	            isValid: true | false,
		        countryCode: 1,
		        number: "+12223334444"
        }
      }
    };
  }
}
```






### Objet assessments

L’objet `assessments` contient des détails sur les trois évaluations de risques individuelles :

1. [NewDevice assessment](#newdevice-assessment)
2. [ImpossibleTravel assessment](#impossibletravel-assessment)
3. [UntrustedIP assessment](#untrustedip-assessment)
4. [PhoneNumber assessment](#phonenumber-assessment)

Chaque évaluation comprend un [pointage de confiance](#confidence-scores), un code qui décrit le résultat de l’évaluation et des informations contextuelles supplémentaires.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

In the unlikely case of an assessment back-end system failure, the assessment code will be `assessment_not_available` and the associated confidence will be `low` because Auth0 defaults to a secure behavior. You can override this scoring using Actions. To learn more, read [Safely handle when Auth0 fails to execute assessors](#safely-handle-when-auth0-fails-execute-assessors).

</Callout>

#### Évaluation NewDevice

L’évaluation `NewDevice` détermine si l’utilisateur se connecte à partir d’un appareil connu et contient les propriétés suivantes :

<table class="table"><thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Description</strong></th>
<th><strong>Type</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>confidence</code></td>
<td>Confidence score calculated by Adaptive MFA.</td>
<td>string</td>
<td><code>low</code>, <code>medium</code>, <code>high</code>, <code>neutral</code></td>
</tr>
<tr>
<td><code>code</code></td>
<td>Evaluation result of the assessment.</td>
<td>string</td>
<td><code>match</code>, <code>partial_match</code>, <code>no_match</code>, <code>initial_login</code>, <code>unknown_device</code>, <code>no_device_history</code>, <code>assessment_not_available</code></td>
</tr>
<tr>
<td><code>details</code></td>
<td>Additional contextual information.</td>
<td>object</td>
<td>Refer to table below.</td>
</tr>
</tbody>
</table>

##### Propriété du code d’évaluation NewDevice

La propriété du `code` d’évaluation `NewDevice` est égale à l’une des valeurs suivantes :

<table class="table"><thead>
<tr>
<th><strong>Value</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>match</code></td>
<td>The property values of the <code>details</code> object are equivalent.</td>
</tr>
<tr>
<td><code>partial_match</code></td>
<td>The property values of the <code>details</code> object are similar.</td>
</tr>
<tr>
<td><code>no_match</code></td>
<td>The property values of the <code>details</code> object are different.</td>
</tr>
<tr>
<td><code>initial_login</code></td>
<td>The user logged in for the first time on the device.</td>
</tr>
<tr>
<td><code>unknown_device</code></td>
<td>Auth0 was unable to attain metadata for the device.</td>
</tr>
<tr>
<td><code>no_device_history</code></td>
<td>There is no login history associated with the device.</td>
</tr>
<tr>
<td><code>assessment_not_available</code></td>
<td>Auth0 could not perform an assessment of the device.</td>
</tr>
</tbody>
</table>

##### Objet de détails d’évaluation NewDevice

Si la valeur de la propriété du `code` équivaut à `match`, `partial_match` ou `no_match`, l’évaluation `NewDevice` contient l’objet `details` avec les propriétés suivantes :

<table class="table"><thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Description</strong></th>
<th><strong>Type</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>device</code></td>
<td>Device of the user.</td>
<td>string</td>
<td><code>known</code>, <code>unknown</code></td>
</tr>
<tr>
<td><code>useragent</code></td>
<td>User agent of the user.</td>
<td>string</td>
<td><code>known</code>, <code>unknown</code></td>
</tr>
</tbody>
</table>

#### Évaluation ImpossibleTravel

L’évaluation `ImpossibleTravel` détermine si l’utilisateur se connecte à partir d’un emplacement qui pourrait indiquer un possible déplacement et contient les propriétés suivantes :

<table class="table"><thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Description</strong></th>
<th><strong>Type</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>confidence</code></td>
<td>Confidence score calculated by Adaptive MFA.</td>
<td>string</td>
<td><code>low</code>, <code>medium</code>, <code>high</code>, <code>neutral</code></td>
</tr>
<tr>
<td><code>code</code></td>
<td>Evaluation result of the assessment.</td>
<td>string</td>
<td><code>minimal_travel_from_last_login</code>, <code>travel_from_last_login</code>, <code>substantial_travel_from_last_login</code>, <code>impossible_travel_from_last_login</code>, <code>invalid_travel</code>, <code>missing_geoip</code>, <code>anonymous_proxy</code>, <code>unknown_location</code>, <code>initial_login</code>, <code>location_history_not_found</code>, <code>assessment_not_available</code></td>
</tr>
</tbody>
</table>

#### Évaluation UntrustedIP

L’évaluation `UntrustedIP` détermine si l’adresse IP de l’utilisateur est présente dans le référentiel d’adresses IP de faible réputation d’Auth0 (« liste de refus ») et contient les propriétés suivantes :

<table class="table"><thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Description</strong></th>
<th><strong>Type</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>confidence</code></td>
<td>Confidence score calculated by Adaptive MFA.</td>
<td>string</td>
<td><code>low</code>, <code>medium</code>, <code>high</code>, <code>neutral</code></td>
</tr>
<tr>
<td><code>code</code></td>
<td>Evaluation result of the assessment.</td>
<td>string</td>
<td><code>not_found_on_deny_list</code>, <code>found_on_deny_list</code>, <code>invalid_ip_address</code>, <code>assessment_not_available</code></td>
</tr>
<tr>
<td><code>details</code></td>
<td>Additional contextual information.</td>
<td>object</td>
<td>Refer to table below.</td>
</tr>
</tbody>
</table>

##### Objet de détails d’évaluation UntrustedIP

Si la valeur de la propriété du `code` d’évaluation `UntrustedIP` est égale à `found_on_deny_list`, l’objet `details` est présent et contient les propriétés suivantes :

<table class="table"><thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Description</strong></th>
<th><strong>Type</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ip</code></td>
<td>IP address of the device.</td>
<td>string</td>
<td>Any valid IPv4 or IPv6 address.</td>
</tr>
<tr>
<td><code>matches</code></td>
<td>Subnet mask that IP address belongs to.</td>
<td>string</td>
<td>Any valid IPv4 or IPv6 subnet mask.</td>
</tr>
<tr>
<td><code>source</code></td>
<td>Name of threat intelligence source for the deny list.</td>
<td>string</td>
<td>Any valid text.</td>
</tr>
<tr>
<td><code>category</code></td>
<td>Category indicating why IP address is untrusted.</td>
<td>string</td>
<td><code>abuse</code>, <code>anonymizer</code>, <code>datacenter</code>, <code>reputation</code>, <code>unroutable</code></td>
</tr>
</tbody>
</table>

##### Propriété de catégorie d’objet détails d’évaluation UntrustedIP

La propriété de `catégorie` d’objet `détails` d’évaluation `UntrustedIP` décrit la raison générale pour laquelle l’authentification multifacteur (MFA) adaptative considère une adresse IP donnée comme étant non fiable et est égale à l’une des valeurs suivantes :

<table class="table"><thead>
<tr>
<th><strong>Value</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>abuse</code></td>
<td>IP address exhibited abusive behaviors or was found to be member of bot nets.</td>
</tr>
<tr>
<td><code>anonymizer</code></td>
<td>IP address belongs to anonymizing services such as VPN providers, open proxies, and TOR exit nodes.</td>
</tr>
<tr>
<td><code>datacenter</code></td>
<td>IP address belongs to cloud hosting providers and colocation datacenters.</td>
</tr>
<tr>
<td><code>reputation</code></td>
<td>IP address has a poor reputation score based on activity.</td>
</tr>
<tr>
<td><code>unroutable</code></td>
<td>IP address is not in any range allocated or delegated by any authorized Internet registry or allowed for public use.</td>
</tr>
</tbody>
</table>

#### Évaluation PhoneNumber

L’évaluation `PhoneNumber` évalue le risque qu’un numéro de téléphone représente pour une transaction entrante et contient les propriétés suivantes :

<table class="table"><thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Description</strong></th>
<th><strong>Type</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>code</code></td>
<td>Describes the evaluation result.</td>
<td>string</td>
<td><code>ok</code>, <code>requires_verification</code>, <code>phone_number_not_provided</code>, <code>assessment_not_available</code></td>
</tr>
<tr>
<td><code>confidence</code></td>
<td>Confidence score calculated by Adaptive MFA.</td>
<td>string</td>
<td><code>low</code>, <code>medium</code>, <code>high</code>, <code>neutral</code></td>
</tr>
<tr>
<td><code>details</code></td>
<td>Additional contextual information.</td>
<td>object</td>
<td>Refer to table below.</td>
</tr>
</tbody>
</table>

##### Objet de détails d’évaluation PhoneNumber

L’objet de `details` d’évaluation `PhoneNumber` contient les propriétés suivantes :

<table class="table"><thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Description</strong></th>
<th><strong>Type</strong></th>
<th><strong>Possible values</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lineType</code></td>
<td>Type of phone line</td>
<td>string</td>
<td><code>FIXED_LINE</code>, <code>MOBILE</code>, <code>FIXED_LINE_OR_MOBILE</code>, <code>TOLL_FREE</code>, <code>PREMIUM_RATE</code>, <code>SHARED_COST</code>, <code>VOIP</code>, <code>PERSONAL_NUMBER</code>, <code>PAGER</code>, <code>UAN</code>, <code>UNKNOWN</code></td>
</tr>
<tr>
<td><code>isValid</code></td>
<td>Returns the validity of the number</td>
<td>boolean</td>
<td><code>true</code>, <code>false</code></td>
</tr>
<tr>
<td><code>countryCode</code></td>
<td>Country code of the phone origin</td>
<td>integer</td>
<td><code>0-999</code></td>
</tr>
<tr>
<td><code>number</code></td>
<td>Phone number</td>
<td>string</td>
<td>Valid number including <code>countryCode</code></td>
</tr>
</tbody>
</table>

## Modèle d’authentification multifacteur (MFA) adaptative

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Actions that trigger MFA take precedence over default Adaptive MFA behavior.

</Callout>

Ce modèle fournit un exemple et un point de départ sur la manière de créer un flux commercial personnalisé en utilisant des évaluations de risques individuelles.

Exiger un modèle d’inscription à la MFA

<table class="table"><thead>
<tr>
<th><strong>Action result</strong></th>
<th><strong>Adaptive MFA action</strong></th>
<th><strong>Outcome</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Unauthorized</td>
<td>Trigger MFA</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>Unauthorized</td>
<td>No MFA Required</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>Trigger MFA</td>
<td>Trigger MFA</td>
<td>Trigger MFA</td>
</tr>
<tr>
<td>Trigger MFA</td>
<td>No MFA Required</td>
<td>Trigger MFA</td>
</tr>
<tr>
<td>No MFA Required</td>
<td>Trigger MFA</td>
<td>Trigger MFA</td>
</tr>
<tr>
<td>No MFA Required</td>
<td>No MFA Required</td>
<td>No MFA Required</td>
</tr>
</tbody>
</table>

## Ce modèle montre comment vous pouvez appliquer l’inscription à la MFA lorsque vous utilisez une stratégie d’authentification multifacteur standard ou adaptative. Il utilise `event.user.multifactor` pour vérifier si l’utilisateur est inscrit à la MFA et, si ce n’est pas le cas, l’invite à le faire.

Actions de cas d’utilisation

### Voici quelques suggestions sur la manière de créer des actions personnalisées en fonction de votre cas d’utilisation.

Effectuer une action si le pointage de confiance total est X

```javascript lines expandable
/**
* Handler that will be called during the execution of a PostLogin flow.
*
* @param {Event} event - Details about the user and the context in which they are logging in.
* @param {PostLoginAPI} api - Interface whose methods can be used to change the behavior of the login.
*/
exports.onExecutePostLogin = async (event, api) => {
  if (event.authentication && 
      event.authentication.riskAssessment && 
      event.authentication.riskAssessment.assessments.NewDevice) {

  // Example condition: prompt MFA only based on the NewDevice 
    // confidence level, this will prompt for MFA when a user is logging in 
    // from an unknown device.
    let shouldPromptMfa;

    switch (event.authentication.riskAssessment.assessments.NewDevice.confidence) {
      case 'low':
      case 'medium':
        shouldPromptMfa = true;
        break;
      case 'high':
        shouldPromptMfa = false;
        break;
      case 'neutral':
        // When this assessor has no useful information about the confidence, 
        // do not prompt MFA.
        shouldPromptMfa = false;
        break;
    }

      // It only makes sense to prompt for MFA when the user has at least one 
      // enrolled MFA factor.
    const canPromptMfa = event.user.multifactor && event.user.multifactor.length > 0;

    if (shouldPromptMfa && canPromptMfa) {
      api.multifactor.enable('any', { allowRememberBrowser: true });
    }
  }
};
```






### Évaluez la propriété `RiskAssessment.confidence`, puis comparez-la aux constantes `high`, `medium` ou `low` :

Réaliser une action si le pointage de confiance est supérieur ou inférieur à X

```javascript lines
/**
* Handler that will be called during the execution of a PostLogin flow.
*
* @param {Event} event - Details about the user and the context in which they are logging in.
* @param {PostLoginAPI} api - Interface whose methods can be used to change the behavior of the login.
*/
exports.onExecutePostLogin = async (event, api) => {
  if (!event.user.multifactor || event.user.multifactor.length == 0) {
    api.multifactor.enable('any', { allowRememberBrowser: true });
  }
};
```






## Les pointages de confiance sont des valeurs discrètes (et non comprises dans une gamme); vous ne pouvez donc pas utiliser d’opérateurs de comparaison (tels que `<` ou `>`) pour évaluer plusieurs valeurs dans une seule condition.

Utilisez plusieurs conditions pour combiner logiquement tous les pointages de confiance que vous souhaitez gérer. Par exemple, si vous souhaitez savoir quand le pointage de confiance est plus élevé que `low`, vérifiez s’il est égale à `medium` ou à `high` :

### Obtenir des détails supplémentaires si le pointage de confiance total est X

L’objet `riskAssessment` est enregistré dans vos journaux de locataire. Vous pouvez afficher les entrées du journal pour voir le pointage d’évaluation des risques et les facteurs déterminants (raisons).

```js lines
exports.onExecutePostLogin = async (event, api) => {
  const { riskAssessment } = event.authentication || {};
  const riskIsMedium = riskAssessment && riskAssessment.confidence === 'medium';

  if (riskIsMedium) {
    // ....
  }
}
```






### Vous pouvez afficher l’objet `riskAssessment` et signaler les résultats à un autre endroit. Par exemple, vous pouvez envoyer un courriel ou sauvegarder un enregistrement dans une base de données externe.

Réaliser une action si une évaluation donnée a un résultat donné

Utilisez l’objet [assessments](#assessments-object) pour accéder aux détails des évaluations individuelles, y compris la propriété du `code` :

```js lines
exports.onExecutePostLogin = async (event, api) => {
  const { riskAssessment } = event.authentication || {};
  const riskIsMediumOrHigh = riskAssessment && 
                                  (riskAssessment.confidence === 'high' || 
                                   riskAssessment.confidence === 'medium');

  if (riskIsMediumOrHigh) {
    // ...
  }
}
```






### Regroupez les évaluations pour obtenir un pointage de confiance total personnalisé.

Utilisez l’objet [assessments](#assessments-object) pour accéder aux détails des évaluations individuelles, puis utilisez la propriété `confidence`, la propriété du `code`, ou les deux.

Pour en savoir plus sur le pointage de confiance personnalisé, consultez [Pointage de confiance personnalisé](#custom-confidence-scoring).

```js lines
exports.onExecutePostLogin = async (event, api) => {
  const { riskAssessment } = event.authentication || {};
  const riskIsLow = riskAssessment && riskAssessment.confidence === 'low';

  if (riskIsLow) {
    // log(externalDatabase, riskAssessment);
  }
}
```






### Bloquer la transaction en cours et renvoyer une erreur et un message si une évaluation donnée a un résultat donné

Utilisez l’objet [assessments](#assessments-object) pour accéder aux détails des évaluations individuelles, y compris la propriété du `code`.

```js lines
exports.onExecutePostLogin = async (event, api) => {
  const { riskAssessment } = event.authentication || {};
  const { ImpossibleTravel } = riskAssessment && riskAssessment.assessments;

  if (ImpossibleTravel.code === 'impossible_travel_from_last_login') {
    // ...
  }
}
```






### Empêchez la transaction de connexion de se terminer en renvoyant la fonction de rappel avec un objet `UnauthorizedError` comme [paramètre d’erreur](/not-found/70zpztJMDHy4q0bwO4Xzgn/error-handling-best-practices). L’objet `UnauthorizedError` définit toujours `error` sur `unauthorized`, mais vous pouvez personnaliser le`error_message` :

Ceci redirige l’utilisateur vers l’URL de rappel de l’application avec les paramètres `error` et `error_message` inclus.

Gérer en toute sécurité les cas où Auth0 ne parvient pas à exécuter les évaluations

### Auth0 attribue automatiquement un pointage de confiance `low` en cas d’échec de l’évaluation des risques.

Pour mitiger ce scénario, utilisez l’objet [assessments](#assessments-object) pour inspecter la propriété du `code` pour chaque évaluation individuelle et vérifier si la valeur est définie sur `assessment_not_available`.

Block the login transaction from completing by returning the callback function with an `UnauthorizedError` object as the [error parameter](/docs/troubleshoot/error-handling-best-practices). The `UnauthorizedError` object always sets `error` to `unauthorized`, but you can customize the `error_message`:

```js lines
exports.onExecutePostLogin = async (event, api) => {
  const { riskAssessment } = event.authentication || {};
  const { ImpossibleTravel } = riskAssessment && riskAssessment.assessments;

  if (ImpossibleTravel.code === 'impossible_travel_from_last_login') {
    return api.access.deny('Login blocked due to impossible travel detected.')
  }
}
```






This redirects the user back to the application's callback URL with the `error` and `error_message` parameters included.

### Safely handle when Auth0 fails to execute assessments

Auth0 automatically assigns a `low` confidence score if there is any sort of failure performing the risk assessment.

To mitigate this scenario, use the [assessments](#assessments-object) object to inspect the `code` property for each individual assessment and check if the value is set to `assessment_not_available`.

## Learn more

* [Enable Adaptive MFA](/docs/secure/multi-factor-authentication/adaptive-mfa/enable-adaptive-mfa)
* [Adaptive MFA Log Events](/docs/secure/multi-factor-authentication/adaptive-mfa/adaptive-mfa-log-events)
* [Actions Triggers: post-login - API Object](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger/post-login-api-object)
* [Actions Triggers: post-login - Event Object](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger/post-login-event-object)