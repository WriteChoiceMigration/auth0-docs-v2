---
og:description: Learn how to revoke a refresh token if it gets compromised using the
  Authentication API, the Management API, or the Auth0 Dashboard.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Révoquer les jetons d'actualisation
og:url: https://auth0.com/docs/
permalink: revoke-refresh-tokens
title: Révoquer les jetons d'actualisation
twitter:description: Learn how to revoke a refresh token if it gets compromised using
  the Authentication API, the Management API, or the Auth0 Dashboard.
twitter:title: Révoquer les jetons d'actualisation
---

Vous pouvez révoquer les jetons d’actualisation si ceux-ci sont compromis. Auth0 s’occupe de révoquer les jetons comme s’ils avaient été potentiellement compromis par des entités malveillantes.

You can also use [refresh token rotation](/security/tokens/refresh-tokens/refresh-token-rotation) so that every time a client exchanges a refresh token to get a new access token, a new refresh token is also returned. Par conséquent, vous n’avez plus de jeton d’actualisation de durée de vie plus longue, lequel pourrait offrir un accès illégitime aux ressources. Puisque les jetons d’actualisation sont constamment échangés et invalidés, le risque est diminué.

Vous pouvez révoquer un jeton d’actualisation de plusieurs manières :

* Dans le Dashboard
* Envoyer une demande au point de terminaison `/oauth/revoke` d’Authentication API
* Envoyer une demande au point de terminaison `/api/v2/device-credentials` de Management API

## Jetons d’actualisation et autorisations

Une autorisation permet à une application d’accéder à une ressource sur une autre entité sans exposer les identifiants de l’utilisateur. Les jetons sont délivrés dans le contexte d’une autorisation, et lorsqu’une autorisation est révoquée, tous les jetons délivrés dans le contexte de cette autorisation le sont également. En revanche, la révocation d’un jeton n’entraîne pas nécessairement la révocation de l’autorisation.

Vous pouvez choisir le comportement de révocation dans les paramètres du locataire du tableau de bord lorsqu’un appareil est dissocié d’un utilisateur dans Auth0, en utilisant Dashboard ou Management API.



1. Rendez-vous à [Dashboard > Paramètres du locataire > Avancés](%24%7Bmanage_url%7D/#/tenant/advanced) et faites défiler jusqu’à la section **Paramètres**.
2. Activez ou désactivez l’option **La révocation du jeton d’actualisation supprime l’autorisation** en fonction de la manière dont vous souhaitez que la révocation fonctionne.

1. Activez cette option pour supprimer l’autorisation sous-jacente lorsque vous révoquez le jeton d’actualisation. Chaque demande de révocation invalide non seulement le jeton en question, mais aussi tous les autres jetons basés sur la même autorisation. Cela signifie que tous les jetons d’actualisation émis pour le même utilisateur, la même application et la même audience seront révoqués.
2. Désactivez l’option pour conserver l’autorisation sous-jacente lorsque vous révoquez le jeton d’actualisation. Lorsqu’un appareil est dissocié, seul le jeton d’actualisation associé est révoqué, ce qui laisse l’autorisation intacte.

## Utiliser le Dashboard

Vous pouvez utiliser Dashboard pour révoquer l’accès autorisé d’un utilisateur à l’application qui a émis le jeton. Cela rend le jeton d’actualisation invalide, ce qui est d’un point de vue fonctionnel identique à la révocation du jeton lui-même.

1. Allez à [Dashboard > Gestion des utilisateurs > Utilisateurs](%24%7Bmanage_url%7D/#/users) et cliquez sur le nom de l’utilisateur à afficher.
2. Sélectionnez l’onglet **Applications autorisées**. Cette page répertorie toutes les applications auxquelles l’utilisateur est autorisé à accéder.
3. Pour révoquer l’accès de l’utilisateur à une application autorisée, et donc invalider le jeton d’actualisation, cliquez sur **Révoquer**.

## Utiliser Authentication API

Pour révoquer un jeton d’actualisation, envoyez une demande `POST` à `https://${account.namespace}/oauth/revoke`.

Le point de terminaison `/oauth/revoke` révoque toute l’autorisation, pas seulement un jeton en particulier. Utilisez le point de terminaison `/api/v2/device-credentials` pour révoquer les jetons d’actualisation. L’API valide d’abord les identifiants de l’application, puis vérifie si le jeton a été fourni à l’application qui fait la demande de révocation. Si cette validation échoue, la demande est refusée et l’application est informée de l’erreur. Ensuite, l’API invalide le jeton. L’invalidation a lieu immédiatement et le jeton ne peut plus être utilisé après la révocation. Chaque demande de révocation invalide tous les jetons qui ont été émis pour la même autorisation.



Où :



L’application doit correspondre à celle pour laquelle le jeton d’actualisation a été émis.

### Révoquer les jetons sans le secret client

Pour les applications qui ne peuvent pas garder le secret du client en sécurité (comme les applications natives), le point de terminaison `/oauth/revoke` prend en charge l’accès sans secret client. Toutefois, la propriété `tokenEndpointAuthMethod` de l’application elle-même doit être définie sur `none`. Vous pouvez changer la valeur `tokenEndpointAuthMethod`, dans [Dashboard > Applications > Applications](%24%7Bmanage_url%7D/#/applications), ou avec Management API.

Si la demande est valide, le jeton d’actualisation est révoqué et la réponse est `HTTP 200`, avec un corps de réponse vide. Dans le cas contraire, le corps de la réponse contient le code d’erreur et la description.



Réponses possibles :



## Utiliser Management API

Pour révoquer un jeton d’actualisation à l’aide d’Auth0 Management API, vous avez besoin de l’`id` du jeton d’actualisation que vous souhaitez révoquer. Pour obtenir la liste des jetons d’actualisation existants, appelez [](/api/management/v2#!/Device_Credentials/get_device_credentials)[](https://auth0-docs-staging.herokuapp.com/docs/api/management/v2#!/Device_Credentials/get_device_credentials)[le point de terminaison](/api/management/v2#!/Device_Credentials/get_device_credentials)`/api/v2/device-credentials`, en indiquant `type=refresh_token` et `user_id` avec un jeton d’accès contenant la permission `read:device_credentials`. Pour limiter les résultats, vous pouvez également indiquer le `client_id` associé au jeton (s’il est connu).



Le corps de la réponse:



Pour révoquer un jeton d’actualisation, appelez le point de terminaison `/api/v2/device-credentials` avec un jeton d’accès contenant la permission `delete:device_credentials` et la valeur de l’ID obtenu plus haut :



La réponse sera `HTTP 204: The credential no longer exists`. 

## Considérations et limitations

Avec le [flux d’autorisation d’appareil](/login/flows/device-authorization-flow), la seule manière de forcer un appareil à se réautoriser consiste à révoquer le jeton d’actualisation attribué à cet appareil. Consultez [Dissocier les appareils des utilisateurs](/users/unlink-devices-from-users) pour en savoir plus. L’appareil ne sera pas obligé de se réautoriser tant que le jeton d’accès actuel n’aura pas expiré et que l’application n’aura pas essayé d’utiliser le jeton d’actualisation révoqué.

Avec la [rotation des jetons d’actualisation](/security/tokens/refresh-tokens/refresh-token-rotation), si un jeton déjà invalidé est utilisé, tous les autres jetons d’actualisation émis après qu’il ait été invalidé seront immédiatement révoqués, exigeant ainsi une nouvelle authentification de la part de l’utilisateur final.

* Utilisez le [point de terminaison](/api/authentication#revoke-refresh-token)`/oauth/revoke` d’Authentication API pour révoquer un jeton d’actualisation. Ce point de terminaison ne supprime pas l’autorisation sous-jacente. Vous pouvez modifier ce comportement pour supprimer également l’autorisation sous-jacente dans Dashboard : [Dashboard > Paramètres du locataire > Avancés](%24%7Bmanage_url%7D/#/tenant/advanced). Faites défiler jusqu’à **Paramètres** et activez l’option **La révocation du jeton d’actualisation supprime l’autorisation**.
* Utilisez le [point de terminaison](/api/management/v2#!/Device_Credentials/get_device_credentials)`/api/v2/device-credentials` de Management API pour révoquer des jetons d’actualisation.