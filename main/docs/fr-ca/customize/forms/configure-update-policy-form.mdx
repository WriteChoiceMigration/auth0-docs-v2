---
og:description: Configure an update policy form using Forms for Actions
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 'Cas d’utilisation : Configurer un formulaire de politique de mise à jour
  à l’aide des formulaires.'
og:url: https://auth0.com/docs/
permalink: configure-update-policy-form
title: 'Cas d’utilisation : Configurer un formulaire de politique de mise à jour à
  l’aide des formulaires.'
twitter:description: Configure an update policy form using Forms for Actions
twitter:title: 'Cas d’utilisation : Configurer un formulaire de politique de mise
  à jour à l’aide des formulaires.'
---

Les formulaires pour Actions vous permettent de créer des flux de politiques de confidentialité personnalisés et de stocker le consentement avec l’objet `app_metadata` .

Les sections ci-dessous décrivent comment créer un formulaire de politique de mise à jour en utilisant des nœuds et des flux, ainsi que les étapes pour ajouter votre formulaire à une action [post-connexion](/signup-and-login-triggers/login-trigger).



### Configurer le nœud d’étape

Le nœud d’étape est l’interface graphique visible par les utilisateurs. Ajoutez des [champs](/nodes-and-components) au nœud d’étape pour recueillir la nouvelle valeur d’acceptation de l’accord en suivant ces étapes :

1. Faites glisser un champ **Rich text (Texte enrichi)** depuis le **Components menu (Menu composants)** dans le nœud **d’étape**.

* **Rich text (Texte enrichi)**: Saisissez une description des mises à jour de vos politiques de confidentialité.
* Sélectionnez **Save (Enregistrer)**.
2. Faites glisser un champ **Legal (Légal)** dans le nœud **d’étape** .

* **Identification** : Saisissez `privacy_policies`.
* **Obligatoire** : Cochez la case.
* **Légal** : Saisissez `J’accepte la politique de confidentialité`.
* Sélectionnez **Save (Enregistrer)**.
3. Sélectionnez **Publish (Publier)** pour enregistrer.

### Configurez le **nœud Flow**

Ajoutez un node **Flow** après le nœud **d’étape** pour mettre à jour les `app_metadata` et reprendre le flux d’authentification en suivant ces étapes :

1. Sélectionnez **Flow (Flux)** en bas de Form Editor (Éditeur de formulaire).
2. Supprimez le lien existant entre les nœuds **Step (Étape)** et **Ending Screen (Écran de fin)**.
3. Sélectionnez le nouveau **Flow (Flux)** > **Click to add a flow (Cliquer pour ajouter un flux)** > **Create a new flow (Créer un nouveau flux).**

* Entrez `Update app_metadata (Mettre à jour app_metadata)` dans le champ **Name (Nom)**.
* Sélectionnez **Create (Créer)**.
* Sélectionnez **Save (Enregistrer)**.
4. Liez le nœud **Flow (Flux)** aux nœuds **Step (Étape)** et **Ending Screen (Écran de fin)** comme illustré ci-dessous.
5. Sélectionnez **Publish (Publier)** pour enregistrer.

Ajoutez une action de mise à jour d’utilisateur Auth0 au flux en suivant ces étapes :

1. Sélectionnez le **flux****Update app_metadata (Mise à jour de app_metadata)** >** Edit flow (Modifier le flux)** pour ouvrir l’éditeur de flux dans un nouvel onglet.
2. Sous l’Action **Start (Démarrage)**, sélectionnez l’icône **+** pour ajouter une Action **Update user (Mise à jour de l’utilisateur)** . Remplissez les champs ci-dessous, puis sélectionnez **Save (Enregistrer)** pour continuer.

* **Connection** :  dans la liste déroulante, sélectionnez la connexion au coffre-fort de votre application de communication entre machines.
* **User ID** (ID utilisateur) : Saisissez `{{context.user.user_id}}`.
* **Corps** : Copiez et collez le code suivant pour mettre à jour les app_metadata avec les propriétés privacy_policies et privacy_policies_timestamp.
* Sélectionnez **Save (Enregistrer)**.
3. Sélectionnez **Publish (Publier)** pour enregistrer.



## Récupérer le code de rendu du formulaire

Récupérez votre code de rendu du formulaire pour afficher visuellement le formulaire avec une Action post-connexion personnalisée en suivant ces étapes :

* Dans l’éditeur de formulaire, sélectionnez **<> Render (Rendre)**.
* Sélectionnez** Copy (Copier)**.

## Créer une action post-connexion

Créez une action post-connexion pour afficher votre formulaire en suivant ces étapes :

1. Naviguez vers **Auth0 Dashboard > Actions > Flows (Flux) > Login (Connexion).**
2. Sélectionnez l’icône **+** et choisissez **Build from scratch (Construire à partir de zéro)**:

* **Name (Nom)** : Saisissez `Render Update Policy Form (Formulaire de politique de mise à jour du rendu)`.
* **Déclencheur** : Sélectionnez `Login / Post Login (Connexion / Post-connexion)`.
* **Runtime (Temps d’exécution)** : Sélectionnez la version recommandée.
3. Sélectionnez **Create (Créer)**.

Pour configurer l’action post-connexion.

1. Supprimez le code existant dans l’éditeur de code.
2. Collez le code de rendu du formulaire dans l’éditeur de code.
3. Modifiez le code pour définir la logique conditionnelle d’affichage du formulaire.
4. Sélectionnez **Deploy (Déployer)**.
5. Glissez et déposez l’Action **Render Update Policy Form (Formulaire de mise à jour de la politique de rendu) **dans le flux de **Login (Connexion)** .
6. Sélectionnez **Apply (Appliquer).**

### **Test de mise en œuvre**

Testez la mise en œuvre en suivant les étapes ci-dessous :

1. Se connecter avec un utilisateur existant dont l’attribut `privacy_policies` de `app_metadata` n’a pas de valeur.
2. L’action post-connexion dans le flux de connexion rendra le formulaire et demandera l’approbation.
3. Sélectionnez **Auth0 Dashboard > User Management (Gestion des utilisateurs) > Users (Utilisateurs), **localisez l’utilisateur et vérifiez que l’attribut `app_metadata``privacy_policies` contient une valeur `true` et un horodatage.