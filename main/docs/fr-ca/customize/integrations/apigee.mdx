---
og:description: Learn how to use Auth0 to secure access to API proxies developed and
  managed by Apigee Edge.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Sécuriser Apigee avec Auth0.
og:url: https://auth0.com/docs/
permalink: apigee
title: Sécuriser Apigee avec Auth0.
twitter:description: Learn how to use Auth0 to secure access to API proxies developed
  and managed by Apigee Edge.
twitter:title: Sécuriser Apigee avec Auth0.
---

Si vous utilisez Apigee Edge pour développer et gérer vos API de services dorsaux, vous pouvez utiliser Auth0 pour sécuriser l’accès à vos proxies API.

## Prérequis

Avant de commencer, vous allez devoir :

1. Have an Apigee Edge API proxy that needs to be secured. To learn more, read Apigee's [Get Started](https://docs.apigee.com/api-platform/get-started/get-started) article.
2. [Sign up](https://auth0.com/signup) for an account with Auth0.

Le processus de création de votre proxy API ne s’inscrit pas dans le cadre de cet article. Au lieu de cela, nous nous concentrerons sur la sécurisation d’un proxy API que vous avez déjà en utilisant Auth0.

## Créer une API personnalisée.

First, [register your Apigee Edge API Proxy using the Dashboard](/docs/get-started/auth0-overview/set-up-apis). Auth0 needs to recognize Apigee as an <Tooltip tip="Audience: Unique identifier of the audience for an issued token. Named aud in a token, its value contains the ID of either an application (Client ID) for an ID Token or an API (API Identifier) for an Access Token." cta="View Glossary" href="/docs/glossary?term=audience">audience</Tooltip> to make sure that any <Tooltip tip="Audience: Unique identifier of the audience for an issued token. Named aud in a token, its value contains the ID of either an application (Client ID) for an ID Token or an API (API Identifier) for an Access Token." cta="View Glossary" href="/docs/glossary?term=Access+Tokens">Access Tokens</Tooltip> issued are issued with the correct audience. The user authenticates with Auth0 via the application, and the application specifies this audience value to make sure that the Access Token possesses the right scopes for the audience provided.

Vous devez faire ce qui suit :

1. Provide a name for your API (e.g., `apigee`).
2. Provide an identifier for your API: `urn:apigee:target:api`
3. Choose a signing algorithm: `RS256` (default)

Lorsque vous enregistrez votre proxy API Apigee Edge, Auth0 crée également une application **Communication entre machines** en votre nom et lui donne un nom correspondant à l’API que vous avez enregistrée. Vous pouvez utiliser cette application pour les tests; elle est automatiquement configurée pour être autorisée à appeler votre API.

## Notez les variables de l’application de test.

Passez à l’application de test créée lors de l’enregistrement de votre API et notez les variables qui ont été définies pendant le processus d’enregistrement de votre API et de création de l’application de communication entre machines associée. Vous en aurez besoin pour les étapes suivantes de ce tutoriel.

1. Navigate to the [Auth0 Dashboard > Applications](https://manage.auth0.com/#/applications)], and click the name of your test application.
2. Scroll down and make note of the following variables:

   * Audience de l'API
   * Domaine Auth0
   * ID client
   * URL de rappel autorisées : Les URL vers lesquelles l’utilisateur peut être redirigé après l’authentification. Vous pouvez spécifier plusieurs URL en les séparant par des virgules. (Cela est généralement fait pour gérer différents environnements où chacun a besoin de ses propres redirections.)

## Mettre en œuvre le Flux des identifiants client

Vous êtes désormais prêt à mettre en œuvre le Flux des identifiants client pour demander les jetons d’accès que vous pouvez fournir à Apigee Edge. Notez que dans ce scénario, vous utiliserez le Flux des identifiants client, car vous utilisez Apigee avec vos API de services dorsaux, ce qui représente une application Machine-Machine (M2M). D’autres scénarios peuvent nécessiter l’utilisation de flux différents.

To learn how to log in and get an Access Token that can be used to call Apigee Edge, see [Call API Using the Client Credentials Flow](/docs/get-started/authentication-and-authorization-flow/client-credentials-flow/call-your-api-using-the-client-credentials-flow).

## Valider le jeton d’accès

Une fois que vous avez demandé et reçu un jeton d’accès d’Auth0, vous pourrez l’utiliser pour appeler le proxy API que vous avez configuré avec Edge.

When you [use your Access Token](https://docs.apigee.com/api-platform/security/oauth/using-access-tokens.html), the first thing Apigee Edge will do is [verify the token](https://docs.apigee.com/api-platform/security/oauth/using-access-tokens.html#addingaverifyaccesstokenpolicy).

Auth0 Access Tokens are <Tooltip tip="JSON Web Token (JWT): Standard ID Token format (and often Access Token format) used to represent claims securely between two parties." cta="View Glossary" href="/docs/glossary?term=JSON+Web+Tokens">JSON Web Tokens</Tooltip> (JWTs), so you can take advantage of Apigee Edge's Verify JWT policy to do this. To learn more, read Apigee's [Verify JWT policy signed with the RS256 algorithm](https://docs.apigee.com/api-platform/reference/policies/verify-jwt-policy#verify-a-jwt-signed-with-the-rs256-algorithm) article.

Apigee Edge vérifiera le jeton avant que quoi que ce soit d’autre ne se produise; si le jeton est rejeté, alors tout le traitement s’arrêtera et Edge renverra une erreur au client.

## Tests

To test your implementation, make an HTTP POST call to Apigee Edge with the Auth0-issued Access Token included in the header of the call. You can learn how by reviewing Apigee's [Calling the protected API](https://docs.apigee.com/api-platform/security/oauth/oauth-20-client-credentials-grant-type.html#callingtheprotectedapi) article.

Lorsque vous recevez une réponse favorable, extrayez le jeton et examinez-le pour vérifier l’inclusion des demandes requises/demandées des utilisateurs.