---
og:description: How to secure the API Gateway Tutorial using Cognito instead of IAM
  roles and policies.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Sécuriser AWS API Gateway à l’aide de Cognito
og:url: https://auth0.com/docs/
permalink: aws-api-gateway-cognito
title: Sécuriser AWS API Gateway à l’aide de Cognito
twitter:description: How to secure the API Gateway Tutorial using Cognito instead
  of IAM roles and policies.
twitter:title: Sécuriser AWS API Gateway à l’aide de Cognito
---

Au lieu d’utiliser les rôles et les politiques IAM pour sécuriser votre API, vous pouvez le faire en utilisant les groupes d’utilisateurs dans Amazon Cognito.

Please [create the appropriate Amazon Cognito User Pools](http://docs.aws.amazon.com/cognito/latest/developerguide/setting-up-cognito-user-identity-pools.html) prior to beginning this tutorial.

## Intégrer le groupe d’utilisateurs Cognito à l’API Gateway

Go to the [Amazon API Gateway Console](https://console.aws.amazon.com/apigateway). Using the left-hand navigation bar, select the **SecurePets** API.

Sélectionnez ensuite **Autorisateurs** pour l’API **SecurePets**.

Dans la colonne Autorisateurs, près du centre de l’écran, sélectionnez **Créer** et indiquez que vous créez un **Autorisateur de groupe d’utilisateurs Cognito**.

Configurez votre autorisateur en suivant les étapes suivantes :

1. Choose the **Cognito region** in which you created your User Pool.
2. Customize the **Authorizer name** field, if desired (it will be automatically populated with the name of the chosen User Pool, so you can opt to leave it as is)
3. Customize the **Identity token source** field. By default, this field is set to `method.request.header.Authorization`, which sets the name of the incoming request header containing the API caller's identity token to `Authorization`.
4. If desired, add a regular expression to the **App client ID regex** field to validate client IDs associated with the User Pool.

When you’ve finished configuring your authorizer, click **Create** to integrate the User Pool with your API.

## Activer l’autorisateur de groupe d’utilisateurs dans les méthodes

Pour chaque méthode pour laquelle vous souhaitez que le groupe d’utilisateurs joue le rôle d’autorisateur, vous devez autoriser le groupe d’utilisateurs à le faire pour cette méthode particulière.

Pour activer l’autorisateur du groupe d’utilisateurs sur la méthode `GET`:

1. After selecting the SecurePets API, select the `GET` method listed under `/pets`.
2. Click on **Method Request**.
3. Under Authorization Settings, click on the **edit icon** next to the Authorization field.
4. Choose the appropriate Cognito User Pool authorizer from the list. Click the **checkmark icon** to save your selection.

Répétez ce processus pour toutes les méthodes supplémentaires pour lesquelles vous souhaitez que le groupe d’utilisateurs Cognito agisse en tant qu’autorisateur (`GET` et `PURCHASE` pour `/pets`, ainsi que `POST` pour `/purchase`).