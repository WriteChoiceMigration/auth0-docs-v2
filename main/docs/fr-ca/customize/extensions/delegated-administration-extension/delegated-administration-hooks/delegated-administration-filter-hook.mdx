---
og:description: Learn how to use the Filter Hook with the Delegated Administration
  Extension.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 'Administration déléguée : Hook de filtrage'
og:url: https://auth0.com/docs/
permalink: delegated-administration-filter-hook
title: 'Administration déléguée : Hook de filtrage'
twitter:description: Learn how to use the Filter Hook with the Delegated Administration
  Extension.
twitter:title: 'Administration déléguée : Hook de filtrage'
---

Par défaut, les utilisateurs ayant le rôle **Administrateur délégué - Utilisateur** voient tous les utilisateurs associés au compte Auth0. Cependant, vous pouvez filtrer les données que les utilisateurs voient en utilisant le **Hook de filtrage**.

## Contrat Hook

* **ctx** : Objet de contexte.
* **callback(error, query)**: Callback to which you can return an error or the lucene query used when filtering the users. The extension will send this query to the [**Get Users** endpoint](https://auth0.com/docs/api/management/v2#!/Users/get_users) of the <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>.

To learn more about the lucene query, review [User Search Query Syntax](/docs/manage-users/user-search/user-search-query-syntax).

### Exemples de cas d’utilisation

Kelly gère le département des finances; elle ne doit voir que les utilisateurs qui font également partie du service financier. Nous filtrerons les utilisateurs en fonction du service de l’utilisateur actuel (qui, dans ce cas, est le service financier et Kelly, respectivement).

```javascript lines
function(ctx, callback) {
  // Get the department from the current user's metadata.
  var department = ctx.request.user.app_metadata && ctx.request.user.app_metadata.department;
  if (!department || !department.length) {
    return callback(new Error('The current user is not part of any department.'));
  }

  // The IT department can see all users.
  if (department === 'IT') {
    return callback();
  }

  // Return the lucene query.
  return callback(null, 'app_metadata.department:"' + department + '"');
}
```






### Remplacement du moteur de recherche

Vous pouvez remplacer le moteur de recherche par défaut en précisant votre choix dans la réponse.

```javascript lines
// Return the lucene query.
return callback(null, { query: 'app_metadata.department:"' + department + '"', searchEngine: 'v2' });
```






## Remarques

N’utilisez pas de guillemets simples, de guillemets doubles ou d’autres caractères spéciaux (tels que **+** ou **-**) dans les termes sur lesquels vous souhaitez effectuer un filtrage. Cela peut entraîner des problèmes avec la requête Lucene.

Si vous utilisez plusieurs opérateurs comme OR, NOT, ou AND, utilisez ces paramètres de recherche entre parenthèses [`()`] pour délimiter quel opérateur est en vigueur à quel endroit.

Si vous ne configurez pas ce hook, la recherche renvoie **tous les utilisateurs**.

## Learn more

* [Delegated Administration: Access Hook](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks/delegated-administration-access-hook)
* [Delegated Administration: Memberships Query Hook](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks/delegated-administration-memberships-query-hook)
* [Delegated Administration: Settings Query Hook](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks/delegated-administration-settings-query-hook)
* [Delegated Administration: Write Hook](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks/delegated-administration-write-hook)