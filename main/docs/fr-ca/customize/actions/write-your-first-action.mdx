---
og:description: Learn how to write an Action, which includes choosing a flow, creating
  an Action and configuring it, and binding it to the flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Write Your First Action (Programmer votre première action)
og:url: https://auth0.com/docs/
permalink: write-your-first-action
title: Write Your First Action (Programmer votre première action)
twitter:description: Learn how to write an Action, which includes choosing a flow,
  creating an Action and configuring it, and binding it to the flow.
twitter:title: Write Your First Action (Programmer votre première action)
---

Ce guide vous explique comment créer et déployer votre première action à l’aide du Auth0 Dashboard. Lorsque vous aurez terminé, vous aurez compris la fonctionnalité de base qui sera utilisée avec toutes les actions et le modèle de programmation vous sera familier. Le contenu de ce guide constitue la base même de l’écriture de n’importe quelle action, indépendamment de son objectif ou de son flux.

## L’objectif : notifier Slack lorsque l’utilisateur se connecte

Vous créez une action qui envoie un message à un canal Slack lorsqu’un utilisateur se connecte. Ce tutoriel utilise le déclencheur Post-connexion en exemple, mais les informations fournies ici s’appliquent à tous les types de déclencheurs.

Pour accomplir cette tâche, procédez comme suit  :

* [Créez une action](#create-an-action)
* [Ajoutez un secret](#add-a-secret)
* [Ajoutez une dépendance](#add-a-dependency)
* [Enregistrez le brouillon](#save-the-draft)
* [Ajoutez une logique personnalisée](#add-custom-logic)
* [Testez une action](#test-an-action)
* [Déployez une action](#deploy-the-action)
* [Joignez une action à un flux](#attach-the-action-to-a-flow)
* [Voir les résultats d’une action dans les journaux des locataires](#observe-actions-in-tenant-logs)

## Prérequis

Comme cette action enverra des messages à un canal Slack, vous devez [créer un lien de rappel HTTP entrant pour un espace de travail Slack](https://api.slack.com/messaging/webhooks). Une fois que vous aurez obtenu l’URL du lien de rappel HTTP Slack, vous pourrez lire la suite de ce guide.

## Créer une action

Pour faire fonctionner une action dans un flux spécifique, vous devez d’abord créer l’action et ensuite l’ajouter à un flux.

1. Allez à [Auth0 Dashboard > Actions > Bibliothèque](https://manage.auth0.com/#/actions/library), puis sélectionnez **Créer une action** > **Démarrer de zéro**.
2. Saisissez un **Nom** et sélectionnez le déclencheur **Connexion/post-connexion** puisque vous ajouterez une action au flux de connexion, puis sélectionnez **Créer**.

L’éditeur de code d’actions s’affiche :

## Créer une action à partir d’un modèle

La galerie des modèles d’actions offre une variété de modèles de démarrage pour la création d’une action. Pour créer une action à partir d’un modèle :

1. Allez à [Auth0 Dashboard > Actions > Bibliothèque](https://manage.auth0.com/#/actions/library), puis sélectionnez **Créer une action**.
2. Sélectionnez **Choisir un modèle**.
3. Sélectionnez le modèle que vous souhaitez utiliser pour construire une action.
4. Vous devriez maintenant voir un aperçu en lecture seule du code contenu dans le modèle. Pour continuer, sélectionnez **Utiliser ce modèle**
5. Saisissez un nom et sélectionnez **Créer**.

## Ajouter un secret

Chaque action peut contenir des valeurs de secret, qui permettent de conserver des informations sensibles, comme des jetons d’accès et des clés d’API. Stockons l’URL du lien de rappel HTTP Slack en tant que secret.

1. Sélectionnez l’icône en forme de clé dans la barre latérale gauche de l’éditeur de code.
2. Sélectionnez **Ajouter le secret**.
3. Donnez au secret le nom suivant : `SLACK_WEBHOOK_URL`.
4. Collez l'URL du lien de rappel HTTP fourni par Slack et sélectionnez **Créer**.

Vous verrez que le secret a été ajouté à l’action et que vous pouvez utiliser le nouveau secret au moyen d’un code intelligent complet en tapant `event.secrets`.





## Ajouter une dépendance

Vous allez utiliser le package [`@slack/webhook``npm`](https://www.npmjs.com/package/@slack/webhook) pour faciliter l’envoi d’un message à Slack. Vous pouvez utiliser pratiquement n’importe quel package `npm` public dans une action, à condition qu’il puisse être installé sans dépendre de [modules complémentaires natifs](https://www.npmjs.com/package/node-gyp).

Pour ajouter la dépendance :

1. Sélectionnez l’icône Dépendance (icône en forme de cube) dans la barre latérale.
2. Pour le **Nom**, saisissez `@slack/webhook`.

Par défaut, votre action utilisera la dernière version de la dépendance au moment où elle a été ajoutée.
3. Sélectionnez **Créer**, et la dépendance doit être ajoutée à l’action :



## Enregistrer le brouillon

Sélectionnez **Enregistrer le brouillon**. Votre action est enregistrée, mais pas encore exécutée dans le cadre d’un flux d’utilisateurs. Avec les actions, vous avez la possibilité de créer, de modifier et de tester des actions avant qu’elles n’affectent le trafic de votre locataire Auth0. Si le comportement de l’action vous convient, vous pouvez déployer l’action et l’ajouter à un flux ultérieurement.

## Ajouter une logique personnalisée

Maintenant que l’action a été configurée avec un secret et une dépendance, passons à l’écriture du code.

Chaque action possède un objet d’événement qui contient des informations contextuelles en lecture seule relatives au déclencheur associé. Si vous commencez à taper `event.` dans l’éditeur, toutes les propriétés possibles de l’événement devraient s’afficher. Pour en savoir plus sur les informations relatives à chaque déclencheur, consultez la section [Explorer les flux et les déclencheurs](/actions/explore-triggers).

Utilisons notre action pour notifier Slack. Ajoutez ce code à votre action :



Sélectionnez **Enregistrer le brouillon** pour enregistrer votre action.

## Tester l’action

Avant d’exécuter cette action dans votre locataire avec un trafic utilisateur réel, testez-la pour vous assurer qu’elle se comporte comme prévu.

1. Sélectionnez l’icône Test (triangle) dans la barre latérale. Dans la section Payload (Charge utile), vous verrez des données JSON modifiables relatives au déclencheur que vous avez sélectionné lors de la création de l’action.
2. Sélectionnez le bouton **Exécuter**, et un message s’affichera dans votre canal Slack.

## Déployer l’action

Maintenant que nous sommes certains que l’action fonctionne comme prévu, il est temps de la déployer.

Sélectionnez **Déployer**. Le déploiement d’une action prend une capture d’écran de l’action à ce moment-là et l’enregistre en tant que **Version de l’action**.

Sélectionnez **Historique des versions**, et vous devriez voir l’action enregistrée comme étant la version 1.

Vous êtes maintenant libre de mettre à jour votre action et de la sauvegarder sans affecter la Version 1 de votre action. Auth0 exécutera uniquement la version actuellement déployée d’une action, par conséquent, jusqu’à ce que vous déployiez à nouveau une action, la Version 1 sera exécutée par Auth0.

## Attacher l’action à un flux

La dernière étape de configuration d’une nouvelle action, de manière à ce qu’elle s’exécute dans le cadre du trafic de votre locataire, consiste à la joindre à un flux.

1. Allez à [Auth0 Dashboard > Actions > Flux](%24%7Bmanage_url%7D/#/actions/triggers) pour voir la liste des flux possibles.
2. Sélectionnez le [Déclencheur de connexion](/signup-and-login-triggers/login-trigger) et faites glisser `my-slack-action` dans le flux.
3. Sélectionnez **Appliquer**.

L’action s’exécute maintenant dans votre locataire pour un trafic d’utilisateurs réels. Si vous souhaitez disposer d’un environnement de test plus robuste, envisagez de [mettre en place plusieurs environnements Auth0](/get-started/create-tenants/set-up-multiple-environments).

## Observer les actions dans les journaux des locataires

Maintenant que votre action s’exécute dans le cadre du flux Connexion, Auth0 capture des informations sur chaque exécution d’action dans les journaux du locataire. Pour l’afficher, allez à [Auth0 Dashboard > Surveillance > Journaux](%24%7Bmanage_url%7D/#/logs) et sélectionnez un événement **Connexion réussie**.

Vous devriez voir un aperçu des **Détails de l’action** qui contient des informations sur toutes les actions qui ont été exécutées dans le cadre de ce flux.

## Prochaines étapes

Maintenant que vous avez écrit votre première action, consultez [Explorer les flux et les déclencheurs](/actions/explore-triggers) pour apprendre à effectuer certaines tâches courantes à l’aide d’actions.