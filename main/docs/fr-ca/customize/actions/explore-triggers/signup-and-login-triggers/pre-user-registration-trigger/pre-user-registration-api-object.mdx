---
og:description: Learn about the pre-user-registration Action trigger's API object.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 'Déclencheurs d’actions : pre-user-registration - Objet API'
og:url: https://auth0.com/docs/
permalink: pre-user-registration-api-object
title: 'Déclencheurs d’actions : pre-user-registration - Objet API'
twitter:description: Learn about the pre-user-registration Action trigger's API object.
twitter:title: 'Déclencheurs d’actions : pre-user-registration - Objet API'
---

L’objet API pour le déclencheur d’actions de pré-enregistrement de l’utilisateur inclut :

## `api.access`

Modifier l’accès de l’utilisateur qui se connecte, par exemple en rejetant la tentative d’enregistrement.

### `api.access.deny(reason, userMessage)`

Refuser à l’utilisateur la possibilité de s’inscrire. Le processus d’inscription s’arrêtera immédiatement après la réalisation de cette Action et aucune autre Action ne sera exécutée.

Renvoie une référence à l’objet `api`.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reason</code></td>
<td>
<p>
<em>String</em>. An internal reason describing why this registration attempt is being denied. This value
   will appear in tenant logs.
          </p>
</td>
</tr>
<tr>
<td><code>userMessage</code></td>
<td>
<p>
<em>String</em>. A human-readable explanation for rejecting the registration attempt. This may be presented
   directly in end-user interfaces.
          </p>
</td>
</tr>
</tbody>
</table>

## `api.cache`

Stockez et récupérez des données qui persistent entre les exécutions.

### `api.cache.delete(key)`

Supprime un enregistrement décrivant une valeur mise en cache à la clé fournie, si elle existe.

Returns a `CacheWriteResult` object with  `type: "success"` if a value was removed from the cache. A failed operation returns `type: "error"`. For errors, the returned object will have a
`code` property that indicates the nature of the failure.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>key</code></td>
<td>
<p><em>String</em>. The key of the record stored in the cache.</p>
</td>
</tr>
</tbody>
</table>

### `api.cache.get(key)`

Retrieve a record describing a cached value at the supplied
`key`, if it exists. If a record is found, the cached value can
be found at the `value` property of the returned object.

Returns a cache record if an item is found in the cache for the supplied
`key`. Cache records are objects with a
`value` property holding the cached value as well as an
`expires_at` property indicating the maximum expiry of
the record in milliseconds since the Unix epoch.

**Important:**
This cache is designed for short-lived, ephemeral data. Items may not be
available in later transactions even if they are within their supplied their
lifetime.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>key</code></td>
<td>
<p><em>String</em>. The key of the record stored in the cache.</p>
</td>
</tr>
</tbody>
</table>

### `api.cache.set(key, value, [options])`

Stockez ou mettez à jour une valeur de chaîne de caractères dans le cache à la clé spécifiée.

Values stored in this cache are scoped to the Trigger in which they are set.
They are subject to the
[Actions Cache Limits](/docs/customize/actions/limitations).

Values stored in this way will have lifetimes of up to the specified
`ttl` or `expires_at` values. If no lifetime is
specified, a default of lifetime of 15 minutes will be used. Lifetimes may
not exceed the maximum duration listed at
[Actions Cache Limits](/docs/customize/actions/limitations).

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>key</code></td>
<td>
<p><em>String</em>. The key of the record stored in the cache.</p>
</td>
</tr>
<tr>
<td><code>value</code></td>
<td>
<p><em>String</em>. The value of the record to be stored.</p>
</td>
</tr>
<tr>
<td><code>options</code></td>
<td>
<p><em>Optional object</em>. Options for adjusting cache behavior.</p>
</td>
</tr>
<tr>
<td><code>options.expires_at</code></td>
<td>
<p>
<em>Optional number</em>. The absolute expiry time in milliseconds
            since the unix epoch. While cached records may be evicted earlier,
            they will never remain beyond the the supplied
            <code>expires_at</code>.
          </p>
<p>
<em>Note:</em> This value should not be supplied if a value was also
            provided for <code>ttl</code>. If both options are supplied, the
            earlier expiry of the two will be used.
          </p>
</td>
</tr>
<tr>
<td><code>options.ttl</code></td>
<td>
<p>
<em>Optional number</em>. The time-to-live value of this cache entry
            in milliseconds. While cached values may be evicted earlier, they
            will never remain beyond the the supplied <code>ttl</code>.
          </p>
<p>
<em>Note:</em> This value should not be supplied if a value was also
            provided for <code>expires_at</code>. If both options are supplied,
            the earlier expiry of the two will be used.
          </p>
</td>
</tr>
</tbody>
</table>

## `api.user`

Modifiez les métadonnées de l’utilisateur qui s’enregistre.

### `api.user.setUserMetadata(name, value)`

Définissez les métadonnées pour l’utilisateur qui s’inscrit. Les données stockées dans user_metadata sont visibles et modifiables par l’utilisateur.

Remarque : ce déclencheur effectue un appel à Management API, consommant la limite anti-attaques de Management API. Si cette demande atteint la limite anti-attaques et échoue dans sa nouvelle tentative dans la fenêtre de délai d’expiration, l’API renvoie une erreur `Deadline Exceeded`.

Renvoie une référence à l’objet `api`.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>
<p>
<em>String</em>. The name of metadata property.
          </p>
</td>
</tr>
<tr>
<td><code>value</code></td>
<td>
<p><em>Any value</em>. The value of the metadata property. This may be set to `null` to remove the metadata property.</p>
</td>
</tr>
</tbody>
</table>

### `api.user.setAppMetadata(name, value)`

Définissez les métadonnées de l’application pour l’utilisateur qui est entrain de s’inscrire. Les données stockées dans app_metadata sont visibles et modifiables par l’utilisateur.

Remarque : ce déclencheur effectue un appel à Management API, consommant la limite anti-attaques de Management API. Si cette demande atteint la limite anti-attaques et échoue dans sa nouvelle tentative dans la fenêtre de délai d’expiration, l’API renvoie une erreur `Deadline Exceeded`.

Renvoie une référence à l’objet `api`.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>
<p>
<em>String</em>. The name of metadata property.
          </p>
</td>
</tr>
<tr>
<td><code>value</code></td>
<td>
<p><em>Any value</em>. The value of the metadata property. This may be set to `null` to remove the metadata property.</p>
</td>
</tr>
</tbody>
</table>

## `api.validation`

Configurez des messages d’erreur personnalisés pour les enregistrements d’utilisateurs refusés.

### `api.validation.error(errorCode, errorMessage)`

Définissez des codes d’erreur personnalisés et des messages pour les utilisateurs en cas de tentatives d’enregistrement refusées.

Lorsqu’une tentative d’enregistrement d’un utilisateur est refusée, le processus d’inscription s’arrête immédiatement après l’achèvement de l’action en cours et aucune action supplémentaire n’est exécutée.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>errorCode</code></td>
<td>
<p>
<em>String</em>. A custom error code that describes why a registration attempt was denied. This value appears in tenant logs. 
          </p>
</td>
</tr>
<tr>
<td><code>errorMessage</code></td>
<td>
<p><em>String</em>. A custom error message presented to users when their registrations are deinied.</p>
</td>
</tr>
</tbody>
</table>