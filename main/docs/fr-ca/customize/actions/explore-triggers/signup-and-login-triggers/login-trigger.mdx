---
og:description: Learn about the Actions Login Flow and the post-login Action trigger,
  which is executed after a user logs in and when a Refresh Token is requested.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Déclencheur de connexion
og:url: https://auth0.com/docs/
permalink: login-trigger
sidebarTitle: Déclencheur de connexion
title: Déclencheur de connexion
twitter:description: Learn about the Actions Login Flow and the post-login Action
  trigger, which is executed after a user logs in and when a Refresh Token is requested.
twitter:title: Déclencheur de connexion
---

Le déclencheur de connexion s’exécute lorsqu’un utilisateur s’authentifie avec succès auprès d’une application sur un locataire Auth0. Cela inclut également l’authentification post-inscription.

Les Actions de ce déclencheur sont bloquantes (synchrones), ce qui signifie qu’elles s’exécutent dans le cadre du processus d’un déclencheur et empêchent le reste du pipeline Auth0 de s’exécuter jusqu’à ce que l’Action soit terminée.

## Déclencheurs

### Connexion / Post-connexion

Le déclencheur `post-login` est une fonction exécutée après la connexion d’un utilisateur et lorsqu’un jeton d’actualisation est demandé.

#### Références

* [Objet événement](/signup-and-login-triggers/login-trigger/post-login-event-object) : fournit des informations contextuelles sur un seul utilisateur se connectant via Auth0.
* [Objet API](/signup-and-login-triggers/login-trigger/post-login-api-object) : fournit des méthodes permettant de modifier le comportement du flux.

## Cas d’utilisation courants

### Contrôle d’accès

Une Action post-connexion peut être utilisée pour fournir une logique personnalisée utilisée pour refuser l’accès à un utilisateur qui tente d’accéder à une application :



### Autoriser l’accès uniquement les jours ouvrables pour une application spécifique

si vous avez une application et que vous souhaitez vous assurer qu’elle ne soit accessible qu’en semaine, vous pouvez créer l’Action suivante :



### Interdire l’accès à toute personne appelant une API

Supposons que vous souhaitiez refuser l’accès à tous les utilisateurs qui appellent une API. Cela signifie que vous devez refuser l’accès en fonction de la valeur audience de votre API, que vous pouvez trouver dans le champ **API de public** de votre API dans [Dashboard > Applications > API](https://manage.auth0.com/#/apis). Pour cela, vous devez créer l’Action suivante :



### Ajouter des rôles d’utilisateur aux jetons d’ID et d’accès

Pour ajouter des rôles d’utilisateur aux jetons émis par Auth0, utilisez l’objet `event.authorization` avec les méthodes `api.idToken.setCustomClaim` et `api.accessToken.setCustomClaim` :



* Une demande personnalisée ne peut pas inclure certains termes, et nous vous recommandons fortement d’utiliser une demande d’espace de nommage qui prend la forme d’un URI. Consultez [notre documentation sur les demandes personnalisées](/security/tokens/json-web-tokens/create-custom-claims) pour plus d’informations.
* Le JWT renvoyé à l’application demandeuse est construit et signé à la fin du traitement du déclencheur. Le JWT final signé n’est pas accessible dans une action.

### Enrichir le profil utilisateur

Auth0 fournit un système complet de stockage des métadonnées dans un [Profil utilisateur](/users/user-profiles/normalized-user-profiles). Afin de définir `user_metadata` ou `app_metadata` sur le profil d’un utilisateur lors de sa connexion, utilisez les fonctions`api.user.setUserMetadata` ou `api.user.setAppMetadata`.



Une fois toutes les actions post-connexion exécutées, Actions mettra à jour le profil utilisateur en une seule opération. Cette opération est soumise à une [limite anti-attaques](/support/policies/rate-limit-policy/management-api-endpoint-rate-limits) « Write Users » (Écriture des utilisateurs).

### Appliquer la politique d’authentification multifacteur (MFA) personnalisée

Une Action post-connexion peut être utilisée pour exiger dynamiquement l’authentification multifacteur (MFA) pour un utilisateur en fonction des besoins de votre application.



Un fournisseur de MFA doit être configuré pour activer la MFA lors d’une connexion. Pour en savoir plus, veuillez consulter [Authentification multifacteur (MFA)](/mfa).

### Réduisez les frictions grâce aux clés d’identification

Une Action post-connexion peut être utilisée pour réduire les frictions en ignorant dynamiquement l’authentification multifacteur pour un utilisateur qui s’est authentifié avec une clé d’identification.



La connexion doit avoir les clés d’identification et l’authentification multifacteur (MFA) activées. Pour en savoir plus, veuillez consulter [Clés d’accès](/passkeys) et [Authentification multifacteur (MFA)](/mfa).

### Rediriger l’utilisateur vers un site externe

De façon similaire à [Règles de redirection](/rules/redirect-users), une Action post-connexion peut être utilisée pour envoyer l’utilisateur vers un site externe. Une fois terminée, l’utilisateur peut être redirigé vers Auth0 pour continuer son flux de connexion. Dans l’exemple ci-dessous, une Action de redirection est utilisée pour inviter l’utilisateur à fournir sa couleur préférée.



Le pipeline Actions sera suspendu pendant que l’utilisateur est redirigé. Une fois que l’utilisateur poursuit son processus de connexion Auth0, le pipeline Actions reprendra là où il a été suspendu. Les Actions qui ont été exécutées avant la redirection ne sont pas exécutées à nouveau.

Pour en savoir plus à propos des Actions de redirection, veuillez consulter [Rediriger avec des actions](/signup-and-login-triggers/login-trigger/redirect-with-actions).

### Modifier les permissions d’un jeton d’accès

Lorsque vous modifiez les permissions associées à un jeton d’accès, assurez-vous de respecter les meilleures pratiques entourant la spécification d'audience.

* Vérifiez toujours l'audience attendue avant d’ajouter des permissions.
* Empêchez l’utilisation d’entrées non fiables lors de l’ajout de permissions.