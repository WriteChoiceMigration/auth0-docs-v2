---
og:description: Description on how to use the Rule migration tooling in the Auth0
  dashboard
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Outils de migration
og:url: https://auth0.com/docs/
permalink: migrate-a-rule-to-an-action
title: Outils de migration
twitter:description: Description on how to use the Rule migration tooling in the Auth0
  dashboard
twitter:title: Outils de migration
---

Simplifiez le processus de migration des règles vers les actions à l’aide des outils de migration des règles dans l’[Auth0 Dashboard](https://manage.auth0.com/). En plus de faciliter la transition d’une règle en une action, les nouveaux outils offrent également des conseils intégrés et des correctifs pour les modèles de règles communs.

## Avant la migration

Avant de commencer la migration, consultez la page [Migration des Règles vers les Actions](/migrate-from-rules-to-actions). Ce guide de migration est une excellente ressource qui explique les différences entre les règles et les actions; il s’agit d’un outil utile dans le parcours de migration.

### Ordre de migration des règles

Avant de commencer la migration, consultez la page [Migration des Règles vers les Actions](/migrate-from-rules-to-actions). Ce guide de migration est une excellente ressource qui explique les différences entre les règles et les actions; il s’agit d’un outil utile dans le parcours de migration.

Si vous ne faites pas la migration dans cet ordre, cela peut entraîner des erreurs en raison d’effets secondaires imprévus causés par des dépendances dans l’ordonnancement des règles et des actions.

### Retour en arrière sécuritaire

Si vous ne faites pas la migration dans cet ordre, cela peut entraîner des erreurs en raison d’effets secondaires imprévus causés par des dépendances dans l’ordonnancement des règles et des actions.

## Migration d’une règle

Pour commencer la migration de votre règle, sélectionnez **Pipeline Auth > Règles**. Une fois vos règles sélectionnées, elles s’affichent avec une option permettant de migrer chacune d’entre elles individuellement. 



### Migration vers une action

Après avoir sélectionné **Migration vers une action**, l’outil vous invite à créer une nouvelle action.

Après avoir sélectionné **Créer**, la nouvelle action est créée et l’éditeur d’actions s’affiche.

Si la règle est migrée vers une action et qu’elle est toujours active, la règle se ferme avant que la logique ne s’exécute.

Cette exécution se fait en appelant `api.rules.wasExecuted()`. Si la fonction `wasExecuted` trouve une chaîne contenant l’ID de la règle, elle renvoie `true` si la règle a déjà été exécutée (et dans le cas contraire, elle renvoie `false`).

Dès que vous désactivez la règle référencée, la fonction renvoie false et la logique métier s’exécute maintenant dans l’action. Dès que vous désactivez la règle référencée, la fonction renvoie `false` et la logique métier s’exécute maintenant dans l’action.



Pour de plus amples renseignements sur la fonction `api.rules.wasExecuted()`, référez-vous à [Déclencheurs d’actions : post-connexion – Objet API](/signup-and-login-triggers/login-trigger/post-login-api-object).

## Réécriture du code de la règle

Sélectionnez le bouton **Règles** dans l’éditeur d’actions pour charger l’outil de migration des règles. Là, vous pouvez rapidement référencer le code de la règle migrée. Commencez par consulter le code de la règle sélectionnée dans la barre latérale.
 

Copiez le contenu de la fonction Rule et collez-le sous le commentaire `// YOUR CODE HERE` dans l’action. Il est par contre probable que ce code ne soit pas adapté au modèle de programmation d’actions.

L’éditeur d’actions vous fournira un retour d’information si le code doit être modifié. L’éditeur vous fournira également des suggestions sur la façon de corriger automatiquement la plupart des situations. Pour examiner la suggestion ou le correctif, passez la souris sur le code souligné :

Vous pouvez appliquer des mises à jour spécifiques à une action en sélectionnant une option dans la fenêtre modale **Correction rapide**.

Lorsque vous sélectionnez le correctif recommandé, votre code est automatiquement mis à jour pour être compatible.

Dans certaines situations, les correctifs ne peuvent pas être appliqués automatiquement, mais des directives vous seront tout de même fournies :

Par exemple, dans le cas de la fonction de `callback` de la règle, il est recommandé d’utiliser [`api.access.deny`](https://auth0.com/docs/customize/actions/flows-and-triggers/pre-user-registration-flow/api-object) pour les erreurs, ou simplement `return` pour les cas réussis.

### Test de la nouvelle action

Les actions peuvent être testées directement dans l’éditeur, car il s’agit d’une partie essentielle du parcours de migration. Pour de plus amples renseignements, voir [Test des actions](/actions/test-actions).



### Activation automatique de l’action

Lorsque le code d’action est mis à jour et que vous êtes prêt à l’appliquer :

1. Sélectionnez **Déployer**.
2. Dans l’alerte qui confirme votre déploiement, sélectionnez **Ajouter au flux**.
3. Ajoutez l’action que vous venez de créer au flux, puis sélectionnez **Appliquer**.
4. Sélectionnez **Continuer** et **désactivez toutes les règles sélectionnées** pour activer simultanément la nouvelle action et désactiver la règle d’origine. Si vous n’êtes pas prêt, sélectionnez **Annuler** et vous pourrez désactiver la règle ultérieurement pour activer la logique migrée vers l’action.

Pour de plus amples renseignements sur l’ajout de votre action au flux, référez-vous à la section [Écrire votre première action](/actions/write-your-first-action).



## Migration des règles restantes

Ce processus peut être répété pour migrer chaque règle dans votre flux de connexion. N’oubliez pas que les règles doivent être migrées dans l’ordre inverse de leur exécution lors du flux de connexion.