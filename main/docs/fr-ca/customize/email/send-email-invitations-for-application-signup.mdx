---
og:description: Describes how to customize the signup process to invite users to signup
  for an account in the context of a specific Auth0 application.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Envoi d’invitations par courriel pour l’inscription à une application
og:url: https://auth0.com/docs/
permalink: send-email-invitations-for-application-signup
title: Envoi d’invitations par courriel pour l’inscription à une application
twitter:description: Describes how to customize the signup process to invite users
  to signup for an account in the context of a specific Auth0 application.
twitter:title: Envoi d’invitations par courriel pour l’inscription à une application
---

Pour limiter le nombre d’inscriptions d’utilisateurs ou créer des comptes en masse, l’application peut envoyer des invitations.

<Warning>

Organization member invitation differs from the user invitation workflow in this article. This article discusses how to generate invitations to sign up for an account in the context of a specific application. If you are working with Organizations and want to learn how to invite members to organizations via email, read [Invite Organization Members](/docs/manage-users/organizations/configure-organizations/invite-members) instead.

</Warning>

Voici les étapes typiques du flux de production d’une invitation pour les utilisateurs :

1. Administrator creates a user account.
2. Administrator sends a registration email invitation to the user.
3. User follows a link in the invitation email to set up a password for the account.
4. User creates and verifies a password.
5. User signs in.

## Générer des invitations

En réalité, une invitation pour un utilisateur est un lien permettant de modifier son mot de passe sous forme d’invitation. Le courriel d’invitation de l’utilisateur est dérivé du modèle de « modification du mot de passe ». Il y a deux méthodes courantes pour la mise en œuvre des invitations d’utilisateurs avec Auth0 :

* [Customize an email template](/docs/customize/email/email-templates) and use it to [send a change password email](/docs/customize/email/manage-email-flow).
* Créer un ticket de modification de mot de passe.

You can allow a user to access an existing account that you have created on their behalf. Then, send the user a unique link to set their password. You generate the unique link by creating a Password Change ticket where your invitation app calls the `/password-change` [Management API endpoint](https://auth0.com/docs/api/management/v2/#!/Tickets/post_password_change). You will need to:

* [Create an Auth0 database user](/docs/authenticate/database-connections) with the `user.email_verified` parameter set to `false`. You can use the [Create a User](https://auth0.com/docs/api/management/v2/#!/Users/post_users) endpoint.
* Have access to and [configure an external email service](/docs/customize/email/smtp-email-providers)
* [Get a Management API access token](/docs/secure/tokens/access-tokens/management-api-access-tokens/get-management-api-access-tokens-for-testing)

### Créer des tickets de modification de mot de passe

1. Specify the user using `user_id` or email and `connection_id` to the [Management API endpoint](https://auth0.com/docs/api/management/v2#!/Tickets/post_password_change).
2. Specify where the redirect sends the user. The `result_url` parameter is the redirect location your application sends the user after they set their password. In this case, the `result_url` should be your app login page. To learn more, read [Redirect Users After Login](/docs/authenticate/login/redirect-users-after-login). You may also use the `client_id` parameter shown below; after the customer verifies their email, they are redirected to your client's Default Login URI.
3. Specify the lifespan of the invitation link. Use the `ttl_sec` parameter to set how long the invitation link will remain active. The `ttl_sec` parameter should align with your relevant security concerns. The link is a one-time use, so once the user has set their password, it is not vulnerable to reuse.
4. Verify the email address. If sent to a registered email account, set the `mark_email_as_verified` parameter as `true`. You **should not** set the email verification to `true` if the email account is not registered. A successful request to this endpoint will return a ticket URL. You will use that URL to create the user invitation.

For more information, read [Configure Default Login Routes](/docs/authenticate/login/auth0-universal-login/configure-default-login-routes).

```bash lines
curl -- request POST \
  --url 'https://{yourAuth0Tenant}/api/v2/tickets/password-change' \
  --header "Content-Type: application/json" \
  --data '{"user_id":,{yourUserID}","client_id":"{yourClientID","ttl_sec":0,"mark_email_as_verified":true,"includeEmailInRedirect":false}'
```






### Ajouter des paramètres de requête à l’URL

Vous pouvez ajouter des paramètres de requête à l’URL pour personnaliser l’interface utilisateur de réinitialisation du mot de passe. L’URL renvoyée comporte une valeur de code unique qui permet à l’utilisateur de définir son mot de passe, suivie d’un symbole `#`. Ne modifiez rien avant le symbole `#`.

Ajoutez un paramètre pour préciser un ensemble de mots de passe pour l’interface utilisateur du flux de production. Exemple :

```http lines
#type=invite
```






Ajoutez un paramètre pour identifer l’application cible. Exemple :

```http lines
#app=AppName
```






### Créer un modèle de courriel

The email invitation needs to be sent with your existing email service provider. [Customize the password change email template](/docs/customize/email/email-templates) so the language in the email aligns with your use case. Include the link generated from the steps above. The text in the email should explain:

* Les prochaines étapes pour réclamer le compte utilisateur.
* La durée de validité du lien.
* Les étapes pour générer une nouvelle invitation si le lien a expiré.

Par exemple, lors de la création de l’utilisateur à inviter, vous pouvez ajouter une propriété à `user.app_metadata` qui indique que ce compte utilisateur a été invité. Ensuite, dans votre modèle de courriel, vous pouvez rechercher cette propriété :

```liquid lines
{% if user.app_metadata.invitedToMyApp == true %}
  // user invitation email
{% else %}
  // password change email
{% endif %}
```






## Personnaliser l’interface utilisateur de réinitialisation du mot de passe

Once the user clicks the link in the invitation they will be brought to the <Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip> Password Reset page where they will set a password for their account. Since this page is used both for the forgot password workflow and for your user invitations, you will want to use the query parameters you defined earlier to identify the invite workflow and customize the UI accordingly. To learn more, read [Customize Password Reset Page](/docs/customize/login-pages/classic-login/customize-password-reset-page) for Classic Login or [Customize Universal Login](/docs/customize/login-pages/universal-login) for Universal Login.

## Compléter l’expérience utilisateur

Dans la plupart des cas, une fois que l’utilisateur a défini son mot de passe, vous lui accordez l’accès à l’application cible. L’application cible lance la séquence de connexion avec les étapes suivantes :

1. User submits password.
2. Change password screen redirects return URL.
3. Target app redirects to `/authorize`.
4. User submits their credentials.
5. User is authenticated into the app.

Le flux de production comprend des redirections. Cependant, il est possible que la transition entre le formulaire de définition du mot de passe et le formulaire de connexion soit transparente pour l’utilisateur final.

Si vous utilisez la connexion classique, la `result_url` que vous avez défini lors de la création du ticket de modification de mot de passe est l’endroit où l’utilisateur sera redirigé après avoir créé son mot de passe. Dans ce cas, vous souhaitez que l’URL se trouve sur le site où l’utilisateur a été invité afin qu’il puisse lancer le flux de production de la connexion. Votre application cible devra analyser le paramètre `success` pour confirmer qu’aucune erreur ne s’est produite, puis lancer immédiatement la redirection vers Auth0 pour connecter l’utilisateur.

Pour optimiser l’expérience utilisateur, vous pouvez demander à l’application cible d’analyser le paramètre `email` et de l’inclure dans la requête d’authentification en tant que paramètre `login_hint`. L’adresse courriel de l’utilisateur sera automatiquement insérée dans le formulaire de connexion.

## Learn more

* [Customize Email Templates](/docs/customize/email/email-templates)
* [Customize Email Handling](/docs/customize/email/manage-email-flow)
* [Configure External SMTP Email Providers](/docs/customize/email/smtp-email-providers)