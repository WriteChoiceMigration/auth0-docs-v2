---
og:description: Learn how to use Hooks to change scopes and add custom claims in the
  access token obtained using the Client Credentials Flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Personnalisation des jetons grâce aux hooks en utilisant le Flux des identifiants
  client
og:url: https://auth0.com/docs/
permalink: customize-tokens-using-hooks-with-client-credentials-flow
title: Personnalisation des jetons grâce aux hooks en utilisant le Flux des identifiants
  client
twitter:description: Learn how to use Hooks to change scopes and add custom claims
  in the access token obtained using the Client Credentials Flow.
twitter:title: Personnalisation des jetons grâce aux hooks en utilisant le Flux des
  identifiants client
---





Vous pouvez modifier les permissions et ajouter des réclamations personnalisées dans les jetons émis à partir du [Flux des identifiants client](/login/flows/client-credentials-flow) en ajoutant des [hooks](/hooks).

Les hooks vous permettent de personnaliser le comportement d’Auth0 à l’aide du code Node.js. Il s’agit de fonctions sécurisées et autonomes associées à des liens d’extensibilité HTTP particuliers de la plate-forme Auth0 (comme le Flux des identifiants client). Auth0 invoque les hooks à l’exécution pour exécuter votre logique personnalisée.

Vous pouvez gérer les hooks en utilisant Auth0 Dashboard ou Management API.



## Prérequis

Avant de commencer ce tutoriel :

* [Enregistrez votre application avec Auth0](/get-started/set-up-apis)

* [Ajoutez les permissions API appropriées](/apis/add-api-permissions)
* [Enregistrez l’application machine-machine (M-M) avec Auth0](/get-started/create-apps/machine-to-machine-apps).

* Sélectionnez un **type d’application** pour les **Applications machine-machine**.
* Choisissez votre API précédemment enregistrée.
* Autorisez l’application machine-machine (M2M) à appeler votre API.

## Étapes

1. **Créer des hooks** : Créez un hook qui permettra de personnaliser votre jeton.
2. **Tester le hook** : Testez votre nouveau hook en exécutant un Flux des identifiants client et en décodant le jeton d’accès.

### Créer un hook

Dans cet exemple, vous allez :

* ajouter une réclamation arbitraire (`https://foo.com/claim`) [au jeton d’accès](/security/tokens/access-tokens)
* ajouter une autorisation supplémentaire à votre API configurée

Créer un hook qui permettra de personnaliser votre jeton. Lorsqu’on vous demande de choisir un point d’extensibilité, sélectionnez `Client Credentials Exchange`, et ajoutez le code suivant dans l’éditeur :





### Tester votre hook

Pour tester le hook que vous venez de créer, vous devez exécuter un échange d’identifiants client, obtenir le jeton d’accès, le décoder et examiner son contenu.

#### Obtenir un jeton

Pour obtenir un jeton, effectuez un appel `POST` au [point de terminaison du Flux des identifiants client](/api/authentication#client-credentials-flow) Assurez-vous de remplacer les valeurs d’espace réservé CLIENT_ID, CLIENT_SECRET et API_IDENTIFIER par l’ID client de votre application, le secret client de votre application et l’identifiant de votre API, respectivement. Vous pouvez trouver l’ID client et le secret client dans les paramètres de votre [Application](%24%7Bmanage_url%7D/#/applications) et l’identifiant API dans les paramètres de votre [API](%24%7Bmanage_url%7D/#/apis).



Une réponse réussie comprendra :

* un `access_token`,
* son délai d’expiration en secondes (`expires_in`),
* le type du jeton est défini comme `Bearer` (`token_type`), et
* une permission `extra` (`scope`) (qui a été ajoutée par votre hook)



#### Décoder le jeton

Le moyen le plus simple de décoder le jeton d’accès et d’examiner son contenu est d’utiliser le [Débogueur JWT.io](https://jwt.io/#debugger-io).

Copiez votre jeton d’accès et collez-le dans l’éditeur.  Le JWT est décodé automatiquement et son contenu est affiché.

Veuillez noter que les deux derniers éléments de **Charge utile** ont tous deux été définis par votre hook :

* `"scope": "extra"`
* `"https://foo.com/claim": "bar"`