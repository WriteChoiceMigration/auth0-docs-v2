---
og:description: Learn how to call your own API from highly-trusted applications using
  the Resource Owner Password Flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Appeler votre API à l’aide du Flux de mot de passe du propriétaire de ressource
og:url: https://auth0.com/docs/
permalink: call-your-api-using-resource-owner-password-flow
title: Appeler votre API à l’aide du Flux de mot de passe du propriétaire de ressource
twitter:description: Learn how to call your own API from highly-trusted applications
  using the Resource Owner Password Flow.
twitter:title: Appeler votre API à l’aide du Flux de mot de passe du propriétaire
  de ressource
---





Auth0 permet à votre application de mettre en œuvre facilement le Flux de mot de passe du propriétaire de ressource (parfois appelé « Autorisation de mot de passe du propriétaire de ressource ») en utilisant l'[Authentication API](/api/authentication) (API d’authentification). Continuez à lire pour savoir comment appeler votre API directement.

## Prérequis

**Avant de commencer ce tutoriel :**

* [Enregistrez votre application avec Auth0](/get-started/create-apps/regular-web-apps).

* Sélectionnez le **type d’application** parmi les **Applications web classiques**.
* Ajoutez une **URL de rappel autorisée** de `**${account.callback}**`. Ce champ ne peut pas être vide, sinon un message d’erreur s’affichera.
* Assurez-vous que les **Grant Types** (Types d’autorisation) de votre application comprennent le **Password **(Mot de passe). Pour en savoir plus, lisez [Mettre à jour les types d’autorisation](/applications/update-grant-types)
* Si vous souhaitez que votre application puisse utiliser des jetons d’actualisation, assurez-vous que les **Grant Types** (Types d’autorisation) de l’application comprennent le **Refresh Token** (Jetons d’actualisation). Pour en savoir plus, lisez l’article [Mettre à jour les types d’autorisation](/applications/update-grant-types). Pour en savoir plus sur les jetons d’actualisation, lisez l’article [Jetons d'actualisation](/security/tokens/refresh-tokens).
* [Enregistrez votre application avec Auth0](/get-started/set-up-apis)

* Si vous souhaitez que votre API reçoive des jetons d’actualisation afin d’obtenir de nouveaux jetons lorsque les précédents expirent, activez **Autoriser l’accès hors ligne**.
* Configurer une connexion

* Assurez-vous que votre connexion est capable d’authentifier des utilisateurs grâce à leur nom d’utilisateur et leur mot de passe (par exemple,  [connexions aux bases de données](/applications/set-up-database-connections), ou les [connexions d’entreprise](/connections/identity-providers-enterprise) AD/LDAP, ADFS, ou Azure Active Directory).
* Mettez à jour ou désactivez toutes les [rules](/rules)(règles), pour qu’elles n’impactent que des connexions spécifiques. Si le message `access_denied` s’affiche lorsque vous testez l’autorisation de mot de passe du propriétaire de ressource, cela peut être dû à une règle de contrôle d’accès.

## Étapes

1. [Configurez le locataire](#configure-tenant) :**
**Définissez la connexion par défaut du locataire.
2. [Request tokens](#request-tokens) (Demande de jetons) : 
échangez votre code d’autorisation contre des jetons.
3. [Appelez l’API](#call-api) :
Utilisez le jeton d’accès récupéré pour appeler votre API.
4. [Jetons d’actualisation](#refresh-tokens) :
utilisez un jeton d’actualisation pour demander de nouveaux jetons lorsque les anciens expirent.

Facultatif : [Découvrez des cas d’utilisation](#sample-use-cases)

Facultatif : [Configurer la prise en charge des partitions](#configure-realm-support)

Facultatif : [Configurer MFA](#configure-mfa)

Facultatif : [Configurer les paramètres de protection contre les attaques](#configure-anomaly-detection)

### Configurez le locataire

Le Flux de mot de passe du propriétaire de ressource repose sur une connexion capable d’authentifier les utilisateurs par leur nom d’utilisateur et leur mot de passe; vous devez donc définir la connexion par défaut du locataire.

1. Accédez au [Auth0 Dashboard > Paramètres du locataire](%24%7Bmanage_url%7D/#/tenant), et faites défiler vers le bas pour trouver le paramètre **Répertoire par défaut**.
2. Sélectionnez le nom de la connexion que vous souhaitez utiliser. Assurez-vous qu’elle est capable d’authentifier les utilisateurs par leur nom d’utilisateur et leur mot de passe.

### Demander des jetons



#### Exemple d’un POST à une URL de jeton



##### Paramètres



#### Réponse

Si tout se passe bien, vous recevrez une réponse `HTTP 200` avec une charge utile contenant les valeurs `access_token`, `refresh_token`, `id_token`, `token_type`, et `expires_in` :











### Appeler l’API

Pour appeler votre API, l’application doit transmettre le jeton d’accès récupéré en tant que jeton du porteur dans l’en-tête d’autorisation de votre requête HTTP.



### Jetons d’actualisation



#### Exemple d’un POST à une URL de jeton



##### Paramètres



#### Réponse







### Exemples de cas d’utilisation

#### Personnalisation des jetons

Vous pouvez utiliser des règles pour modifier les permissions des jetons d’accès et/ou ajouter des demandes pour les jetons d’accès et d’ID. (Pour en savoir plus sur les règles, lisez l’article [Règles d'Auth0](/rules).) Pour ce faire, ajoutez la règle suivante, qui s’exécutera après l’authentification de l’utilisateur :



Les permissions seront disponibles dans le jeton une fois toutes les règles exécutées.



### Configurer la prise en charge des partitions

Auth0 fournit une autorisation d’extension semblable à l’autorisation de mot de passe du propriétaire de ressource, qui vous permet de conserver des répertoires d’utilisateurs distincts (qui correspondent à des connexions distinctes) et de spécifier celui qui doit être utilisé pendant le flux.

Pour utiliser cette variation, vous devez :

* Définir le paramètre de requête `grant_type` sur `http://auth0.com/oauth/grant-type/password-realm`.
* Envoyer un paramètre de requête supplémentaire appelé `realm` (partition), et lui attribuer le nom de la partition auquel l’utilisateur appartient. Par exemple, si vous avez configuré une connexion à la base de données pour des employés internes appelée `employees` (employés), et que votre utilisateur en fait partie, définissez alors `realm` (partition) sur `employees` (employés).



### Configurer MFA

Si vous devez utiliser le Flux de mot de passe du propriétaire de ressource, mais que vous avez besoin d’une authentification plus forte, vous pouvez ajouter l’authentification multifacteur (MFA). Pour savoir comment procéder, lisez l’article [Authentifier à l’aide d’un Flux de mot de passe du propriétaire de ressource avec MFA)](/mfa/ropg-mfa).

### Configurer les paramètres de protection contre les attaques

Lorsque vous utilisez le Flux de mot de passe du propriétaire de ressource avec une protection contre les attaques de force brute, certaines fonctionnalités de protection contre les attaques peuvent échouer. Certains problèmes courants peuvent toutefois être évités. Pour en savoir plus, lisez l’article [Éviter les problèmes courants en utilisant Flux de mot de passe du propriétaire de ressource et Protection contre les attaques](/login/flows/avoid-common-issues-with-resource-owner-password-flow-and-attack-protection).