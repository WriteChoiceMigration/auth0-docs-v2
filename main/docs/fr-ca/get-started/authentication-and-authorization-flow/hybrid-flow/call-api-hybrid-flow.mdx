---
og:description: Learn how to execute the Hybrid Flow so your app can use an ID token
  to access information about the user while obtaining an authorization code that
  can be exchanged for an Access Token.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Appeler votre API à l’aide du flux hybride
og:url: https://auth0.com/docs/
permalink: call-api-hybrid-flow
title: Appeler votre API à l’aide du flux hybride
twitter:description: Learn how to execute the Hybrid Flow so your app can use an ID
  token to access information about the user while obtaining an authorization code
  that can be exchanged for an Access Token.
twitter:title: Appeler votre API à l’aide du flux hybride
---



Auth0 permet à votre application d’implémenter facilement le flux de code d’autorisation en utilisant :

* [Authentication API](/api/authentication) : Si vous préférez créer votre propre solution, poursuivez la lecture pour savoir comment appeler notre API directement.

## Prérequis

**Avant de commencer ce tutoriel :**

* [Enregistrez votre application auprès d’Auth0](/get-started/create-apps/regular-web-apps).

* Sélectionnez le **Type d’application** approprié.
* Ajoutez une **URL de rappel autorisée** de `**${account.callback}**`.
* Assurez-vous que les **Types d’autorisation** de votre application englobent **Implicit** (Implicite) et le **code d’autorisation**. Pour en savoir plus, lisez [Mettre à jour les types d’autorisation](/applications/update-grant-types).
* Si vous souhaitez que votre application puisse utiliser des jetons d’actualisation, assurez-vous que les **types d’autorisation** de l’application comprennent le **jeton d’actualisation**. Pour en savoir plus, lisez [Mettre à jour les types d’autorisation](/applications/update-grant-types). Pour en savoir plus sur les jetons d’actualisation, lisez [Jetons d’actualisation](/security/tokens/refresh-tokens).
* [Enregistrez votre application auprès d’Auth0](/get-started/set-up-apis)

* Si vous voulez que votre API reçoive des jetons d’actualisation afin d’obtenir de nouveaux jetons lorsque les précédents expirent, activez **Autoriser l’accès hors ligne**.

## Étapes

1. [Autoriser l’utilisateur](#authorize-user) : 
Demandez l’autorisation de l’utilisateur et redirigez-le vers votre application à l’aide d’un code d’autorisation.
2. [Demande de jetons](#request-tokens) : 
Échange d’un code d’autorisation contre des jetons.
3. [Appel d’API](#call-api) :
Servez-vous du jeton d’accès récupéré pour appeler votre API.
4. [Jetons d’actualisation](#refresh-tokens) :
Utilisez un jeton d’actualisation pour demander de nouveaux jetons lorsque les jetons existants expirent.

Facultatif : [Découvrez des cas d’utilisation](#sample-use-cases)

### Autoriser l’utilisateur



Pour autoriser l’utilisateur, votre application doit envoyer l’utilisateur à l’[URL d’autorisation](/api/authentication#authorization-code-grant).

#### Exemple d’URL d’autorisation



##### Paramètres





Par exemple, votre code HTML pour l’URL d’autorisation lors de l’ajout d’une connexion à votre application pourrait ressembler à ceci :



#### Réponse

Si tout se passe bien, vous recevrez une réponse `HTTP 302`. Les informations d’identification demandées sont codées dans le corps du texte :



Notez que les valeurs renvoyées dépendent de ce que vous avez demandé comme `response_type`.



Auth0 renverra également toute valeur d’état que vous avez incluse dans votre appel à l’URL d’autorisation.





Lorsque vous décodez et analysez votre jeton d’ID, vous remarquerez une demande supplémentaire, `c_hash`, qui contient un hachage du `code`. Cette demande est obligatoire lorsqu’un jeton d’ID est émis en même temps qu’un `code` et que vous devez le valider :

1. À l’aide de l’algorithme de hachage spécifié dans la demande `alg` dans l’en-tête jeton d’ID, hachez les octets de la représentation ASCII du `code`.
2. Base64url code la moitié la plus à gauche du hachage.
3. Vérifiez que le résultat correspond à la valeur `c_hash`.

### Demander des jetons



Le jeton d’accès que vous recevez à cette étape est celui que vous devez utiliser pour appeler votre API. Assurez-vous de le conserver séparément du jeton d’accès que vous avez reçu à l’étape précédente de ce tutoriel.

#### Exemple de POST à une URL de jeton



##### Paramètres



#### Réponse

Si tout se passe bien, vous recevrez une réponse `HTTP 200` avec une charge utile contenant les valeurs `access_token`, `refresh_token`, `id_token` et`token_type` :









### Appeler l’API

Pour appeler votre API à partir d’une application Web standard (ou de cas similaires dans lesquels les informations d’identification de l’application peuvent être stockées en toute sécurité), l’application doit transmettre le jeton d’accès récupéré en tant que jeton du porteur dans l’en-tête d’autorisation de votre requête HTTP.



### Jetons d’actualisation



#### Exemple de POST à une URL de jeton



##### Paramètres



#### Réponse







### Exemples de cas d’utilisation

#### Personnalisation des jetons

Vous pouvez utiliser des règles pour modifier les permissions renvoyées des jetons d’accès et/ou ajouter des demandes aux jetons d’accès et d’ID. (Pour en savoir plus sur les règles, lisez [Règles d'Auth0](/rules).) Pour ce faire, ajoutez la règle suivante, qui s’exécutera après l’authentification de l’utilisateur :



Les permissions seront disponibles dans le jeton une fois toutes les règles exécutées.