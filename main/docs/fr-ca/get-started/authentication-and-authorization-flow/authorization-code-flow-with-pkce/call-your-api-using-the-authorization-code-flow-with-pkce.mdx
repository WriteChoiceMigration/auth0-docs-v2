---
og:description: Learn how to call your API from a native, mobile, or single-page application
  using the Authorization Code flow using Proof Key for Code Exchange (PKCE).
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Appeler votre API avec le flux de code d’autorisation avec une clé de preuve
  pour l’échange de code (PKCE)
og:url: https://auth0.com/docs/
permalink: call-your-api-using-the-authorization-code-flow-with-pkce
title: Appeler votre API avec le flux de code d’autorisation avec une clé de preuve
  pour l’échange de code (PKCE)
twitter:description: Learn how to call your API from a native, mobile, or single-page
  application using the Authorization Code flow using Proof Key for Code Exchange
  (PKCE).
twitter:title: Appeler votre API avec le flux de code d’autorisation avec une clé
  de preuve pour l’échange de code (PKCE)
---



Auth0 facilite l’implémentation du Flux de code d’autorisation avec Proof Key for Code Exchange (PKCE) en utilisant :

* [Trousse SDK mobile d’Auth0](/libraries) et [trousse SDK pour application Web monopage d’Auth0](/libraries/auth0-single-page-app-sdk) : la manière la plus simple d’implémenter le flux, qui fera le gros du travail à votre place. Notre [Guide de démarrages rapides mobiles](/quickstart/native) et [Guide de démarrages rapides d’applications Web monopages](/quickstart/spa) vous guideront tout au long du processus.
* [Authentication API](/api/authentication) : Si vous préférez créer votre propre solution, continuez à lire pour savoir comment appeler notre API directement.

## Prérequis

**Avant de commencer ce tutoriel :**

* [Enregistrez l’application avec Auth0](/get-started/create-apps/native-apps).

* Sélectionnez un **Type d’application** entre **Natif** ou **à page unique**, en fonction de votre type de demande.
* Ajoutez une **URL de rappel autorisée** de `**{yourCallbackUrl}**`. Le format de l’URL de rappel varie en fonction du type d’application et de la plateforme. Pour plus de détails sur le format de votre type d’application et de votre plateforme, consultez notre [Guide de démarrages rapides natifs/mobiles](/quickstart/native) et [Guide de démarrages rapides pour application Web à page unique ](/quickstart/spa).
* Assurez-vous que les **Grant Types (Types d’autorisation)** de l’application comprennent le **code d’autorisation**. Pour en savoir plus, lisez [Mettre à jour les types d’autorisation](/applications/update-grant-types).
* Si vous souhaitez que votre application puisse utiliser des jetons d’actualisation, assurez-vous que les **types d’autorisation** de l’application incluent le **jeton d’actualisation**. Pour en savoir plus, lisez [Mettre à jour les types d’autorisation](/applications/update-grant-types). Pour en savoir plus sur les jetons d’actualisation, lisez [Jetons d’actualisation](/security/tokens/refresh-tokens).
* [Enregistrez votre application avec Auth0](/architecture-scenarios/mobile-api/part-2#create-the-api)

* Si vous souhaitez que votre API reçoive des jetons d’actualisation afin d’obtenir de nouveaux jetons lorsque les précédents expirent, activez **Autoriser l’accès hors ligne**.

## Étapes

1. [Créer un vérificateur de code](#create-code-verifier) : 
Générez un `code_verifier` qui sera envoyé à Auth0 pour demander des jetons.
2. [Créer un défi-réponse avec code](#create-code-challenge) : 
Générez un `code_challenge` à partir du `code_verifier ` qui sera envoyé à Auth0 pour demander un `authorization_code`.
3. [Autoriser l’utilisateur](#authorize-user) : 
Demandez l’autorisation de l’utilisateur et redirigez-le vers votre application à l’aide d’un `authorization_code`.
4. [Demande de jeton](#request-tokens) : 
Échangez votre `authorization_code` et votre `code_verifier` pour des jetons.
5. [Appel d’API](#call-api) :
Utilisez le jeton d’accès récupéré pour appeler votre API.
6. [Jetons d’actualisation](#refresh-tokens) :
Utilisez un jeton d’actualisation pour demander de nouveaux jetons lorsque les jetons existants expirent.

Facultatif : [Découvrez des cas d’utilisation](#sample-use-cases).

### Créer un vérificateur de code



#### Exemple de JavaScript



#### Exemple Java



#### Exemple Android



#### Échantillon Swift 5



#### Exemple en Objective-C



### Créer un défi de code



#### Exemple de JavaScript



#### Exemple Java



#### Échantillon Swift 5



#### Exemple en Objective-C



### Autoriser l’utilisateur



#### Exemple d’un URL d’autorisation



##### Paramètres





Par exemple, votre extrait HTML pour votre URL d’autorisation lorsque vous appelez un API pourrait ressembler à ceci :



#### Réponse

Si tout se passe bien, vous recevrez une réponse `HTTPº302`. Le code d’autorisation est compris à la fin de cette URL :



### Demander des jetons



#### Exemple de POSR à une URL de jeton



##### Paramètres



#### Réponse

Si tout se passe bien, vous recevrez une réponse HTTP 200 avec une charge utile contenant les valeurs `access_token`, `refresh_token`, `ID_token` et `token_type` :







### Appel d'API

Pour appeler votre API à partir d’une application native/communication entre machines (M2M), l’application doit transmettre le jeton d’accès récupéré en tant que jeton du porteur dans l’en-tête Authorization (Autorisation) de votre requête HTTP.



### Jetons d’actualisation



#### Exemple de POSR à une URL de jeton



##### Paramètres



#### Réponse







### Exemples de cas d’utilisation

#### Personnalisation des jetons

Vous pouvez utiliser des règles pour modifier les permissions renvoyées des jetons d’accès ou ajouter des demandes aux jetons d’accès et d’ID. (Pour en savoir plus sur les règles, lisez [Règles d'Auth0](/rules)). Pour ce faire, ajoutez la règle suivante, qui s’exécutera après l’authentification de l’utilisateur :



Les permissions seront disponibles dans le jeton une fois toutes les règles exécutées.



#### Voir l’exemple d’application : Applications mobiles + API

Pour un exemple d’implémentation, consultez le scénario d’architecture [Mobile + API](/architecture-scenarios/application/mobile-api). Cette série de tutoriels est accompagnée d’un [exemple de code que vous pouvez consulter sur GitHub](https://github.com/auth0-samples/auth0-pnp-exampleco-timesheets).