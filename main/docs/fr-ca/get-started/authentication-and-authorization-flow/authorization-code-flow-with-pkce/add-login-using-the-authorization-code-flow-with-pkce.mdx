---
og:description: Learn how to add login to your native, mobile, or single-page application
  using the Authorization Code Flow with Proof Key for Code Exchange (PKCE).
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Ajouter une connexion avec le flux de code d’autorisation avec une clé de
  preuve pour l’échange de code (PKCE)
og:url: https://auth0.com/docs/
permalink: add-login-using-the-authorization-code-flow-with-pkce
title: Ajouter une connexion avec le flux de code d’autorisation avec une clé de preuve
  pour l’échange de code (PKCE)
twitter:description: Learn how to add login to your native, mobile, or single-page
  application using the Authorization Code Flow with Proof Key for Code Exchange (PKCE).
twitter:title: Ajouter une connexion avec le flux de code d’autorisation avec une
  clé de preuve pour l’échange de code (PKCE)
---

Vous pouvez ajouter une connexion à votre application native, mobile ou à page unique en utilisant le flux de code d’autorisation avec PKCE. Pour savoir comment fonctionne le flux et pourquoi vous devriez l’utiliser, consultez [Flux de code d’autorisation avec Proof Key for Code Exchange (PKCE)](/login/flows/authorization-code-flow-with-proof-key-for-code-exchange-pkce). Pour apprendre à appeler votre API à partir d’une application native, mobile ou à page unique, consultez [Appeler votre API en utilisant le flux de code d’autorisation avec PKCE](/login/flows/call-your-api-using-the-authorization-code-flow-with-pkce).

Pour implémenter le flux de code d’autorisation avec Proof Key for Code Exchange (PKCE), consultez les ressources suivantes :

* [Trousses SDK Auth0 Mobile](/libraries) et [Trousse SDK Auth0 pour applications à page unique](/libraries/auth0-single-page-app-sdk) : Manière la plus simple d’implémenter le flux, qui fera le gros du travail à votre place. Nos [Démarrages rapides Mobile](/quickstart/native) et [Démarrages rapides pour applications à page unique](/quickstart/spa) vous guideront tout au long du processus.
* [Authentication API](/api/authentication) : Si vous préférez créer votre propre solution, poursuivez la lecture pour savoir comment appeler notre API directement.

Une fois la connexion réussie, votre application aura accès au jeton d’ID et au jeton d’accès de l’utilisateur. Le jeton d’ID contient des informations de base sur le profil utilisateur, et le jeton d’accès peut être utilisé pour appeler le point de terminaison Auth0 `/userinfo` ou vos propres API protégées. Pour en savoir plus sur les jetons d’ID, consultez [Jetons d’ID](/security/tokens/id-tokens). Pour en savoir plus sur les jetons d’accès, consultez [Jetons d’accès](/security/tokens/access-tokens).

## Prérequis

Enregistrez votre application auprès d’Auth0. Pour en apprendre davantage, consultez [Enregistrement d’applications natives](/get-started/create-apps/native-apps) ou [Enregistrement d’applications Web à page unique](/get-started/create-apps/single-page-web-apps).

* Sélectionnez un **type d’applicationnative** ou **à page unique**, selon le type de votre application.
* Ajoutez une **URL de rappel autorisée** de `**VOTRE_URL_RAPPEL**`. Le format de l’URL de rappel varie en fonction du type d’application et de la plateforme. Pour plus de détails sur le format correspondant à votre type d’application et à votre plateforme, consultez [Démarrages rapides Native/Mobile](/quickstart/native) et [Démarrages rapides Application à page unique](/quickstart/spa).
* Assurez-vous que les **Grant Types (Types d’autorisation)** de votre application comprennent le **code d’autorisation**. Pour en savoir plus, lisez [Mettre à jour les types d’autorisation](/applications/update-grant-types).

## Créer un vérificateur de code



Pour en savoir plus sur l’algorithme de création du `code_verifier`, consultez la section [4.1 Client crée un vérificateur de code](https://datatracker.ietf.org/doc/html/rfc7636#section-4.1) des spécifications de OAuth Proof Key for Code Exchange (PKCE).

### Exemple JavaScript



### Exemple Java



### Exemple Android



### Échantillon Swift 5



### Exemple Objective-C



## Créer un défi de code



Pour en savoir plus sur la façon dont le `code_challenge` est dérivé du `code_verifier`, consultez la section [4.2 Client crée le défi du code](https://datatracker.ietf.org/doc/html/rfc7636#section-4.) des spécifications de OAuth Proof Key for Code Exchange (PKCE).

### Exemple JavaScript



### Exemple Java



### Échantillon Swift 5



### Exemple Objective-C



## Autoriser l’utilisateur

Demandez l’autorisation de l’utilisateur et redirigez-le vers votre application à l’aide d’un `authorization_code`.



### Exemple d’URL d’autorisation



### Paramètres



Par exemple, votre snippet HTML pour l’URL d’autorisation lors de l’ajout d’une connexion à votre application pourrait ressembler à ceci :



### Réponse

Si tout se passe bien, vous recevrez une réponse `HTTP 302`. Le code d’autorisation est ajouté à la fin de l’URL :



## Jetons de requête

Échangez votre `authorization_code` et `code_verifier` pour des jetons.



### Exemple d’URL « POST to token »



### Paramètres



### Réponse

Si tout se passe bien, vous recevrez une réponse HTTP 200 avec une charge utile contenant les valeurs `access_token`, `refresh_token`, `id_token`, et `token_type` :







## Cas d’utilisation

### Demande d’authentification de base

Cet exemple montre la requête la plus basique que vous pouvez faire lorsque vous autorisez l’utilisateur à l’étape 1. L’écran de connexion Auth0 permet à l’utilisateur de se connecter avec l’une des connexions configurées.



Désormais, lorsque vous demanderez des jetons, votre jeton d’ID contiendra les autorisations les plus élémentaires. Lorsque vous décodez le jeton d’ID, il ressemble à ce qui suit :



### Demander le nom et la photo de profil de l’utilisateur

Outre l’authentification habituelle de l’utilisateur, cet exemple montre comment demander des informations supplémentaires sur l’utilisateur, telles que son nom et sa photo.

Pour demander le nom et la photo de l’utilisateur, vous devez ajouter les permissions appropriées lors de l’autorisation de l’utilisateur :



Désormais, lorsque vous demanderez des jetons, votre jeton d’ID contiendra le nom et la photo demandés. Lorsque vous décodez le jeton d’ID, il ressemble à ce qui suit :



### Demande de connexion d’un utilisateur avec GitHub

En plus de l’authentification habituelle des utilisateurs, cet exemple montre comment envoyer les utilisateurs directement à un fournisseur d’identité sociale, tel que GitHub. Pour que cet exemple fonctionne, vous devez aller dans [Auth0 Dashboard > Authentification > Social](%24%7Bmanage_url%7D/#/connections/social) et configurer la connexion appropriée. Obtenez le nom de la connexion dans l’onglet **Paramètres**.

Pour envoyer les utilisateurs directement à l’écran de connexion de GitHub, vous devez passer le paramètre `connection` et définir sa valeur au nom de la connexion (dans ce cas, `github`) lors de l’autorisation de l’utilisateur :



Désormais, lorsque vous demandez des jetons, votre jeton d’ID contiendra une demande `sub` avec l’ID unique de l’utilisateur renvoyé par GitHub. Lorsque vous décodez le jeton d’ID, il ressemble à ce qui suit :