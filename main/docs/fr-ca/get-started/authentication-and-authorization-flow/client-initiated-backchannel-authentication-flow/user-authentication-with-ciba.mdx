---
og:description: Learn how to authenticate users with the Client-Initiated Backchannel
  Authentication Flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Authentification des utilisateurs avec CIBA
og:url: https://auth0.com/docs/
permalink: user-authentication-with-ciba
title: Authentification des utilisateurs avec CIBA
twitter:description: Learn how to authenticate users with the Client-Initiated Backchannel
  Authentication Flow.
twitter:title: Authentification des utilisateurs avec CIBA
---



L’authentification par canal d’appui initiée par le client (CIBA) ne repose pas sur une application client qui redirige l’utilisateur via le navigateur pour effectuer le processus de connexion/d’authentification. Au lieu de cela, l’application client appelle directement le fournisseur OpenID par le biais d’une demande par canal d’appui pour lancer le flux d’authentification.

Le schéma de séquences suivant illustre une mise en œuvre du flux CIBA :

Deux éléments sont définis : un utilisateur autorisant et un utilisateur initiant. L’utilisateur autorisant et l’utilisateur initiant peuvent être deux personnes différentes, par exemple un utilisateur qui appelle un centre d’appel et un agent d’un centre d’appel. Dans d’autres cas d’utilisation, il peut s’agir de la même personne, par exemple un utilisateur qui s’authentifie auprès d’un kiosque de vente au détail ou d’un autre appareil connecté.

Les sections suivantes expliquent étape par étape comment fonctionne l’authentification de l’utilisateur avec le flux CIBA :

* [Conditions préalables](#prerequisites)
* [Étape 1 - L’application client initie une demande CIBA](#step-1-client-application-initiates-a-ciba-request)
* [Étape 2 - Le locataire Auth0 accuse réception de la demande CIBA](#step-2-auth0-tenant-acknowledges-the-ciba-request)
* [Étape 3 - L’application client demande une réponse](#step-3-client-application-polls-for-a-response)
* [Étape 4 - L’application mobile reçoit la notification poussée](#step-4-mobile-application-receives-the-push-notification)
* [Étape 5 - L’application mobile récupère les détails du consentement](#step-5-mobile-application-retrieves-the-consent-details)
* [Étape 6 - L’application mobile présente les détails du consentement à l’utilisateur](#step-6-mobile-application-presents-the-consent-details-to-the-user)
* [Étape 7 - L’application mobile envoie la réponse de l’utilisateur à Auth0](#step-7-mobile-application-sends-the-user-response-back-to-auth0)
* [Étape 8 - Auth0 reçoit la réponse de l’utilisateur une fois le flux terminé](#step-8-auth0-receives-user-response-after-the-flow-completes)

## Conditions préalables

Pour initier une requête CIBA poussée, l’utilisateur autorisant doit être inscrit à la MFA en utilisant les notifications poussées. Pour vérifier dans Auth0 Dashboard, naviguez vers **User Management (Gestion des utilisateurs) > Users (Utilisateurs)** et cliquez sur l’utilisateur :

Si vous avez défini l’authentification multifacteur (MFA) comme obligatoire pour votre locataire, les utilisateurs sont invités à s’inscrire à la MFA lors de leur prochaine connexion. Vous pouvez également utiliser des [Actions](https://auth0.com/blog/using-actions-to-customize-your-mfa-factors/) pour demander l’inscription à la MFA.

Les notifications poussées pour la MFA sont généralement mises en œuvre dans une application mobile personnalisée qui intègre la trousse SDK Guardian. Pour en savoir plus, lisez [Configurer une authentification par canal d’appui initiée par le client](/get-started/applications/configure-client-initiated-backchannel-authentication).

## Étape 1 - L’application client initie une demande CIBA

Utilisez les [User Search API (API de recherche d’utilisateurs)](https://auth0.com/docs/manage-users/user-search) pour trouver l’utilisateur autorisé pour lequel vous souhaitez lancer une demande CIBA et obtenir son identifiant utilisateur.

Une fois que vous avez l’identifiant de l’utilisateur autorisant, utilisez l’Authentication API ou nos [trousses SDK](/libraries) pour envoyer une demande CIBA au point de terminaison `/bc-authorize` :





****

## Étape 2 - Le locataire Auth0 accuse réception de la demande CIBA

Si le locataire Auth0 reçoit avec succès la requête POST, vous devriez recevoir une réponse contenant un `auth-req-id` qui référence la requête :



La valeur `auth_req_id` est transmise au point de terminaison `/token` pour vérifier l’achèvement du flux CIBA.

## Étape 3 - L’application client demande une réponse

Utilisez l’Authentication API ou nos [trousses SDK](/libraries) pour appeler le point de terminaison `/token` en utilisant le type d’autorisation `urn:openid:params:grant-type:ciba` et le `auth_req_id` que vous avez reçu du point de terminaison `/bc-authorize` :



Jusqu’à ce que l’utilisateur autorisant la transaction l’approuve, vous devriez recevoir la réponse suivante :



L’intervalle d’attente pour la demande est d’environ cinq secondes. Si vous interrogez trop fréquemment, vous recevrez la réponse suivante, dont la description varie en fonction de l’intervalle d’attente :



Pour résoudre l’erreur, attendez le prochain intervalle (en secondes) pour interroger le point de terminaison `/token`.

## Étape 4 - L’application mobile reçoit la notification poussée

Auth0 envoie une notification poussée à l’application mobile ou à l’appareil enregistré de l’utilisateur. La [trousse SDK Guardian](/secure/multi-factor-authentication/auth0-guardian) fournit des méthodes pour analyser les données reçues de la notification poussée et retourner une instance `Notification` prête à l’emploi. L’instance `Notification` comprend un identifiant de liaison de transaction, ou `txlinkid`, que l’application mobile utilise pour récupérer les détails du consentement auprès d’Auth0.

Les exemples de code suivants sont des exemples d’implémentations de notifications poussées mobiles iOS et Android utilisant la trousse SDK Guardian :



## Étape 5 - L’application mobile récupère les détails du consentement

Appelez la trousse SDK Guardian à partir de votre application mobile pour récupérer les détails du consentement, c’est-à-dire le contenu de `binding_message` depuis l’Auth0 Consent API.

Les exemples de code suivants sont des exemples d’implémentations iOS et Android qui récupèrent les données depuis Auth0 Consent API :



## Étape 6 - L’application mobile présente les détails du consentement à l’utilisateur

L’Auth0 Consent API envoie à l’application mobile une réponse contenant le `binding_message` ou les détails du consentement. L’application mobile présente la demande d’authentification et/ou les détails du consentement à l’utilisateur.

L’exemple de code suivant est un exemple de réponse de l’Auth0 Consent API :



L’utilisateur peut accepter ou refuser la demande d’authentification à ce stade.

## Étape 7 - L’application mobile envoie la réponse de l’utilisateur à Auth0

Selon que l’utilisateur accepte ou rejette la demande d’authentification, l’application mobile renvoie la réponse de l’utilisateur à Auth0.

Les exemples de code suivants sont des implémentations iOS et Android qui traitent la réponse de l’utilisateur :

### L’utilisateur accepte la demande d’authentification





### L’utilisateur rejette la demande d’authentification







## Étape 8 - Auth0 reçoit la réponse de l’utilisateur une fois le flux terminé

L’application client termine l’interrogation après avoir reçu une réponse du point de terminaison `/token`. Un flux CIBA nécessite toujours une réponse, soit une approbation, soit un refus, de la part de l’utilisateur qui a donné l’autorisation, et les autorisations existantes ne sont pas vérifiées.

Si l’utilisateur rejette la requête poussée, vous devriez recevoir la réponse suivante :



Si l’utilisateur approuve la requête poussée, vous devriez recevoir la réponse suivante :