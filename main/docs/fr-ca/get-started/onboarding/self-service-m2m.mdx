---
og:description: Describes how to onboard with an M2M business case.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Libre-service machine-machine (M2M)
og:url: https://auth0.com/docs/
permalink: self-service-m2m
title: Libre-service machine-machine (M2M)
twitter:description: Describes how to onboard with an M2M business case.
twitter:title: Libre-service machine-machine (M2M)
---

Si votre cas d’utilisation s’adresse à une audience non interactive comme des API ou des serveurs dorsaux, vous serez intégré avec une configuration machine-machine (M2M).

## Cas d’utilisation

Utilisez le parcours d’intégration M2M si vous êtes concerné par (ou si vous utilisez) ce qui suit :

* Prise en charge des communications de service à service.
* Exécution de tâches planifiées ou de tâches cron sur des serveurs qui doivent accéder à des ressources protégées ou à des API.
* Appareils IoT autorisés à communiquer avec des services dorsaux ou des API.
* Couche API qui doit communiquer avec d’autres couches API sans intervention de l’utilisateur ou après l’expiration d’un jeton utilisateur.
* API privilégiée qui peut devoir être appelée avant qu’un utilisateur ne se soit authentifié (par exemple, à partir d’une action à partir d’une règle ou d’un script de base de données personnalisé dans votre locataire Auth0).
* Passerelle API pour gérer les services dorsaux.
* Applications non interactives ou des outils sans intervention humaine, tels que des démons ou des services dorsaux.



## Comment utiliser ce guide

Ce guide vous accompagne dans la création de votre implémentation M2M dans Auth0. Nous vous proposons des recommandations, des bonnes pratiques et des concepts clés à prendre en compte.

* En matière d’architecture, nous vous recommandons de configurer Auth0 de manière à soutenir votre cycle de vie de développement logiciel ainsi que votre infrastructure actuelle.
* Dans la section Créer un compte, nous expliquons comment configurer une instance d’API dans Auth0 et créer une application afin de prendre en charge le flux d’authentification (ou le type d’autorisation) requis pour l’authentification machine-machine.
* Dans la section Authentification, nous détaillons le type d’autorisation à utiliser pour l’authentification, ainsi que les jetons d’accès et les permissions que vous pouvez définir.
* Dans la section Image de marque, nous expliquons où trouver les informations nécessaires pour configurer des domaines personnalisés, en fonction de la manière dont vous compter gérer les certificats.
* Dans la section Automatisations de déploiement, vous découvrirez nos outils conçus pour faciliter vos processus de déploiement.
* Dans la section Assurance qualité, vous trouverez des informations sur les tests unitaires et les contrôles de préparation disponibles dans le tableau de bord Auth0.

## Architecture

Avant de configurer votre compte et votre locataire Auth0, ou d’organiser les groupes et structures de vos services Auth0, il est recommandé de cartographier votre infrastructure existante. Cela vous permettra de tirer pleinement parti des capacités d’Auth0 au sein de votre écosystème actuel.

Comme indiqué dans les scénarios courants, il se peut que vous disposiez d’autres technologies non interactives dans vos domaines d’applications, de réseaux ou d’appareils M2M, qu’il est important de prendre en considération avant de procéder à la configuration d’Auth0. Pour consulter un exemple de scénario M2M, veuillez consulter [Serveur + API](/architecture-scenarios/server-api/part-1). Pour mettre en place un laboratoire pratique avec Node et tester le déploiement de l’API, veuillez consulter notre [référentiel GitHub](https://www.google.com/url?q=https://github.com/auth0-training/labs-node-working-with-apis&sa=D&source=docs&ust=1723578190947730&usg=AOvVaw3IXRQG9ogH4pW6LEY047T6).

Il pourra être utile de créer une visualisation de votre environnement technologique actuel ainsi que de planifier la manière dont Auth0 s’intègre à votre cycle de vie de développement logiciel (SDLC) actuel. Cela pourra vous aider à déterminer le nombre de locataires dont vous pourriez avoir besoin.

### Considérations

Avant de créer un nouveau compte ou de configurer votre premier locataire, il peut être utile de prendre en compte les éléments suivants :

* Comment vous partitionnez ou regroupez vos API pour appeler des points de terminaison spécifiques.

* Cela peut déterminer l'audience et d’autres demandes sur les jetons d’accès.
* Tout consommateur tiers de votre ressource peut demander un jeton d’accès pour chaque appel. Les appels excessifs pourraient affecter votre [limite anti-attaques](/self-service-public).

## Créer un compte

Maintenant que vous avez un plan pour votre architecture, vous allez configurer votre compte Auth0 et vos locataires. Lorsque vous vous inscrivez aux services Auth0, vous créez votre premier [locataire](/get-started/create-tenants). Vous y configurez les actifs, les services et les ressources Auth0. [Inscrivez-vous](https://auth0.com/signup) pour commencer.



### Provisionner un locataire

Maintenant que vous avez un plan pour votre architecture, vous allez configurer votre compte Auth0 et  .



#### Enregistrer une API

Dans cette section, vous allez créez votre API dans Auth0.





### Associer une application

Il est nécessaire d’établir une association entre votre application et votre API pour permettre à votre application de solliciter des jetons d’accès. Vous en apprendrez plus sur les autorisations client dans la section Authentification.





## Authentification

Lorsque vous appelez une API depuis une autre API, ou depuis toute situation où il n’y a pas de contexte d’utilisateur authentifié, vous aurez besoin d’un moyen d’autoriser l’application au lieu d’un utilisateur. Il s’agit d’un processus en une seule étape au cours duquel l’application est authentifiée (à l’aide d’un `client_id` et `client_secret`), puis autorisée en un seul appel.

Pour les applications ou services non interactifs à authentifier, vous devez sélectionner une autorisation client ou un flux d’authentification. Le [Flux des identifiants client](https://tools.ietf.org/html/rfc6749#section-4.4) OAuth 2.0, ne nécessite pas d’interaction humaine et est particulièrement adapté aux applications M2M.



### Configurer le flux des identifiants client

Vous pouvez utiliser Auth0 Dashboard ou Management API pour configurer le flux d’authentification, permettant ainsi de fournir des informations d’authentification client en échange d’un jeton d’accès.

Suivez les instructions de la section [Mettre à jour les types d’autorisation](/applications/update-grant-types) pour utiliser Auth0 Dashboard ou Management API.

### Jetons d’accès M2M

Dans l’authentification basée sur des jetons, les clients non interactifs fournissent `client_id` et `client_secret` dans un appel au [point de terminaison du jeton Authentication API](https://auth0.com/docs/customize/actions/flows-and-triggers/machine-to-machine-flow) pour obtenir un [jeton d’accès](/security/tokens/access-tokens). Ce jeton d’accès permet d’accéder à votre API protégée.

Le profil ou format par défaut est le profil de jeton Auth0 associé à deux profils de jeton. Vous pouvez choisir de modifier le profil du jeton en choisissant RFC 9068. Pour en savoir plus, lisez [Profils de jetons d’accès](/access-token-profiles). Pour vérifier que le jeton est valide, votre API vérifiera les [Algorithmes de signature](/applications/signing-algorithms). L’algorithme de signature par défaut est RSA256, un algorithme basé sur une clé.



#### Exemple

Une demande au point de terminaison `/oauth/token` doit être similaire à l’exemple ci-dessous :



La réponse devrait être similaire à l’exemple ci-dessous :



#### Expiration du jeton

Vos jetons d’accès ont une limite de durée de validité. Étant donné que vos communications se déroulent sur le canal d'appui, l’utilisation de jetons d’actualisation pour prolonger les sessions n’est pas possible. Il est donc recommandé de configurer vos jetons d’accès avec un délai d’expiration d’une heure. Il vous faudra peut-être trouver le bon équilibre entre sécurité et performance en fonction des besoins spécifiques de votre environnement. Pour en savoir plus, veuillez consulter [Mettre à jour la durée de vie du jeton d’accès](/security/tokens/access-tokens/update-access-token-lifetime).

### Permissions

Avant que tout client ou service non interactif n’appelle votre API, vous devez définir les autorisations ou les portées autorisées par votre API. Vous pouvez définir les permissions dans Auth0 Dashboard afin de les inclure dans votre demande à l’Authentication API. Pour lire plus d’exemples de façons d’utiliser les permissions des API, veuillez consulter [Permissions des API](/apis/scopes/api-scopes).

Pour configurer les permissions, veuillez consulter les instructions [Ajouter des autorisations API](/apis/add-api-permissions) pour Auth0 Dashboard ou utilisez l’exemple fourni pour Management API.



## Image de marque

Même si vous offrez des services à des clients non interactifs ou à des clients opérant sur le canal d’appui, vous pouvez toujours personnaliser votre expérience pour l’aligner sur l’apparence de votre marque existante.

### Domaines personnalisés

Auth0 prend en charge l’utilisation de domaines personnalisés lors de l’appel du point de terminaison `/authorize` pour demander des jetons d’accès.



1. Pour configurer votre domaine personnalisé avec des certificats gérés par Auth0, suivez les instructions fournies à la section [Configurer des domaines personnalisés avec des certificats gérés par Auth0](/custom-domains/auth0-managed-certificates).

1. Si vous souhaitez gérer vos propres certificats, suivez les instructions fournies à la section [Configurer des domaines personnalisés avec des certificats autogérés](/custom-domains/self-managed-certificates).
2. Lisez [Configuration de l’API avec des domaines personnalisés](https://auth0.com/docs/customize/custom-domains/configure-features-to-use-custom-domains#apis). Vous devrez peut-être ajuster vos paramètres API pour intégrer un domaine personnalisé.

Si vous rencontrez des problèmes avec votre domaine personnalisé, veuillez consulter la section [Dépannage des domaines personnalisés](/troubleshoot/troubleshoot-integration-and-extensibility/troubleshoot-custom-domains).

## Automatisation du déploiement

Auth0 offre une prise en charge pour plusieurs options différentes concernant les approches d’automatisation du déploiement que vous pouvez utiliser, chacune pouvant être utilisée conjointement avec l’autre.



### Outil Deploy CLI

Comme indiqué dans la section Architecture, il est recommandé d’avoir des locataires Auth0 distincts pour le développement, les tests et la production. Ces locataires doivent partager des configurations identiques pour garantir la qualité et les tests. Cependant, des erreurs peuvent survenir si des configurations incompatibles existent entre vos différents environnements. Par exemple, chaque environnement aura des ID client et des secrets client différents.

Pour réduire les erreurs de non-concordance, vous pouvez utiliser l’outil Deploy CLI afin d’intégrer votre instance Auth0 à votre pipeline CI/CD existant. Avec le remplacement dynamique des mots-clés, vous pouvez substituer les variables d’environnement des locataires partageant des configurations similaires. Pour en savoir plus, veuillez consulter [Outil Deploy CLI](/deploy/deploy-cli-tool) et [Remplacement de mots-clés](/keyword-replacement).

### Extension des journaux Webtask en temps réel

L’extension Real-time Webtask Logs affiche tous les journaux du code personnalisé en temps réel, y compris la sortie `console.log` et autres exceptions. Si vous utilisez Auth0 Actions ou une autre logique personnalisée, vous pouvez utiliser cette extension pour déboguer et dépanner les problèmes. Pour en savoir plus sur l’installation et la configuration, veuillez consulter [Extension des journaux WebTask en temps réel](/extensions/real-time-webtask-logs).

## Assurance qualité

L’assurance qualité est importante pour identifier les problèmes avant la mise en service. En fonction de la nature de votre projet, il existe plusieurs types différents de tests d’assurance qualité que vous voudrez envisager dans le cadre de votre intégration avec Auth0 :

* Comment votre API se comportera-t-elle lorsqu’elle seront soumise à des charges de production inattendues?
* Comment vos limites anti-attaques seront-elles affectées par les applications tierces?

Si vous n’utilisez pas les gadgets logiciels ou les fonctionnalités Auth0, comme la connexion universelle, vous ne profiterez pas des meilleures pratiques d’utilisation et d’accessibilité intégrées, prêtes à l’emploi sur une large gamme de navigateurs et d’appareils. Pour assurer que les exigences fonctionnelles sont respectées et que les événements inattendus sont gérés correctement, des conseils sont fournis pour tester l’intégration entre votre ou vos applications et Auth0, et pour des tests unitaires de modules d’extensibilité individuels, comme Auth0 Actions. Nous vous recommandons également de consulter la [politique de tests de pénétration d’Auth0](/support/policies/penetration-testing-policy) et les tests simulés complets que vous pouvez exploiter en conjonction avec notre [politique de test de charge](/support/policies/load-testing-policy) pour garantir que votre/vos application(s) fonctionnent sous une charge inattendue.

### Tests unitaires

Les tests unitaires vérifient les unités d’extensibilité, comme Auth0 Actions. Si vous utilisez du code personnalisé, nous vous recommandons d’utiliser un cadre d'applications (tel que [Mocha](https://mochajs.org/)) pour tester le code supplémentaire avant le déploiement.

### Tests de simulation

Pour trouver un équilibre entre la [politique de test de charge](/support/policies/load-testing-policy) d’Auth0 et votre souhait de réaliser des tests de charge, il est courant de créer un test simulé des points de terminaison d’Auth0. Cette pratique est précieuse pour garantir que votre application fonctionne avec les interfaces attendues sans avoir à restreindre vos tests, et des outils tels que [MockServer](http://www.mock-server.com/), [JSON Server](https://github.com/typicode/json-server) ou même [Postman](https://learning.getpostman.com/docs/postman/mock_servers/setting_up_mock/) peuvent être utilisés à cette fin.

## Déploiement

Notre section [Déployer et surveiller](/deploy) fournit des conseils sur les meilleures pratiques de déploiement. Nous vous recommandons de lire [Vérifications de prédéploiement](/deploy/pre-deployment)[](/deploy/pre-deployment), en particulier la section traitant des [Vérifications de préparation Auth0 Dashboard intégrées](/deploy/pre-deployment/how-to-run-production-checks).

Pour consulter la Vérification de préparation, sélectionnez le menu déroulant sous le nom de votre locataire et l’étiquette environnementale dans [Auth0 Dashboard > Run Readiness Checks (Exécuter les vérifications de préparation)](%24%7Bmanage_url%7D/#/production-checks).

Vous pouvez utiliser le filtre pour appliquer les vérifications de préparation aux applications sélectionnées. **Ces vérifications ne s’appliquent pas à vos API configurées**.

Pour les vérifications qui ne s’appliquent pas à votre configuration spécifique, vous pouvez sélectionner **Dismiss (Rejeter)** pour les retirer des résultats finaux.

Nous vous conseillons de lire [Bonnes pratiques de déploiement](/not-found/70zpztJMDHy4q0bwO4Xzgn/deployment-best-practices) pour les dernières vérifications avant de passer en situation réelle et de tirer parti des [Logs](/logs) (Journaux) pour surveiller vos services.