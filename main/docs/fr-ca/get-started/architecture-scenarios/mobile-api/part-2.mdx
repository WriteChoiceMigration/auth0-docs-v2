---
og:description: Auth0 Configuration for the Mobile + API architecture scenario
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Configuration Auth0 (Applications mobiles + API)
og:url: https://auth0.com/docs/
permalink: part-2
title: Configuration Auth0 (Applications mobiles + API)
twitter:description: Auth0 Configuration for the Mobile + API architecture scenario
twitter:title: Configuration Auth0 (Applications mobiles + API)
---

In this section we will review all the configurations we need to apply at the [Auth0 Dashboard](https://manage.auth0.com/#).

## Création de l’API

Click on the [APIs menu option](https://manage.auth0.com/#/apis) on the left, and click the Create API button.

Vous devrez fournir les informations suivantes pour votre API :

* **Nom** : un nom convivial pour l’API. N’affecte aucune fonctionnalité.
* **Identifiant** : identifiant unique pour l’API. Nous recommandons d’utiliser une URL mais il n’est pas nécessaire qu’elle soit accessible au public, Auth0 n’appellera pas votre API. Cette valeur ne peut pas être modifiée par la suite.
* **<Tooltip tip="Signing Algorithm: Algorithm used to digitally sign tokens to ensure the token has not been tampered with." cta="View Glossary" href="/docs/glossary?term=Signing+Algorithm">Signing Algorithm</Tooltip>**: the algorithm to sign the tokens with. The available values are `HS256` and `RS256`. When selecting RS256 the token will be signed with the tenant's private key. To learn more about signing algorithms, see [Signing Algorithms](/docs/get-started/applications/signing-algorithms).

<Frame>![Dashboard - Applications - APIs - Create API - Popup](/images/cdy7uua7fh8z/4kIH4BQc4vDel2zhJ6lwCE/094cff6e8e1788c39796eb28ab1925ca/2024-06-27_14-50-24.png)</Frame>

Remplissez les informations requises et cliquez sur la touche **Créer**.

#### Algorithmes de signature

When you create an API you have to select the algorithm your tokens will be signed with. The signature is used to verify that the sender of the <Tooltip tip="JSON Web Token (JWT): Standard ID Token format (and often Access Token format) used to represent claims securely between two parties." cta="View Glossary" href="/docs/glossary?term=JWT">JWT</Tooltip> is who it says it is and to ensure that the message wasn't changed along the way.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

The signature is part of a JWT. If you are unfamiliar with JWT structure, please see [JSON Web Token Structure](/docs/secure/tokens/json-web-tokens/json-web-token-structure).

</Callout>

Pour créer la signature, vous devez prendre l’en-tête encodé, la charge utile encodée, un secret, l’algorithme spécifié dans l’en-tête et signer le tout. Cet algorithme, qui fait partie de l’en-tête JWT, est celui que vous sélectionnez pour votre API : `HS256` ou `RS256`.

* **RS256** is an [asymmetric algorithm](https://en.wikipedia.org/wiki/Public-key_cryptography) which means that there are two keys: one public and one private (secret). Auth0 has the secret key, which is used to generate the signature, and the consumer of the JWT has the public key, which is used to validate the signature.
* **HS256** is a [symmetric algorithm](https://en.wikipedia.org/wiki/Symmetric-key_algorithm) which means that there is only one secret key, shared between the two parties. The same key is used both to generate the signature and to validate it. Special care should be taken in order for the key to remain confidential.

La pratique la plus sûre, et notre recommandation, est d’utiliser **RS256**. Voici quelques raisons :

* Avec RS256, vous êtes sûr que seul le détenteur de la clé privée (Auth0) peut signer les jetons, tandis que n’importe qui peut vérifier si le jeton est valide à l’aide de la clé publique.
* Dans un contexte lié à HS256, si la clé privée est compromise, vous allez devoir déployer à nouveau l’API avec le nouveau secret. Avec RS256 pouvez demander un jeton valide pour différentes audiences.
* Avec RS256 vous pouvez mettre en œuvre la rotation des clés sans avoir à redéployer l’API avec le nouveau secret.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

For a more detailed overview of the JWT signing algorithms refer to: [JSON Web Token (JWT) Algorithmes de signature Overview](https://auth0.com/blog/json-web-token-signing-algorithms-overview/).

</Callout>

### Configuration des permissions

Une fois que l’application a été créée, vous devez configurer les permissions que les applications peuvent demander pendant l’autorisation.

Dans les paramètres de votre API, rendez-vous dans l’onglet **Permissions**. Dans cette section, vous pouvez ajouter les quatre permissions mentionnés précédemment : `read:timesheets`, `create:timesheets`, `delete:timesheets`, et `approve:timesheets`.

<Frame>![Dashboard - Applications - APIs - Permissions](/images/cdy7uua7fh8z/xxMOKezob6gNHJ0CcKhcg/ccbb9bbab29576a96ed8425329ecffb4/dashboard-apis-edit_view-permissions.png)</Frame>

## Créer l’application

Il existe quatre types d’applications dans Auth0 : **Native App (Applications natives)** (utilisées pour les applications mobiles ou de bureau), **Single-Page Web App (Applications à page unique)**, **Regular Web App (Applications Web régulières)**, et **Machine to Machine App (Applications de communication entre machines** (utilisées par les CLI, les démons ou les services s’exécutant sur votre système dorsal). Pour ce scénario, nous voulons créer une nouvelle application pour notre application mobile, nous utiliserons donc une application de type Native.

To create a new Application, navigate to the [dashboard](https://manage.auth0.com/#) and click on the [Applications](https://manage.auth0.com/#/applications) menu option on the left. Click the **+ Create Application** button.

Définissez un nom pour votre application (nous utiliserons `Timesheets Mobile`) et sélectionnez `Native App` comme type.

Cliquez sur **Créer**.

## Configure the Authorization Extension (Configurer l’extension d’autorisation)

You will need to ensure that the Authorization Extension is installed for your tenant. You can refer to the [Authorization Extension documentation](/docs/customize/extensions/authorization-extension) for details on how to do this.

### Définir les autorisations

Vous devrez définir des autorisations qui correspondent aux permissions que vous avez déjà définies. Dans Authorization Extension, cliquez sur l’onglet Autorisations, puis sur la touche **Create Permission (Créer une autorisation)**. Dans la boîte de dialogue, saisissez les détails de chaque autorisation. Veillez à ce que le nom de l’autorisation soit exactement le même que celui de la permission correspondante :

Créez les autorisations pour toutes les permissions restantes :

### Définir les rôles

Allez dans l’onglet Rôles et créez deux rôles. Cliquez sur la touche **Créer un rôle** et sélectionnez l’application **Monopage Feuille de temps**. Donnez au rôle un nom et une description d’employé, et sélectionnez les autorisations `delete:timesheets`, `create:timesheets` and `read:timesheets`. Cliquez sur **Enregistrer**.

Ensuite, suivez le même processus pour créer un rôle de **Gestionnaire** et assurez-vous que vous avez sélectionné toutes les autorisations :

<Frame>![Dashboard - Extensions - Authorization Extension - Create Manager Role](/images/cdy7uua7fh8z/3ver0yyJpTLypmcIDzwSNt/d880e8ae74e6e973c7ce1c8b0f7e7c87/create-manager-role.png)</Frame>

### Attribuer des utilisateurs aux rôles

Vous devrez attribuer à tous les utilisateurs le rôle de gestionnaire ou d’utilisateur. Vous pouvez le faire en allant dans l’onglet Utilisateurs d’Authorization Extension et en sélectionnant un utilisateur. Dans l’écran d’informations de l’utilisateur, allez dans l’onglet Rôles. Vous pouvez ajouter un rôle à l’utilisateur en cliquant sur la touche **Ajouter un rôle à l’utilisateur** en sélectionnant le rôle approprié pour l’utilisateur.

### Configuration d’Authorization Extension

Vous devrez également vous assurer que la règle pour Authorization Extension est publiée. Vous pouvez le faire en cliquant sur votre avatar d’utilisateur en haut à droite d’Authorization Extension, et en sélectionnant l’option **Configuration** :

Assurez-vous que vous avez activé les **Autorisations**, puis cliquez sur la touche **Publier la règle**.

### Créer une règle pour valider les permissions des jetons

The final step in this process is to create a Rule which will validate that the scopes contained in an <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=Access+Token">Access Token</Tooltip> is valid based on the permissions assigned to the user. Any scopes which are not valid for a user should be removed from the Access Token.

In your <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip>, go to the Rules tab. You should see the Rule created by the Authorization Extension.

Cliquez sur la touche **Créer une règle** et sélectionnez le modèle **Règle vide**. Vous pouvez donner un nom à la règle, par exemple **Permissions des jetons d’accès**, puis indiquer le code suivant pour la règle :

```javascript lines
function (user, context, callback) {
  if (context.clientName !== 'Timesheets SPA') {
    return callback(null, user, context);
  }

  var permissions = user.permissions || [];
  var requestedScopes = context.request.body.scope || context.request.query.scope;
  var filteredScopes = requestedScopes.split(' ').filter( function(x) {
    return x.indexOf(':') < 0;
  });
  Array.prototype.push.apply(filteredScopes, permissions);
  context.accessToken.scope = filteredScopes.join(' ');

  callback(null, user, context);
}
```






Le code ci-dessus garantit que tous les jetons d’accès ne contiennent que les champs d’application correctement formatés (p. ex., `action:area` ou `delete:timesheets`) qui sont valides en fonction des permissions de l’utilisateur. Une fois que vous avez terminé, vous pouvez cliquer sur la touche **Enregistrer**.

Les règles s’exécutent dans l’ordre où elles sont affichées sur la page Règles. Par conséquent, veillez à ce que la nouvelle règle que vous avez créée soit placée sous la règle d’Authorization Extension, afin qu’elle s’exécute après la règle d’Authorization Extension.

PREVIOUS TUTORIAL [1. Solution Overview](/docs/get-started/architecture-scenarios/mobile-api/part-1)

NEXT TUTORIAL [3. API + Mobile Implementation](/docs/get-started/architecture-scenarios/mobile-api/api-implementation-nodejs)