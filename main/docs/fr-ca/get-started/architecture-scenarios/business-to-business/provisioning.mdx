---
og:description: User provisioning functionality and considerations for your B2B IAM
  implementation.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Provisionnement (commerce interentreprises - B2B)
og:url: https://auth0.com/docs/
permalink: provisioning
title: Provisionnement (commerce interentreprises - B2B)
twitter:description: User provisioning functionality and considerations for your B2B
  IAM implementation.
twitter:title: Provisionnement (commerce interentreprises - B2B)
---

Déterminer comment les utilisateurs seront inscrits est une étape cruciale à aborder dès le début, car les décisions prises à ce stade auront un impact sur de nombreuses autres décisions futures. Nous avons identifié un ensemble de modèles récurrents concernant la manière dont les utilisateurs seront intégrés à votre système, ainsi que des éléments importants à prendre en compte lors de la conception des flux de travail.

<Info>
### Best practice

While Auth0 supports numerous workflows, web based workflows using Auth0 [Universal Login](/docs/authenticate/login/auth0-universal-login) for sign up are considered both industry and Auth0 best practice as they provide for optimal functionality and the best security.
</Info>

Auth0 supports user sign up via a number of different [identity providers](/docs/authenticate/identity-providers). During sign up, Auth0 provisions the user profile so that it contains the user’s account information. There are a number of things to consider when looking at functionality and workflow:

* L’utilisateur est-il intégré au domaine de votre entreprise ou reste-t-il dans le domaine de son organisation d’origine?
* Si l’utilisateur reste dans son propre domaine, est-il associé à une seule organisation ou peut-il être lié à plusieurs organisations simultanément?
* Comment gérez-vous le provisionnement de l’organisation elle-même dans votre système?
* Devriez-vous utiliser Auth0 comme magasin d’identités?
* Pouvez-vous utiliser votre propre magasin d’identités (ancien) avec Auth0?
* Comment migrer les identités des utilisateurs de votre magasin d’identités vers Auth0?
* Can your users sign up using their organization's <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+provider">identity provider</Tooltip>?
* Vos utilisateurs peuvent-ils être invités ou s’inscrire eux-mêmes?

L’une des premières décisions à prendre lors de la fourniture de vos services à d’autres entreprises est de déterminer à quel domaine appartiennent les utilisateurs. En fonction de la réponse à cette question, vous pouvez adopter plusieurs approches différentes pour provisionner ces utilisateurs. Veuillez consulter [Provisionnement des utilisateurs d’organisation](#provisioning-organization-users) pour plus d’informations. Une fois que vous avez déterminé comment les organisations seront représentées dans votre système, vous devrez réfléchir à la manière dont vous allez provisionner l’organisation elle-même. Veuillez consulter [Provisionnement des organisations](#provisioning-organizations) pour plus d’informations.

Auth0 propose un stockage d’identités prêt à l’emploi qui peut être utilisé pour stocker les identifiants des utilisateurs de manière sûre et sécurisé. Veuillez consulter [Auto-inscription](#self-sign-up) pour plus d’informations. Si vous disposez déjà d’un ancien magasin d’identités et que vous souhaitez déléguer sa gestion, les fonctionnalités de [Migration des utilisateurs](#user-migration) vous offrent plusieurs options pour y parvenir.

Alternativement, si vous devez conserver votre ancien magasin d’identités, par exemple parce que certaines applications ne peuvent pas encore être migrées, vous pouvez utiliser la fonctionnalité [proxy de magasin d’identités](#identity-store-proxy). Proposer à vos clients « d’apporter et d’utiliser leur propre identité » est également une option intéressante. Même si cela n’est souvent pas mis en place au départ, la fonctionnalité [inscription via un réseau social](#social-sign-up) vous permet de proposer cette option à vos utilisateurs.

<Info>
### Get Started with Auth0 Videos

Watch these two short videos [Provision: Users Stores](/docs/articles) and [Provision: Import Users](/docs/articles) to learn how user profiles are provisioned within an Auth0 tenant and how Auth0 allows you to move your existing users to an Auth0 user store.
</Info>

## Provisionnement des organisations

What you need to do when provisioning an organization will depend on how organizations are represented in your system. This can take some time to step back and consider how users of those organizations will be interacting with your applications. See [Multiple Organization Architecture](/docs/get-started/architecture-scenarios/multiple-organization-architecture) to determine how to configure organizations for your IAM system.

Lors du provisionnement d’organisations, il est essentiel de prendre en compte les éléments suivants :

* Vous devrez ajouter l’organisation à la configuration de votre application et/ou à votre base de données interne.
* Plusieurs modifications seront nécessaires dans votre configuration Auth0, parmi lesquelles :

  + Dans des cas exceptionnels : créer un locataire unique pour l’organisation
  + Créer une nouvelle organisation dans votre locataire Auth0
  + Si vous isolez les utilisateurs par organisation, vous devrez créer une nouvelle connexion de base de données pour cette organisation.
  + Si vous partagez les utilisateurs entre plusieurs organisations, activez simplement la connexion de base de données partagée existante.
  + Ajoutez une connexion d’entreprise pour cette organisation et activez-la sur l’organisation

    - Cela inclura la collaboration avec l’organisation pour mettre à jour sa configuration existante ou ajouter une configuration pour votre locataire Auth0 s’il ne s’agit pas d’une ancienne organisation.
  + Provisionner un administrateur pour l’organisation
* Pour éviter les erreurs, il pourrait être judicieux de créer un [portail d’administration des organisations](#organization-admin-portal), afin de simplifier le processus de provisionnement des nouvelles organisations.
* Il pourrait également être utile de mettre en place un portail d’auto-inscription pour vos organisations. Cela permet à vos clients de créer eux-mêmes l’organisation. Cela peut faire partie du [portail d’administration de l’organisation](#organization-admin-portal).

### Portail d’administration de l’organisation

An organization admin portal is a portal that allows your administrators to create, modify, and remove organizations. These administrators can either be employees of your company, or customer admins. There are multiple activities that need to be done both in your own system and your Auth0 tenant. This portal will likely need to exist in your own system so it has access to your datastores and configuration. However, Auth0 provides the [Auth0 Management API](https://auth0.com/docs/api/management/v2) so that you can incorporate changes to your Auth0 tenant at the same time that you create the changes in your own system.

Il existe deux principales approches qui peuvent être adoptées pour créer une nouvelle organisation. Le choix de l’une ou l’autre dépend fortement de votre tolérance concernant le temps nécessaire pour mettre en place cette nouvelle organisation.

* **Live Updates to your Auth0 Tenant**: If you want to be able to create new organizations in real-time, then you will likely want to make the changes directly to your Auth0 tenant using the Auth0 <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>. This allows the changes to take place in real-time and allow the addition of a new organization to take effect immediately. Particulary if you are providing Self-Signup for organizations you may want to do this approach.

<Warning>

Live Updates do come with some things to consider. There are certain operations that must be done in serial to avoid issues. Enabling clients on a connection, adding callback URL's to an Application are two examples. Any operation in the Management API where you must retrieve an entire list and re-submit the entire list with the new value added to it are operations that must be done in serial to avoid two parallel operations overwriting one of the values.

</Warning>

* **Change the Repository and Re-deploy**: If you are taking advantage of the Deploy CLI (or a custom CLI) as part of your [CI/CD pipeline](/docs/get-started/architecture-scenarios/business-to-business/deployment), you may prefer to push your changes directly to your repository and then kickoff a new deployment instead. This can take a little more time, but it has benefits associated with version history and the ability to backout a change by re-deploying the previous version. You may want to have a separate repository just for the items that the organizations need so that you don't have to re-deploy other common components and risk making an error.

## Migration des utilisateurs

In addition to hosting the [User Profile](/docs/get-started/architecture-scenarios/business-to-business/profile-management), Auth0 also has the capability to both [proxy](#identity-store-proxy) your own legacy identity store and provide a secure Auth0 hosted replacement. Both of these capabilities are supported via the use of Auth0 [Database Connections](/docs/authenticate/database-connections). If you decide to use Auth0 as a replacement for your legacy identity store then you can [migrate users](/docs/manage-users/user-migration) either all at once with bulk migration, or progressively with automatic migration.

<Info>
### Best Practice

Customers often opt for a two-stage approach to user migration, using Automatic Migration first to migrate as many users as possible, then using Bulk Migration for the users that remain. See [User Migration Scenarios](/docs/manage-users/user-migration/user-migration-scenarios) for more information.
</Info>

Automatic Migration is preferred as it allows users to be migrated individually and also allows them to retain their existing passwords in almost all situations. For Bulk Migration, we recommend using the [Management API](https://auth0.com/docs/api/management/v2#!/Jobs/post_users_imports) over the [User Import/Export extension](/docs/manage-users/user-migration/user-import-export-extension) in all but the most simple cases, as the Management API provides for greater flexibility and control.

With Bulk Migration users typically need to **reset their password once the migration is complete** unless passwords are stored hashed in your legacy identity store using one of the supported algorithms. In this case, you may be able to use bulk migration and **preserve user passwords** as part of the process, depending on the algorithm and the number of salt rounds used. See [Bulk Import Database Schema Examples](/docs/manage-users/user-migration/bulk-user-import-database-schema-and-examples) for more information.

<Warning>

Importing hashed passwords relies on the source identity store using idiomatic implementations of one of the following algorithms: argon2, bcrypt, hmac, ldap, md4, md5, sha1, sha256, sha512, pbkdf2, and scrypt.

</Warning>

<Info>
### Best Practice

Calls to the Management API are subject to [Auth0 Rate Limiting policy](/docs/troubleshoot/customer-support/operational-policies/rate-limit-policy). You must take this into consideration, and to assist, Auth0 generally recommends use of the appropriate [Auth0 SDK](/docs/libraries) for your development environment rather than calling our APIs directly.
</Info>

### Proxy de magasin d’identités

Auth0 Database Connection types can also be configured to proxy an existing (legacy) identity store. If you need to keep user identities defined in your own legacy store - for example, if you have one or more business critical applications that you can’t migrate to Auth0, but which still need access to these identities - then you can easily integrate with Auth0. See [Authenticate Users Using Your Database](/docs/authenticate/database-connections/custom-db) for more information.

## Provisionnement des utilisateurs de l’organisation

Une organisation doit être directement liée à l’un de vos clients/partenaires commerciaux. Chaque entreprise/partenaire avec laquelle/lequel vous travaillez a des utilisateurs qui devront se connecter. Nous appelons ces utilisateurs finaux « utilisateurs de l’organisation ». Il existe deux approches différentes pour stocker les utilisateurs de votre organisation :

* **Isolés de l’organisation** : Chaque utilisateur appartient uniquement à une seule organisation. Il ne serait pas logique qu’un utilisateur appartienne à plusieurs organisations. Et même si c’était le cas, il serait plus cohérent qu’il dispose d’une « identité » distincte pour chaque organisation. Par exemple, un employé de vente au détail travaillant à temps partiel dans deux magasins différents aurait deux identifiants de connexion distincts pour chaque magasin, même si les deux magasins utilisent la même application SaaS. Pour en savoir plus, veuillez consulter [Provisionnement des utilisateurs isolés de l’organisation](#provisioning-users-isolated-to-the-organization).
* **Partagés entre les organisations** : Dans un cas comme celui-ci, les utilisateurs créent leurs propres identifiants au sein de votre entreprise ou accèdent aux instances d’autres organisations utilisant votre application en se servant des identifiants de leur propre organisation. Une façon simple de voir les choses est qu’un utilisateur peut être autorisé à accéder à plusieurs instances de l’application appartenant à une organisation. Un utilisateur comprendrait qu’il peut utiliser les mêmes identifiants pour accéder aux deux instances d’une application. Par exemple, certains médecins ont des contrats avec plusieurs cliniques et peuvent avoir besoin de pouvoir se connecter à chaque clinique distincte avec leurs mêmes identifiants. Pour en savoir plus, veuillez consulter [Provisionnement des utilisateurs partagés entre les organisations](#provisioning-users-shared-between-organizations).

### Provisionnement des utilisateurs isolés de l’organisation

Isoler les utilisateurs de l’organisation peut fournir une barrière propre et agréable entre les organisations. Si aucun utilisateur n’a besoin d’accéder à plus d’une organisation, ou si vous préférez les contraindre à créer plusieurs comptes, cette approche est intéressante.

Vous devez provisionner ces utilisateurs au niveau du fournisseur d’identité. Chacune des organisations disposera de son propre fournisseur d’identité pour réaliser cette tâche. Ce fournisseur d’identité sera disponible sous l’une des trois formes suivantes :

* **Votre locataire Auth0 est le fournisseur d’identité** : Une connexion à la base de données dans votre locataire principal dédiée à cette organisation.
* **Les organisations apportent leur propre fournisseur d’identité** : Vous configurez pour eux une connexion d’entreprise.
* **Organisations avec plus d’un fournisseur d’identité** : Vous activez plusieurs connexions d’entreprise, connexions sociales et pouvez également avoir une seule connexion à la base de données. Lorsque l’utilisateur sélectionne son organisation et essaie de se connecter, il pourra choisir parmi toutes les connexions disponibles pour cette organisation.

We recommend using Auth0 as an IdP as a starting point because it’s simple to implement a [user invite workflow](/docs/manage-users/organizations/configure-organizations/invite-members). Compared to other invite flows, the only thing special about this is that the person who is creating the user will have to either select the organization ahead of time, or the system will force the organization to match that of the user doing the inviting (in situations where there is an organization administrator who belongs to that organization only).

<Info>
### Best Practice

If you can utilize the [Organizations Feature](/docs/manage-users/organizations), it will greatly simplify your login system, making it more maintainable and extendable for the future. See [Multiple Organization Architecture](/docs/get-started/architecture-scenarios/multiple-organization-architecture) for a more in-depth view.
</Info>

### Provisionnement des utilisateurs partagés entre les organisations

When sharing users between organizations, you will need a way to authorize access. Because you won’t know where a user might belong when authenticating, we typically recommend storing your users in a single domain and then figuring out which organizations they can access by adding them as [members of the organization](/docs/manage-users/organizations/configure-organizations/assign-members). Because of this, provisioning will often be done by starting with a User Invite workflow for the single database connection, and then they will be added to the organization using the management API. You can then use the management API to retrieve which [organizations the user belongs to](/docs/manage-users/organizations/configure-organizations/retrieve-user-membership) if you need to provide a way for them to switch between organizations.

### Limitations de dé-provisionnement

Auth0 will not communicate with the upstream IdP if there is an active <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=SSO">SSO</Tooltip> session with Auth0 unless you force it with a `prompt=login`. If one of your customer organizations can not manage logout for those users, they may still have access after they’ve been decommissioned. Depending on the IdP, if Auth0 gets a token for their API, you can request information about the user from the IdP in a [rule](/docs/customize/rules) to poll whether that user should still have access or not. If you don’t have this ability, you will have to provide your customer organizations with a way to trigger a block or decommission of users in your system either through an API call or a UI.

## Invitation de l’utilisateur

Dans la plupart des scénarios de commerce interentreprises, seules certaines personnes sont autorisées à accéder à l’application. Par conséquent, il est souvent plus simple de demander à un administrateur de créer des comptes d’utilisateur plutôt que de laisser les utilisateurs s’inscrire, puis de demander à un administrateur de les approuver. Le provisionnement peut souvent être effectué de manière automatisée lorsque des utilisateurs sont également ajoutés à un système centralisé.

There are three different personas who might be [inviting users](/docs/customize/email/send-email-invitations-for-application-signup):

* Un administrateur de votre entreprise peut créer les utilisateurs pour chaque organisation.
* Un administrateur de chaque organisation peut être désigné pour créer des utilisateurs.
* Another system responsible for creating users may exist, and that system may then create a user in Auth0. Regardless of the <Tooltip tip="Audience: Unique identifier of the audience for an issued token. Named aud in a token, its value contains the ID of either an application (Client ID) for an ID Token or an API (API Identifier) for an Access Token." cta="View Glossary" href="/docs/glossary?term=audience">audience</Tooltip>, the technique can be similar. The rest is a matter of using the right authorization model for the application.

The recommended approach for user invite is to use the [Organizations Feature](/docs/manage-users/organizations/configure-organizations/invite-members) to accomplish this. If you are **not** using the Organizations Feature to implement user invites and are building your own, it is important to create each user with the `user.email_verified` parameter set to `false` and a random temporary password. The generated password should only be known to Auth0 and **not** stored in any external system nor passed to the user! Then, use the [Management API](https://auth0.com/docs/api/management/v2#!/Tickets/post_password_change) to send an email to the user with a link to reset their password; you can even modify the email template in Auth0 to reflect that this is part of an invited sign-up workflow too. This ensures that the user's email address belongs to the user being created and the only person who knows the password is the user themselves.

<Warning>

One of the main principles of OIDC is that no one except the user themselves ever knows their password. If you are doing an invite flow, have your backend system randomly generate a password and then discard it and have your user reset their password before ever logging in. Do not create a temporary password and give it to them to log in the first time.

</Warning>

## Inscription d’entreprise

Inscription d’entreprise is synonymous with sign in via [enterprise login](/docs/get-started/architecture-scenarios/business-to-business/authentication)—there’s no distinction here per se, as user [profile](/docs/get-started/architecture-scenarios/business-to-business/profile-management) creation happens automatically upon first enterprise login.

<Info>
### best practice

A nice advantage of allowing your customers to use their own IdP is that they can administer their users and assign roles and access in their own IdP setup instead of forcing you to build administration for them. Working out the mapping for those customers will make this much easier.
</Info>

<Warning>

If mapping isn't enough and you must put some metadata in your system, keep in mind that Auth0 will not create the user until they log in to the system the first time. Therefore, you will need to use rule extensibility to pull the initial information from somewhere else, or force users to log in the first time before you can add the metadata.

</Warning>

## Project Planning Guide

We provide planning guidance in PDF format that you can download and refer to for details about our recommended strategies.

[B2B IAM Project Planning Guide](https://assets.ctfassets.net/cdy7uua7fh8z/63F0WOPJdVzsPMxV1Xvp8x/7a329487c5e890d8e820f6a48983b46a/B2B_Project_Planning.pdf)

## Multiple Organization Architecture (Multitenancy)

Many B2B platforms implement some form of isolation and/or branding for their customers' organization, and this can add complexity to any Identity and Access Management (IAM) system. If this applies to you, then we recommend you take some time to read through our guidance and best practice advice for this type of environment.

[Multiple Organization Architecture](/docs/get-started/architecture-scenarios/multiple-organization-architecture)