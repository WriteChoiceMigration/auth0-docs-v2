---
og:description: The Python implementation of the server cron job for the Server Client
  + API architecture scenario
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 'Applications serveur + API : Implémentation Python pour la tâche Cron'
og:url: https://auth0.com/docs/
permalink: cron-implementation-python
title: 'Applications serveur + API : Implémentation Python pour la tâche Cron'
twitter:description: The Python implementation of the server cron job for the Server
  Client + API architecture scenario
twitter:title: 'Applications serveur + API : Implémentation Python pour la tâche Cron'
---

Dans le cadre du [scénario d’architecture Serveur + API](https://auth0.com/docs/architecture-scenarios/application/server-api), nous expliquerons comment implémenter le processus du serveur dans Python. Veuillez vous référer au document [Scénario d’architecture Serveur + API](https://auth0.com/docs/architecture-scenarios/application/server-api) pour obtenir des informations sur la solution implémentée.

Le code source complet de l’implémentation Python se trouve dans [ce référentiel GitHub](https://github.com/auth0-samples/auth0-pnp-exampleco-timesheets/tree/master/timesheets-cron/python).

## Obtenir un jeton d’accès

Pour effectuer la requête HTTP vers le point de terminaison Auth0 `/oauth/token` de l’API, nous utiliserons les bibliothèques `json`, `urllib` et `urllib2`.

Voici un exemple d’implémentation :



Pour la tester, modifiez votre code pour imprimer la variable `access_token` et exécutez le processus en utilisant `python cron.py`.

## Invoquer l’API

Les étapes que nous suivons pour l’implémentation sont les suivantes :

* Créer un objet JSON contenant les données de la feuille de temps et affectez-le à une variable `timesheet`.
* Ajoutez l’URL de l’API et le contenu de la variable `timesheet` au corps de la requête en utilisant `urllib2.Request`.
* Ajouter l’en-tête `Authorization` à la requête.
* Définir l’en-tête `Content-Type` sur `application/json`.
* Invoquer l’API en utllisant `urllib2.urlopen` et ajouter des fonctions de gestion des erreurs. Récupérer l’API en utilisant `json.loads`  et imprimez-la dans la console.

Voici un exemple d’implémentation (certains codes sont omis par souci de concision) :



Pour la tester, assurez-vous que votre API est en cours d’exécution et lancez le processus en utilisant `python cron.py`.

C’est tout! Vous avez terminé!