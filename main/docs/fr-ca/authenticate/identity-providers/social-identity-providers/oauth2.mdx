---
og:description: Learn how to add any OAuth2 provider using Auth0 Custom Social Connections.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Connecter des applications aux serveurs d’autorisation OAuth2 génériques
og:url: https://auth0.com/docs/
permalink: oauth2
title: Connecter des applications aux serveurs d’autorisation OAuth2 génériques
twitter:description: Learn how to add any OAuth2 provider using Auth0 Custom Social
  Connections.
twitter:title: Connecter des applications aux serveurs d’autorisation OAuth2 génériques
---

Les fournisseurs d’identité (IdP) les plus courants [sont accessibles](/connections) dans [Auth0 Dashboard](%24%7Bmanage_url%7D) et [Auth0 Marketplace](https://marketplace.auth0.com/features/social-connections). Vous pouvez cependant ajouter n’importe quel fournisseur OAuth 2.0 en tant que **connexion sociale personnalisée** dans Auth0 Dashboard.

1. Dans le Dashboard, allez à [Authentication (Authentification) > Social](%24%7Bmanage_url%7D/#/connections/social).
2. Sélectionnez **Create Connection (Créer une connexion)**, allez au bas de la liste, puis sélectionnez **Create Custom (Créer une connexion personnalisée)**.

Le formulaire qui apparaît contient plusieurs champs que vous devez utiliser pour configurer la connexion personnalisée :

* **Connection Name (Nom de la connexion)** : Identifiant logique de la connexion que vous créez. Ce nom ne peut pas être changé, doit débuter et se terminer par un caractère alphanumérique et ne peut contenir que des caractères alphanumériques et des tirets.
* **URL d’autorisation** : URL vers laquelle les utilisateurs sont redirigés pour se connecter.
* **URL du jeton** : URL utilisée pour échanger le code d’autorisation reçu contre des jetons d’accès et, si demandé, des jetons d’ID.
* **Permission** : paramètres de `permission` à envoyer avec la demande d’autorisation. Utilisez une espace pour séparer les différentes permissions.
* **Séparer les permissions à l’aide d’une espace** : Bouton à bascule qui détermine la manière dont les permissions sont délimitées si le paramètre `connection_scope` est inclus lors [de l’appel de l’API de l’IdP](/calling-an-external-idp-api). Par défaut, les permissions sont délimitées par une virgule. Si le bouton à bascule est activé, les permissions sont délimitées par une espace. Pour en apprendre davantage, consultez [Ajouter des permissions/autorisations pour appeler les API des fournisseurs d’identité](/adding-scopes-for-an-external-idp).
* **Client ID (Identifiant client)** : ID client pour Auth0 en tant qu’application utilisée pour demander une autorisation et échanger le code d’autorisation. Pour obtenir un identifiant client, vous devrez vous inscrire auprès du fournisseur d’identité.
* **Client Secret (Secret client)** : Secret client pour Auth0 en tant qu’application utilisée pour échanger le code d’autorisation. Pour obtenir un secret client, vous devrez vous inscrire auprès du fournisseur d’identité.
* **Script de récupération du profil utilisateur** : Script Node.js utilisé pour appeler une URL userinfo avec le jeton d’accès fourni. Pour en apprendre davantage sur ce script, lisez [Script de récupération du profil utilisateur](#fetch-user-profile-script).



Une fois que vous avez créé la connexion personnalisée, vous verrez l’affichage **Applications** et votre connexion sera soumise à la [Politique de limites anti-attaques](/support/policies/rate-limit-policy) d’Auth0. Ici, vous pouvez activer et désactiver les applications pour lesquelles vous souhaitez que la connexion apparaisse.

## Mettre à jour un flux d’authentification

Lorsque vous créez une connexion, le type d’autorisation OAuth 2.0 par défaut attribué à la connexion est Flux du code d’autorisation. Si vous disposez d’une application publique incapable de stocker un secret client, comme des applications à page unique ou natives, vous pouvez utiliser Management API pour mettre à jour la connexion afin d’utiliser [Flux du code d’autorisation + PKCE](/login/flows/authorization-code-flow-with-proof-key-for-code-exchange-pkce). Pour en apprendre davantage sur les flux d’autorisation, consultez [Quel flux Oauth 2.0 dois-je utiliser?](/login/flows/which-oauth-2-0-flow-should-i-use).

1. Effectuez une demande `GET` au point de terminaison [`/get-connections-by-id`](https://auth0.com/docs/api/management/v2/connections/get-connections-by-id). La réponse sera similaire à :
2. Copiez l’intégralité de l’objet `options`.
3. Faites une demande [`PATCH`](https://auth0.com/docs/api/management/v2/connections/patch-connections-by-id) avec l’objet `options` et ajoutez `« pkce_enabled »``true`.



## Script de récupération du profil utilisateur

Le script de récupération du profil utilisateur est appelé une fois que l’utilisateur s’est connecté auprès du fournisseur OAuth2. Auth0 exécute ce script pour appeler l’API du fournisseur OAuth2 et obtenir le profil utilisateur :



La propriété `user_id` dans le profil renvoyé est obligatoire et la propriété `email` est facultative mais fortement recommandée. Pour en apprendre davantage sur les attributs pouvant être renvoyés, consultez [Attributs racine du profil utilisateur](/users/user-profiles/root-attributes/update-root-attributes-for-users).

Vous pouvez filtrer, ajouter ou supprimer n’importe quel élément du profil renvoyé par le fournisseur. Cependant, il est recommandé de conserver ce script aussi simple que possible. Une manipulation plus sophistiquée des informations utilisateur peut être réalisée grâce à l’utilisation de [Règles](/rules). L’un des avantages de l’utilisation des règles est qu’elles s’appliquent à n’importe quelle connexion.

## Connexion à l’aide de la connexion personnalisée

Vous pouvez utiliser n’importe lequel des mécanismes standard Auth0 pour connecter un utilisateur avec votre connexion personnalisée. Un lien direct ressemblerait à :



## Modifier l’icône et le nom d’affichage

Pour ajouter une icône au bouton de connexion du fournisseur d’identité ou modifier le texte utilisé sur le bouton de connexion, vous pouvez utiliser respectivement la propriété `icon_url` de l’objet `options` et la propriété `display_name` par le biais de la [Management API](/api/management/v2#!/Connections/patch_connections_by_id).





## Passer les paramètres spécifiques au fournisseur

Vous pouvez transmettre des paramètres spécifiques au fournisseur au point de terminaison d’autorisation des fournisseurs OAuth 2.0. Ceux-ci peuvent être statiques ou dynamiques.

### Passer les paramètres statiques

Pour transmettre des paramètres statiques (paramètres envoyés à chaque demande d’autorisation), vous pouvez utiliser l’élément `authParams` des `options` lors de la configuration d’une connexion OAuth 2.0 par le biais de la [Management API](/api/management/v2#!/Connections/patch_connections_by_id). L’appel ci-dessous définira un paramètre statique de `custom_param` défini sur `custom.param.value` sur toutes les demandes d’autorisation :



### Passer des paramètres dynamiques

Dans certaines circonstances, vous souhaiterez peut-être transmettre une valeur dynamique à un fournisseur d’identité OAuth 2.0. Dans ce cas, vous pouvez utiliser l’élément `authParamsMap` des `options` pour préciser un mappage entre l’un des paramètres supplémentaires existants acceptés par le [point de terminaison](/api/authentication#social) Auth0` /authorize` et le paramètre accepté par le fournisseur d’identité.

En utilisant le même exemple ci-dessus, supposons que vous souhaitiez transmettre le paramètre `custom_param` au point de terminaison d’autorisation, mais que vous souhaitiez spécifier la valeur réelle du paramètre lors de l’appel au point de terminaison Auth0 `/authorize`.

Dans ce cas, vous pouvez utiliser l’un des paramètres d’ajout existants acceptés par le point de terminaison `/authorize`, tel que `access_type`, et le mapper au paramètre `custom_param` :



Désormais, lorsque vous appelez le point de terminaison `/authorize`, vous pouvez transmettre le type d’accès dans le paramètre `access_type`, et cette valeur sera à son tour transmise au point de terminaison d’autorisation dans le paramètre `custom_param`.

## Passer des en-têtes supplémentaires

Dans certains cas, vous devrez transmettre des en-têtes supplémentaires au point de terminaison du jeton d’un fournisseur OAuth 2.0. Pour configurer des en-têtes supplémentaires, ouvrez les paramètres de la connexion et dans le champ **Custom Headers (En-têtes personnalisés)**, spécifiez un objet JSON avec les en-têtes personnalisés sous forme de paires clé-valeur :



Utilisons un exemple dans lequel un fournisseur d’identité peut vous demander de transmettre un en-tête `Authorization (Autorisation)` avec les informations [d’authentification d’accès de base](https://en.wikipedia.org/wiki/Basic_access_authentication). Dans ce scénario, vous pouvez spécifier l’objet JSON suivant dans le champ **Custom Headers (En-têtes personnalisés)** :



Où `[vos informations d’identification]` sont les informations d’identification réelles à envoyer au fournisseur d’identité.