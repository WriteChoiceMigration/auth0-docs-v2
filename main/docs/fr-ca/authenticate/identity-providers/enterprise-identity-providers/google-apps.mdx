---
og:description: Learn how to connect your app to Google Workspace using an enterprise
  connection.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Connecter votre application à Google Workspace
og:url: https://auth0.com/docs/
permalink: google-apps
title: Connecter votre application à Google Workspace
twitter:description: Learn how to connect your app to Google Workspace using an enterprise
  connection.
twitter:title: Connecter votre application à Google Workspace
---



## Prérequis

Avant de commencer :

* [Enregistrez votre application avec Auth0](/get-started/create-apps).

* Sélectionnez un **Type d’application** approprié.
* Ajoutez une **URL de rappel autorisée** de **`${account.callback}`**.
* Assurez-vous que les [Types d’autorisation](/applications/update-grant-types) de votre application comprennent les flux appropriés.

## Étapes

Pour connecter votre application à Google Workspace, vous devez :

1. [Mettre en place votre application dans Google](#set-up-your-app-in-google)
2. [Créer une connexion d’entreprise dans Auth0](#create-an-enterprise-connection-in-auth0)
3. [Activer la connexion entreprise de l’Application Auth0](#enable-the-enterprise-connection-for-your-auth0-application)
4. [Tester la connexion](#test-the-connection)



## Mettre en place votre application dans Google

Pour permettre aux utilisateurs de se connecteren utilisant Google Workspace, vous devez enregistrer votre application dans la console de développement Google.



### Enregistrez votre nouvelle application

Pour apprendre comment enregistrer une nouvelle application avec Google, suivez le guide [Setting up OAuth 2.0 (Configurer Oauth 2.0)](https://support.google.com/googleapi/answer/6158849) de Google. Durant ce processus, Google génèrera un **ID client** et un **secret client** pour votre application; prenez-les en note.

Lors de la configuration de votre application, veillez à utiliser ces paramètres :

* Sur l’**écran de consentement d’OAuth**, sous **Domaines autorisés**, ajoutez `auth0.com`.
* Lorsqu’on vous demande de sélectionner un type d’application, choisissez **Application Web** et définissez les paramètres suivants :



### Activer le service de la trousse SDK Admin

Si vous planifiez vous connecter aux domaines d’entreprise de Google Workspace, vous devez activer **Service de trousse SDK Admin**. Pour apprendre comment, suivez le document [Activer et désactiver les API](https://support.google.com/googleapi/answer/6158841) de Google.

## Créer une connexion d’entreprise dans Auth0



Ensuite, vous devrez créer et configurer la Connexion entreprise Google Workspace dans Auth0. Assurez-vous d’avoir l’**ID client** et le secret client générés lorsque vous avez configuré votre application dans la console de développement Google.

1. Naviguez vers [Auth0 Dashboard > Authentification > Entreprise](%24%7Bmanage_url%7D/#/connections/enterprise), trouvez **Google Workspace**, et cliquez sur `+`.
2. Saisissez les détails de votre connexion et sélectionnez **Créer : **
3. Si vous disposez des autorisations administratives appropriées pour configurer vos paramètres Google Workspace afin de pouvoir utiliser les API d’administration de Google, cliquez sur **Continue (Continuer)**. Autrement, fournissez l’URL donnée à votre administrateur pour lui permettre d’ajuster les paramètres requis.
4. Sous l’onglet **Expérience de connexion**, vous pouvez configurer la façon dont les utilisateurs peuvent se connecter à cette connexion.

## Travailler avec la connexion

### Permettre une connexion entreprise pour votre application Auth0

Pour utiliser votre nouvelle connexion AD, vous devez premièrement [activer la connexion](/connections/enable-enterprise-connections) pour vos applications Auth0.

### Tester la connexion

Vous êtes maintenant prêt à [tester votre connexion](/connections/test-enterprise-connections).

### Demander des jetons d’actualisation à Google

Google renvoie toujours un jeton d’accès, qui est stocké dans le profil utilisateur. Si vous ajoutez `access_type=offline&approval_prompt=force` à la demande d’autorisation, Auth0 transmettra ces paramètres à Google. Google renverra alors un jeton d’actualisation, qui sera aussi stocké dans le profil utilisateur.

### Utiliser les jetons de fournisseur d’identités de Google

Pour récupérer des détails supplémentaires sur les utilisateurs et les groupes au-delà de ce qu’Auth0 récupère par défaut, vous pouvez utiliser les jetons d’accès renvoyés par Google pour appeler les API de Google. Pour accéder en toute sécurité à ces jetons, suivez les lignes directrices fournies dans [Jetons d’accès du fournisseur d’identités](/security/tokens/access-tokens/identity-provider-access-tokens).

Pour Google Workspace, Auth0 stocke les jetons d’accès et les jetons d’actualisation sur l’objet `user (utilisateur)` pour les utilisateurs individuels et sur l’objet `connection (connexion)` pour les administrateurs de l’espace de travail.

Par exemple, pour récupérer toutes les propriétés de groupe étendues d’un utilisateur avec l’API Directory Admin de Google, accédez à la connexion Google Workspace dans votre [Auth0 Dashboard](https://manage.auth0.com/#/connections/enterprise) et activez l’attribut étendu **Groupes**. Ensuite, complétez le consentement d’administrateur à l’aide de l’onglet **Configuration**.

Une fois ces étapes complétées, utilisez le point de terminaison [Obtenir une connexion](/api/management/v2/connections/get-connections-by-id) d'Auth0 Management API pour récupérer le jeton d’accès d’administrateur stocké sur l’objet `connection`. Vous pouvez ensuite utiliser ce jeton pour appeler le point de terminaison [Gérer les groupes](https://developers.google.com/admin-sdk/directory/v1/guides/manage-groups#get_all_member_groups) de Google.

**Exemple d’appel** :



### Valider l’authentification avec des Actions

Vous pouvez utiliser les `Actions`[post-connexion](/signup-and-login-triggers/login-trigger) pour vérifier si les événements d’authentification proviennent d‘utilisateurs légitimes membres d’une organisation Google. Cela peut contribuer à atténuer les vulnérabilités potentielles en empêchant tout accès non autorisé à vos applications une fois que les utilisateurs ne font plus partie de votre organisation.

Pour vérifier la légitimité des authentifications Google, utilisez les Actions `post-login` pour valider la demande `idp_tenant_domain` associée à l’utilisateur et assurez-vous que la valeur corresponde à l’organisation attendue pour cet utilisateur.

Vous pouvez seulement vérifier le `idp_tenant_domain` des utilisateurs qui se sont authentifiés avec les types de connexion suivants :

* Google Social
* Google Workspace
* Google OIDC

#### **Exemple**

L’exemple suivant démontre comment vous pouvez vérifier le `idp_tenant_domain` en utilisant les Actions de `post-connexion`.



### Réautoriser les connexions existantes

Si un administrateur de Google Workspace est supprimé, toutes les connexions Google Workspace d’entreprise qu’il a configurées et autorisées devront être réautorisées par un nouvel administrateur de Google Workspace pour éviter les échecs de connexion. Cela peut être fait en demandant au nouvel administrateur d’utiliser le lien sous l’onglet **Configuration** pour la connexion Google Workspace d’entreprise.

## Prochaines étapes

* [Intégration d’Auth0 en utilisant l’une de nos bibliothèques](/libraries)
* [Intégration d’Auth0 en utilisant notre Authentication API](/api/authentication)
* [En savoir plus sur le flux d’authentification](/login/flows)
* [Transmettre des paramètres supplémentaires au fournisseur d’identité](/pass-parameters-to-idps)
* [Redemander des autorisations aux utilisateurs](/reprompt-permissions)