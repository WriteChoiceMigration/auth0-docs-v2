---
og:description: Learn about custom database action script templates.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Modèles de scripts d’action personnalisés pour la base de données
og:url: https://auth0.com/docs/
permalink: templates
title: Modèles de scripts d’action personnalisés pour la base de données
twitter:description: Learn about custom database action script templates.
twitter:title: Modèles de scripts d’action personnalisés pour la base de données
---

<Card title="Availability varies by Auth0 plan">

Your Auth0 plan or custom agreement affects whether this feature is available. To learn more, read [Pricing](https://auth0.com/pricing).

</Card>

If you have your own database (known as a legacy data store in Auth0) containing user identity data, you can use it as an <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+provider">identity provider</Tooltip> to authenticate users.
Vous créez et configurez la connexion à votre stockage de données héritées en tant que base de données personnalisée dans Auth0. Vous pouvez choisir de migrer progressivement les données de votre base de données héritées vers le stockage de données d’Auth0, ou vous pouvez continuer à l’utiliser sans migrer les données. Nous fournissons des modèles de scripts pour exécuter des performances sur la base de données personnalisée que vous pouvez utiliser et personnaliser.

Il existe deux types de scripts de base de données personnalisés :

* **Migration automatique** : Si un utilisateur se connecte à Auth0 et qu’il n’est pas encore dans Auth0, le script vérifie si l’utilisateur existe dans la base de données héritées. Si l’utilisateur est trouvé et que l’option **Importer les utilisateurs dans Auth0** est activée, les données de l’utilisateur migrent vers le stockage de données d’Auth0. Cette capacité est parfois appelée **migration au compte-gouttes** ou **migration paresseuse**.
* **Base de données héritées** : Auth0 sollicitera toujours la base de données sous-jacente lorsqu’un utilisateur tente de se connecter, est créé, modifie son mot de passe, vérifie son courriel ou est supprimé. Si l’utilisateur est trouvé et que l’option **Importer les utilisateurs dans Auth0** n’est **pas** activée, les données de l’utilisateur restent dans la base de données héritées et ne migrent **pas** vers Auth0.

Auth0 fournit les scripts d’action personnalisés suivants pour la base de données :

* [Change Password](/docs/authenticate/database-connections/custom-db/templates/change-password)
* [Create User](/docs/authenticate/database-connections/custom-db/templates/create)
* [Delete User](/docs/authenticate/database-connections/custom-db/templates/delete)
* [Get User](/docs/authenticate/database-connections/custom-db/templates/get-user)
* [Login](/docs/authenticate/database-connections/custom-db/templates/login)
* [Verify User](/docs/authenticate/database-connections/custom-db/templates/verify)
* [Change Email](/docs/authenticate/database-connections/custom-db/templates/change-email)

<Card title="Network firewall">

If you are behind a firewall, this feature may require that you add the appropriate Auth0 IP addresses to the Allow List to work properly.

</Card>

## Exécution des scripts

As described in [Custom Database Connections](/docs/authenticate/database-connections/custom-db), a custom database connection type allows you to configure action scripts: custom code that is used when interfacing with your legacy identity store. Each action script is essentially a named JavaScript function that is passed a number of parameters, with the name of the function and the parameters passed depending on the script.

### Limites

Action script execution supports the asynchronous nature of JavaScript, and constructs such as [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise) objects can be used. Asynchronous processing effectively results in suspension pending completion of an operation, and an Auth0 serverless Webtask container typically has a 20-second execution limit, after which the container may be recycled. Recycling a container due to this limit will prematurely terminate operation, ultimately resulting in an error condition being returned (as well as resulting in a potential reset of the `global` object).

### Completion and the callback function

La fonction `callback` fournie à chaque script d’action agit concrètement comme un signal indiquant la fin de l’opération. Un script d’action doit se terminer immédiatement après un appel à la fonction `callback` (soit implicitement, soit en exécutant explicitement une instruction de retour JavaScript) et doit s’abstenir de toute autre opération.

<Warning>

The Auth0 supplied `callback` function must be called exactly **once**; calling the function more than once within an action script will lead to unpredictable results and/or errors.

</Warning>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Where `callback` is executed with no parameters, as in `callback()`, the implication is that function has been called as though `callback(null)` had been executed.

</Callout>

Si un script d’action utilise un traitement asynchrone, l’appel à la fonction `callback` doit être différé jusqu’à la fin du traitement asynchrone et doit être le dernier élément appelé. L’exécution asynchrone entraîne l’exécution d’un `callback` JavaScript après la fin de l’opération asynchrone; ce callback est généralement déclenché à un moment donné après la fin du corps principal (synchrone) d’une fonction JavaScript.

<Warning>

Failure to execute the `callback` function will result in a stall of execution, and ultimately in an error condition being returned. The action script must call the `callback` function exactly once: the `callback` function must be called at least once in order to prevent stall of execution, however it must not be called more than once otherwise unpredictable results and/or errors will occur.

</Warning>

## Learn more

* [Custom Database Action Script Execution Best Practices](/docs/authenticate/database-connections/custom-db/custom-database-connections-scripts/execution)
* [Troubleshoot Custom Databases](/docs/authenticate/database-connections/custom-db/error-handling)