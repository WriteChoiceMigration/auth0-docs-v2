---
og:description: Describes custom database action script templates for user creation.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Créer des modèles de script
og:url: https://auth0.com/docs/
permalink: create
title: Créer des modèles de script
twitter:description: Describes custom database action script templates for user creation.
twitter:title: Créer des modèles de script
---

Le script Créer implémente la fonction définie lors de la création d’un utilisateur. Nous recommandons de nommer cette fonction `create`.

Ce script est facultatif. Si cette option est activée, lorsqu’un utilisateur s’inscrit via la connexion universelle ou est créé via Auth0 Dashboard ou Management API Auth0, Auth0 exécutera le script pour créer un enregistrement utilisateur correspondant dans la base de données externe.

Lorsqu’un utilisateur est créé dans Auth0, Auth0 appelle une série de scripts :

1. [Obtenir utilisateur](/get-user) : vérifie que l’utilisateur n’existe pas déjà dans Auth0 ou dans la base de données externe.
2. Créer : permet de créer l’utilisateur de la base de données externe.
3. [Connexion](/login) : vérifie que l’utilisateur a été créé avec succès.

## Fonction Créer

La fonction `Create` permet de :

* envoyer les profil de l’utilisateur des données à l’API de la base de données externe.
* renvoyer une erreur si la création de l’utilisateur échoue.

### Définition

La fonction `create` accepte deux paramètres et renvoie une fonction de `callback` :





### Exemple

Voici un exemple fictif en JavaScript de la manière dont vous pourriez implémenter la fonction `create`. Pour des exemples spécifiques à un langage, consultez [Exemples de scripts spécifiques à un langage](#language-specific-script-examples).



### Chiffrement



Chiffrez la valeur du mot de passe à l’aide d’une bibliothèque de chiffrement de hachage cryptographique telle que `bcrypt` afin d’éviter toute fuite de données potentielle.

#### Exemple



## Fonction de rappel

La fonction de `callback` accepte un paramètre et renvoie une fonction.

### Définition





### Retourne un succès

Si l’opération de création de l’utilisateur a réussi, renvoyez la fonction de `callback` et passer une valeur `null` comme paramètre `error` paramètre.

#### Exemple



### Renvoyer une erreur

Si une erreur survient, renvoyez la fonction de rappel, et transmettez l’information pertinente concernant l’erreur au paramètre `error` :

#### Objet de type ValidationError

L’objet de type erreur personnalisé `ValidationError` vous permet de transmettre des données qui seront affichées dans vos [Journaux du locataire](/logs).

##### Constructeur

Le constructeur `ValidationError` accepte jusqu’à deux paramètres :





#### Renvoie une erreur indiquant que l’utilisateur existe déjà

Si vous renvoyez une erreur avec la valeur `user_exists` pour le paramètre `errorCode`, Auth0 enregistrera un événement du journal du locataire `fs`.

##### Exemple





## Paramètre d’objet utilisateur

Le paramètre d’objet `user` contient un ensemble prédéfini de propriétés provenant du processus de création de l’utilisateur :



### Propriété du nom d’utilisateur

Si votre connexion à la base de données personnalisée a le paramètre [Requires Username](/require-username) activé, alors les scripts [Login](/login) et [Get User](/get-user) doivent prendre en charge la propriété `username`, vous devez donc la stocker dans votre base de données externe.

### Métadonnées de l’utilisateur et de l’application

Les propriétés `user_metadata` et `app_metadata` n’ont pas besoin d’être stockées dans votre base de données externe. Auth0 stocke automatiquement ces valeurs dans le cadre de l’enregistrement de profil utilisateur créé en interne.

### Champs d’inscription personnalisés

Si vous [créez et utilisez des champs personnalisés](/libraries/custom-signup#using-the-api) pendant le processus d’inscription, ils seront inclus dans l’objet `user`.

### Exemple



## Exemples de scripts propres à une langue

Auth0 fournit des exemples de scripts à utiliser avec les langages/technologies ci-dessous :

* [JavaScript](#javascript)
* [Fournisseur d’appartenances ASP.NET (MVC3 – Fournisseurs universels)](#asp-net-membership-provider-mvc3-universal-providers-)
* [Fournisseur d’appartenances ASP.NET (MVC4 – Appartenance simple)](#asp-net-membership-provider-mvc4-simple-membership-)
* [MongoDB](#mongodb)
* [MySQL](#mysql)
* [PostgreSQL](#postgresql)
* [SQL Server](#sql-server)
* [Base de données SQL Windows Azure](#windows-azure-sql-database)
* [Demande avec Basic Auth](#request-with-basic-auth)

### JavaScript



### Fournisseur d’appartenances ASP.NET (MVC3 – Fournisseurs universels)



### Fournisseur d’appartenances ASP.NET (MVC4 – Appartenance simple)



### MongoDB



### MySQL



### PostgreSQL



### SQL Server



### Base de données SQL de Windows Azure



### Demande avec Basic Auth



## Dépanner

Si vous ne parvenez pas à créer un utilisateur dans votre base de données héritée ou dans Auth0 :

1. Vérifiez les instructions `console.log()` avec l’[extension des journaux WebTask en temps réel](/extensions/real-time-webtask-logs) d’Auth0.
2. Recherchez l’utilisateur dans votre base de données héritée et supprimez-le. Si l’état utilisateur partiel est dans Auth0, utilisez les points de terminaison [Supprimer un utilisateur](https://auth0.com/docs/api/management/v2#!/Users/delete_users_by_id) ou [Supprimer un utilisateur de connexion](/api/management/v2#!/Connections/delete_users_by_email) du Management API.
3. Assurez-vous que le **Mode d’importation** est désactivé, puis configurez le script de création.