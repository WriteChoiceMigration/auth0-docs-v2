---
og:description: Describes custom database action script templates for user login.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Modèles de script de connexion
og:url: https://auth0.com/docs/
permalink: login
title: Modèles de script de connexion
twitter:description: Describes custom database action script templates for user login.
twitter:title: Modèles de script de connexion
---

Le script de connexion met en œuvre la fonction exécutée chaque fois qu’un utilisateur doit s’authentifier. Il est recommandé de nommer cette fonction `login`. 

Ce script est nécessaire à la fois pour l’authentification traditionnelle et pour la [migration automatique](/users/import-and-export-users/configure-automatic-migration-from-your-database). Si la migration automatique est configurée pour la connexion, le processus de migration sera déclenché après la première connexion réussie de l’utilisateur.

## Fonction de connexion

La fonction `connexion` doit :

* Envoyer les identifiants utilisateur fournis à l’API de la base de données externe.
* Renvoyer les données de profil de l’utilisateur si l’authentification est réussie.
* Renvoyer une erreur si l’authentification échoue.

### Définition

La fonction `login` accepte trois paramètres et renvoie une fonction `callback` :





### Exemple

Voici un exemple fictif en JavaScript de la manière dont vous pourriez implémenter la fonction `login`. Pour des exemples spécifiques à un langage, consultez [Exemples de scripts spécifiques à un langage](#language-specific-script-examples).



### Chiffrement



Chiffrez la valeur `password` à l’aide d’une bibliothèque de chiffrement de hachage cryptographique telle que `bcrypt` afin d’éviter toute fuite de données potentielle.

#### Exemple



## Fonction de rappel

La fonction `callback` (rappel) est utilisée pour transmettre les données du profil utilisateur ou les données d’erreur à travers le pipeline.

### Définition

La fonction `callback` accepte jusqu’à deux paramètres et renvoie une fonction :





### Retourner le profil utilisateur



Si l’utilisateur s’authentifie avec succès, les données de son profil doivent être renvoyées dans l’objet `profile` sous [forme normalisée](/users/user-profiles/normalized-user-profile-schema). Outre les champs standard, vous pouvez inclure les champs `user_metadata`, `app_metadata` et `mfa_factors`.

#### Exemple



### Renvoyer une erreur

En cas d’erreur, le paramètre `error` doit contenir des informations pertinentes sur le problème survenu.

#### Objet de type WrongUsernameOrPasswordError

L’objet de type erreur personnalisé `WrongUsernameOrPasswordError` vous permet de transmettre des données qui seront affichées dans vos [Journaux du locataire](/logs).

##### Constructeur

Le constructeur `WrongUsernameOrPasswordError` accepte jusqu’à deux paramètres :





#### Renvoyer l’erreur avec le nom d’utilisateur ou l’adresse courriel

Si vous renvoyez une erreur avec une valeur pour le champ `userNameOrEmail`, Auth0 enregistrera un événement de journal du locataire `fp`.

##### Exemple





#### Retour d’erreur sans nom d’utilisateur ou courriel

Si vous renvoyez une erreur avec une valeur `null` pour le champ `userNameOrEmail`, Auth0 enregistrera un événement de journal du locataire `fu`.

##### Exemple





## Synchroniser les attributs du profil utilisateur à chaque connexion

Activez le paramètre **Synchroniser les attributs du profil utilisateur à chaque connexion** si vous souhaitez qu’Auth0 mette à jour les champs `name`, `nickname`, `given_name`, `family_name` et/ou `picture` avec les valeurs renvoyées par la base de données externe à chaque connexion.

Si vous n’activez pas ce paramètre, les valeurs renvoyées par la base de données externe lors de la première connexion de l’utilisateur seront conservées lors des connexions suivantes, même si elles ont été modifiées dans la base de données externe.

## Exemples de scripts spécifiques à un langage

Auth0 fournit des exemples de scripts à utiliser avec les langages/technologies ci-dessous :

* [JavaScript](#javascript)
* [ASP.NET Membership Provider (MVC3 - Fournisseurs universels)](#asp-net-membership-provider-mvc3-universal-providers-)
* [ASP.NET Membership Provider (MVC4 - Abonnement simple)](#asp-net-membership-provider-mvc4-simple-membership-)
* [MongoDB](#mongodb)
* [MySQL](#mysql)
* [PostgreSQL](#postgresql)
* [SQL Server](#sql-server)
* [Base de données SQL Windows Azure](#windows-azure-sql-database)
* [Axios](#axios)
* [Stormpath](#stormpath)

### JavaScript



### Fournisseur d’adhésion ASP.NET (MVC3 - Fournisseurs universels)



### Fournisseur d’adhésion ASP.NET (MVC4 - Abonnement simple)



### MongoDB



### MySQL



### PostgreSQL



### SQL Server



### Base de données SQL de Windows Azure



### Axios



### Stormpath