---
og:description: Describes custom database action script templates for user search.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Modèles de script Get User
og:url: https://auth0.com/docs/
permalink: get-user
title: Modèles de script Get User
twitter:description: Describes custom database action script templates for user search.
twitter:title: Modèles de script Get User
---

Le script Get User permet d’implémenter la fonction exécutée pour déterminer l’état actuel d’existence d’un utilisateur. Nous recommandons de nommer cette fonction `getUser`.

Ce script est requis pour la [migration automatique](/users/import-and-export-users/configure-automatic-migration-from-your-database), et conditionnellement requis pour l’authentification héritée en fonction des opérations configurées pour la connexion.

Si la migration automatique est configurée pour la connexion et que le profil utilisateur n’a pas encore été créé, le script est exécuté chaque fois que les opérations suivantes se produisent :

* Modifier l’adresse courriel
* Inscription
* Réinitialisation du mot de passe

Si l’authentification héritée est configurée pour la connexion, le script est exécuté chaque fois que les opérations suivantes se produisent :

* Créer un utilisateur
* Modifier l’adresse courriel
* Modifier le mot de passe
* Réinitialisation du mot de passe

## Fonction Get User

La fonction `getUser` devrait :

* Envoyer l’identifiant de l’utilisateur vers l’API de la base de données externe.
* Renvoyer les données de profil de l’utilisateur si l’utilisateur a été trouvé.
* Renvoyer une erreur s’il y a eu un problème pour déterminer si l’utilisateur existe ou non.

### Définition

La fonction `getUser` accepte deux paramètres et renvoie une fonction `callback` :





### Exemple

Voici un exemple fictif en JavaScript de la manière dont vous pourriez implémenter la fonction `getUser`. Pour voir des exemples propres à un langage, veuillez consulter [Exemples de scripts propres à une langue](#language-specific-script-examples).



## Fonction de rappel

La fonction `callback` est utilisée pour transmettre les données du profil utilisateur ou les données d’erreur à travers le pipeline.

### Définition

La fonction `callback` (rappel) accepte jusqu’à deux paramètres et renvoie une fonction :





### Renvoyer le profil utilisateur (utilisateur trouvé)



Si l’utilisateur est trouvé, transmettez une valeur `nul` au paramètre `error` et transmettez les données de profil de l’utilisateur au paramètre `profile` dans la [forme normalisée](/users/user-profiles/normalized-user-profile-schema). Outre les champs standard, vous pouvez inclure les champs `user_metadata`, `app_metadata` et `mfa_factors`.

#### Exemple



### Aucun profil utilisateur renvoyé (utilisateur non trouvé)

Si l’utilisateur n’est pas trouvé, transmettez une valeur `null` au paramètre `d’erreur` et omettez le paramètre `profile`.

#### Exemple



### Renvoyer une erreur

Si une erreur se produit, transmettez les données d’erreur au paramètre `error` avec les informations pertinentes sur ce qui a mal tourné. Pour plus d’informations, veuillez consulter [Dépannage des bases de données personnalisées](/connections/database/custom-db/error-handling).

#### Exemple



## Exemples de scripts propres à une langue

Auth0 fournit des exemples de scripts à utiliser avec les langages/technologies ci-dessous :

* [JavaScript](#javascript)
* [Fournisseur d’appartenances ASP.NET (MVC3 – Fournisseurs universels)](#asp-net-membership-provider-mvc3-universal-providers-)
* [Fournisseur d’appartenances ASP.NET (MVC4 – Appartenance simple)](#asp-net-membership-provider-mvc4-simple-membership-)
* [MongoDB](#mongodb)
* [MySQL](#mysql)
* [PostgreSQL](#postgresql)
* [Serveur SQL](#sql-server)
* [Base de données SQL Windows Azure](#windows-azure-sql-database)
* [Axios](#axios)
* [Stormpath](#stormpath)

### JavaScript



### Fournisseur d’appartenances ASP.NET (MVC3 – Fournisseurs universels)



### Fournisseur d’appartenances ASP.NET (MVC4 – Appartenance simple)



### MongoDB



### MySQL



### PostgreSQL



### Serveur SQL



### Base de données SQL de Windows Azure



### Axios



### Stormpath