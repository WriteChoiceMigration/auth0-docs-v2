---
og:description: Learn how to create a database connection.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Créer des connexions de base de données personnalisée
og:url: https://auth0.com/docs/
permalink: create-db-connection
title: Créer des connexions de base de données personnalisée
twitter:description: Learn how to create a database connection.
twitter:title: Créer des connexions de base de données personnalisée
---



Si vous disposez de votre propre base de données d’utilisateurs, vous pouvez l’utiliser comme fournisseur d’identité dans Auth0 pour authentifier des utilisateurs. Dans ce processus, vous allez créer la connexion de base de données personnalisée, créer des scripts d’action de base de données et ajouter des paramètres de configuration.



Auth0 vous permet de créer des connexions et des scripts pour la plupart des bases de données couramment utilisées, notamment :

* Fournisseur d’adhésion ASP.NET
* MongoDB
* MySQL
* PostgreSQL
* SQLServer
* Base de données SQL de Windows Azure
* Services Web accessibles via Auth de base

Vous pouvez vous connecter à n’importe quel type de base de données ou de service Web avec un script personnalisé correctement configuré. Notez que la désinfection des entrées relève de la responsabilité du client; Auth0 ne désinfecte ni ne valide aucune combinaison de nom d’utilisateur/mot de passe transmise par une base de données personnalisée. Les scripts de base de données personnalisée sont soumis à [Politique de limites anti-attaques](/support/policies/rate-limit-policy) d’Auth0.



## Créer la connexion dans Auth0 Dashboard

1. Allez à [Auth0 Dashboard > Authentication > Database (Tableau de bord Auth0 > Authentification > Base de données)](%24%7Bmanage_url%7D/#/connections/database) et sélectionnez **Create DB Connection (Créer une connexion DB)**.
2. Configurez les paramètres de la connexion et cliquez sur **Create (Créer)**:

Une fois que Auth0 a créé votre connexion, vous disposerez des affichages suivants (en plus de l’affichage des **settings [paramètres]**) :

* Attributs
* Méthodes d’authentification
* Base de données personnalisée
* Applications
3. Sélectionnez l’aperçu **Custom Database (Base de données personnalisée)**, puis faites glisser le bouton **Use my own database (Utiliser ma propre base de données)**.

## Créer les scripts d’action de la base de données.

L’activation du bouton bascule **Use my own database (Utiliser ma propre base de données) **active les **scripts d’action de la base de données** dans laquelle vous allez créer des scripts afin de configurer le mode d’authentification lors de l’utilisation de votre base de données. Vous pouvez écrire vos scripts d’action de base de données, ou vous pouvez sélectionner un modèle dans la liste déroulante des **Templates (Modèles)** et le modifier, si nécessaire.

Vous ** must (devez)** configurer un script de `login`. Les scripts additionnels pour les fonctionnalités utilisateur sont facultatifs.

Les scripts d’action de base de données incluent :



Pour en savoir plus sur les scripts, consultez [Modèles de script d’action de base de données personnalisée](/templates) et [Meilleures pratiques d’exécution de script d’action de base de données personnalisée](/custom-database-connections-scripts/execution).

### Créer un script de connexion



Les étapes suivantes utilisent un exemple de script pour se connecter à la base de données MySQL.

1. Après avoir fait glisser le bouton bascule **Use my own database (Utiliser ma propre base de données)**, la zone **Database Action Scripts (Scripts d’action de base de données)** s’active. Assurez-vous que vous êtes sur l’onglet **Login (Connexion)**.
2. Utilisez le menu déroulant de **Modèles** pour sélectionner le modèle de script de base de données MySQL. Le script ci-dessus se connecte à une base de donnéesºMySQL et exécute une requête pour récupérer le premier utilisateur avec `email == user.email`.

Avec la méthode `bcrypt.compareSync`, il vérifie ensuite si les mots de passe correspondent, puis, si c’est le cas, il renvoie un objet contenant les informations du profil utilisateur, y compris l’`id`, le `nickname` et l’`email`.

Ce script suppose que vous avez une tableau `users` contenant ces colonnes. L’`id` retourné par le script de connexion est utilisé pour construire l’attribut identifiant utilisateur du profil utilisateur.
3. Cliquez sur **Save and Try (Enregistrer et essayer)**.
4. Dans la fenêtre modale, saisissez votre adresse courriel et votre mot de passe, puis cliquez sur **Try (Essayer)**. Cette fonctionnalité propose un menu déroulant pour choisir parmi une liste de temps d’exécution possibles, avec votre temps d’exécution actuel en tête de liste.

Les modèles de script ne sont pas utilisés par Auth0 tant que vous n’avez pas cliqué sur **Save (Enregistrer)** ou **Try (Essayer)**. Ceci est vrai même si vous n’avez modifié qu’un seul script, sans toucher aux autres. Vous devez cliquer sur **Save (Enregistrer)** au moins une fois pour que tous les scripts soient en place.

## Soutien aux organizations en matière de bases de données personnalisées

Si vous utilisez des connexions par base de données personnalisée en conjonction avec Organizations, vous pouvez utiliser le paramètre `context` dans la signature du script pour rendre les détails de l’organization tels que l’`id`, `name` et `metadata` disponibles pour vos scripts d’action de base de données personnalisée. Les données de l’organization sont envoyées dans l’objet contexte lorsque l’action correspondante se produit dans le contexte de l’organization. Par exemple, lorsqu’un utilisateur s’authentifie à l’invite de connexion d’une organization, le script d’action de connexion est transmis. Pour en savoir plus, consultez [Connexions à la base de données](/connections/database).

### Activer l’objet contexte

1. Rendez-vous à [Auth0 Dashboard > Authentification > Base de données](https://manage.auth0.com/dashboard/us/#/connections/database/).
2. Sélectionnez votre connexion de base de données.
3. Sous l’onglet **Custom Database (Base de données personnalisée)**, recherchez les **Context objects in database scripts (Objet de contexte dans les scripts de base de données)** et sélectionnez **Enable (Activer)**.

### Utiliser le contexte d’Organization

Une fois que vous avez activé l’objet de contexte sur le Dashboard, vous pouvez ajouter un objet `context` à vos scripts d’action de base de données personnalisée, qui seront insérés juste avant le paramètre de rappel. Lorsque des événements sont déclenchés avec le contexte d’Organization, les données correspondantes sont fournies à vos scripts d’action de base de données personnalisée dans le format suivant :


## Ajouter des paramètres de configuration

Vous pouvez stocker des paramètres, tels que les identifiants client requis pour se connecter à votre base de données, dans la section **Settings (Paramètres)** sous l’éditeur de script. Ces paramètres seront accessibles pour tous vos scripts et vous pourrez y accéder en utilisant l’objet `configuration` dans les scripts d’action de votre base de données (p. ex., `configuration.MYSQL_PASSWORD`).

Utilisez les paramètres ajoutés dans vos scripts pour configurer la connexion. Vous pouvez par exemple ajouter ce qui suit au script de connexion MySQL :