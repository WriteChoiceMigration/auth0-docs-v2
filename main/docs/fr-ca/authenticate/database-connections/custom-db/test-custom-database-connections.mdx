---
og:description: Describes how to test your custom database connections in Auth0 Dashboard.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Tester les connexions de bases de données personnalisées
og:url: https://auth0.com/docs/
permalink: test-custom-database-connections
title: Tester les connexions de bases de données personnalisées
twitter:description: Describes how to test your custom database connections in Auth0
  Dashboard.
twitter:title: Tester les connexions de bases de données personnalisées
---

Si vous utilisez la structure de la base de données hébergée par Auth0 pour stocker vos utilisateurs, vous pouvez tester la connexion en authentifiant les utilisateurs auprès du même locataire ou d’un locataire distinct.

## Test avec l’importation d’utilisateurs vers Auth0 activée

Lorsque l’importation d’utilisateurs est activée, les utilisateurs sont progressivement transférés du magasin d’utilisateurs externe vers le magasin d’utilisateurs d’Auth0. Au cours de ce processus, les utilisateurs seront authentifiés par rapport au magasin externe la première fois qu’ils se connecteront. Toutes les autres tentatives de connexion seront exécutées par rapport au magasin d’utilisateurs d’Auth0. Pour en savoir plus sur les migrations automatiques, consultez la section [Importer et exporter des utilisateurs](/users/import-and-export-users).

### Créer un locataire et une application de test

1. Utilisez Auth0 Dashboard pour [créer un nouveau locataire](/get-started/create-tenants).
2. Rendez-vous à [Applications > Applications](%24%7Bmanage_url%7D/#/applications/applications) et créez une application de [communication entre machines](%24%7Bmanage_url%7D/#/applications/applications/create).
3. Sous l’onglet Grant Types (Types d’autorisations) cochez **Password** (Mot de passe) et **Client Credentials** (Identifiants du client) pour cette application (les deux autorisations doivent être activées dans le cadre de ce test).
4. Pour autoriser votre application, allez à [Applications > API](%24%7Bmanage_url%7D/#/apis).
5. Sélectionnez **Management API**.
6. Sous l’onglet **Machine-to-Machine Applications** (Applications de communication entre machines), utilisez le bouton a bascule pour autoriser votre application test.
7. Sélectionnez le menu déroulant pour autoriser les permissions de Auth0 Management API suivantes :

* `read:users`
* `update:clients`
* `delete:user`
* `create User`
* `read:users_app_metadata`
* `update:users_app_metadata`
* `create:users_app_metadata
`

### Créer des connexions de base de données

Une fois que vous avez créé un locataire et une application dans Auth0 Dashboard, créez une connexion de base de données source et de base de données cible.

1. Allez à [Authentication (Authentification) > Database (Base de données) ](%24%7Bmanage_url%7D/#/connections/database) pour créer une nouvelle connexion de base de données, en la définissant comme source.
2. Nommez votre connexion test à cette source, activez l’option **Requires Username** (Nécessite un nom d’utilisateur), et cliquez sur **Create** (Créer).
3. Créez une deuxième base de donnée en tant que cible avec la même configuration qu’à l’étape 2.
4. Dans votre base de données cible, allez dans l’onglet **Custom Database (Base de données personnalisée)**, puis activez **Use my own database (Utiliser ma propre base de données)**.
5. Dans l’onglet **Settings** (Paramètres), activez **Import Users to Auth0** (Importer des utilisateurs dans Auth0).
6. Passez à l’onglet **Custom Database (Base de données personnalisée)**, puis localisez la section **Database settings** (Paramètres de la base de données). Ajoutez les informations suivantes de votre base de données source créée à l’étape 1 :
7. Mettez à jour les scripts d’action [Se connecter](/docs/authenticate/database-connections/test-custom-db#login) et [Obtenir l’utilisateur](/docs/authenticate/database-connections/test-custom-db#get-user) dans votre base de données cible. Pour en savoir plus sur les meilleures pratiques en matière d’utilisation des scripts d’action des bases de données, consultez [Connexion de bases de données personnalisées et meilleures pratiques en matière de scripts d’actions](/custom-database-connections-scripts).
8. Sélectionnez **Save and Try** (Enregistrer et essayer) pour chaque script. Vous devez surveiller la sortie `console.log` de l’extension des journaux des tâches Web en temps réel. Pour en savoir plus, consultez [Extension des journaux des tâches Web en temps réel](/extensions/real-time-webtask-logs).
9. Sélectionnez **Try Connection** (Tester la connexion) pour tester la connexion en temps réel

## Test sans importation des utilisateurs

1. Recommencez les étapes décrites dans la section [Créer un locataire et une application de test](https://www.auth0.com/docs/authenticate/database-connections/test-custom-db#create-a-test-tenant-and-application).
2. Création d’une connexion de base de données de test
3. Assurez-vous que **l’importation d’utilisateurs dans Auth0** est désactivée dans les paramètres de votre base de données source. Les utilisateurs s’authentifient auprès du magasin d’utilisateurs externe à chaque tentative de connexion.
4. Mettez à jour tous les scripts d’Actions de base de données à l’aide des exemples ci-dessous.

### Script Get User (Obtenir l’utilisateur)

Le script [Obtenir l’utilisateur](/get-user) permet de mettre en œuvre une fonction qui détermine l’état actuel d’un utilisateur.

Lorsque l’option **Import Users to Auth0 (Importation des utilisateurs dans Auth0)** est activée, le script Get User (Obtenir l’utilisateur) s’exécute quand un utilisateur essaie de s’inscrire afin de vérifier si ce dernier existe déjà dans le magasin d’utilisateurs externe.

Le script Get User (Obtenir l’utilisateur) s’exécute également lorsqu’un utilisateur essaie de :

* Modifier l’adresse courriel d’un utilisateur (script[ de modification de courriel)](/change-email)
* Se connecter (script [de connexion](/login))
* Modifier son mot de passe (script[ de modification de mot de passe](/change-password))

Lorsque l’option **Import Users to Auth0 (Importation des utilisateurs dans Auth0)** est désactivée, le script Get User (Obtenir l’utilisateur) s’exécute quand un utilisateur essaie de s’inscrire afin de vérifier si ce dernier existe déjà dans le magasin d’utilisateurs externe. Si un utilisateur existe déjà dans le magasin d’utilisateurs externe, le script Create (Créer) ne sera pas exécuté.

Le script Get User (Obtenir l’utilisateur) s’exécute également lorsqu’un utilisateur essaie de :

* Créer un utilisateur (script[ de création](/create))
* Modifier l’adresse courriel d’un utilisateur (script[ de modification de courriel](/change-email))
* Modifier le mot de passe d’un utilisateur (script[ de modification de mot de passe](/change-password))

#### Exemple



### Script Login (Se connecter)

Le script de [connexion](/login) met en œuvre une fonction exécutable qui authentifie un utilisateur lorsqu’il se connecte. S’il existe dans la base de données cible (Auth0), il est identifié à l’aide de cet enregistrement. Sinon, il est authentifié à l’aide de son enregistrement dans la base de données source (externe).

#### Exemple



### Script Create (Créer)

Le script de [création](/create) met en œuvreune fonction exécutable qui crée un enregistrement utilisateur correspondant dans la base de données externe lorsqu’un utilisateur s’inscrit au moyen d’une connexion universelle, ou est créé dans Auth0 Dashboard ou à l’aide d’Auth0 Management API.

#### Exemple



### Script Delete (Supprimer)

Le script de [suppression](/delete) met en œuvre une fonction exécutable qui supprime un utilisateur de la base de données externe et d’Auth0 lors de la même opération lorsque celui-ci est retiré d’Auth0 Dashboard ou à l’aide d’Auth0 Management API.

#### Exemple



### Script Verify (Vérifier)

Le script de [vérification](/verify) met en œuvre une fonction exécutable qui indique l’état de vérification de l’adresse courriel d’un utilisateur dans la base de données externe lorsqu’un utilisateur clique sur le lien dans le courriel de vérification envoyé par Auth0.

#### Exemple



### Script Change Password (Modifier le mot de passe)

Le script de [modification du mot de passe](/change-password) met en œuvre une fonction exécutable qui met à jour le mot de passe d’un utilisateur dans la base de données externe lorsqu’un flux de production de modification de mot de passe est lancé à partir d’Auth0 Dashboard ou d’Auth0 Management API.

#### Exemple



### Script Change Email (Modifier le courriel)

Le script de [modification du courriel](/change-email) met en œuvre une fonction exécutable qui met à jour l’adresse courriel d’un utilisateur lorsque celui-ci la change ou modifie son état de vérification.

Ce script n’est pas disponible dans Auth0 Dashboard Vous devez appeler le point de terminaison [Update a connection (Mettre à jour une connexion)](/docs/api/management/v2/connections/patch-connections-by-id) de Management API et fournir la propriété `options.customScripts.change_email`.

#### Exemple