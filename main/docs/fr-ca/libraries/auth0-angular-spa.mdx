---
description: ''
og:description: Describes the Auth0 SDK for Angular Single Page Apps
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Trousse SDK Auth0 pour Angular pour les applications à page unique
og:url: https://auth0.com/docs/
permalink: auth0-angular-spa
title: Trousse SDK Auth0 pour Angular pour les applications à page unique
twitter:description: Describes the Auth0 SDK for Angular Single Page Apps
twitter:title: Trousse SDK Auth0 pour Angular pour les applications à page unique
---

La trousse SDK Auth0 pour Angular est une bibliothèque JavaScript permettant de mettre en œuvre l’authentification et l’autorisation dans les applications Angular avec Auth0. Elle fournit un service, un garde d’authentification et un intercepteur HTTP pour vous permettre d’effectuer des tâches d’authentification courantes dans vos applications Angular.

La trousse SDK Auth0 pour Angular gère les détails de l’autorisation et du protocole, l’expiration et le renouvellement des jetons, ainsi que le stockage et la mise en cache des jetons. Concrètement, elle met en œuvre la [Connexion universelle](/login/universal-login) et le [Flux de code d’autorisation avec PKCE](/login/flows/authorization-code-flow-with-proof-key-for-code-exchange-pkce).

La bibliothèque est [hébergée sur GitHub](https://github.com/auth0/auth0-angular), où vous pouvez [en savoir plus sur l’API](https://auth0.github.io/auth0-angular/).

## Installation



Utilisez le [Angular CLI](https://cli.angular.io/) pour installer la trousse SDK dans votre projet :

`ng add @auth0/auth0-angular`

## Démarrage

Commencez à intégrer la trousse SDK en important `AuthModule` dans votre projet et en le configurant pour votre application client Auth0 :



## Connexion

La trousse SDK prend entièrement en charge le système d’injection de dépendances d’Angular. Pour commencer, importez le type `AuthService` dans un composant et injectez-le dans le constructeur.

Ensuite, pour lancer la connexion de l’utilisateur, utilisez la méthode `loginWithRedirect` ou `loginWithPopup` sur le service :



## Déconnexion

Utilisez `déconnexion` pour déconnecter vos utilisateurs. Assurez-vous que `returnTo` est spécifié dans **URL de déconnexion autorisées**dans votre Auth0 Dashboard.



## État de l’authentification

L’état de l’authentification est exposé via l’observable `isAuthenticated$` :



## Profil utilisateur

Le profil utilisateur de l’utilisateur authentifié est exposé via l’observable `user$` :



En interne, cet observable est enchaîné à partir de l’observable `isAuthenticated$`, il n’est donc pas nécessaire de vérifier manuellement si l’utilisateur est connecté. Il commencera à émettre des valeurs une fois qu’un utilisateur authentifié sera disponible.

## Protéger une route

Protégez un composant d’une route à l’aide de la fonction intégrée `AuthGuard`. Les visites vers cette route en l’absence d’authentification redirigeront l’utilisateur vers la page de connexion et le renverront vers cette page après la connexion.

Le garde d’authentification doit être ajouté à une définition de route à l’aide du hook `canActivate` (ou `canActivateChild` si vous utilisez des routes enfants) :



Le garde d’authentification prend également en charge le hook `canLoad` pour empêcher le chargement différé des modules lorsque l’utilisateur n’est pas authentifié.

## Appeler une API

La trousse SDK contient un `HttpInterceptor` intégré qui attache automatiquement des jetons d’accès en injectant un en-tête `Authorization` lorsque les demandes sont effectuées à l’aide du service `HttpClient` d’Angular.

Vous devez configurer la trousse SDK pour spécifier à quelles routes vers l’API cet en-tête doit être ajouté automatiquement, afin d’éviter toute fuite de jeton d’accès vers des destinataires que vous n’attendiez pas.

### Importer l’intercepteur HTTP

Pour commencer, importez les types dont vous aurez besoin pour intégrer l’intercepteur HTTP Auth0 dans votre application :



**Remarque :** L’intercepteur doit être enregistré manuellement auprès de votre module d’application (au lieu de l’enregistrer automatiquement), car il est conçu pour être enchaîné avec d’autres intercepteurs, et nous ne pouvons pas garantir que nous l’insérerons au bon endroit.

### Configurer l’intercepteur HTTP

Il existe différentes manières de configurer l’intercepteur en fonction de vos besoins. Une route peut être spécifiée à l’aide d’une chaîne de caractères, d’un objet contenant des options qui influencent le jeton envoyé, et elle peut également être adaptée en fonction du verbe HTTP utilisé. Les URI de route peuvent également inclure un caractère générique pour spécifier un groupe de routes.

**Remarque :** Si un appel HTTP est effectué, mais ne correspond pas à une route spécifiée dans la configuration, l’intercepteur sera contourné et l’en-tête `Authorization` ne sera pas inclus.

Cet exemple montre des méthodes courantes pour indiquer à la trousse SDK quelles routes doivent avoir un en-tête `Authorization` :



**Remarque :**`tokenOptions` est transmis directement à la méthode `getTokenSilently` sur la trousse SDK SPA sous-jacente. Veuillez consulter [la documentation](https://auth0.github.io/auth0-spa-js/interfaces/gettokensilentlyoptions.html) pour plus de détails sur les propriétés acceptées.

### Appeler une API

Effectuez votre appel API en utilisant le service `HttpClient` d’Angular. Les jetons d’accès doivent être automatiquement inclus via l’en-tête `Authorization` pour les routes qui correspondent à la configuration.



Veuillez noter qu’aucune opération supplémentaire n’est requise sur le site d’appel pour fournir des jetons ou d’autres files d’attente d’autorisation; tout cela est géré par l’intercepteur et la configuration du module.