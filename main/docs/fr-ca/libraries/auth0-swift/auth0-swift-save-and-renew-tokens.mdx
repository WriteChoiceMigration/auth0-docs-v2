---
description: ''
og:description: Keeping your user logged in with Auth0.swift
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 'Auth0.swift : Enregistrement et renouvellement des jetons'
og:url: https://auth0.com/docs/
permalink: auth0-swift-save-and-renew-tokens
title: 'Auth0.swift : Enregistrement et renouvellement des jetons'
twitter:description: Keeping your user logged in with Auth0.swift
twitter:title: 'Auth0.swift : Enregistrement et renouvellement des jetons'
---

When an authentication is performed with the `offline_access` scope included, it will return a <Tooltip tip="Refresh Token: Token used to obtain a renewed Access Token without forcing users to log in again." cta="View Glossary" href="/docs/glossary?term=Refresh+Token">Refresh Token</Tooltip> that can be used to request a new token without asking for credentials again.

## Gestionnaire des identifiants

[Auth0.swift](https://github.com/auth0/Auth0.swift) provides a utility class to streamline the process of storing and renewing credentials. You can access the `accessToken` or `idToken` properties from the [Credentials](https://github.com/auth0/Auth0.swift/blob/master/Auth0/Credentials.swift) instance. This is the preferred method to manage user credentials.

Importez d’abord le module `Auth0`.

`import Auth0`

Next present the <Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip> page:

```swift lines
let credentialsManager = CredentialsManager(authentication: Auth0.authentication())

Auth0
    .webAuth()
    .scope("openid profile offline_access")
    .start { result in
        switch result {
        case .success(let credentials):
            // Pass the credentials over to the Gestionnaire des identifiants
            credentialsManager.store(credentials: credentials)
        case .failure(let error):
            // Handle error
        }
}
```

<Warning>

The Keychain items do not get deleted after your app is uninstalled. We recommend to always clear all of your app's Keychain items on first launch.

</Warning>

### Vérification des identifiants

Il peut être utile d’effectuer une vérification rapide au démarrage de l’application pour s’assurer que les identifiants renouvelables sont bien stockés dans le gestionnaire. Si ce n’est pas le cas, l’utilisateur peut alors être invité à s’authentifier.

```swift lines
guard credentialsManager.canRenew() else {
    // Present login page
}
```

### Récupération des identifiants utilisateur

Vous pouvez récupérer les identifiants utilisateur de la manière suivante :

```swift lines
credentialsManager.credentials { result in 
    switch result {
    case .success(let credentials):
        // Valid credentials; you can access token properties such as
        // `idToken`, `accessToken`
    case .failure(let error):
        // Handle error, present login page
    }
}
```

Pour renouveler les identifiants d’un utilisateur, il faut procéder de la même manière que lorsque le jeton a expiré. Le Gestionnaire des identifiants renouvelle automatiquement les identifiants, les enregistre dans le trousseau, puis renvoie un `Result` contenant soit les identifiants, soit une erreur.

## Autre méthode - SimpleKeychain

Cette section s’adresse aux développeurs qui préfèrent ne pas utiliser le Gestionnaire des identifiants. Nous incluons l’utilitaire SimpleKeychain, une enveloppe légère sur le trousseau du système, qui peut être utilisé pour stocker les jetons en toute sécurité.

Importez d’abord le module `SimpleKeychain` :

`import SimpleKeychain`

Créez ensuite une instance et stockez les jetons dont vous avez besoin. Dans ce cas, vous stockez le `access_token` et le `refresh_token` dans le Keychain après une authentification réussie.

```swift lines
let keychain = SimpleKeychain(service: "Auth0")

Auth0
    .webAuth()
    .scope("openid profile offline_access")
    .start { result in
        switch result {
        case .success(let credentials):
            guard let refreshToken = credentials.refreshToken else { 
                // Handle error 
                return
            }
            // Store the tokens
            do {
                try keychain.set(credentials.accessToken, forKey: "access_token")
                try keychain.set(refreshToken, forKey: "refresh_token")
            } catch {
                // Handle error
            }
            // You might want to route to your app's main flow at this point
        case .failure(let error):
            // Handle error
        }
}
```

Once you have those stored, you can at any point request a fresh [Credentials](https://github.com/auth0/Auth0.swift/blob/master/Auth0/Credentials.swift) instance.

### Renouvellement des identifiants utilisateur

```swift lines expandable
let keychain = SimpleKeychain(service: "Auth0")

Auth0
    .authentication()
    .renew(withRefreshToken: refreshToken)
    .start { result in
        switch(result) {
        case .success(let credentials):
            // If you have Refresh Token Rotation enabled, you get a 
            // new refresh token
            // Otherwise you only get a new access token
            guard let refreshToken = credentials.refreshToken else { 
                // Handle error 
                return
            }
            // Store the new tokens
            do {
                try keychain.set(credentials.accessToken, forKey: "access_token")
                try keychain.set(refreshToken, forKey: "refresh_token")
            } catch {
                // Handle error
            }
        case .failure(let error):
            // Handle error
        }
}
```