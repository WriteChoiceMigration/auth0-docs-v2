---
description: ''
og:description: Guide on implementing Passwordless authentication with Lock.Android
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 'Lock.Android : Sans mot de passe'
og:url: https://auth0.com/docs/
permalink: lock-android-passwordless
title: 'Lock.Android : Sans mot de passe'
twitter:description: Guide on implementing Passwordless authentication with Lock.Android
twitter:title: 'Lock.Android : Sans mot de passe'
---

Lock <Tooltip tip="Passwordless: Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=Passwordless">Passwordless</Tooltip> authenticates users by sending them an Email or SMS with a one-time password that the user must enter and confirm to be able to log in, similar to how WhatsApp authenticates. This article will explain how to send a CODE using the `Lock.Android` library.

You can achieve a similar result by [sending a link that the user can click](/docs/libraries/lock-android/lock-android-passwordless-with-magic-link) to finish the passwordless authentication automatically, but a few more configuration steps are involved.

In order to be able to authenticate the user, your application must have the Email/SMS connection enabled and configured in your [Auth0 Dashboard](https://manage.auth0.com/#/connections/passwordless).

## Mise en œuvre du code sans mot de passe

### Configuration de la trousse SDK

In your `app/build.gradle` file add the [Manifest Placeholders](https://developer.android.com/studio/build/manifest-build-variables.html) for the Auth0 Domain and the Auth0 Scheme properties, which are going to be used internally by the library to register an intent-filter that captures the authentication result.

```kotlin lines
plugins {
    id "com.android.application"
    id "kotlin-android"
}

android {
    compileSdkVersion 30
    defaultConfig {
        applicationId "com.auth0.samples"
        minSdkVersion 21
        targetSdkVersion 30
        // ...

        // ---> Add the next line
        manifestPlaceholders = [auth0Domain: "@string/com_auth0_domain", auth0Scheme: "https"]
        // <---
    }
}
```

Une bonne pratique consiste à ajouter ces valeurs au fichier `strings.xml` en tant que ressources de type chaîne qui peuvent être référencées ultérieurement dans le code.

```xml lines
<resources>
    <string name="com_auth0_client_id">{yourClientId}</string>
    <string name="com_auth0_domain">{yourDomain}</string>
</resources>
```

### Utilisation de la trousse SDK

Dans l’activité où vous prévoyez invoquer Lock, créez une instance `Auth0` avec les informations de votre application. La façon la plus simple de la créer est de passer un Contexte Android. Celui-ci utilisera les valeurs définies précédemment dans le fichier `strings.xml` . Pour que cela fonctionne, les ressources doivent être définies sous forme de chaînes en utilisant les mêmes clés que celles indiquées ci-dessus.

```kotlin lines
val account = Auth0(context)
```

Declare an `AuthenticationCallback` implementation that will handle user authentication events. The `Credentials` object returned in successful authentication scenarios will contain the tokens that your application or API will end up consuming. See [Tokens](/docs/secure/tokens) for more specifics.

```kotlin lines
private val callback = object : AuthenticationCallback() {
    override fun onAuthentication(credentials: Credentials) {
        // Authenticated
    }

    override fun onError(error: AuthenticationException) {
        // Exception occurred
    }
}
```

Prepare a new Lock instance by using the Builder class to configure it. Provide the account details and the callback implementation declared above. Values like <Tooltip tip="Audience: Unique identifier of the audience for an issued token. Named aud in a token, its value contains the ID of either an application (Client ID) for an ID Token or an API (API Identifier) for an Access Token." cta="View Glossary" href="/docs/glossary?term=audience">audience</Tooltip>, scope, and available connections, among others, can be configured here. When done, build the Lock instance. This instance is meant to be reused and must be disposed of when it is no longer needed. A good place to do this is in your activity's `onDestroy` method.

L’exemple ci-dessous fait appel à la méthode `useCode()` pour faire en sorte que Lock envoie un **CODE** à l’adresse courriel ou au numéro de téléphone de l’utilisateur.

```kotlin lines expandable
// This activity will show Passwordless Lock
class MyActivity : AppCompatActivity() {

    private lateinit var lock: PasswordlessLock

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        val account = Auth0(this)
        // Instantiate Lock once
        lock = PasswordlessLock.newBuilder(account, callback)
            .useCode()
            // Customize Lock
            .build(this)
    }

    override fun onDestroy() {
        super.onDestroy()
        // Important! Release Lock and its resources
        lock.onDestroy(this)
    }

    private val callback = object : AuthenticationCallback() {
        override fun onAuthentication(credentials: Credentials) {
            // Authenticated
        }

        override fun onError(error: AuthenticationException) {
            // An exception occurred
        }
    }
}
```

Enfin, lancez le gadget logiciel `PasswordlessLock` à partir de votre activité.

```kotlin lines
startActivity(lock.newIntent(this))
```

Selon les connexions sans mot de passe activées, Lock enverra le **CODE** par courriel ou par SMS. La connexion ’email’ est sélectionnée en premier lieu si elle est disponible. Ensuite, l’utilisateur doit saisir le CODE lors de l’étape de confirmation. Si la valeur correspond à celle que le serveur attend, l’authentification réussira.