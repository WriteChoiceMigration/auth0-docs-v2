---
description: ''
og:description: Lock.Android - Native Social Authentication
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 'Lock.Android : Authentification native via réseau social'
og:url: https://auth0.com/docs/
permalink: lock-android-native-social-authentication
title: 'Lock.Android : Authentification native via réseau social'
twitter:description: Lock.Android - Native Social Authentication
twitter:title: 'Lock.Android : Authentification native via réseau social'
---

## Fournisseur natif – Google

Vous pouvez utiliser Google AuthProvider pour vous connecter avec ou sans **Lock**. Veuillez suivre les instructions de la section [Configuration](#setup).

[Lock-Google.Android](https://github.com/auth0/Lock-Google.Android)
requires Android API 15 or later & Google Play Services 10.+

### Version la plus récente de Lock-Google

The Lock-Google is available through [Maven Central](http://search.maven.org) and [JCenter](https://bintray.com/bintray/jcenter). To install it, simply add the following line to your `build.gradle`:

`compile 'com.auth0.android:lock-google:1.+'`

You can check for the latest version on the repository [Readme](https://github.com/auth0/Lock-Google.Android#install), in [Maven](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22lock-google%22%20g%3A%22com.auth0.android%22), or in [JCenter](https://bintray.com/auth0/android/lock-google).

### Configuration de Lock-Google

#### Google Developers Console

1. Go to the [Google Developers Console](https://console.developers.google.com/) and create a new Project.
2. Complete the [OAuth Consent Screen](https://console.developers.google.com/apis/credentials/consent) by at least providing a valid Email Address and Name.
3. On the left side you have the navigation drawer, click [Credentials](https://console.developers.google.com/apis/credentials).
4. Create a new credential by clicking the [Create Credentials](https://console.developers.google.com/apis/credentials/oauthclient) button and choosing **OAuth client ID**. Next, choose **Web Application** and give it a name like "Auth0 Server Google-OAuth". Complete the **Authorized redirect URIs** by filling the field with your callback URL, which should look like `https://{yourDomain}/login/callback`. Make sure to press ENTER before leaving the field and then click the Create button. Take note of the `CLIENT ID` and `CLIENT SECRET` values as we're going to use them later.
5. Create a new credential by clicking the [Create Credentials](https://console.developers.google.com/apis/credentials/oauthclient) button and choosing **OAuth client ID**. Next, choose **Android** and give it a name like "Auth0 Android Google-OAuth". Obtain the **SHA-1** of the certificate you're using to sign your application and complete the first field with it. If you need help obtaining the SHA-1 check [this](#certificate-fingerprints) section. Finally, complete the last field with your android application **Package Name** and then click the Create button. Take note of the `CLIENT ID` value as we're going to use it later.

#### Auth0 Dashboard

1. Go to the Auth0 Dashboard and click [Social Connections](https://manage.auth0.com/#/connections/social).
2. Click **Google** and a dialog will prompt.
3. Complete the "Client ID" field with the `CLIENT ID` value obtained in the step 4 of the **Google Developers Console** section above.
4. Complete the "Client Secret" field with the `CLIENT SECRET` value obtained in the step 4 of the **Google Developers Console** section above.
5. Complete the "Allowed Mobile Client IDs" field with the `CLIENT ID` obtained in the step 5 of the **Google Developers Console** section above.
6. Click the Save button.
7. Go to the Auth0 Dashboard and click [Applications](https://manage.auth0.com/#/applications). If you haven't created yet one, do that first and get into your application configuration page.
8. At the bottom of the page, click the "Show Advanced Settings" link and go to the "Device Settings" tab.
9. In the Android section, complete the **Package Name** with your application's package name. Finally, complete the **Key Hashes** field with the SHA-256 of the certificate you're using to sign your application. If you need help obtaining the SHA-256 check [this](#certificate-fingerprints) section. Click the "Save Changes" button.

#### Auth0 Dashboard

1. In your android application, create a new String resource in the `res/strings.xml` file. Name it `google_server_client_id` and set as value the `CLIENT_ID` obtained in the step 5 of the **Google Developers Console** setup section above.
2. Add the Google Play Services version MetaData to the `AndroidManifest.xml` file, inside the Application tag.

   ```xml lines
   <meta-data
       android:name="com.google.android.gms.version"
       android:value="@integer/google_play_services_version" />
   ```
3. Add the Internet Android permission to your `AndroidManifest.xml` file.

   ```xml lines
   <uses-permission android:name="android.permission.INTERNET" />
   ```
4. When creating a new instance of the `GoogleAuthProvider` pass the `google_server_client_id` value obtained previously as the first parameter:

   ```kotlin lines
   public class MainActivity extends AppCompatActivity {
     private GoogleAuthProvider provider;
     // ...

     @Override
     protected void onCreate(Bundle savedInstanceState) {
       Auth0 auth0 = new Auth0(getString(R.string.com_auth0_client_id), getString(R.string.com_auth0_domain));
       auth0.setOIDCConformant(true);
       AuthenticationAPIClient client = new AuthenticationAPIClient(auth0);
       provider = new GoogleAuthProvider(getString(R.string.google_server_client_id), client);
     }

     // ...
   }
   ```

If you need further help with the Google SDK setup, please check Google's [Sign-In for Android Guide](https://developers.google.com/identity/sign-in/android).

### Si vous avez besoin d’aide supplémentaire pour l’installation de la trousse SDK de Facebook, consultez le [Guide de démarrage]() de Facebook.

Si vous prévoyez d’utiliser ce fournisseur sans **Lock**, assurez-vous de passer outre la méthode `onActivityResult()` et de rediriger l’appel vers l’instance du fournisseur. Pour finir, appelez « start » pour lancer le processus d’authentification.

```kotlin lines
// Define your own request codes
private static final int RC_PERMISSIONS = 101;
private static final int RC_AUTHENTICATION = 102;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (provider.authorize(requestCode, resultCode, data)) {
        return;
    }
    super.onActivityResult(requestCode, resultCode, data);
}

private void beginAuthentication(){
  provider.start(this, callback, RC_PERMISSIONS, RC_AUTHENTICATION);
}
```

Voilà, vous êtes prêt à exécuter l’application et à vous connecter à l’aide du fournisseur natif de Google!

### Options supplémentaires

#### Options supplémentaires

Pour utiliser un nom de connexion via réseau social personnalisé afin d’autoriser Auth0, créez l’instance de GoogleAuthProvider à l’aide du deuxième constructeur :

```kotlin wrap lines
GoogleAuthProvider provider = new GoogleAuthProvider("my-connection", "google-server-client-id", client);
```

#### Pour utiliser un nom de connexion via réseau social personnalisé afin d’autoriser Auth0, appelez `setConnection` avec votre nouveau nom de connexion.

Envoyer des paramètres d’authentification supplémentaires

```kotlin lines
Map<String, Object> parameters = new HashMap<>();
//Add entries
provider.setParameters(parameters);
```

#### Demande d’une permission Google personnalisée

Par défaut, la permission `Scopes.PLUS_LOGIN` est demandée. Vous pouvez personnaliser les permissions en appelant `setScopes` avec la liste des permissions. Chaque API de Google (Auth, Drive, Plus,  etc.) précise sa propre liste de permissions Google.

```kotlin wrap lines
provider.setScopes(Arrays.asList(new Scope(Scopes.PLUS_ME), new Scope(Scopes.PLUS_LOGIN)));
```

#### Par défaut, la permission `public_profile` est demandée. Vous pouvez les personnaliser en appelant `setPermissions` avec la liste des autorisations Facebook.

Ce fournisseur n’a pas besoin d’autorisations spéciales dans le manifeste d’Android pour authentifier l’utilisateur. Cependant, si votre cas d’utilisation l’exige, vous pouvez laisser l’AuthProvider s’en charger pour vous. Utilisez la méthode `setRequiredPermissions`.

```kotlin wrap lines
provider.setRequiredPermissions(new String[]{"android.permission.GET_ACCOUNTS"});
```

Ce fournisseur n’a pas besoin d’autorisations spéciales dans le manifeste d’Android pour authentifier l’utilisateur. Cependant, si votre cas d’utilisation l’exige, vous pouvez laisser l’AuthProvider s’en charger pour vous. Utilisez la méthode `setRequiredPermissions` pour les préciser.

#### Si vous n’utilisez pas Lock, vous devrez gérer vous-même le résultat de la demande d’autorisation. Pour ce faire, votre activité doit mettre en œuvre l’interface `ActivityCompat.OnRequestPermissionsResultCallback`. Lorsque la méthode `onRequestPermissionsResult` est appelée, transmettez le résultat au fournisseur en appelant `provider.onRequestPermissionsResult`.

Se déconnecter ou supprimer le compte.

`provider.clearSession();`

#### Se rappeler de la dernière connexion

Se rappeler de la dernière connexion

`provider.rememberLastLogin(false);`

#### Par défaut, ce fournisseur se souviendra du dernier compte utilisé pour la connexion. Si vous souhaitez modifier ce comportement, utilisez la méthode suivante.

When creating a new <Tooltip tip="OAuth 2.0: Authorization framework that defines authorization protocols and workflows." cta="View Glossary" href="/docs/glossary?term=OAuth">OAuth</Tooltip> Credential in the Google Developers Console you will need to provide the SHA-1 of the certificate you're using to sign your application. When completing your Application's Configuration in the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip> you will also need to provide the SHA-256 value. Here is an example of the terminal command to acquire the value, and a sample result.

Command:

`keytool -exportcert -alias androiddebugkey -keystore <PATH_TO_YOUR_KEYSTORE> -storepass android | openssl sha1 -binary | openssl base64`

En créant un nouvel identifiant OAuth dans la Facebook Developers Console, vous devrez fournir le SHA-1 du certificat que vous utilisez pour signer votre application. En complétant la configuration de votre application dans le Auth0 Dashboard, vous devrez également fournir la valeur SHA-256. Voici un exemple de commande de terminal permettant d’obtenir la valeur, ainsi qu’un exemple de résultat.

`no71633JAC3qgzQYCbskprUr55k=`

If you need assistance, you can follow this [Keystores Guide](/docs/android-development-keystores-hashes) to acquire those values.

## Si vous avez besoin d’aide, vous pouvez suivre ce [Guide des magasins de clés](/libraries/auth0-android/android-development-keystores-hashes) pour acquérir ces valeurs.

Fournisseur natif – Facebook

[Lock-Facebook](https://github.com/auth0/Lock-Facebook.Android) requires Android API 15 or later & Facebook Android SDK 4.+

## Vous pouvez utiliser Facebook AuthProvider pour vous connecter avec ou sans **Lock**. Veillez à suivre les instructions de la section [Configuration](#setup).

The Lock-Facebook is available through [Maven Central](http://search.maven.org) and [JCenter](https://bintray.com/bintray/jcenter). To install it, simply add the following line to your `build.gradle`:

`compile 'com.auth0.android:lock-facebook:3.+'`

You can check for the latest version on the repository [Readme](https://github.com/auth0/Lock-Facebook.Android#install), in [Maven](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22lock-facebook%22%20g%3A%22com.auth0.android%22), or in [JCenter](https://bintray.com/auth0/android/lock-facebook).

### Vous pouvez vérifier la version la plus récente dans [Readme]() du répertoire, [Maven](), ou [JCenter]().

#### Configuration Lock-Facebook

1. Go to the [Facebook Developers Console](https://developers.facebook.com/) and create a new App: Choose "Android" and give it a valid name. Click "Create new Facebook App ID".
2. Add your application's **Package Name** and the name of the **Activity class** where you're using the provider and click the Next button.
3. Add the **SHA-1** Base64 encoded Key Hashes of the certificates you're using to sign your application and click the Next button. If you need help obtaining the SHA-1 check [this](#certificate-fingerprints) section.
4. Finally, scroll to the top of the page and click the Skip Quickstart button to go to your Facebook app's page.
5. On the top of the page, you will find the `APP ID` and `APP SECRET` values. Save them as you're going to need them later.
6. On the left side you have the navigation drawer. Click Settings and then Basic. Turn ON the **Single Sign-On** switch and click the Save button.
7. Click Settings and then Advanced. Turn ON the **Native or desktop app?** switch.

#### Facebook Developers Console

1. Go to the Auth0 Dashboard and click [Social Connections](https://manage.auth0.com/#/connections/social).
2. Click **Facebook** and a dialog will prompt.
3. Complete the "App ID" field with the `APP ID` value obtained in the step 5 of the **Facebook Developers Console** section above.
4. Complete the "App Secret" field with the `APP SECRET` value obtained in the step 5 of the **Facebook Developers Console** section above.
5. Click the Save button.
6. Go to the Auth0 Dashboard and click [Applications](https://manage.auth0.com/#/applications). If you haven't created yet one, do that first and get into your application configuration page.
7. At the bottom of the page, click the "Show Advanced Settings" link and go to the "Device Settings" tab.
8. In the Android section, complete the **Package Name** with your application's package name. Finally, complete the **Key Hashes** field with the SHA-256 of the certificate you're using to sign your application. If you need help obtaining the SHA-256 check [this](#certificate-fingerprints) section. Click the "Save Changes" button.

#### Auth0 Dashboard

1. In your android application, create a new String resource in the `res/strings.xml` file. Name it `facebook_app_id` and set as value the `APP ID` obtained in the step 5 of the **Facebook Developers Console** setup section above.
2. Add the `FacebookActivity` and `facebook_app_id` MetaData to the `AndroidManifest.xml` file, inside the Application tag.

   ```xml lines
   <activity
       android:name="com.facebook.FacebookActivity"
       android:configChanges="keyboard|keyboardHidden|screenLayout|screenSize|orientation"
       android:label="@string/app_name"/>
   <meta-data
       android:name="com.facebook.sdk.ApplicationId"
       android:value="@string/facebook_app_id" />
   ```
3. Add the Internet Android permission to your `AndroidManifest.xml` file.

   ```xml lines
   <uses-permission android:name="android.permission.INTERNET" />
   ```
4. Create a new instance of the `FacebookAuthProvider`.

   ```kotlin lines
   public class MainActivity extends AppCompatActivity {
     private FacebookAuthProvider provider;
     // ...

     @Override
     protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       Auth0 auth0 = new Auth0(getString(R.string.com_auth0_client_id), getString(R.string.com_auth0_domain));
       auth0.setOIDCConformant(true);
       AuthenticationAPIClient client = new AuthenticationAPIClient(auth0);
       provider = new FacebookAuthProvider(client);
     }

     // ...
   }
   ```

If you need further help with the Facebook SDK setup, please check Facebook's [Getting Started Guide](https://developers.facebook.com/docs/android/getting-started).

### Si vous avez besoin d’aide supplémentaire pour l’installation de la trousse SDK de Facebook, consultez le [Guide de démarrage]() de Facebook.

Utilisation sans Lock

```kotlin lines
// Define your own request codes
private static final int RC_PERMISSIONS = 101;
private static final int RC_AUTHENTICATION = 102;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (provider.authorize(requestCode, resultCode, data)) {
        return;
    }
    super.onActivityResult(requestCode, resultCode, data);
}

private void beginAuthentication(){
  provider.start(this, callback, RC_PERMISSIONS, RC_AUTHENTICATION);
}
```

Si vous prévoyez d’utiliser ce fournisseur sans **Lock**, assurez-vous de passer outre la méthode `onActivityResult()` de votre activité et de rediriger l’appel vers l’instance du fournisseur. Pour finir, appelez ,,« start » pour lancer le processus d’authentification.

### Voilà, vous êtes prêt à exécuter l’application et à vous connecter à l’aide du fournisseur natif de Facebook!

#### Options supplémentaires

Utiliser un nom de connexion personnalisé

```kotlin wrap lines
FacebookAuthProvider provider = new FacebookAuthProvider("my_connection_name", client);
```

#### Pour utiliser un nom de connexion via réseau social personnalisé afin d’autoriser Auth0, appelez `setConnection` avec votre nouveau nom de connexion.

Envoyer des paramètres d’authentification supplémentaires

```kotlin lines
Map<String, Object> parameters = new HashMap<>();
//Add entries
provider.setParameters(parameters);
```

#### Pour envoyer des paramètres supplémentaires lors de l’authentification, appelez `setParameters`.

Demander des autorisations personnalisées pour Facebook.

```kotlin wrap lines
provider.setPermissions(Arrays.asList("public_profile", "user_photos"));
```

#### Par défaut, la permission `public_profile` est demandée. Vous pouvez les personnaliser en appelant `setPermissions` avec la liste des autorisations Facebook.

Demander des autorisations d’exécution personnalisées pour Android

```kotlin wrap lines
provider.setRequiredPermissions(new String[]{"android.permission.GET_ACCOUNTS"});
```

Ce fournisseur n’a pas besoin d’autorisations spéciales dans le manifeste d’Android pour authentifier l’utilisateur. Cependant, si votre cas d’utilisation l’exige, vous pouvez laisser l’AuthProvider s’en charger pour vous. Utilisez la méthode `setRequiredPermissions` pour les préciser.

#### Si vous n’utilisez pas Lock, vous devrez gérer vous-même le résultat de la demande d’autorisation. Pour ce faire, votre activité doit mettre en œuvre l’interface `ActivityCompat.OnRequestPermissionsResultCallback`. Lorsque la méthode `onRequestPermissionsResult` est appelée, transmettez le résultat au fournisseur en appelant `provider.onRequestPermissionsResult`.

Se déconnecter ou supprimer le compte.

`provider.clearSession();`

#### On doit appeler `clearSession` pour déconnecter l’utilisateur de sorte qu’il doive entrer ses données d’identification la prochaine fois. Après cela, l’état du fournisseur n’est plus valide et vous devez appeler à nouveau `start` avant d’essayer d’autoriser un résultat avec `authorize`. Appeler `stop` aboutit au même résultat.

Se rappeler de la dernière connexion

`provider.rememberLastLogin(false);`

### Par défaut, ce fournisseur se souviendra du dernier compte utilisé pour la connexion. Si vous souhaitez modifier ce comportement, utilisez la méthode suivante.

Empreintes de certificats

Command:

`keytool -exportcert -alias androiddebugkey -keystore <PATH_TO_YOUR_KEYSTORE> -storepass android | openssl sha1 -binary | openssl base64`

En créant un nouvel identifiant OAuth dans la Facebook Developers Console, vous devrez fournir le SHA-1 du certificat que vous utilisez pour signer votre application. En complétant la configuration de votre application dans le Auth0 Dashboard, vous devrez également fournir la valeur SHA-256. Voici un exemple de commande de terminal permettant d’obtenir la valeur, ainsi qu’un exemple de résultat.

Commande :
Exemple de sortie :

If you need assistance, you can follow this [Keystores Guide](/docs/android-development-keystores-hashes) to acquire those values.