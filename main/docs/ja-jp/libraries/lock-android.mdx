---
description: ''
og:description: Get started with Lock for Android, a widget that provides a frictionless
  login and signup experience for your native Android apps.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Lock.Android：使用を開始する
og:url: https://auth0.com/docs/
permalink: lock-android
title: Lock.Android：使用を開始する
twitter:description: Get started with Lock for Android, a widget that provides a frictionless
  login and signup experience for your native Android apps.
twitter:title: Lock.Android：使用を開始する
---

Lock for Androidは、ネイティブAndroidアプリに組み込むことができ、ユーザーがアプリに便利な方法でログインしてサインアップできるようにします。Facebook、Google、またはXのようなソーシャルIDプロバイダーや、Active Directoryなどのエンタープライズプロバイダーをサポートします。

GitHubの[Lock.Androidレポジトリ](https://github.com/auth0/Lock.Android)をご確認ください。

## 要件

[Auth0.Androidライブラリ](https://github.com/auth0/Auth0.Android)を介してLockのUIまたはご自身のUIを使用するために最低限必要なAndroid APIレベルは21以上でJavaバージョン8以上です。また、「ネイティブ」タイプのAuth0アプリケーションも必要です。

以下に、Java 8バイトコードをAndroidとKotlinプラグインのそれぞれのターゲットにするために何が`build.gradle`に必要なのかを示します。



## インストール

Lockは[Maven Central](http://search.maven.org)で利用可能です。Lockを開始するには、以下の行を`build.gradle`依存関係ファイルに追加します：

`implementation 'com.auth0.android:lock:3.+'`

最新バージョンはリポジトリの[Readme](https://github.com/auth0/Lock.Android#install)または[Maven](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22lock%22%20g%3A%22com.auth0.android%22)で確認できます。

Gradleの依存関係を追加したら、プロジェクトをGradleファイルと忘れずに同期させます。

## Dashboardの設定

開始する前に、[Auth0 Dashboard](%24%7Bmanage_url%7D)でいくつかの設定を行う必要があります。

### Callback URL

Auth0 Dashboardにアクセスして、アプリケーションの設定に移動します。以下のURLをアプリケーションの**［Allowed Callback URLs（許可されているCallback URL）］**に追加します。

`https://${account.namespace}/android/{yourAppPackageName}/callback`

`{yourAppPackageName}`を、`app/build.gradle`ファイルで`applicationId`値として利用可能な実際のアプリケーションのパッケージ名に置き換えます。

### キーストアおよびキーハッシュ

Androidアプリケーションは、デバイスにインストールする前に、署名される必要があります。このため、Android Studio IDEは初めての実行時にデフォルトの「Androidデバッグキーストア」を生成し、それを使用して開発ビルドに署名します。この[キーストア](https://developer.android.com/studio/publish/app-signing)は、あなたを開発者として識別するために使用されるため、プロダクションビルドのものとはおそらく異なります。

Web Authentication機能（つまり、ソーシャル接続）を使用するとき、Lockは、Androidアプリリンクの使用を試行するようにデフォルトでセットアップされます。これは、Auth0アプリケーションのDashboardでの追加設定を必要とします。[Androidのキーストアおよびキーハッシュのガイド](/libraries/auth0-android/android-development-keystores-hashes)を使用して、このステップを完了してください。

## Lockの実装（ソーシャル、データベース、エンタープライズ）

以下では、AndroidへのClassic Lockの実装について説明しています。AndroidにパスワードレスのLockを実装する情報をお探しの場合には、「[Lock.Android：パスワードレス](/libraries/lock-android/lock-android-passwordless)」を参照してください。

### SDKの構成

`app/build.gradle`ファイルで、Auth0ドメインおよびAuth0スキームプロパティに[マニフェストファイル](https://developer.android.com/studio/build/manifest-build-variables.html)を追加すると、それがライブラリによって内部で使用され、認証結果を取り込むインテントフィルタを登録します。



これらの値を、後でコードから参照可能な文字列リソースとして`strings.xml`ファイルに追加することをお勧めします。このガイドではそのプラクティスに従います。



### SDKの使用方法

Lockを起動する予定のアクティビティで、アプリケーションの情報を用いて`Auth0`のインスタンスを作成します。最も簡単な作成方法は、AndroidのContextを渡す方法です。これは、`strings.xml`ファイルで以前定義した値を使用します。これを行うには、文字列リソースが上記のものと同じキーを使用して定義されなければなりません。



ユーザー認証イベントを処理する`AuthenticationCallback`実装を宣言します。正常な認証シナリオで返される`Credentials`オブジェクトには、アプリケーションまたはAPIが最終的に利用するトークンが含まれます。詳細については、「[トークン](/security/tokens)」をご覧ください。



Builderクラスを使用して構成し、新しいLockインスタンスを準備します。アカウントの詳細と上記で宣言したCallback実装を提供します。オーディエンス、スコープ、使用可能な接続などの値は、ここで構成できます。

完了したら、Lockインスタンスをビルドします。このインスタンスは、再使用されるように意図されており、必要なくなった時に廃棄されなければなりません。これを行うのに最適な場所は、アクティビティの`onDestroy`メソッド内です。



最後に、アクティビティの中から`Lock`ウィジェットを起動します。



これで作業完了です。後はLockが処理します。

#### Androidアプリリンク - カスタムスキーム

この記事で使用されており、LockのデフォルトであるCallback URLスキームは`https`です。これは、[Androidアプリリンク](https://developer.android.com/training/app-links)を使用している場合は、Android Marshmallow（API 23）以降で最適に機能しますが、それより前のAndroidバージョンについては、ユーザーにインテント選択ダイアログを表示して、そのインテントを解決するためにアプリケーションかブラウザを選択させる場合があります。これは「曖昧さ回避ダイアログ」と呼ばれます。カスタムの固有スキームを使用して、OSがアプリで直接リンクを開くようにすることで、この動作を変更できます。

1. 既存のスキームを新規のものに変更して、`app/build.gradle`ファイル、または直接`AndroidManifest.xml`ファイルのインテントフィルタ定義の`auth0Scheme`マニフェストファイルの値を更新します。
2. Auth0 Dashboardのアプリケーションの設定の［Allowed Callback URLs（許可されているCallback URL）］を新規スキームから始まるURLに一致するように更新します。
3. ビルダーでLockを構成するときに、使用したいスキームを渡して`withScheme()`を呼び出します。



## ロックの構成

Lockの構成オプションの完全リストについては、「[Lock.Android：構成](/libraries/lock-android/lock-android-configuration)」を確認してください。

## エラーメッセージ

一般的なエラーメッセージの説明については、[エラーメッセージ](/troubleshoot/troubleshoot-basic/check-error-messages)のページをご覧ください。また、コールバックが`AuthenticationException`を受け取った場合は、[ソース](https://github.com/auth0/Auth0.Android/blob/main/auth0/src/main/java/com/auth0/android/authentication/AuthenticationException.kt)を確認してそれぞれのエラーシナリオを特定する方法を知ることができます。