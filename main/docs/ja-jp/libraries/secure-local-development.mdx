---
description: ''
og:description: Securing local development servers to work with samesite cookies
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 開発におけるHTTPS
og:url: https://auth0.com/docs/
permalink: secure-local-development
title: 開発におけるHTTPS
twitter:description: Securing local development servers to work with samesite cookies
twitter:title: 開発におけるHTTPS
---

Local development environments typically run over http (ie: `http://localhost`) out of the box. This guide will discuss when you should run a local server over https and how to configure https on localhost.

## ローカルhttpsサーバーを使用する場合

Web ブラウザーはhttpおよびhttpsで動作が異なります。これらの違いを考慮するには、開発サーバーでhttps経由でページを提供する必要があります。例：

* ページがhttpsで提供される場合、httpURLからリソースを読み込む要求はブロックされます。実稼働環境でのみ発生するバグを回避するため、または誤って機密情報を含むhttp要求を作成したくないために、この動作をローカルで実行する必要がある場合があります。
* Cookies using a Secure attribute or [SameSite](https://auth0.com/blog/browser-behavior-changes-what-developers-need-to-know/) attribute set to None will not be sent across insecure channels, disrupting authentication and other functionality.

## 安全なローカルサーバーを設定する方法

The idea is to run a web server in front of your local development server that will accept https requests and forward them to your application's web server over http, thus serving your application's requests over https by proxy. This is called an https reverse proxy and we can use an off the shelf product called [Caddy](https://caddyserver.com/v2) to create an https reverse proxy.

これを行うプロセスは次のとおりです。

1.Caddyバイナリをダウンロードする
アプリケーションのローカル開発サーバーを通常どおり実行します（例: $ PORT=3000 npm start）
ダウンロードしたCaddyバイナリの場所を見つけて、次のコマンドを実行してリバースプロキシを作成し、ポート443（httpsに使用されるデフォルトのポート）からアプリケーションのポート（この場合は3000）に要求を転送します。
4. Visit the reverse proxy web server over https

### Step 1.Caddyバイナリをダウンロードする

Visit https://caddyserver.com/download, select your platform and download the file to your computer.

### Step アプリケーションのローカル開発サーバーを通常どおり実行します（例: $ PORT=3000 npm start）

3.Caddyバイナリをリバースプロキシとして実行し、トラフィックをアプリケーションのWebサーバーに転送するように指示する

### Step ダウンロードしたCaddyバイナリの場所を見つけて、次のコマンドを実行してリバースプロキシを作成し、ポート443（httpsに使用されるデフォルトのポート）からアプリケーションのポート（この場合は3000）に要求を転送します。

4.次に、https経由でWebサーバーにアクセスする

```bash wrap lines
/path/to/caddy reverse-proxy --from localhost:443 --to localhost:3000
```

### Step プロキシの背後でアプリケーションを実行する

Visit https://localhost and it will serve your application's requests over https

## たとえばExpress.jsでは、アプリの実行は失敗しませんが、`信頼プロキシ`が構成されていない限り、プロキシの IP アドレスがクライアント IP アドレスとして誤って登録されます。 [)

You may have to make some slight adjustments to you application when it is running behind a proxy.

For example in Express.js, although the app will not fail to run, it will incorrectly register the proxy’s IP address as the client IP address unless `trust proxy` is configured, see \<https://expressjs.com/en/guide/behind-proxies.html>