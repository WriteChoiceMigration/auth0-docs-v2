---
description: ''
og:description: A widget that provides a frictionless login and signup experience
  for your web apps.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Web用のLock
og:url: https://auth0.com/docs/
permalink: lock
title: Web用のLock
twitter:description: A widget that provides a frictionless login and signup experience
  for your web apps.
twitter:title: Web用のLock
---

Lockは、[ユーザーのニーズに合わせて構成](/libraries/lock/v11/configuration)できる埋め込み可能なログインフォームで、シングルページアプリでの使用が推奨されますが、[ユニバーサルログイン](/universal-login)と併用するのが望ましく、可能なときはいつでも使用してください。Lockを使用すると、ソーシャルIDプロバイダーを手軽に追加できるため、ユーザーは任意のプロバイダーを使用してシームレスにログインすることができます。



## Lockのインストール

Lockのインストールには、いくつかの方法があります。環境とアプリケーションに合ったインストールソースを以下から選択してください。

### インストールソース

[npm](https://npmjs.org)を介してインストールする：

`npm install auth0-lock`

[bower](http://bower.io)を介してインストールする：

`bower install auth0-lock`

CDNを介してインクルード（`.x`と`.y`を[Lock Githubリポジトリ](https://github.com/auth0/lock/releases)からの最新のマイナーリリース番号とパッチリリース番号に置き換える）：

最新のマイナーリリース：`
<script src="https://cdn.auth0.com/js/lock/11.x/lock.min.js"></script>

`最新のパッチリリース：
`<script src="https://cdn.auth0.com/js/lock/11.x.y/lock.min.js"></script>`

運用アプリケーションで指定のパッチバージョン、または、最低でも指定のマイナーバージョンを使用することをお勧めします。Lockをどのようにしてインクルードしたかにかかわらず、バージョンをロックダウンしてアップデートを手動でのみ行うようにし、アップデートによる悪影響を防ぐことをお勧めします。[GitHubリポジトリ](https://github.com/auth0/lock/releases)で現在のリリース一覧を確認します。

### モバイル

モバイルのオーディエンスを対象にしている場合は、次のメタタグをアプリケーションの`head`に追加することをお勧めします。

`<meta name="viewport" content="width=device-width, initial-scale=1"/>`

### 依存関係のバンドル

browserifyまたはwebpackを使ってプロジェクトをビルドし、その依存関係をバンドルする場合、`auth0-lock`モジュールをインストールした後に、そのすべての依存関係とバンドルする必要があります。[Browserify](https://github.com/auth0/lock/tree/master/examples/bundling/browserify)と[webpack](https://github.com/auth0/lock/tree/master/examples/bundling/webpack)を使用した例が用意されています。

### クロスオリジン認証



アプリケーション内でLockを埋め込むには、[クロスオリジン認証](/login/cross-origin-authentication)を適切に構成する必要があります。具体的には、**［Allowed Web Origins（許可されているWebオリジン）］**プロパティを要求しているドメインに設定する必要があります。このフィールドは、[［Application Settings（アプリケーションの設定）］](%24%7Bmanage_url%7D/#/applications/%24%7Baccount.clientId%7D/settings)で見つけることができます。

Lockで埋め込みログインを実装する前に、必ずクロスオリジン認証の制限事項をお読みください。

## 使用

### 1. Lockの初期化

まず、新しい`Auth0Lock`オブジェクトを初期化し、そのオブジェクトにAuth0クライアントID（Auth0アプリケーションごとに一意のクライアントIDで、[管理ダッシュボード](%24%7Bmanage_url%7D)から入手可能）とAuth0ドメイン（`yourname.auth0.com`など）を提供する必要があります。



### 2. ユーザー情報の認証と取得

次に、`on`メソッドを使って`authenticated`イベントをリッスンします。イベントが発生したら、`accessToken`を使用します。これは、`getUserInfo`メソッドを呼び出し、ユーザーのプロファイル情報を（必要に応じて）取得するために受け取ったものです。



その後で、ページのコンテンツを操作して、ユーザーにプロファイル情報を表示（歓迎メッセージに名前を表示するなど）することができます。

` <h2>Welcome <span id="nick" class="nickname"></span></h2>`

ユーザープロファイルを保存する場合は、プロファイルオブジェクトに`JSON.stringify`を適用し、後で使用する場合は`JSON.parse`を適用します。これは、JSONオブジェクトでなく文字列として`localStorage`に保存する必要があるからです。

### 3. Lockの表示

ここでは、ユーザーが［ログイン］ボタンをクリックしたときにLockウィジェットが表示されるようにしています。ページに移動した時点で自動的にLockを表示したいときは、ページの読み込み時に`lock.show();`を使用します。

これでLockウィジェットが表示されるようになります。上記の手順も完了し、ログインを処理する準備が整いました！



## パスワードレス

Lockでは、Lock v11.2.0以降でのみパスワードレスモードが用意されています。この機能には[Lockの最新リリース](https://github.com/auth0/lock/releases)を使用してください。

Lockのパスワードレスモードを使うと、ユーザーがメールアドレスや携帯電話番号だけで認証できるようになります。ユーザーにコードが送信され、それを入力するか、リンクをクリックするだけで認証できるため、パスワードを覚える必要がありません。

Lockでパスワードレスモードを実装するには、`Auth0Lock`でなく`Auth0LockPasswordless`を使って、Lockを若干異なる方法で初期化します。



### パスワードレスのオプション

また、Lockのパスワードレスモードには、専用の構成オプションがいくつかあります。

使用したい接続タイプを示すには、`allowedConnections`オプションでLockを初期化し、`email`か`sms`のいずれかを値に使用します。



[［Dashboard］](%24%7Bmanage_url%7D)の**［Connections（接続）］-> ［Passwordless（パスワードレス）］**でご希望のパスワードレス接続を必ず有効にしてから、アプリケーション用に有効にします。こうすることで、Lockで使用しようとするときに、接続はすでに設定されアプリケーションにリンクされています。

`email`を使用することを選んだ場合は、ユーザーに入力コードとマジックリンクのどちらを送信するかも指定しなければなりません。これは、`passwordlessMethod`オプションを介して行われます。このオプションは、`code`または`link`の値をとります。

### パスワードレスの例





## エラーコードと説明

Lockを埋め込み型ログインに使用する場合は、`/co/authenticate`エンドポイントが採用されます。このエンドポイントには、次のエラーが含まれます。

エラーの説明は人間が判読できるものです。この説明は**コードを用いて解析するものではありません**。また、いつでも変更される可能性があります。



## ブラウザーとの互換性

**Chrome**、**Safari**、**Firefox**、**IE >= 10**ではブラウザー互換性が確保されています。Auth0は現在、[zuul](https://github.com/defunctzombie/zuul)と[Saucelabs](https://saucelabs.com)を使って、各プッシュで統合テストを実行しています。