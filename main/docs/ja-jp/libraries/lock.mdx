---
description: ''
og:description: A widget that provides a frictionless login and signup experience
  for your web apps.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Web用のLock
og:url: https://auth0.com/docs/
permalink: lock
title: Web用のLock
twitter:description: A widget that provides a frictionless login and signup experience
  for your web apps.
twitter:title: Web用のLock
---

Lock is an embeddable login form that can be [configured to your needs](/docs/libraries/lock/lock-configuration). Lock enables you to easily add social <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+providers">identity providers</Tooltip>, so that your users can log in seamlessly using any desired provider.

<Warning>

Embedded login for web applications uses [cross-origin authentication](/docs/authenticate/login/cross-origin-authentication) unless you [configure a custom domain](/docs/customize/custom-domains) for your tenant. Cross-origin authentication uses third-party cookies to allow for secure authentication transactions across different origins.

</Warning>

## Lockのインストール

Lockのインストールには、いくつかの方法があります。環境とアプリケーションに合ったインストールソースを以下から選択してください。

### インストールソース

Install via [npm](https://npmjs.org):
`npm install auth0-lock`

Install via [bower](http://bower.io):

`bower install auth0-lock`

Include via our CDN (Replace `.x` and `.y` with the latest minor and patch release numbers from the [Lock Github repository](https://github.com/auth0/lock/releases):

Latest Minor Release:`<script src="https://cdn.auth0.com/js/lock/11.x/lock.min.js"></script>`Latest Patch Release:
`<script src="https://cdn.auth0.com/js/lock/11.x.y/lock.min.js"></script>`

It is recommended that production applications use a specific patch version, or at the very least a specific minor version. Regardless of the method by which Lock is included, the recommendation is that the version should be locked down and only manually updated, to ensure that those updates do not adversely affect your implementation. Check the [GitHub repository](https://github.com/auth0/lock/releases) for a current list of releases.

### 依存関係のバンドル

browserifyまたはwebpackを使ってプロジェクトをビルドし、その依存関係をバンドルする場合、`auth0-lock`モジュールをインストールした後に、そのすべての依存関係とバンドルする必要があります。[Browserify]()と[webpack]()を使用した例が用意されています。

`<meta name="viewport" content="width=device-width, initial-scale=1"/>`

### クロスオリジン認証

If you are using browserify or webpack to build your project and bundle its dependencies, after installing the `auth0-lock` module, you will need to bundle it with all its dependencies. Examples are available for [Browserify](https://github.com/auth0/lock/tree/master/examples/bundling/browserify) and [webpack](https://github.com/auth0/lock/tree/master/examples/bundling/webpack).

### Lockで埋め込みログインを実装する前に、必ずクロスオリジン認証の制限事項をお読みください。

<Warning>

Embedded login for web applications uses [cross-origin authentication](/docs/authenticate/login/cross-origin-authentication) unless you [configure a custom domain](/docs/customize/custom-domains) for your tenant. Cross-origin authentication uses third-party cookies to allow for secure authentication transactions across different origins.

</Warning>

Embedding Lock within your application requires [cross-origin authentication](/docs/authenticate/login/cross-origin-authentication) to be properly configured. Specifically, you need to set the **Allowed Web Origins** property to the domain making the request. You can find this field in the [Application Settings](https://manage.auth0.com/#/applications/{yourClientId}/settings).

## 1. Lockの初期化

### Step まず、新しい`Auth0Lock`オブジェクトを初期化し、そのオブジェクトにAuth0クライアントID（Auth0アプリケーションごとに一意のクライアントIDで、[管理ダッシュボード](%24%7Bmanage_url%7D)から入手可能）とAuth0ドメイン（`yourname.auth0.com`など）を提供する必要があります。

First, you'll need to initialize a new `Auth0Lock` object, and provide it with your Auth0 <Tooltip tip="Client ID: Identification value given to your registered resource from Auth0." cta="View Glossary" href="/docs/glossary?term=client+ID">client ID</Tooltip> (the unique client ID for each Auth0 application, which you can get from the [management dashboard](https://manage.auth0.com/#)) and your Auth0 domain (for example `yourname.auth0.com`).


```js lines
// Initializing our Auth0Lock
var lock = new Auth0Lock(
  '{yourClientId}',
  '{yourDomain}'
);
```

### Step 次に、`on`メソッドを使って`authenticated`イベントをリッスンします。イベントが発生したら、`accessToken`を使用します。これは、`getUserInfo`メソッドを呼び出し、ユーザーのプロファイル情報を（必要に応じて）取得するために受け取ったものです。

その後で、ページのコンテンツを操作して、ユーザーにプロファイル情報を表示（歓迎メッセージに名前を表示するなど）することができます。


```js lines expandable
var Auth = (function() {

  var wm = new WeakMap();
  var privateStore = {};
  var lock;

  function Auth() {
    this.lock = new Auth0Lock(
      '<{yourClientId}>',
      '<{yourDomain}>'
    );
    wm.set(privateStore, {
      appName: "example"
    });
  }

  Auth.prototype.getProfile = function() {
    return wm.get(privateStore).profile;
  };

  Auth.prototype.authn = function() {
    // Listening for the authenticated event
    this.lock.on("authenticated", function(authResult) {
      // Use the token in authResult to getUserInfo() and save it if necessary
      this.getUserInfo(authResult.accessToken, function(error, profile) {
        if (error) {
          // Handle error
          return;
        }

        //we recommend not storing Access Tokens unless absolutely necessary
        wm.set(privateStore, {
          accessToken: authResult.accessToken
        });

        wm.set(privateStore, {
          profile: profile
        });

      });
    });
  };
  return Auth;
}());
```

ユーザープロファイルを保存する場合は、プロファイルオブジェクトに`JSON.stringify`を適用し、後で使用する場合は`JSON.parse`を適用します。これは、JSONオブジェクトでなく文字列として`localStorage`に保存する必要があるからです。

`<h2>Welcome <span id="nick" class="nickname"></span></h2>`

3. Lockの表示

### Step ここでは、ユーザーが［ログイン］ボタンをクリックしたときにLockウィジェットが表示されるようにしています。ページに移動した時点で自動的にLockを表示したいときは、ページの読み込み時に`lock.show();`を使用します。

これでLockウィジェットが表示されるようになります。上記の手順も完了し、ログインを処理する準備が整いました！

パスワードレス

```js lines
document.getElementById('btn-login').addEventListener('click', function() {
  lock.show();
});
```

## Lockでは、Lock v11.2.0以降でのみパスワードレスモードが用意されています。この機能には[Lockの最新リリース]()を使用してください。

Lock's <Tooltip tip="Passwordless: Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=Passwordless">Passwordless</Tooltip> Mode is only available in Lock v11.2.0 and later. Please use the [latest release of Lock](https://github.com/auth0/lock/releases) for this feature!

Lockでパスワードレスモードを実装するには、`Auth0Lock`でなく`Auth0LockPasswordless`を使って、Lockを若干異なる方法で初期化します。

パスワードレスのオプション


```js lines
var lockPasswordless = new Auth0LockPasswordless(
 '{yourClientId}',
 '{yourDomain}'
);
```

### また、Lockのパスワードレスモードには、専用の構成オプションがいくつかあります。

使用したい接続タイプを示すには、`allowedConnections`オプションでLockを初期化し、`email`か`sms`のいずれかを値に使用します。

パスワードレスの例

```js lines
var passwordlessOptions = {
  allowedConnections: ['sms']
}
```

Remember to enable the passwordless connection of your choice in the [Dashboard](https://manage.auth0.com/#) under **Connections -> Passwordless**, and then to enable it for your application, that way when Lock tries to use it, it is already set up and linked to the application.

Lockを埋め込み型ログインに使用する場合は、`/co/authenticate`エンドポイントが採用されます。このエンドポイントには、次のエラーが含まれます。

```js lines
var passwordlessOptions = {
  allowedConnections: ['email'],
  passwordlessMethod: 'code'
}
```

### エラーの説明は人間が判読できるものです。この説明は**コードを用いて解析するものではありません**。また、いつでも変更される可能性があります。


```js lines
var passwordlessOptions = {
  allowedConnections: ['email'],
  passwordlessMethod: 'code',
  auth: {
    redirectUrl: 'http://localhost:3000/callback',   
    responseType: 'token id_token',
    params: {
      scope: 'openid email'               
    }          
  }
}

var lockPasswordless = new Auth0LockPasswordless(
 '{yourClientId}',
 '{yourDomain}',
 passwordlessOptions
);
```

### Single Sign-On with embedded authentication

Apps with embedded login must meet two criteria in order to have <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=Single+Sign-on">Single Sign-on</Tooltip> (SSO).

1. Both of the applications attempting SSO must be first-party applications. SSO with third-party applications will not work.
2. They need to make use of custom domains and have both the applications which intend to have SSO as well as the Auth0 tenant on the same domain. Traditionally, Auth0 domains are in the format `foo.auth0.com`, but custom domains allow you to use the same domain for each of the applications in question as well as your Auth0 tenant, preventing the risk of CSRF attacks.

Our recommendation is to use <Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip> instead of setting up SSO in embedded login scenarios. Universal Login is the most reliable and stable way to perform SSO, and is the only way to do so if you must use multiple domains for your applications, or use [third-party applications](/docs/get-started/applications/confidential-and-public-applications/enable-third-party-applications).

## ブラウザーとの互換性

**Chrome**、**Safari**、**Firefox**、**IE >= 10**ではブラウザー互換性が確保されています。Auth0は現在、[zuul]()と[Saucelabs]()を使って、各プッシュで統合テストを実行しています。

The error description is human readable. It **should not be parsed by any code** and it subject to change at any time.

| **Status** | **Code** | **Description** |
| --- | --- | --- |
| 400 | invalid\_request | Invalid request body. All and only of client\_id, credential\_type, username, otp, realm are required. |
| 401 | unauthorized\_client | Cross origin login not allowed. |
| 400 | unsupported\_credential\_type | Unknown credential type parameter. |
| 400 | invalid\_request | Unknown realm non-existent-connection. |
| 403 | access\_denied | Wrong email or password. |
| 403 | access\_denied | Authentication error |
| 403 | blocked\_user | Blocked user |
| 401 | password\_leaked | This login attempt has been blocked because the password you're using was previously disclosed through a data breach (not in this application). |
| 429 | too\_many\_attempts | Your account has been blocked after multiple consecutive login attempts. We've sent you a notification via your preferred contact method with instructions on how to unblock it. |
| 429 | too\_many\_attempts | We have detected suspicious login behavior and further attempts will be blocked. Please contact the administrator. |

## Browser Compatibility

Browser compatibility is ensured for **Chrome**, **Safari**, **Firefox** and **IE >= 10**. Auth0 currently uses [zuul](https://github.com/defunctzombie/zuul) along with [Saucelabs](https://saucelabs.com) to run integration tests on each push.

## Learn more

* [Lock API Reference](/docs/libraries/lock/lock-api-reference)
* [Lock Configuration Options](/docs/libraries/lock/lock-configuration)