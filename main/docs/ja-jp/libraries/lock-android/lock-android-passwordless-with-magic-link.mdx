---
description: ''
og:description: Passwordless with Magic Link with Lock.Android
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Lock.Android：マジックリンクを使ったPasswordless
og:url: https://auth0.com/docs/
permalink: lock-android-passwordless-with-magic-link
title: Lock.Android：マジックリンクを使ったPasswordless
twitter:description: Passwordless with Magic Link with Lock.Android
twitter:title: Lock.Android：マジックリンクを使ったPasswordless
---

In order to avoid asking the user to input the one-time password sent for <Tooltip tip="Passwordless: Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=passwordless">passwordless</Tooltip> authentication in Android apps, we introduced the ability to send a link that the user can tap to login without any manual input involved.

これらのリンクには、従来のパスワードレスフローで使用されるのと同じ**コード**が含まれていますが、正しく設定することで、これらのリンクはお客様のアプリケーションに直接アクセスできるようになります。

## Auth0 Dashboardの設定

Go to your [application settings](https://manage.auth0.com/#/applications/{yourClientId}/settings) and click **Show Advanced Settings** at the bottom of the page. Then in the "Device Settings" tab, you will need to provide both the Android Application's Package Name and certificate Key Hash.

* **［Key Hashes（キーハッシュ）］**：これは、当社のAndroidアプリの署名証明書のSHA256フィンガープリントです。カンマで区切ることで、複数含めることができます。リリースキーストアとデバッグキーストアのフィンガープリントの両方をここで指定できます。以下のセクションでは、それらを入手する方法について説明します。たとえば、`DE:1A:5B:75:27:AA:48:D5:A6:72:2F:76:43:95:9B:79:C6:86:1A:5B:75:27:AA:48:D5:A6:73:FE`などです。
* 値を設定したら、必ず**［Save Changes（変更を保存）］**をクリックします。

署名証明書のフィンガープリントを取得する

### 次のコマンドを使用して、JavaキーツールCLIを介してフィンガープリントを生成します。

または、次のコマンドでデフォルトのデバッグキーを取得します。

`keytool -list -v -keystore my-release-key.keystore`

ダッシュボードで必要とされる値は、「SHA256」としてリストされているものです。キーストアの詳細については、こちらの[公式記事]()をお読みください。

`keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android`

The value required by the dashboard is the one listed as "SHA256". You can read more about Keystores in this [official article](https://developer.android.com/studio/publish/app-signing).

### マジックリンクを使ったPasswordlessは、「email」タイプのパスワードレス接続でのみ機能します。Dashboard > Passwordless接続用の［[Authentication（認証）］](%24%7Bmanage_url%7D/#/applications/authentication)に移動し、**［Email（メール）］**をクリックします。ポップアップが開き、HTML + Liquidメールテンプレートが編集可能になります。本文に次のような条件が含まれていることを確認します。

Passwordless using Magic Link works only with the passwordless connection of type "email". Go to Dashboard > [Authentication](https://manage.auth0.com/#/applications/authentication) for Passwordless connections and click on **Email**. A popup will open and the HTML + Liquid email template will become editable. Verify that the body contains a conditional like this:

```liquid lines
{% if send == 'link' or send == 'link_ios' or send == 'link_android' %}
Your verification link is: {{ link }}
{% elsif send == 'code' %}
Your verification code is: {{ code }}
{% endif %}
```

## Auth0アプリケーションの設定が完了したので、[passwordlessドキュメント](/libraries/lock-android/v2/passwordless)に書かれているように、指示に従って`Lock.Android`を使用してPasswordlessLockを設定します。

Now that the Auth0 application is configured follow the instructions and set up PasswordlessLock with `Lock.Android` as seen in the [passwordless docs](/docs/libraries/lock-android/lock-android-passwordless).

### Lock Passwordlessは、ワンタイムパスワードを記載したメールをユーザーに送信することで認証を行います。この場合、コードではなくリンクが送信されます。Passwordlessクラシックの指示に従っている場合は、`useCode()`の呼び出しを削除し、`useLink()`に置き換えるだけで済みます。

最後に、アクティビティの中から`PasswordlessLock`ウィジェットを起動します。

リンクを要求した後、次の画面に、ログインするにはユーザーがそのリンクをタップする必要があることが示されます。それができない場合でも、ユーザーは受信したメールのリンクをクリックした後に表示されるコードを入力できます。

```kotlin lines
startActivity(lock.newIntent(this))
```

任意：Android App Linksを使用する

## LockライブラリはApp Linksと併用できます。これはAndroid 6.0（APIレベル23）以降で利用できる機能で、リンクを開く際にブラウザーを使用するかアプリを使用するかを確認する明確化ダイアログを表示することなく、アプリが特定の種類のリンクのデフォルトハンドラーとして自身を指定できます。

これは、ユーザーがAndroidデバイスの設定で、そのURIパターンを処理するデフォルトのアプリをまだ選択していない限り有効です。

リンクの自動処理には、お客様のアプリとAuth0のWebサイトの連携が必要です。アプリはそのWebサイトとの関連性を宣言し、システムに確認を求める必要があります。一方、Webサイトは、[デジタルアセットリンク]()ファイルを公開することでその検証を提供する必要があります。

Automatic handling of links requires the cooperation of your app and the Auth0 website. The app must declare the association with the website and request that the system verifies it. The website must, in turn, provide that verification by publishing a [Digital Asset Links](https://developers.google.com/digital-asset-links/) file.

Auth0 will generate the [Digital Asset Links](https://developers.google.com/digital-asset-links/) file automatically for you when you configure the App Package Name and Key Hash as shown before. If you've followed all the steps in this article, the file should be available and will be verified the next time your android application is installed.

You could find more information about App Links in the [Android docs](https://developer.android.com/training/app-links/index.html).