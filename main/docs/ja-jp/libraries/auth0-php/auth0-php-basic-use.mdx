---
description: ''
og:description: Integrate a frictionless login and signup experience for your PHP
  applications.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: PHP：Auth0-PHPを使用したログイン、ログアウト、ユーザープロファイルの返送
og:url: https://auth0.com/docs/
permalink: auth0-php-basic-use
title: PHP：Auth0-PHPを使用したログイン、ログアウト、ユーザープロファイルの返送
twitter:description: Integrate a frictionless login and signup experience for your
  PHP applications.
twitter:title: PHP：Auth0-PHPを使用したログイン、ログアウト、ユーザープロファイルの返送
---

Auth0-PHP SDKには`Auth0\SDK\Auth0`、`Auth0\SDK\API\Authentication`、`Auth0\SDK\API\Management`という3つのコアクラスがバンドルされ、それぞれがAuth0 APIの全体にさまざまな機能のインターフェイスを提供しています。ユーザーセッションの追跡が必要なステートフルWebアプリケーションを構築する場合、最も頻繁に使用するクラスは基本の`Auth0`クラスです。ログインとログアウト、ユーザー資格情報の取得、利用可能なセッションの確認、コールバック処理などの一般的な認証およびセッションのタスクを処理するためのメソッドを提供します。これらのタスクについては、以下で説明します。

For additional information on these capabilities and more, please see the [documentation page for the Authentication API](/docs/libraries/auth0-php/using-the-authentication-api-with-auth0-php).

## 前提条件

The documentation below assumes that you followed the steps in the [Auth0-PHP](/docs/libraries/auth0-php), and continue off from the code provided there.

### ログイン

The default login process in the PHP SDK uses an [Authentication Code grant](/docs/get-started/authentication-and-authorization-flow/authorization-code-flow/call-your-api-using-the-authorization-code-flow) combined with Auth0's <Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip> Page. In short, that process is:

1. A user requesting access is redirected to the Universal Login Page.
2. The user authenticates using one of [many possible connections](/docs/authenticate/identity-providers): social (Google, X, Facebook), database (email and password), passwordless (email, SMS), or enterprise (ActiveDirectory, ADFS, Office 365).
3. The user is redirected or posted back to your application's callback URL with `code` and `state` values if successful or an `error` and `error_description` if not.
4. If the authentication was successful, the `state` value is validated.
5. If the `state` is valid, the `code` value is exchanged with Auth0 for an ID Token and/or an Access Token.
6. The identity from the ID token can be used to create an account, to start an application-specific session, or to persist as the user session.

Auth0-PHPはこれらの手順のほとんどを自動的に処理します。アプリケーションは次を行う必要があります。

1. Call `Auth0\SDK\Auth0::login()` when users need to login (for example: click a link, visit walled content, etc.)
2. Call `Auth0\SDK\Auth0::exchange()` when users are redirected to your callback URL.
3. Call `Auth0\SDK\Auth0::getCredentials()` when you need to check if a user is logged in and retrieve user information.

これらの手順は以下で手軽に実装できます。

```php lines
// 👆 We're continuing from the "getting started" guide linked in "Prerequisites" above. Append this to the index.php file you created there.

// getExchangeParameters() can be used on your callback URL to verify all the necessary parameters are present for post-authentication code exchange.
if ($auth0->getExchangeParameters()) {
    // If they're present, we should perform the code exchange.
    $auth0->exchange();
}

// Check if the user is logged in already
$session = $auth0->getCredentials();

if ($session === null) {
    // User is not logged in!
    // Redirect to the Universal Login Page for authentication.
    header("Location: " . $auth0->login());
    exit;
}

// 🎉 At this point we have an authenticated user session accessible from $session; your application logic can continue from here!
echo "Authenticated!";
```

最後に、設定ページにあるAuth0アプリケーションの［Allowed Callback URLs（許可されているコールバックURL）］フィールドにアプリケーションのURLを追加する必要があります。その後、スクリプト化されたページを読み込むと、以下が実行されます。

1. Immediately redirect you to an Auth0 login page for your tenant.
2. After successfully logging in using any connection, redirect you back to your app.
3. Display a simple page showing 'Authenticated!'.

### プロファイル

ユーザーが認証されたら、維持されたセッションデータを使用して、ユーザープロファイルの表示などを行うことができます。

```php lines
// 👆 We're continuing from code above. Append this to the index.php file.

printf(
    '<h1>Hi %s!</h1>
    <p><Frame><img width="100" src="/docs/%s"></Frame></p>
    <p><strong>Last update:</strong> %s</p>
    <p><strong>Contact:</strong> %s %s</p>
    <p><a href="/docs/logout.php">Logout</a></p>',
    isset($session->user['nickname']) ? strip_tags($session->user['nickname']) : '[unknown]',
    isset($session->user['picture']) ? filter_var($session->user['picture'], FILTER_SANITIZE_URL) : 'https://gravatar.com/avatar/',
    isset($session->user['updated_at']) ? date('j/m/Y', strtotime($session->user['updated_at'])) : '[unknown]',
    isset($session->user['email']) ? filter_var($session->user['email'], FILTER_SANITIZE_EMAIL) : '[unknown]',
    ! empty($session->user['email_verified']) ? '✓' : '✗'
);
```

### ログアウト

ログインするだけでなく、ユーザーがログアウトできるようにすることも大切です。ユーザーがログアウトすると、アプリケーションのセッションを無効にする必要があります。これを行うために、このSDKでは永続的なユーザーとトークンのデータが破棄されます。

```php lines
// Log out of the application.
header("Location: $auth0->logout());
```

If you're using <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=Single+Sign-on">Single Sign-on</Tooltip> (SSO) and also want to end their Auth0 session, see the [SSO ログアウト section here](/docs/libraries/auth0-php/using-the-authentication-api-with-auth0-php). More information about logging out, in general, can be found [here](/docs/authenticate/login/logout).

## Learn more

* [PHP: Getting Started using Auth0-PHP](/docs/libraries/auth0-php)
* [PHP: Using the Authentication API with Auth0-PHP](/docs/libraries/auth0-php/using-the-authentication-api-with-auth0-php)
* [PHP: Using the Management API with Auth0-PHP](/docs/libraries/auth0-php/using-the-management-api-with-auth0-php)
* [PHP: Validating JWTs (JSON Web Tokens) with Auth0-PHP](/docs/libraries/auth0-php/validating-jwts-with-auth0-php)
* [PHP: Troubleshooting your Auth0-PHP integration](/docs/libraries/auth0-php/troubleshoot-auth0-php-library)