---
og:description: Describes search query syntax using a subset of the Lucene query syntax
  to refine Auth0 log searches.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ログ検索のクエリ構文
og:url: https://auth0.com/docs/
permalink: log-search-query-syntax
title: ログ検索のクエリ構文
twitter:description: Describes search query syntax using a subset of the Lucene query
  syntax to refine Auth0 log searches.
twitter:title: ログ検索のクエリ構文
---

When searching for logs, you can create queries using a subset of [Lucene query syntax](http://www.lucenetutorial.com/lucene-query-syntax.html) to refine your search.

クエリ文字列は、一連のタームと演算子に解析されます。

* タームは、`jane`や`smith`などの１つの単語の場合があります。
* タームは、二重引用符で囲まれたフレーズ（`"customer log"`）の場合があり、同じ語順でフレーズにあるすべての単語に一致させます。
* フィールド名のないタームは、これらの選択されたフィールドにのみ一致させます。
* 複数のタームは、括弧を使ってグループにまとめ、サブクエリにすることができます。
* すべての検索フィールドでは、大文字と小文字が区別されます。
* 演算子（`AND`、`OR`、`NOT`）はすべての検索可能なフィールドに使用できます。

## 検索可能なフィールド

以下のフィールドは検索可能で、大文字と小文字が区別されます。

<table class="table"><thead>
<tr>
<th><strong>Field</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>client_id</code></td>
<td>Client ID related to the event.</td>
</tr>
<tr>
<td><code>client_name</code></td>
<td>Client name related to the event.</td>
</tr>
<tr>
<td><code>connection</code></td>
<td>Connection name related to the event.</td>
</tr>
<tr>
<td><code>connection_id</code></td>
<td>Connection ID related to the event.</td>
</tr>
<tr>
<td><code>description</code></td>
<td>Description of the event.</td>
</tr>
<tr>
<td><code>date</code></td>
<td>Date the event occurred in YYYY-MM-DD format.</td>
</tr>
<tr>
<td><code>hostname</code></td>
<td>Hostname used for the authentication flow.</td>
</tr>
<tr>
<td><code>ip</code></td>
<td>IP address from where the request that caused the log entry originated.</td>
</tr>
<tr>
<td><code>log_id</code></td>
<td>Log ID of the event.</td>
</tr>
<tr>
<td><code>organization_id</code></td>
<td>Organization ID related to the event.</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>User ID related to the event.</td>
</tr>
<tr>
<td><code>user_name</code></td>
<td>User name related to the event.</td>
</tr>
<tr>
<td><code>user_agent</code></td>
<td>User agent related to the event.</td>
</tr>
<tr>
<td><code>strategy</code></td>
<td>Connection strategy related to the event.</td>
</tr>
<tr>
<td><code>strategy_type</code></td>
<td>Connection strategy type related to the event.</td>
</tr>
<tr>
<td><code>type</code></td>
<td>Type of the event.</td>
</tr>
</tbody>
</table>

## ベアのタームに対して検索可能なフィールド

検索タームがフィールド名を使わずに入力された場合には、以下のフィールドに対してのみ検索されます。

* `client_name`
* `connection`
* `description`
* `ip`
* `log_id`
* `type`
* `user_name`

## 完全一致

完全一致で検索するには、次のように、二重引用符を使用します：`description:"Username invalid"`。

例えば、`Username invalid`と一致するログを見つけるには、`q=description:"Username invalid"`を使用します。

## ワイルドカード

ワイルドカード検索は、アスタリスク文字（`*`）を使用して0以上の文字を置換する次のようなタームに実行できます：`user_name:john*`。プレフィックスの照合では、`user_name:j*`などのように使用できます。ワイルドカードのその他の使用（サフィックスの照合など）の場合、リテラルは3文字以上である必要があります。たとえば、`name:*usa`は使用できますが、`name:*sa`は使用できません。

クエスチョンマークの記号（`?`）には対応していません。

たとえば、ユーザー名が`john`で始まるユーザーを見つけるには、`q=user_name:john*`を使用します。

## 範囲

ログ検索クエリで範囲を使用することができます。包括的な範囲には`[min TO max]`のように角括弧を使用し、排他的な範囲には`{min TO max}`のように中括弧を使用します。

中括弧と角括弧は同じ範囲の表現内で組み合わせることができます。範囲内にワイルドカードを使用することもできます。

たとえば、2018年12月18日から現在までのログをすべて見つけるには、`q=date:[2018-12-18 TO *]`を使用します。

保存期間の始めから2018年12月19日の前日までのログを見つけるには、`q=date:[* TO 2018-12-19}`を使用します。

## クエリの例

Below are some examples to show the kinds of queries you can make with the <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>.

<table class="table"><thead>
<tr>
<th>Use Case</th>
<th>Query</th>
</tr>
</thead>
<tbody>
<tr>
<td>Search all logs with connections that contains "Pass"</td>
<td><code>connection:*pass*</code></td>
</tr>
<tr>
<td>Search all logs for users with a user name that contains "fred"</td>
<td><code>user_name:*fred*</code></td>
</tr>
<tr>
<td>Search all logs with user id's matching exactly "123"</td>
<td><code>user_id:"123"</code></td>
</tr>
<tr>
<td>Search for all logs with a type starting with "s"</td>
<td><code>type:s*</code></td>
</tr>
<tr>
<td>Search for user names that start with "jane" and end with "smith"</td>
<td><code>user_name:jane*smith</code></td>
</tr>
<tr>
<td>Search for all logs in December 2018</td>
<td><code>date:[2018-12 TO 2019-01-01}</code></td>
</tr>
<tr>
<td>Search for all logs from December 10, 2018 forward</td>
<td><code>date:[2018-12-10 TO *]</code></td>
</tr>
<tr>
<td>Search for all logs from January 1, 2019 at 1AM, until, but not including January 1, 2019 at 12:23:45</td>
<td><code>date:[2019-01-01T01:00:00 TO 2019-01-01T12:23:45}</code></td>
</tr>
</tbody>
</table>

## 制限事項

* `414 Request-URI Too Large`（要求のURIが長すぎます）のエラーが返された場合には、対応している長さよりもクエリ文字列が長いことを示しています。その場合には、検索を絞り込みます。
* ログフィールドはトークン化されていないため、`description:rule`は`Create a rule`（ルールの作成）や`Update a rule`（ルールの更新）の値を持つ説明には一致しません。この場合は、`description:*rule`を使用します。ワイルドカード検索と完全一致を参照してください。
* `.raw`フィールド拡張子には対応していません。フィールドは提供された値全体と照合され、トークン化はされません。

## ページネーション

**total（合計）**フィールドは、ページで返されたログの数を示します（**length（長さ）**フィールドが返すものと同様です）。

```json lines
{
  "length": 5,
  "limit": 5,
  "logs": [...],
  "start": 0,
  "total": 5
}
```






When searching for logs, the **totals** field tells you how many logs are returned in the page (similar to what the **length** field returns).

## Learn more

* [View Logs](/docs/deploy-monitor/logs/view-log-events)
* [Log Type Codes](/docs/deploy-monitor/logs/log-event-type-codes)
* [Filter Log Events](/docs/deploy-monitor/logs/log-event-filters)
* [Migrate to Tenant Log Search v3](/docs/troubleshoot/product-lifecycle/past-migrations/migrate-to-tenant-log-search-v3)