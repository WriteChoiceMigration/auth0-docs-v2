---
og:description: Learn how to retrieve logs using the Auth0 Management API get_logs
  endpoint by checkpoint or by search criteria.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Management APIを使ってログイベントを取得する
og:url: https://auth0.com/docs/
permalink: retrieve-log-events-using-mgmt-api
title: Management APIを使ってログイベントを取得する
twitter:description: Learn how to retrieve logs using the Auth0 Management API get_logs
  endpoint by checkpoint or by search criteria.
twitter:title: Management APIを使ってログイベントを取得する
---

Management APIを使用すると、[/get_logs](https://auth0.com/docs/api/management/v2/#!/Logs/get_logs)エンドポイントを使用して要求ごとに最大100件のログイベントを取得できます。このエンドポイントは、次の2種類の消費をサポートしています。

* **チェックポイントの場合**：ログイベントを外部データ分析サービスにエクスポートする場合に推奨されます。
* **検索条件の場合**：Dashboardにより使用されます。

Auth0によって保存されるログには、Auth0サブスクリプションに基づいた保持期間が適用されます。詳細については、「[ログデータ保持](/logs/log-data-retention)」をお読みください。

これらのエンドポイントを使って次のログを探すことができます。

* `/api/v2/logs/{id}`：指定されたログIDに関連付けられた単一のログエントリを取得します。
* `/api/v2/users/{user_id}/logs`：特定のユーザーIDのログイベントを取得します。

## チェックポイントでログを取得する

このメソッドを使用すると、指定された`log_id`よりも新しいログイベントを取得
できます。これは通常、Splunk、Datadog、Application Insights、Mixpanelなどの外部
システムにログを送信するために使用されます。

チェックポイントで検索するには、次のパラメーターを使用します。

`from`と`take`以外のパラメータは無視されます。ログは`log_id`順に並べられます。

#### セマンティクス

チェックポイントによるログの取得には次のセマンティクスがあります。

* ロールの役割の権限で利用可能なすべてのログが返されます
* ログは、Auth0システムの遅延による過去のレコードのスキップを防ぐために、イベント生成時間ではなく`log_id`で順序付けられます。
* 検索条件でログを取得する場合の`1,000`件のレコード制限とは対照的に、ページネーションは無制限であり、制限はありません。

#### ページネーション

チェックポイントでログを取得する場合は、最初の要求のみを手動で行って
ください。後続の各要求は、`Link`ヘッダー内の`next`関係URLを使用して
行う必要があります。これにより、APIとの統合作業が簡素化され、Auth0は
顧客エクスペリエンスに影響を与えることなく最適化を行うことができます。

#### 例

`us`のテナント名が`acme`であると仮定します。チェックポイントでレコードを取得し始めるには：

1. システム内の任意のログから`log_id`を取得します。
例：`90020211201185132572079310688835925971249535794074878050`
2. 指定された`LOG_ID`よりも新しい次の`100`個のログを要求するには、`https://TENANT_NAME.LOCALITY.auth0.com/api/v2/logs?from=LOG_ID&take=100 `に要求を送信します。
3. HTTP応答には次が含まれます。

1. 指定された`LOG_ID`より新しい`0`〜`100`個のログのJSON配列
2. `next`関係を持つHTTP`Link`ヘッダー
4. 結果セットが空の場合は空の配列が返され、`next`関係は最新の要求で使用したのと同じURLと一致します。

## 検索条件でログを取得する

このメソッドを使用すると、指定された検索条件に一致するログイベントを取得できます。条件が使用されない場合は、すべてのイベントが一覧表示されます。条件で検索するには、次のパラメーターを使用します。

検索クエリで使用できるフィールドと並べ替えパラメーターのリストを確認するには、「[ログ検索クエリ構文](/logs/log-search-query-syntax)」をお読みください。

## 制限事項

ログを取得する要求ごとに100件のログイベントという制限に加え、最大1,000件の検索結果までしかページ分割できません。

`414 Request-URI Too Large`エラーが発生した場合、クエリ文字列がサポートされている長さよりも大きいことを意味します。その場合には、検索を絞り込みます。