---
og:description: Learn how to configure Customer Managed Keys with the Management API
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Management APIでカスタマーマネージドキーを構成する
og:url: https://auth0.com/docs/
permalink: customer-managed-keys-management-api
title: Management APIでカスタマーマネージドキーを構成する
twitter:description: Learn how to configure Customer Managed Keys with the Management
  API
twitter:title: Management APIでカスタマーマネージドキーを構成する
---

Auth0は、エンベロープ暗号化キー階層の最上位にあるAuth0環境ルートキーを使用してテナントのシークレットとデータを保護します。 Auth0環境ルートキーと顧客提供ルートキーは、対応するAuth0クラウドサービスプロバイダー、AWS、またはAzureのハードウェアセキュリティモジュール（HSM）に保存されます。

## BYOK（Bring Your Own Key）

Bring Your Own Keyを使用すると、[キー管理エディターロール](/manage-dashboard-access/add-dashboard-users)のあるユーザーは、[Auth0 Management API](https://auth0.com/docs/api/management/v2)を使ってデフォルトのAuth0環境ルートキーを独自の顧客提供ルートキーに置き換えることができます。顧客は独自の暗号化マテリアルを含む独自のルートキーを安全にアップロードして以下を行うことができます。

* 環境ルートキーのカスタムの鍵の生成および出所の要件を満たす
* 環境ルートキーの特定の鍵のインストールまたは寿命の要件を満たす
* 顧客提供ルートキーのコピーを顧客の施設内に保管する



顧客提供ルートキーは、以下の手順に従って、Management APIで作成および管理できます。

1. [新しい暗号化キーの作成](https://auth0.com/docs/api/management/v2/keys/post-encryption)エンドポイントを呼び出して、Bring Your Own Keyのプロセスを開始し、暗号化マテリアルなしで事前にアクティブ化された顧客提供ルートキーの`kid`（キー識別子）を取得します。
2. [パブリックラッピングキーの作成](https://auth0.com/docs/api/management/v2/keys/post-encryption-wrapping-key)エンドポイントを呼び出して、パブリックラッピングキーを作成して返します。
3. 自分の環境で独自の暗号化キーマテリアルを生成し、それをパブリックラッピングキーでラップ（暗号化）して、ラップ暗号化キー（顧客提供ルートキー）を作成します。
4. [暗号化キーのインポート](https://auth0.com/docs/api/management/v2/keys/post-encryption-key)エンドポイントを呼び出して、顧客提供ルートキーをAuth0にインポートします。



## 権限

以下の権限を使用して、暗号化キーエンドポイントへのアクセス権を提供します。



## エンドポイント

* [すべての暗号化キーの取得](https://auth0.com/docs/api/management/v2/keys/get-encryption-keys)エンドポイントを使用して、既存の現在の環境ルートキーまたは顧客提供ルートキー、およびテナントマスターキーに関する情報を取得します。
* [キーIDによる暗号化キーの取得](https://auth0.com/docs/api/management/v2/keys/get-encryption-key)エンドポイントを使用して、指定したキーに関する情報を取得します。
* [新しい暗号化キーの作成](https://auth0.com/docs/api/management/v2/keys/post-encryption)エンドポイントを使用して、事前にアクティブ化された顧客提供ルートキーのプレースホルダーを作成します。
* [パブリックラッピングキーの作成](https://auth0.com/docs/api/management/v2/keys/post-encryption-wrapping-key)エンドポイントを使用して、暗号化マテリアルをラップするためのパブリックラッピングキーを取得します。
* [暗号化キーのインポート](https://auth0.com/docs/api/management/v2/keys/post-encryption-key)エンドポイントを使用して、新しい顧客提供ルートキーのマテリアルをインポートします。
* [キーIDによる暗号化キーの削除](https://auth0.com/docs/api/management/v2/keys/delete-encryption-key)エンドポイントを使用して、既存の顧客提供ルートキーを削除し、Bring Your Own Keyの使用をオプトアウトします。Auth0環境ルートキーは、キー階層を再暗号化するために使用されます。この操作が既存のデータや認証フローに悪影響を及ぼすことはありません。