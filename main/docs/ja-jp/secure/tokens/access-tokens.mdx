---
og:description: Describes how access tokens are used in token-based authentication
  to allow an application to access an API after a user successfully authenticates
  and authorizes access.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: アクセストークン
og:url: https://auth0.com/docs/
permalink: access-tokens
sidebarTitle: アクセストークン
title: アクセストークン
twitter:description: Describes how access tokens are used in token-based authentication
  to allow an application to access an API after a user successfully authenticates
  and authorizes access.
twitter:title: アクセストークン
---

トークンベースの認証では、アプリケーションによるAPIへのアクセスを許可するためにアクセストークンが使用されます。ユーザーが認証とアクセス認可に成功すると、アプリケーションはアクセストークンを受け取り、ターゲットのAPIを呼び出す際にそれを資格情報として渡します。渡されたトークンは、APIに、トークンの所持者がAPIへのアクセスを認可されていること、認可の際に付与された で指定されている特定のアクションの実行を認可されていることを知らせます。

また、ユーザーに対してFacebookなどのを介したログインを許可した場合、アプリケーションは、IdP発行の独自のアクセストークンによってIdPのAPIの呼び出しを許可されます。たとえば、ユーザーがFacebookを使用して認証する場合は、Facebook発行のアクセストークンを使ってFacebook Graph APIを呼び出します。これらのトークンは、IdPが制御するものであり、任意の形式で発行されます。詳細は、「[IDプロバイダーのアクセストークン](/security/tokens/access-tokens/identity-provider-access-tokens)」を参照してください。

## 不透明なアクセストークン

不透明なアクセストークンとは、アクセス不可能な独自形式のトークンで、一般的にはサーバーの永続ストレージにある情報のIDを含みます。不透明トークンを検証するには、トークンの受信者がトークンの発行サーバーを呼び出す必要があります。

Auth0の場合、不透明トークンは、ユーザーのプロファイルを返すために`/userinfo`エンドポイントと共に使用されることがあります。不透明なアクセストークンを受け取ったら、それを検証する必要はありません`/userinfo`エンドポイントを使用すれば、後の処理はAuth0が行います。詳細については、「[アクセストークンを取得する](/security/tokens/access-tokens/get-access-tokens)」をお読みください。

## JWTアクセストークン

JSON Web Token（JWT）のアクセストークンは、[JWT標準](https://tools.ietf.org/html/rfc7519)に準拠し、エンティティに関する情報をクレームの形で含みます。自己完結型であるため、受信者はサーバーを呼び出してトークンを検証する必要がありません。

Management APIのために発行されたアクセストークンと、Auth0に登録したカスタムAPIのために発行されたアクセストークンは、JWT標準に従います。つまり、基本構造が一般的な[JWT構造](/security/tokens/json-web-tokens/json-web-token-structure)に準拠し、トークン自体についてアサートされた標準の[JWTクレーム](/security/tokens/json-web-tokens/json-web-token-claims)を含みます。

### Management APIのアクセストークン

Auth0 Management APIのために発行されたアクセストークンは、（実態はどうであれ）不透明として扱われるため、検証する必要はありません。Auth0 Management APIで使用すれば、後の処理はAuth0が行います。詳細については、「[Auth0 Management APIのトークン](/security/tokens/access-tokens/management-api-access-tokens)」を参照してください。

### カスタムAPIのアクセストークン

カスタムAPIのアクセストークンが検証に失敗する場合は、カスタムAPIで`audience`として発行されたことを確認します。詳細については、「[アクセストークンを取得する](/security/tokens/access-tokens/get-access-tokens)」をお読みください。

## アクセストークンのサンプル

これは、アクセストークンの内容を示す例です。トークンに含まれる認可情報は、アプリケーションがそのAPIで実行を許可されているアクションに関するもののみです（そのような許可を`scopes`と呼びます）。



トークンには、ユーザーID（`sub`クレームにある）以外の、ユーザーに関する情報は含まれません。しかし、その他のユーザー情報が取得できれば便利なケースも多いでしょう。これは、アクセストークンで[userinfo APIエンドポイント](https://auth0.com/docs/api/authentication#get-user-info)を呼び出すことで行えます。アクセストークン発行の対象となるAPIで**RS256**[署名アルゴリズム](/applications/signing-algorithms)が使われていることを確認します。

## アクセストークンのセキュリティ

アクセストークンを使用する際には、[トークンのベストプラクティス](/security/tokens/token-best-practices)に従い、JWTについては、その内容が信頼できると仮定する前に、必ず[アクセストークンを検証](/security/tokens/access-tokens/validate-access-tokens)してください。

## アクセストークンのライフタイム

### カスタムAPIトークンのライフタイム

カスタムAPIのアクセストークンの有効期間は、デフォルトで86400秒間（24時間）です。APIのセキュリティ要件に従ってトークンの有効期間を設定することをお勧めします。たとえば、バンキングAPIにアクセスするアクセストークンは、To-Do APIにアクセスするものより有効期限を短くします。詳細については、「[アクセストークンのライフタイムを更新する](/security/tokens/access-tokens/update-access-token-lifetime)」をお読みください。

### /userinfoエンドポイントのトークンのライフタイム

OIDC `/userinfo`エンドポイントへのアクセスのみを目的として発行されたアクセストークンには、デフォルトのライフタイムがあり、変更はできません。ライフタイムの長さは、トークンを使用する際のフローによって異なります。