---
og:description: Describes how Auth0 delegation tokens work in Auth0.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 委任トークン
og:url: https://auth0.com/docs/
permalink: delegation-tokens
title: 委任トークン
twitter:description: Describes how Auth0 delegation tokens work in Auth0.
twitter:title: 委任トークン
---

<Warning>

By default, delegation is disabled for tenants without an add-on in use as of 8 June 2017. Legacy tenants who currently use an add-on that requires delegation may continue to use this feature. If delegation functionality is changed or removed from service at some point, customers who currently use it will be notified beforehand and given ample time to migrate.

</Warning>

委任トークンは、アプリケーションがFirebaseやSAPなどのアプリケーションアドオンのAPIを呼び出す必要があるときに取得して使用することができます。その場合、アドオンはAuth0で登録と構成が済まされ、呼び出しているプログラムと同じテナントになければなりません。

既存のトークンが渡されると、このエンドポイントは、`ターゲット`アプリケーションのシークレットで署名されたトークンを新たに生成します。これは、ユーザーのIDをアプリケーションからAPIに渡すために使用されます。

The type of the delegation token varies depending on the provider. For example, if it is issued for Azure Blob Storage, it will be an SAS (Shared Access Signature). If it is for the Firebase Add-on, it will be a <Tooltip tip="JSON Web Token (JWT): Standard ID Token format (and often Access Token format) used to represent claims securely between two parties." cta="View Glossary" href="/docs/glossary?term=JWT">JWT</Tooltip>.

The <Tooltip tip="ID Token: Credential meant for the client itself, rather than for accessing a resource." cta="View Glossary" href="/docs/glossary?term=ID+token">ID token</Tooltip> for an authenticated user can be used with the `/delegation` endpoint to request a delegation token for a particular target. The target can be an application Add-on configured in Auth0. The Add-ons for which this can be done are those that are not <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=SAML">SAML</Tooltip> or <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=WS-Fed">WS-Fed</Tooltip> Add-ons. The Add-on must be configured in Auth0 with secrets obtained from the Add-on service, such as Firebase. Instructions for setting up the secrets are available from the Add-on configuration page for each Add-on. The secrets are used to sign the delegation token so that the Add-on API can validate and trust the token.

委任エンドポイントでは、委任トークンの内容を制御する`ターゲット`、`スコープ`、呼び出される API（`api_type`）、および追加のパラメータ用の追加の自由形式領域を含む、いくつかのパラメータを設定できます。

## Auth0.jsの例

新しいトークンを取得する方法の例については、**Auth0.js**を使用してアクティブ化したアドオンについて「委任トークンの要求」を参照してください。この例は**Auth0.js**ライブラリの**バージョン7**用であり、委任は**Auth0.js**のバージョン 8 では**サポートされていない**ことに注意してください。

## 有効期間と終了

有効期間と委任トークンを取り消すことができるかどうかは、アドオンによって異なります。詳細については、アドオンAPIのプロバイダーから入手できるドキュメントを参照してください。

## パブリックアプリケーションで委任トークンを使用する

パブリックアプリケーションで委任エンドポイントを使用する際に注意すべき重要な注意事項があります。

パブリックアプリケーションから`/token`エンドポイントを呼び出すと、アプリケーション設定のJsonWebToken署名アルゴリズムが`HS256`として構成されている場合でも、IDトークンは`RS256`を使用して強制的に署名されます。

その後、そのIDトークンを使用して委任エンドポイントを呼び出すと、アプリケーションのJsonWebToken署名アルゴリズムが`HS256`として構成されている場合は失敗します。これは、委任がアプリケーションの設定に従って検証を実行するが、IDトークンが別のアルゴリズムで発行されたためです。

強制的なアルゴリズムの変更のためです。したがって、パブリックアプリケーションで委任を使用する場合は、アプリケーションのJsonWebToken署名アルゴリズムを`RS256`として構成することが重要です。