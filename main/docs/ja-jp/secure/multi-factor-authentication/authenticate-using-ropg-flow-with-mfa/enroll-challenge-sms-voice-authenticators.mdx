---
og:description: Describes how to build your own MFA flows using SMS and/or voice as
  an authentication factor.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: SMSおよび音声Authenticatorの登録とチャレンジ
og:url: https://auth0.com/docs/
permalink: enroll-challenge-sms-voice-authenticators
title: SMSおよび音声Authenticatorの登録とチャレンジ
twitter:description: Describes how to build your own MFA flows using SMS and/or voice
  as an authentication factor.
twitter:title: SMSおよび音声Authenticatorの登録とチャレンジ
---





* Dashboardまたは[Management API](/api/management/v2#!/Guardian/put_factors_by_name)を使って[電話を要素として構成します](/mfa/mfa-factors/configure-sms-voice-notifications-mfa)。

## SMSまたは音声で登録する



### Authenticatorを登録する



SMSや音声で登録するには、SMSまたは音声でチャレンジできる電話番号を使って登録します。以下のパラメーターを指定してエンドポイントを呼び出します。`oob_channels`パラメーターは、ユーザーにコードを送信する方法（SMSまたは音声）を指定します。





成功すると、次のような応答を受け取ります：



「`User is already enrolled（ユーザーは登録済みです）`」というエラーメッセージを受け取った場合、そのユーザーはすでにMFA要素を登録済みです。このユーザーに対して別の要素を関連付ける前に、既存の要素を使ってユーザーにチャレンジする必要があります。



### SMSまたは音声の登録を確定する

ユーザーは、アプリケーションに提供しなければならない6桁のコードが記載されたメッセージを受信します。

登録を完了するには、OAuthトークンエンドポイントに`POST`要求を行います。メッセージで受け取った値とともに、前の応答で返された`oob_code`と`binding_code`を含める必要があります。



呼び出しが成功すると、アクセストークンを含む応答が以下の形式で返されます。



## SMSまたは音声でチャレンジする

### MFAトークンを取得する

「[リソース所有者のパスワード付与とMFAで認証する](/mfa/ropg-mfa)」で説明されている手順に従ってMFAトークンを取得します。

### 登録されているAuthenticatorを取得する

ユーザーにチャレンジするには、チャレンジしたい要素の`authenticator_id`が必要です。登録された全Authenticatorの一覧は、MFA Authenticatorエンドポイントを使って表示できます：



Authenticatorのリストが以下の形式で返されます。



### OTPを使ってユーザーにチャレンジする

メールチャレンジをトリガーするには、対応する`authenticator_id`と`mfa_token`を使ってMFAチャレンジエンドポイントを`POST`します。



### 受信したコードを使って認証を完了する

成功すると以下の応答を受け取ります。



アプリケーションは、メッセージで送信した6桁のコードをユーザーに求めて、`binding_code`パラメーター内に設定する必要があります。前の呼び出しで返された`binding_code`と`oob_code`を指定して、OAuth0トークンエンドポイントでコードを検証し、トークンを取得することができます。



呼び出しが成功すると、アクセストークンを含む応答が以下の形式で返されます：



**注意：**SMSと無効なコードの返信はレート制限の対象になります。SMSコードは10回まで送信でき、1時間ごとに1回が補充されます。無効なコードは10回まで返信でき、6分ごとに1回が補充されます。