---
og:description: Describes how to import MFA enrollments for your existing users.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ユーザーのMFA認証システム登録のインポート
og:url: https://auth0.com/docs/
permalink: import-user-mfa-authenticator-enrollments
title: ユーザーのMFA認証システム登録のインポート
twitter:description: Describes how to import MFA enrollments for your existing users.
twitter:title: ユーザーのMFA認証システム登録のインポート
---

[自動移行](/users/import-and-export-users/configure-automatic-migration-from-your-database)と[一括ユーザーインポート](/users/import-and-export-users/bulk-user-imports)を使用して、ユーザーのMFA登録をインポートできます。サポートされている登録タイプは次のとおりです。

* メール： メール検証用。
* 電話： SMS検証用。
* OTP： Google Authenticatorなどの認証システムアプリケーションで使用されるワンタイムパスワード（OTP）用。

MFA登録をインポートすると、移行後にユーザーが再登録する必要がなくなるため、シームレスなユーザーエクスペリエンスが実現します。

従来のログインエクスペリエンスでは、複数の要素を持つユーザーの要素選択はサポートされていません。複数の登録要素を持つユーザーをインポートする場合は、[ユニバーサルログイン](/login/universal-login)エクスペリエンスの使用を検討してください。

## スキーマ

スキーマは、次の両方のワークフローのMFA要素に適用されます。



## 自動移行

MFA登録は、[自動移行](/connections/database/custom-db/overview-custom-db-connections#automatic-migration-scenario)中にインポートすることもできます。これは、カスタムDB[ログインスクリプト](/login)の最後にコールバックに提供されるユーザーの`mfa_factors`フィールドに既存の登録を提供することで実現できます。

失敗はテナントログに失敗したログインとして表示され、次のような説明によって他の失敗と区別できます。`MFA要素をインポートできない`。例：



## 一括ユーザーインポート

1. `users.json`ファイルを準備します。詳細については、「[一括ユーザーインポート](/users/import-and-export-users/bulk-user-imports)」を参照してください。
2. 各ユーザーの既存のMFA登録を含めます。
3. 一括ユーザーインポートを開始します。
4. 最初の要求で`upsert`オプションを有効にして、既存のユーザーの要素を更新します。
5. インポートジョブが完了したら、応答にエラーがないか確認します。ユーザーのMFA要素のいずれかがインポートに失敗した場合は、次のようなエラーが表示されます。

`upsert`オプションを使用すると、既存のユーザーに対するMFAに関連しない更新がユーザーのプロファイルに適用されます。たとえば、次のエラーの概要は、ユーザーの`画像`属性が正常に`http://example.org/jdoe.png`に設定されたが、提供されたMFA要素をインポートできなかったことを示しています。このような場合、失敗したユーザーのインポートを再試行しても問題ありません。



## 復旧コード

Auth0では、復旧コードをインポートする方法は提供されていません。ユーザーのMFA要素がインポートされても、復旧コードは提供されません。

ユーザーに復旧コードを提供するには、ユーザーが復旧コードを登録しているかどうかを確認し、登録していない場合は[復旧コード再生成エンドポイント](/api/management/v2#!/Users/post_recovery_code_regeneration)を使用して新しいコードを生成します。