---
og:description: Describes how to configure Cisco Duo Security for MFA.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: MFAにCisco Duo Securityを構成する
og:url: https://auth0.com/docs/
permalink: configure-cisco-duo-for-mfa
title: MFAにCisco Duo Securityを構成する
twitter:description: Describes how to configure Cisco Duo Security for MFA.
twitter:title: MFAにCisco Duo Securityを構成する
---

<Card title="Before you start">

* Configure your Duo account. For more information, read [Getting Started on Duo Docs](https://duo.com/docs/getting-started#getting-started).
* Create a [Duo Security Web SDK integration](https://duo.com/docs/duoweb) and record the **Integration Key**, **Secret Key,** and **API hostname** credentials.

</Card>

Cisco Duoは多角的な認証プロバイダーで、他の要素がすべて無効な場合にのみ、Auth0テナントで使用できます。Duoアカウントはプッシュ通知、SMS、OTP、電話でのコールバックの他、構成によってはそれ以外にも対応することができます。

他の要素が有効になっている場合、Duoは有効化できません。Duoは、それだけが単独で有効になっている場合にのみ使うことができます。

アプリケーションは、ユーザーにDuoを使った第二要素を求める際に、Duoアカウントで有効になっているオプションを表示します。

Your users can download Duo from [Google Play](https://play.google.com/store/apps/details?id=com.duosecurity.duomobile) or the [App Store](https://itunes.apple.com/us/app/duo-mobile/id422663827?mt=8) for use as a second factor.

## Duoを構成する

To configure Duo Security, you must pass your Duo credentials to your application in the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip>.

1. Go to [Dashboard > Security > Multi-factor Auth > Duo Security](https://manage.auth0.com/#/security/mfa/duo) and enable it.
2. Enter the information in the fields to link your Duo account to Auth0.
3. Select **Save**.

## アクションを使ってDuoを有効にする

To enable Duo within an Action, pass `duo` as the `provider` parameter when you enable <Tooltip tip="Multi-factor authentication (MFA): User authentication process that uses a factor in addition to username and password such as a code via SMS." cta="View Glossary" href="/docs/glossary?term=multi-factor+authentication">multi-factor authentication</Tooltip>.

```js lines
exports.onExecutePostLogin = async (event, api) => {
  api.multifactor.enable('duo', { allowRememberBrowser: false });
};
```






Duoには、「Remember Me（自動ログイン）」の動作オプションはありません。初回のログイン後にユーザーを記憶しておく、30日間のMFAセッションがハードコードされています。

ユーザーが毎回Duoを使ってログインすることを強制するには、`allowRememberBrowser: false`を使ってルールを作成します。

## Duo用のアクションテンプレート

This template provides an example and starting point to trigger multi-factor authentication with [Duo Security](http://duosecurity.com/) when a condition is met.

初めてログインした後、ユーザーはデバイスを登録することができます。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

You need to create two integrations in Duo Security: one of type **Web SDK** and one of type **Admin SDK**.

</Callout>

{/* codeblockOld.header.login.logInButton codeblockOld.header.login.configureSnippet */}


```js lines
exports.onExecutePostLogin = async (event, api) => {

	const CLIENTS_WITH_MFA = ['{yourClientId}'];
	// run only for the specified clients
	if (CLIENTS_WITH_MFA.includes(event.client.client_id)) {

		// uncomment the following if clause in case you want to request a second factor only from user's that have user_metadata.use_mfa === true
		//if (event.user.user_metadata && event.user.user_metadata.use_mfa){

		// optional, defaults to true. Set to false to force DuoSecurity every time.
		// See https://auth0.com/docs/multifactor-authentication/custom#change-the-frequency-of-authentication-requests for details
		api.multifactor.enable('duo', {
			providerOptions.ikey: configuration.DUO_IKEY,
			providerOptions.skey: configuration.DUO_SKEY,
			providerOptions.host: configuration.DUO_HOST,
			allowRememberBrowser: false
		})

		// optional. Use some attribute of the profile as the username in DuoSecurity. This is also useful if you already have your users enrolled in Duo.
		// username: event.user.nickname
	};
	// }

};
```






## 現在の制限

* You cannot use [Auth0 MFA Enrollment Tickets](/docs/secure/multi-factor-authentication/multi-factor-authentication-developer-resources/create-custom-enrollment-tickets) to enroll users with Duo. Onboard those users from Duo itself.
* If you use <Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip>, you must enable Duo in an Action with `provider` set to `duo` as described previously. You can conditionally use Duo or the built-in Auth0 provider for specific applications.

## Learn more

* [Troubleshoot Multi-Factor Authentication Issues](/docs/troubleshoot/authentication-issues/troubleshoot-mfa-issues)