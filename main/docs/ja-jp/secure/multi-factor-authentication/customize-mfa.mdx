---
og:description: Learn how to customize multi-factor authentication (MFA) pages that
  appear to users with Universal Login branding options.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 多要素認証ページをカスタマイズする
og:url: https://auth0.com/docs/
permalink: customize-mfa
title: 多要素認証ページをカスタマイズする
twitter:description: Learn how to customize multi-factor authentication (MFA) pages
  that appear to users with Universal Login branding options.
twitter:title: 多要素認証ページをカスタマイズする
---



Auth0 ダッシュボードの[ユニバーサル ログイン設定](%24%7Bmanage_url%7D/#/login_settings)セクションでユニバーサル ログインのブランド オプションを調整することで、ユーザーに表示される MFA ページをカスタマイズできます。

ユニバーサル ログイン エクスペリエンスを使用している場合は、フローのカスタマイズ オプションを使用してページをカスタマイズできます。

また、HTMLコンテンツの全体をカスタマイズして、組織に固有なユーザーエクスペリエンス要件を反映させることもできます。詳細については、「[MFAウィジェットテーマオプション](/mfa/customize-mfa-user-pages/mfa-widget-theme-options)」をご覧ください。

ユニバーサル ログイン エクスペリエンスにより、MFA がユーザーにとってさらにシンプルに提供されます。ユーザーがログイン画面に資格情報を入力すると、MFA画面が表示されます。MFA要素を登録していない場合は登録が要求され、登録済みの場合はMFA資格情報の提示が要求されます。

## MFA APIを使用する

Auth0は、次のシナリオで[MFA API](/mfa/mfa-developer-resources/mfa-api)を提供します。

* [リソース所有者パスワード付与を使用してユーザーを認証します](/mfa/ropg-mfa)。
* [ユーザーが独自の認証要素を管理](/mfa/ropg-mfa/manage-authenticator-factors-mfa-api)できるようにインターフェイスを構築します。
* [登録チケット](/mfa/auth0-guardian/create-custom-enrollment-tickets)を使用して、ユーザーをMFAに登録するよう招待します。

MFA APIを使用するには、アプリケーションに対してMFAの付与タイプを有効にしなければなりません。Auth0 DashboardでMFA付与を有効にするには、以下を行います。

1. [［Dashboard］>［Applications（アプリケーション）］>［Applications（アプリケーション）］](%24%7Bmanage_url%7D/#/applications)に移動して、アプリケーションを選択します。
2. **［Settings（設定）］**タブの下部にある**［Advanced Settings（詳細設定）］**をクリックします。
3. **［Grant Types（付与タイプ）］**タブをクリックし、**MFA** を選択します。

詳細については、「[多要素認証（MFA）を有効にする](/mfa/enable-mfa)」をお読みください。
4. **［Save Changes（変更を保存）］**をクリックします。

### 制限事項

MFA APIは、SMS、Guardianアプリケーションのプッシュ通知、メール、OTP要素と連動するように設計されています。Duoでの登録には対応していません。

## Actionsを使ってMFAポリシーをカスタマイズする

Actionsを使ってテナント向けのMFAポリシーをカスタマイズし、特定のアプリケーションのユーザーや、特定のユーザーメタデータまたはIPアドレス範囲を持つユーザーなどを対象にMFAを要求することができます。

アクションの作成に慣れていない場合は、「[最初のアクションの作成](/actions/write-your-first-action)」をお読みください。



アクションを作成するときに、`プロバイダー`設定を使用して、MFAの強制の有無および使用する要素を指定できます。動作は、クラシック ログイン エクスペリエンスを使用するか、ユニバーサル ログイン エクスペリエンスを使用するかによって異なります。



ユニバーサル ログインを使用している場合は、MFA ログイン ページのカスタマイズを有効にすると、クラシック ログイン エクスペリエンスの動作を実現できます。



`プロバイダー`を特定のオプションに手動で設定すると、ダッシュボードの有効/無効の切り替えが上書きされます。Dashboardで他の要素が有効になっているのに、ユーザーにDuoでの登録を要求するには、次のようなActionを使用します。



## 一般的なユースケースの例

ここでは、Actionsで処理できる一般的なMFAシナリオをいくつかご紹介します。



### 特定のアプリケーションにMFAを要求する

MFAをカスタマイズして、ユーザーが特定のアプリケーションにログインするときのみトリガーされるようにします。



### 特定のユーザーにMFAを要求する

MFAをカスタマイズして、MFAを使用するようマークされたユーザーに対してのみ、トリガーされるようにします。



### MFAプロンプトの頻度を変更する

状況によっては、同じブラウザーを使ってログインしているユーザーに対し、毎回MFAを求めるプロンプトを表示したくないことがあります。`allowRememberBrowser` プロパティを使用してこの動作を変更できます:



プロパティの値に応じて、以下のような動作になります。



時間の値はアクティブなユーザー用です。ユーザーが 7 日間以上非アクティブの場合、Cookie は期限切れとなり、次回のログイン試行時に MFA の入力を求められます (`allowRememberBrowser` が `true` に設定されていて、最後の MFA プロンプトから 30 日が経過していないかどうかに関係なく)。

ユーザーにMFAのスキップを許可した場合、ユーザーのブラウザーにCookieが保管されます。ユーザーがCookieのセットを持っている場合でもMFAを要求するには、次の2つのオプションがあります。

* `allowRememberBrowser` を `false` に設定します
* `/authorize` エンドポイントを呼び出す際に、`acr_values` を`http://schemas.openid.net/pape/policies/2007/06/multi-factor`に設定します。

ユーザーが信頼できるデバイスを紛失した場合、Auth0 Management API [Invalidate Remember Browser](https://auth0.com/docs/api/management/v2#!/Users/post_invalidate_remember_browser) エンドポイントを呼び出すことで、次回のログイン時に特定のユーザーに MFA を要求することができます。

### ネットワーク外部のユーザーにMFAを要求する

内部IPアドレスのネットワークについてはアクセスが適切に制御されていると仮定した場合、企業ネットワークの外から要求を送信してくるユーザーにのみ、Auth0がMFAを要求するようにできます。



### リフレッシュトークンの要求でMFAをバイパスする

ユーザーによる頻繁なログアウトが報告された場合は、MFAを使用しながらもリフレッシュトークンの要求をバイパスすることができます。`event.transaction.protocol` オブジェクト プロパティのフィルター アクションを使用して、デフォルトの動作を変更できます。



アクションの`event`オブジェクトの詳細については、「[Actionsのトリガー:ログイン後 - eventオブジェクト](/signup-and-login-triggers/login-trigger/post-login-event-object)」を参照してください。