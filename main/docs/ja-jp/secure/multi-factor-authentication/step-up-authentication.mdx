---
og:description: Describes how step-up authentication works for APIs and web apps to
  verify that the user has logged in using MFA and if not, require the user to step-up
  to access certain resources.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ステップアップ認証を追加する
og:url: https://auth0.com/docs/
permalink: step-up-authentication
title: ステップアップ認証を追加する
twitter:description: Describes how step-up authentication works for APIs and web apps
  to verify that the user has logged in using MFA and if not, require the user to
  step-up to access certain resources.
twitter:title: ステップアップ認証を追加する
---

ステップアップ認証を使うと、さまざまなタイプのリソースへのアクセスを許可するアプリケーションが、機密情報にアクセスするユーザーに、より強力な認証メカニズムを使用して認証するよう要求できます。

You can add step-up authentication to your app with Auth0's extensible <Tooltip tip="Multi-factor authentication (MFA): User authentication process that uses a factor in addition to username and password such as a code via SMS." cta="View Glossary" href="/docs/glossary?term=multi-factor+authentication">multi-factor authentication</Tooltip> (MFA) support. Your app can verify that the user has logged in using MFA and, if not, require the user to step-up to access certain resources.

## 仕組み

例として、Fabrikamのイントラネットでは、ユーザーはユーザー名とパスワードで認証を行い、顧客データにアクセスする必要があります。ただし、（機微な給与情報が含まれた可能性のある）従業員データへのアクセスを要求する場合、MFAなどのより強力な認証メカニズムがトリガーされます。

<Frame>![MFA Step-up Authentication flow diagram](/images/cdy7uua7fh8z/3w3duzjtD5B2Nu3oVQcbh/22d3a24aa3c3054fa089effbfa9d654c/step-up-flow.png)</Frame>

## APIのステップアップ認証

When your <Tooltip tip="Audience: Unique identifier of the audience for an issued token. Named aud in a token, its value contains the ID of either an application (Client ID) for an ID Token or an API (API Identifier) for an Access Token." cta="View Glossary" href="/docs/glossary?term=audience">audience</Tooltip> is an API, you can implement step-up authentication with Auth0 using [scopes](/docs/get-started/apis/scopes), [access tokens](/docs/secure/tokens/access-tokens), and [Actions](/docs/customize/actions). You can use an Action to trigger the step-up authentication mechanism (for example, prompt MFA) whenever the user requests scopes that map to sensitive resources.

In our example, a user signs into Fabrikam's web app. The standard login gives to this user the ability to interact with their API and fetch the user's account list. This means that the <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=access+token">access token</Tooltip> that the application receives after the user authentication contains a scope like `read:accounts`.

次に、ユーザーはあるアカウントから別のアカウントに資金を送金したいと考えます。この送金は高額な取引とみなされます。この処理を実行するには、APIでは`transfer:funds`スコープが必要です。

The user's current access token does not include this scope and the application knows it (because the application knows the set of scopes it requested in the initial authentication call). The application performs another authentication call, but this time it requests the scope `transfer:funds`. The browser redirects to Auth0. Per Fabrikam's Action, Auth0 challenges the user to authenticate with MFA because a high-value scope was requested. Once the user successfully authenticates with MFA, Auth0 generates and sends a new access token that includes the high-value scope. The application passes the access token to the API, which discards it after verification, thereby treating it as a single-use token.

To learn more, read [Configure Step-up Authentication for APIs](/docs/secure/multi-factor-authentication/step-up-authentication/configure-step-up-authentication-for-apis).

## Webアプリのステップアップ認証

If it is a web app that verifies the authentication level, and not an API, then you do not have an access token. In this case, you can check if a user has logged in with MFA by reviewing the contents of their <Tooltip tip="ID Token: Credential meant for the client itself, rather than for accessing a resource." cta="View Glossary" href="/docs/glossary?term=ID+token">ID token</Tooltip>. You can then configure your application to deny access to pages with sensitive information if the ID token indicates that the user did not log in with MFA, and use an Action to trigger the step-up authentication mechanism (for example, prompt MFA). For example, you might have an employee app that authenticates users with usernames and passwords, but if a user wants to access salary information, they have to provide a second factor such as a mobile push notification.

このアクションを実行するには、ユーザーがそのページにアクセスしようとするときにIDトークンを確認します。クレームに、ユーザーがMFAで認証済みであることが示されている場合、機微情報が表示されます。そうでない場合は、Actionを使って認証を再度トリガーし、ユーザーにMFAで認証を行うよう促します。

To learn more, read [Configure Step-up Authentication for Web Apps](/docs/secure/multi-factor-authentication/step-up-authentication/configure-step-up-authentication-for-web-apps).

## Learn more

* [Configure Step-up Authentication for APIs](/docs/secure/multi-factor-authentication/step-up-authentication/configure-step-up-authentication-for-apis)
* [Configure Step-up Authentication for Web Apps](/docs/secure/multi-factor-authentication/step-up-authentication/configure-step-up-authentication-for-web-apps)