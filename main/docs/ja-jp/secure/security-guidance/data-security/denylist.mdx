---
og:description: Describes how to identify user attributes that you do not want to
  save in Auth0 databases.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 拒否リストへのユーザー属性の追加
og:url: https://auth0.com/docs/
permalink: denylist
title: 拒否リストへのユーザー属性の追加
twitter:description: Describes how to identify user attributes that you do not want
  to save in Auth0 databases.
twitter:title: 拒否リストへのユーザー属性の追加
---

プライバシー上の理由により Auth0 データベースに保存すべきでないユーザーフィールドがある場合は、それらを拒否リストに追加できます。拒否リストに属性を追加するには、Management APIの更新接続エンドポイントに対して`PATCH`呼び出しを行います。

1. `/patch_connections_by_id`[エンドポイント](/api/management/v2#!/Connections/patch_connections_by_id)にアクセスするための有効なアクセストークンを取得します。トークンには、`update:connections`スコープが含まれている必要があります。詳細については、[［Management API Access Tokens（Management APIのアクセストークン）］](/security/tokens/access-tokens/management-api-access-tokens)を参照してください。
2. アクセストークンと拒否する属性のリストを使用して、API を呼び出します。以下は、ethnicityとgenderの2つの属性を拒否するHTTP要求の例です。1つまたは2つの値のみを更新する場合は「マージ」が行われないため、optionsオブジェクトを取得してPATCH要求でオブジェクト全体を送信する必要があることに注意してください。
ここでは、

1. `{yourConnectionId} `は、これらの属性が拒否される[接続 ID](/get-started/dashboard/locate-the-connection-id)です。
2. `{yourToken}`は、前の手順で受け取ったアクセストークンです。
3. `options.non_persistent_attrs`オブジェクトは、拒否される属性の配列を保持します。拒否するクレームがアップストリームのIDプロバイダー（IdP）によって送信されている場合は、アップストリームのIdPによって送信されたとおりにクレームを設定する必要があります。たとえば、`https://acme.com/temporary_idtoken`として受信されたクレームの場合、上記のサンプルの`non_persistent_attrs`オブジェクトオブジェクトが読み取ります。

## 制限事項

* 拒否できるのは、[ルート フィールド](/users/user-profiles/user-profile-structure)（`user.name`や`user.phone_number` など）のみです。

* `user.name`または`user.nickname`が拒否された場合、それらはトークンに含まれません。
* `user.email`が拒否された場合、その値はカスタムクレームにマッピングできません。たとえば、ルールでは、`context.idトークン[namespace + 'work_email'] = user.email`は機能しません。
* 属性を拒否しても、ルールと送信トークンを介して使用できます。ただし、次のいずれかに該当する場合、拒否リスト属性はトークンに**含まれません**:

* 多要素認証（MFA）を有効にしています
* ルールを介してリダイレクトを実行しています
* アプリで委任を使用しています（かつ、`scope = passthrough` を設定していない）
* アプリはなりすましを使用しています
* **［Use Auth0 instead of the IdP to do Single Sign-On（IdPの代わりにAuth0を使用してシングルサインオン）］**の設定を有効にしています（レガシーテナントのみ）
* SAMLP接続の場合、デバッグモードを有効にすると、ログに拒否リスト属性に関する情報が含まれます

これらの制限のいずれかが受け入れられない場合は、データを暗号化する[ルール](/rules)を記述し、データを`user.app_metadata`オブジェクトに保持することができます。