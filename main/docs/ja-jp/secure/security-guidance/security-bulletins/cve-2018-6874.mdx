---
og:description: 'CVE-2018-6874: Details about a security vulnerability identified
  in the Auth0 authentication service'
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: CVE-2018-6874：Auth0認証サービスにおけるセキュリティ脆弱性
og:url: https://auth0.com/docs/
permalink: cve-2018-6874
title: CVE-2018-6874：Auth0認証サービスにおけるセキュリティ脆弱性
twitter:description: 'CVE-2018-6874: Details about a security vulnerability identified
  in the Auth0 authentication service'
twitter:title: CVE-2018-6874：Auth0認証サービスにおけるセキュリティ脆弱性
---

**公開日**：2018年4月4日

**CVE番号**：CVE-2018-6874

**著者**：社外秘

## 概要

A vulnerability has been identified in the Auth0 authentication service. Tenants of the service with the Legacy Lock API flag enabled in the service’s management dashboard are affected. If the flag is not visible, it is disabled. Disabling the flag may break applications employing the auth0.js library with version `< 9.0.0` or the Lock library with version `< 11.0.0` for crossdomain username/password based authentication - also known as [embedded login](/docs/authenticate/login/universal-vs-embedded-login). Further, any cross-domain use of the `/usernamepassword/login` authentication api endpoint outside of those libraries may also be affected.

After the verification of user credentials on `/usernamepassword/login`, an HTML form is rendered into the user’s browser and automatically executed. It POSTs a <Tooltip tip="JSON Web Token (JWT): Standard ID Token format (and often Access Token format) used to represent claims securely between two parties." cta="View Glossary" href="/docs/glossary?term=JSON+Web+Token">JSON Web Token</Tooltip> (JWT) to the `/login/callback` endpoint. This authenticated token maintains state regarding the identity of the user; this cannot be done directly due to crossdomain session management restrictions maintained by most modern browsers. Due to the lack of session binding, this form post is susceptible to [CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)). An attacker with valid user credentials at an Auth0 tenant can use them to gain such a form, and then employ techniques such as social engineering or clickjacking to have a victim’s browser execute it. The victim will then have a login session at the Auth0 tenant under the attacker’s account - and therefore be recognized as the attacker by any downstream application in its federation. Should the user undertake any actions while maliciously logged in as such, those actions and any related information will be visible to the attacker.

自分は影響を受けますか？

## Auth0テナントにユーザー名/パスワード認証（任意のデータベースや接続を使用）を採用しており、Auth0管理ダッシュボードのLegacy Lock APIフラグが表示され、フラグがオンになっている場合、影響を受けます。

修正方法

## 脆弱性を軽減するには、フラグをオフに切り替えます。`/usernamepassword/login`エンドポイントは、`/login`でホストされているユニバーサルログインページからのログインでは引き続き機能しますが、これらは同じドメインのログインであるため、CSRF から保護されます。それ以外の場合、フラグを切り替えると、そのエンドポイントでのクロスドメイン認証が無効になります。

To mitigate the vulnerability, toggle the flag to off. The `/usernamepassword/login` endpoint will still work for logins from the <Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip> page hosted on `/login`, however these - as same-domain logins - will be protected from CSRF. Otherwise, toggling the flag will disable cross-domain authentication on that endpoint.

Legacy Lock APIフラグがオフに設定されたバージョン`> 14591`を実行しているPrivate SaaS Appliancesは、この脆弱性の影響を受けません。

この更新はユーザーに影響を与えますか？

### アプリケーションを移行せずにLegacy Lock APIを無効にすると、影響を受ける機能を使用するすべてのユーザーログインが機能しなくなります。Auth0は、2018年7月16日にすべてのテナントに対してLegacy Lock APIの無効化を強制する予定です。移行の選択により、サービスにログインする際の特定のユーザーエクスペリエンスが影響を受ける可能性がありますが、ユーザー、ユーザーの情報、およびユーザーのセッションにはその他の影響はありません。

If the Legacy Lock API is disabled without applications having migrated, then all user logins employing the affected functionality will break. Auth0 intends to enforce disablement of the Legacy Lock API for all tenants on July 16th, 2018. The choice of migration may affect the specific user experience of logging into your service, however users, their information, and their sessions will not be otherwise impacted.