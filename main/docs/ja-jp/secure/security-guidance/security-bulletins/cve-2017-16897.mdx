---
og:description: 'CVE-2017-16897: Security Update for passport-wsfed-saml2 Passport
  strategy library'
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: CVE-2017-16897：passport-wsfed-saml2パスポートストラテジーライブラリーのセキュリティ更新
og:url: https://auth0.com/docs/
permalink: cve-2017-16897
title: CVE-2017-16897：passport-wsfed-saml2パスポートストラテジーライブラリーのセキュリティ更新
twitter:description: 'CVE-2017-16897: Security Update for passport-wsfed-saml2 Passport
  strategy library'
twitter:title: CVE-2017-16897：passport-wsfed-saml2パスポートストラテジーライブラリーのセキュリティ更新
---

**公開日**：2017年12月22日

**CVE番号**：CVE-2017-16897

**著者**：Alan Bishop

## 概要

A vulnerability has been discovered in the [passport-wsfed-saml2 library](https://github.com/auth0/passport-wsfed-saml2) affecting versions < `3.0.5`. **passport-wsfed-saml2** is a WS-Federation protocol and SAML2 tokens authentication provider for [Passport.js](http://passportjs.org/).

This vulnerability allows an attacker to impersonate another user and potentially elevate their privileges if the <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=SAML">SAML</Tooltip> <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=identity+provider">identity provider</Tooltip> does not sign the full SAML response, but instead only signs the assertion within the response.

この脆弱性を悪用する攻撃者は、その応答を使って別の**NameIdentifier**で要求を作成し、ユーザーになりすましてログインできる可能性があります。また、悪意のある行為者が管理者権限を持つ特定のユーザーとして認証した場合には、権限を昇格することもできます。攻撃者は既存のアカウントを持っているか、暗号化されたトラフィックを傍受して、SAML応答をその場で書き換えることができなければなりません。

この更新は、**アサーション**と**応答**の要素を対象としたラッピング攻撃を回避すると同時に、XPath表現にいくつかの防御的な変更を提供することによって、脆弱性に対処します。また、SAML応答の署名に関する情報をログに記録する方法の改善も実装されています。

この脆弱性を修正するには、ライブラリーのアップグレードが必要です。

## 自分は影響を受けますか？

この脆弱性の影響を受けるのは、**SAMLP IDプロバイダー接続**を使用しているクラウドテナントで、IDプロバイダーが以下を行った場合です。

* SAML応答の署名とアサーションの署名を行った
* SAML応答に署名しないで、アサーションに署名した

Auth0のクラウドテナントには対処は必要ありません。

The vulnerability scope also extended to those using the [passport-wsfed-saml2 strategy with passport.js](https://github.com/auth0/passport-wsfed-saml2), which requires a library upgrade (see the next section).

## 修正方法

**passport-wsfed-saml2**ライブラリーを使用している開発者は、最新バージョンにアップグレードしてください：`3.0.5`。

更新されたパッケージはnpmで入手できます。今後の追加のバグ修正を確実に受け取るために、ライブラリーのパッチとマイナーレベルの更新が適用されるよう`package.json`ファイルが更新されていることを確認してください。

```json lines
{
  "dependencies": {
    "passport-wsfed-saml2": "^3.0.5"
  }
}
```






### この更新はユーザーに影響を与えますか？

いいえ。この修正によりアプリケーションが実行するライブラリーにパッチが適用されますが、ユーザーとその現在のステータス、既存のセッションには影響はありません。