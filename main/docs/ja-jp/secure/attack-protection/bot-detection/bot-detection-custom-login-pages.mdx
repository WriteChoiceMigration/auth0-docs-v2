---
og:description: Learn how to enable and configure bot detection when using custom
  login pages built with the auth0.js library.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ボット検知をカスタムログインページに追加する
og:url: https://auth0.com/docs/
permalink: bot-detection-custom-login-pages
title: ボット検知をカスタムログインページに追加する
twitter:description: Learn how to enable and configure bot detection when using custom
  login pages built with the auth0.js library.
twitter:title: ボット検知をカスタムログインページに追加する
---

auth0.jsを使用してカスタムログインページを構築する場合には、ボット検知を有効にして、Auth0が要求を高リスクと判断したときにCAPTCHAの手順を表示することができます。

カスタムログインフォームのコードは、CAPTCHAの手順を渡すようにユーザーに求めるシナリオを処理しなければなりません。このシナリオを考慮しないと、アプリケーションでエラーが起きる可能性があります。



## カスタムログインページテンプレートを使用する

Auth0はテンプレートを提供して、高リスクのログインを処理するコードが使用できるようにしています。

1. [［Dashboard］>［Branding（ブランディング）］>［Universal Login（ユニバーサルログイン）］](%24%7Bmanage_url%7D/#/login_settings)に移動して、**［Classic（クラシック）］**を選択します。
2. **［Login（ログイン）］**タブをクリックし、**［Customize Login Page（ログインページをカスタマイズ）］**スイッチがまだ有効になっていない場合はそれを有効にします。
3. **［Default Template（デフォルトのテンプレート）］**ドロップダウンメニューから**［Custom Login Form（カスタムログインフォーム）］**を選択します。
4. 提供されているテンプレートを使用して、ログインページをカスタマイズします。
5. バージョン管理ソフトウェアを使用していない場合には、Dashboard内で直接テンプレートを独自のソースコードに置き換えることができます。
6. **［Preview（プレビュー）］**をクリックして新しいフォームを確認します。
7. **［Save Changes（変更の保存）］**をクリックします。

## ログインフォームをカスタマイズする

ボット検知をサポートしたい場合は、`auth0.js`ライブラリーのバージョン`9.28`以降を使用する必要があります。

`<script src="https://cdn.auth0.com/js/auth0/9.28/auth0.min.js"></script>`

1. パスワード入力の下、サインアップボタンとログインボタンの上にCAPTCHAを表示するための要素を追加します。例：`<div class="captcha-container"></div>`
2. `WebAuth`コンストラクターの後に、`loginCaptcha`と`signupCaptcha`のコンポーネントを初期化します。
3. `login`メソッドを呼び出す際には、`captcha`プロパティに`loginCaptcha.getValue()`の値を割り当てます。
`login`メソッドのコールバック関数パラメーター（`cb`）については、[auth0.jsドキュメントに記載のWebAuth](https://auth0.github.io/auth0.js/global.html#login)の説明をお読みください。
4. `signupAndLogin`メソッドを呼び出す際には、`captcha`プロパティに`signupCaptcha.getValue()`の値を割り当てます。
`signupAndLogin`メソッドのコールバック関数パラメーター（`cb`）については、[auth0.jsドキュメントに記載のWebAuth](https://auth0.github.io/auth0.js/global.html#login)の説明をお読みください。
5. 汎用のエラー処理ロジックにある`loginCaptcha`と`signupCaptcha`コンポーネントを再度読み込みます。

### CAPTCHAテンプレートを構成する

`renderCaptcha`と`renderSignupCaptcha`のメソッドを呼び出す際には、`options`パラメーターを使用して、[サポートしているCAPTCHAプロバイダー](/attack-protection/bot-detection/configure-captcha)のそれぞれにテンプレートを構成することができます。

`options`パラメーターの`templates`プロパティは以下のプロパティをサポートしています。



プロバイダーのぞれぞれにデフォルトのテンプレート関数については、[GitHubが提供するauth0.js/src/web-auth/captcha.js](https://github.com/auth0/auth0.js/blob/a3ddc0905a5da33aa190a9098467576976b95ec8/src/web-auth/captcha.js#L28)を参照してください。

## パスワードレスフローをサポートする

パスワードレスフローでボット検知をサポートしたい場合は、auth0.jsライブラリーのバージョン`9.24`以降を使用する必要があります。

`<script src="https://cdn.auth0.com/js/auth0/9.24/auth0.min.js"></script>`

1. 送信ボタンの上にCAPTCHAを表示するための要素を追加します。ユーザー名とパスワードでのログインもサポートする場合は、パスワードレスのCAPTCHA用に別の要素を作成する必要があります。例：
`<div class="passwordless-captcha-container"></div>`
2. WebAuthコンストラクターの後に、パスワードレスフローのCAPTCHAコンポーネントを初期化します。
3. パスワードレスの呼び出しにcaptchaプロパティを追加し、エラーの発生時にCAPTCHAコンポーネントが再び読み込まれるようにします。