---
og:description: Describes Auth0 user, application, and client metadata. Learn how
  you can use metadata to store information that does not originate from an identity
  provider.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ユーザープロファイルでのメタデータの使い方
og:url: https://auth0.com/docs/
permalink: define-maintain-custom-user-data
title: ユーザープロファイルでのメタデータの使い方
twitter:description: Describes Auth0 user, application, and client metadata. Learn
  how you can use metadata to store information that does not originate from an identity
  provider.
twitter:title: ユーザープロファイルでのメタデータの使い方
---

Auth0は包括的システムを提供して、Auth0ユーザープロファイルにメタデータを保管できるようにしています。メタデータは以下に使用できます。

* アプリケーション特定のデータをユーザープロファイルに保管する
* ユーザーに対して特定の操作が発生したかを記録する
* ユーザープロファイルに関する負荷の大きい処理の結果をキャッシュして、将来のログインで再利用する
* Store information that does not originate from an <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+provider">identity provider</Tooltip> or that overrides what an identity provider supplies.

メタデータは、ユーザーのログインフローの一部として変更されても構いません。

You can configure connection sync so that user root attributes are updated by the identity provider only on user profile creation. You can then edit root attributes individually or by bulk import. To learn more, read [Configure Identify Provider Connection for User Profiles Updates](/docs/manage-users/user-accounts/user-profiles/configure-connection-sync-with-auth0).

## メタデータの種類

Auth0は3種類のメタデータを使って、特定の情報を保管します。

<table class="table"><thead>
<tr>
<th><strong>Metadata Type</strong></th>
<th><strong>Field Name</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>User Information</strong></td>
<td><code>user_metadata</code></td>
<td>Stores user attributes such as preferences that do not impact a user's core functionality. This data <strong>can</strong> be edited by logged in users if you build a form using the Management API and should <strong>not</strong> be used as a secure data store.</td>
</tr>
<tr>
<td><strong>Access Information</strong></td>
<td><code>app_metadata</code></td>
<td>Stores information such as permissions, Auth0 plan, and external IDs that can impact user access to features. This data <strong>cannot</strong> be edited by users and there are restrictions for what can be stored in this field.</td>
</tr>
<tr>
<td><strong>Application Information</strong></td>
<td><code>client_metadata</code> in the <code>Client</code> object, <code>context.clientMetadata</code> in Rules, and <code>event.client.metadata</code> in post-login Actions.</td>
<td>Stores information about an application (or <em>client</em> in OIDC OAuth2 terminology). For example, the URL for the application home page (any value that Auth0 doesn’t set in the application settings).</td>
</tr>
</tbody>
</table>

## メタデータを管理する

You can create and update metadata using Rules, the Authentication API, the <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>, the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip>, and the Lock library.

カスタムソーシャル接続のカスタムDBスクリプトと`fetchUserProfile`スクリプトでは、メタデータの作成と更新に`metadata`オブジェクトを使うことができます。

### アクションを使用する

[Actions](/docs/customize/actions) are secure, tenant-specific, versioned functions written in Node.js that execute at certain points within the Auth0 platform. Actions are used to customize and extend Auth0's capabilities with custom logic. They can also be used to [enrich the user profile](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger#enrich-the-user-profile).

For example, you can create a `post-login` Action that uses custom claims to copy `user_metadata` properties to <Tooltip tip="ID Token: Credential meant for the client itself, rather than for accessing a resource." cta="View Glossary" href="/docs/glossary?term=ID+tokens">ID tokens</Tooltip>. You can then retrieve users' `user_metadata` through the [Get User Info](https://auth0.com/docs/api/authentication#get-user-info) endpoint of the Authentication API.

To learn more, read [Manage User Metadata with the post-login Action Trigger](/docs/manage-users/user-accounts/metadata/manage-user-metadata).

### Management APIを使用する

A user can request an <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=access+token">access token</Tooltip> with the appropriate scopes and use the following [Management API](https://auth0.com/docs/api/management/v2) endpoints to view, create, or update `user_metadata`, or remove an <Tooltip tip="Multi-factor authentication (MFA): User authentication process that uses a factor in addition to username and password such as a code via SMS." cta="View Glossary" href="/docs/glossary?term=MFA">MFA</Tooltip> configuration.

<table class="table"><thead>
<tr>
<th><strong>Task</strong></th>
<th><strong>Endpoint</strong></th>
<th><strong>Scope</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>View</td>
<td><a href="https://auth0.com/docs/api/management/v2#!/Users/get_users_by_id"><code>GET /api/v2/users/{id}</code></a></td>
<td><code>read:current_user</code></td>
</tr>
<tr>
<td>Create</td>
<td><a href="https://auth0.com/docs/api/management/v2#!/Users/post_users"><code>PATCH /api/v2/users/{id}</code></a></td>
<td><code>create:current_user_metadata</code></td>
</tr>
<tr>
<td>Update</td>
<td><a href="https://auth0.com/docs/api/management/v2#!/Users/patch_users_by_id"><code>PATCH /api/v2/users/{id}</code></a></td>
<td><code>update:current_user_metadata</code></td>
</tr>
<tr>
<td>Delete</td>
<td><a href="https://auth0.com/docs/api/management/v2#!/Users/delete_multifactor_by_provider"><code>DELETE /api/v2/users/{id}/multifactor/{provider}</code></a></td>
<td><code>update:users</code></td>
</tr>
</tbody>
</table>

An access token is required to call the Auth0 Management API. To learn more, read [Access Tokens for the Management API](https://auth0.com/docs/api/management/v2/tokens) and [Get Management API Tokens for SPAs](https://auth0.com/docs/api/management/v2/get-access-tokens-for-spas).

### Dashboardを使用する

Use the Auth0 Dashboard to configure application metadata which contains key/value pairs. To learn more, read [Configure Application Metadata](/docs/get-started/applications/configure-application-metadata).

### ロックライブラリーを使用する

Use the [Lock](/docs/libraries/lock) library to define, add, read, and update `user_metadata.` Read `user_metadata` properties the same way you would read any other user profile property. For example, the following code snippet retrieves the value associated with `user_metadata.hobby` and assigns it to an element on the page:

```javascript lines
// Use the accessToken acquired upon authentication to call getUserInfo
lock.getUserInfo(accessToken, function(error, profile) {
  if (!error) {
    document.getElementById('hobby').textContent = profile.user_metadata.hobby;
  }
});
```






You can use `additionalSignUpFields` to add custom fields to user sign-up forms. When a user adds data in a custom field, Auth0 stores entered values in that user's `user_metadata`. To learn more about adding `user_metadata` on signup, read [Additional Signup Fields](/docs/libraries/lock/lock-configuration#additionalsignupfields-array-).

## カスタムメールとメタデータ

If you have a [custom database connection](/docs/authenticate/database-connections#using-your-own-user-store), you can use the Authentication API [`/dbconnections/signup`](https://auth0.com/docs/api/authentication?shell#signup) endpoint to set the `user_metadata` for a user. To learn more about working with metadata during a custom signup process, read [Custom Signup](/docs/libraries/custom-signup).

ロックで問題が発生した場合には、「[非推奨エラー](/troubleshoot/troubleshoot-basic/check-deprecation-errors)」を確認してください。Management APIで問題が発生した場合には、「[API呼び出しをチェックする](/troubleshoot/troubleshoot-authentication/check-api-calls)」を参照してください。

## Custom emails and metadata

Use metadata to store information that you want to use to customize Auth0 emails. For example, use `user_metadata.lang` if you want the user to be able to change the field's value, then use the information to customize the language for an email. To learn more, read [Customize Email Templates](/docs/customize/email/email-templates).

If you are having issues with Lock, review [Deprecation Errors](/docs/troubleshoot/basic-issues/check-deprecation-errors). If you are having issues with the Management API, review [Check API Calls](/docs/troubleshoot/authentication-issues/check-api-calls)

## Learn more

* [Metadata Field Names and Data Types](/docs/manage-users/user-accounts/metadata/metadata-fields-data)
* [Manage Metadata with Rules](/docs/manage-users/user-accounts/metadata/manage-metadata-rules)
* [Manage Metadata Using the Management API](/docs/manage-users/user-accounts/metadata/manage-metadata-api)
* [Manage Metadata with Lock](/docs/manage-users/user-accounts/metadata/manage-metadata-lock)
* [Configure Application Metadata](/docs/get-started/applications/configure-application-metadata)
* [Manage User Metadata with the post-login Action Trigger](/docs/manage-users/user-accounts/metadata/manage-user-metadata)