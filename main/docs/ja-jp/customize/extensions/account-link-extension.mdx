---
og:description: Learn about the Account Link extension, which allows users with two
  accounts with the same email to be prompted to link them.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Account Link拡張機能
og:url: https://auth0.com/docs/
permalink: account-link-extension
title: Account Link拡張機能
twitter:description: Learn about the Account Link extension, which allows users with
  two accounts with the same email to be prompted to link them.
twitter:title: Account Link拡張機能
---

Account Link拡張機能は、誤って2つめのアカウントを作成した可能性のあるユーザーに対して、最初のログイン時に新しいアカウントと古いアカウントをリンクするよう促す画面を表示します。ユーザーは、2つのアカウントをリンクすることも、2つ目のアカウント作成が意図したものであれば別々にしておくことも、選べます。

## 拡張機能の仕組み

The extension triggers after authentication when the email address of the user who authenticated matches the email address of an existing user account attached to a different <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+provider">identity provider</Tooltip>.

たとえば、ユーザーが`john@acme.com`というメールアドレスを使用してFacebookアカウントでログインした後に、同じメールアドレスを使用してGoogleで認証した場合、以下のようなページが表示されます。

<Frame>![Dashboard - Extensions - Account Link - Extension Example](/images/cdy7uua7fh8z/5K3KBOkhyP1SbAVaYg1yxD/618568208eca3cd15000d716ae9a1e00/account-linking-extension.png)</Frame>

この拡張機能は、たとえ検証済みのメールアドレスであっても、同じメールを持つユーザーを自動的にリンクすることはありません。検証済みのメールだけでは、そのユーザーが現在も両方のアカウントで認証できることを証明するには不十分だからです。

ユーザーが**［Continue（続行）］**を選択すると、認証のためにFacebookにリダイレクトされます。ユーザーがすでにログインしている場合は、Facebookがユーザーをアプリケーションにリダイレクトで戻し、ユーザーは自動的にリンクされます。ログインしていない場合は、Facebookの資格情報を使って認証するよう求める画面が表示されます。FacebookがユーザーをAuth0にリダイレクトで戻した後に、FacebookアカウントがGoogleアカウントとリンクされます。このプロセスにより、ユーザーが両方のアカウントで認証用の資格情報を持っていることが保証され、アカウントを安全かつ正しくリンクできます。

### 制限事項

Note that the extension does not support <Tooltip tip="Passwordless: Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=passwordless">passwordless</Tooltip> connections, flows started using device authorization, or the <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=SAML">SAML</Tooltip> and WS-federation protocols. For connections not supported by the Account Link extension, see [Account Linking – Server-Side Implementation](/docs/manage-users/user-accounts/user-account-linking/suggested-account-linking-server-side-implementation) and [User Initiated Account Linking – Client-Side Implementation](/docs/manage-users/user-accounts/user-account-linking/user-initiated-account-linking-client-side-implementation) as alternative options.

## 拡張機能をインストールして構成する

Go to [Auth0 Dashboard > Extensions](https://manage.auth0.com/#/extensions), and select **Auth0 Account Link**. The **Install Extension** window opens.

テストするには、[こちらのプロジェクト]()を使用してサンプルのReactシングルページアプリケーションを作成します。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

If you rotate your application client secret associated with the Account Link Extension, you need to uninstall the extension, reinstall, and reconfigure with the new application secret.

</Callout>

To test, create a React Sample Single Page Application with [this project](https://github.com/auth0-samples/auth0-link-accounts-sample.git).

アカウントをリンクさせるには、**［Continue（続行）］**を選択します。

Add `http://localhost:3000` in the “Allowed Callback URLs”, “Allowed Logout URLs”, “Allowed Web Origins” field.

Log in to `http://localhost:3000` and select a connection. Enter an email address that is already associated with a verified user with a different type of connection.

拡張機能をセットアップする

Once logged in, check the user details on the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+dashboard">Auth0 dashboard</Tooltip>, we can see the user accounts are linked.

## 拡張機能に使用するデフォルトのアプリケーション名は、ユーザーがプライマリアカウントで認証するときに**ログインページ**に表示されるため、たとえば「`Account Linking`」など、顧客にわかりやすくて読み取りやすい名前に変更することをお勧めします

### ログインページを更新する

Auth0のユニバーサルログインを使用すると、デフォルトでは、通常期待される通り、ユーザーはログインとサインアップの両方を行うことができます。しかし、アカウントリンク機能によって新しいアカウントとリンクするためにプライマリアカウントの認証が求められる場合、同時にサインアップオプションが提示されるとユーザーの混乱を招きます。

### ユニバーサルログインでの対処方法について詳しくは、「[Auth0ユニバーサルログイン](/login/universal-login)」をご覧ください。

By default, Auth0's <Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip> allows a user to both log in and sign up, as one may expect. However, when the account linking asks you to authenticate your primary account in order to link it with the new account, providing a signup option can be confusing for users.

To learn more about what you can do with Universal Login, see [Auth0 Universal Login](/docs/authenticate/login/auth0-universal-login).

拡張機能のページをデフォルトのテーマと違う外観にカスタマイズしたい場合は、インストール時に（または任意のタイミングでAccount Link拡張機能の**設定**アイコンから）、カスタムスタイルシートにURLを追加します。

1. Go to [Auth0 Dashboard > Branding > Universal Login](https://manage.auth0.com/#/login_settings), and select the **Login** view.
2. Enable the **Customize Login Page** switch to enable the custom editor below. In the editor, we're going to add a new line to the Lock config.
3. Toward the bottom of the object configuring the Lock widget, add the following line (after the `closable` setting):
   `allowSignUp: !config.extraParams.prevent_sign_up,`

   <Frame>![Dashboard - Branding - Universal Login - Login Setting - Account Link Hosted Page Code Example](/images/cdy7uua7fh8z/7gejLGgQB5hoLPqEAJXY5w/54168b097c99c4fd6def989d5b7fe545/Universal_Login_-_Login_-_English.png)</Frame>
4. Save your changes and attempt to link an account. You'll notice that the **Sign Up** option is no longer present and your users are safe from an extra level of confusion.

   <Frame>![Account Link Hosted Page Example](/images/cdy7uua7fh8z/5LHWcm49M29Y00rI5xDaZV/773621dc56b4bff67ea618b2c919f750/hosted-page-example.png)</Frame>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Hiding the Signup link is not supported in the Universal Login Experience.

</Callout>

## 管理パネル

アカウントリンクのログインページとウィジェットは、拡張機能の管理パネルでカスタマイズできます。

<Frame>![Account Link Customize Theme](/images/cdy7uua7fh8z/2as3Sx9y6UB0tyIuyJikR7/ee4ce139c19a0c2b8125e28b9059939e/extension-page-example.png)</Frame>

## カスタムドメイン

カスタムドメインをご利用の場合は、カスタムドメイン（たとえば`auth.custom.com`）を使って構成ルール`customDomain`を設定する必要があります。

1. Go to [Dashboard > Extensions > Installed Extensions > Auth0 Account Link](https://manage.auth0.com/#/extensions/installed).
2. You will be redirected to the admin site. There you can edit the HTML code of your hosted page and change some settings of the account linking widget such as title, logo, color, and language.

   <Warning>

   Do not remove `{{ ExtensionCSS }}`, `{{ CustomCSS }}`, `{{ Auth0Widget }}`, or `{{ ExtensionScripts }}` from the HTML code of the site. This will cause the extension to not display the account linking widget.

   </Warning>

## URLのプロトコル部分は必ず除いてください。

If you're using a <Tooltip tip="Custom Domain: Third-party domain with a specialized, or vanity, name." cta="View Glossary" href="/docs/glossary?term=custom+domain">custom domain</Tooltip>, you'll need to set the configs rule `customDomain` with the custom domain (for example, `auth.custom.com`).

1. Go to [Auth0 Dashboard > Auth Pipeline > Rules](https://manage.auth0.com/#/rules).
2. By default, line 27 of the rule is:
   `issuer: auth0.domain`You will need to change this to:
   `issuer: "myCustomDomain.com"
   Make` sure to omit the protocol portion of the URL.

## Learn more

* [User Account Linking](/docs/manage-users/user-accounts/user-account-linking)
* [Link User Accounts](/docs/manage-users/user-accounts/user-account-linking/link-user-accounts)
* [User Account Linking: Server-Side Implementation](/docs/manage-users/user-accounts/user-account-linking/suggested-account-linking-server-side-implementation)
* [User-Initiated Account Linking: Client-Side Implementation](/docs/manage-users/user-accounts/user-account-linking/user-initiated-account-linking-client-side-implementation)
* [Migrate to Access Tokens for Account Linking](/docs/troubleshoot/product-lifecycle/past-migrations/link-user-accounts-with-access-tokens-migration)