---
og:description: Learn about the User Import/Export extension, which allows you to
  import and export users from or to any database you have configured in your account.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ユーザーのインポート/エクスポート拡張機能
og:url: https://auth0.com/docs/
permalink: user-import-export-extension
title: ユーザーのインポート/エクスポート拡張機能
twitter:description: Learn about the User Import/Export extension, which allows you
  to import and export users from or to any database you have configured in your account.
twitter:title: ユーザーのインポート/エクスポート拡張機能
---

**［User Import / Export Extension（ユーザーインポート/エクスポート拡張機能）］**を使用すると、次のことが可能になります：

* 既存のデータベースユーザーをAuth0に一括インポートする
* Auth0データベースユーザーの何人か（または全員）を検索またはエクスポートする

インポートおよびエクスポートできるユーザープロファイルフィールドの一覧については、[ユーザープロファイル属性](/users/user-profiles/user-profile-structure)を参照してください。

この拡張機能を使用するには、Dashboard Adminでなければなりません。

## 拡張機能をインストールする

この拡張機能をインストールするには、[Auth0 Dashboard>Extensions](%24%7Bmanage_url%7D/#/extensions)に移動し、**［User Import / Export（ユーザーのインポート/エクスポート）］**を選択します。

拡張機能をインストールする前に追加の構成は必要ないため、情報ポップアップウィンドウで**［Install（インストール）］**を選択して続行します。

## 拡張機能を使用する

拡張機能をインストールすると、インストール済み拡張機能のリストに表示されます。**［Import / Export Extension（インポート/エクスポート拡張機能）］**をクリックして起動します。



初めて拡張機能を起動すると、リストにあるアクティビティについて、拡張機能がAuth0アカウントにアクセスすることを許可するかが尋ねられます。

**［check mark（チェックマーク）］**をクリックして続行します。

拡張機能では以下の2つを行うことができます。

* 既存のデータベースユーザーをAuth0に一括インポートする
* Auth0データベースユーザーの何人か（または全員）を検索またはエクスポートする

これらのユースケースについては以下で詳しく説明します。

### ユーザーをインポートする

デフォルトでは、拡張機能を開くたびに、**［User Import（ユーザーインポート）］**画面が表示されます（エクスポート画面の場合は、左側のナビゲーションバーの**［Import（インポート）］**をクリックしてこの画面に戻ることができます）。

ユーザーをインポートするには、有効なJSONファイル（[スキーマと例はこちら](/users/import-and-export-users/bulk-user-import-database-schema-and-examples)）を**［Drop your file here, or click to select（ここにファイルをドロップまたはクリックして選択）］**のエリアにドラッグアンドドロップします。または、この領域の任意の場所をクリックし、適切なJSONファイルを探して選択することもできます。JSONファイルには、インポートしたいユーザーのリストが含まれている必要があります。



ユーザーのインポート先になるデータベース接続を選択します。選択する接続が、少なくとも1つのアプリケーションで有効になっていることを確認してください。

インポートプロセスを開始するには、**［Start Importing Users（ユーザーのインポートを開始）］**をクリックします。

完了すると、次の**［Completed（完了）］**メッセージが表示されます。

ユーザーをインポートしたら、[Auth0 Dashboard>User Management>Users](%24%7Bmanage_url%7D/#/users)を使用して個別に管理できます。

### ユーザーをエクスポートする



データベース接続に関連付けられている既存のAuth0ユーザーをエクスポートするには、**［Export（エクスポート）］**を選択します。

**［User Fields（ユーザー フィールド）］**では、エクスポートに含めるユーザー属性または式を決定できます。ユーザー属性は、`user.user_metadata.name`のような静的な値にすることも、`user.user_metadata.name || user.name` のようなJavaScript式にすることもできます。式はエクスポートの実行時に評価されます。**column name**の値は、エクスポートで値がどのように表現されるかを示します。

**［Add Default Fields（デフォルトフィールドの追加）］**ボタンをクリックすると、デフォルトフィールドが自動的に選択され、列名が入力されます（これは、パラメーター/式がどのように表示されるかを視覚化するのにも適した方法です）。

関連する**［trash can（ゴミ箱）］**アイコンをクリックすると、不要な属性/式を削除できます。

**［Settings（設定）］**では次のことができます：

* ユーザーを並べ替える**［User Attribute（ユーザー属性）］**（およびユーザーを昇順または降順で並べ替えるかどうか）を指定して、エクスポートされたユーザーのリスト方法を設定します。
* **［Export Format（エクスポート形式）］**を選択します。JSONファイルとCSVファイルから選択できます。

準備ができたら、**［Export X Users（Xユーザーのエクスポート）］**をクリックします（`X`はエクスポートするユーザーの数です）。

エクスポートが完了したら、ユーザーのファイルをダウンロードすることができます。

## ユーザーの更新

Auth0 Management APIでは、ユーザーインポート/エクスポート拡張機能を使用して、`user_metadata`および `app_metadata`へのユーザープロファイルの一括更新が可能です。



### ユーザーをエクスポートする

[上記のエクスポートプロセス](https://auth0.com/docs/customize/extensions/user-import-export-extension#export-users)を使用して、すべてのユーザー属性を含む完全なエクスポートファイルを作成します。

エクスポート形式にJSON形式を選択します。

エクスポートが完了したら、ユーザーのファイルをダウンロードします。

### 構成を更新する

前の手順でダウンロードしたJSONファイルの**［copy（コピー）］**を作成します。



複製したJSONファイルをテキストエディターで開きます。以下のようなユーザースキーマになっているはずです。



ユーザーのメールアドレスは、データベースでユーザーの検索キー（lookup key）となっているため、変更しないでください。



属性を追加するには、各ユーザースキーマに新しいフィールドを作成し、値で更新します。以下の例では、「Family Name（姓）」属性に「Smith（スミス）」の値があり、新しい属性の後にカンマ（「,」）があります。

複数のユーザーに`email_verified`属性を追加し、値を`true`に設定することもできます。



変更をユーザーファイルに保存します。



### 更新したユーザープロファイルのデータをインポートする

`users-import`エンドポイントを使用すると、更新されたユーザープロファイルファイルをアップロードし、1つのジョブで複数のユーザーを更新できます。[インポートユーザーのジョブの作成エンドポイント](https://auth0.com/docs/api/management/v2/#!/Jobs/post_users_imports)に移動します。

ユーザーパラメーターにユーザーファイルを追加して、更新したいデータベースのデータベース接続を追加します。

既存のユーザー情報を更新するには、upsert値を`true`にする必要があります。更新を追加するには、**［Try（試す）］**を選択するか、Postmanを使用してユーザーをインポートします。

`job_id`を使用して、`jobs`[エンドポイント](https://auth0.com/docs/api/management/v2/#!/Jobs/get_jobs_by_id)のステータスを確認します。