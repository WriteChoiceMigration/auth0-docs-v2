---
og:description: Learn how to use the Delegated Administration Extension (DAE) to expose
  the Users section of the Auth0 Dashboard to a select group of users without allowing
  them access to the rest of the Dashboard.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 委任管理拡張機能v3
og:url: https://auth0.com/docs/
permalink: delegated-administration-extension
title: 委任管理拡張機能v3
twitter:description: Learn how to use the Delegated Administration Extension (DAE)
  to expose the Users section of the Auth0 Dashboard to a select group of users without
  allowing them access to the rest of the Dashboard.
twitter:title: 委任管理拡張機能v3
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0 recommends that you use the Tenant Members settings to designate tenant usage capabilities to other users and admins in your organization. To learn more, read [Dashboard Access](/docs/get-started/manage-dashboard-access).

</Callout>

委任管理拡張機能（DAE）を使うと、他の領域へのアクセスを許可することなく、選択したユーザーグループに管理者権限を付与できるようになります。

## DAEを構成する

DAEを構成するには、必ず以下を行います。

1. [Register the application with Auth0](#register-the-application-with-auth0)
2. [Create a database connection](#create-a-database-connection)
3. [Disable all other connections for the Auth0 Application](#disable-all-other-connections-for-the-auth0-application)
4. [Create users for database connection](#create-user-for-the-database-connection)
5. [Assign roles to users](#assign-roles-to-users)
6. [Install and configure the extension](#install-and-configure-the-extension)
7. [Use the extension](#use-the-extension)

### Auth0でアプリケーションを登録する

Create the Application that the Delegated Administration Extension will expose to those who should have administrative privileges for the Users page. To do this, [create a delegated admin application](/docs/customize/extensions/delegated-administration-extension/create-delegated-admin-applications) in Auth0.

When finished, note the application's **<Tooltip tip="Client ID: Identification value given to your registered resource from Auth0." cta="View Glossary" href="/docs/glossary?term=Client+ID">Client ID</Tooltip>**.

### データベース接続を作成する

In this example, a database connection will serve as the source of your users who are allowed access to the Users area. To configure this, [create a database connection](/docs/get-started/applications/set-up-database-connections).

接続をセットアップする際には以下を行います。

* `HelpDesk`など、適切な接続名を使用する
* **［Disable Sign Ups（サインアップを無効にする）］**を有効にするこれにより、セキュリティ保護のため、データベース接続へのリンクを持っているユーザーでも自分自身をサインアップすることができなくなります。

### Auth0のアプリケーションで他のすべての接続を無効にする

デフォルトでは、新しいアプリケーションを作成するときに、テナントに関連付けられたすべての接続が有効化されます。この例では、新しく作成したデータベース接続以外の接続をすべて無効にします。これにより、既存の接続を使って自分自身を追加できなくなるため、アプリケーションのセキュリティ保護に役立ちます。

To configure this, [update application connections](/docs/get-started/applications/update-application-connections).

### データベース接続にユーザーを作成する

To continue, you must [create at least one user](/docs/manage-users/user-accounts/create-users) and attach it to your connection.

### ユーザーにロールを割り当てる

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Although the [Delegated Administration Extension (DAE)](/docs/customize/extensions/delegated-administration-extension) and the [Authorization Core](/docs/manage-users/access-control/rbac) feature set are completely separate features, you can use the Authorization Core feature set to create and manage roles for the DAE using Actions. To learn how, see [Sample Use Cases: Actions with Authorization](/docs/manage-users/access-control/sample-use-cases-actions-with-authorization).

</Callout>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

When logging in as a user using Organizations with Delegated Administration Extension (DAE), your user roles will not be available. Only your Organization member roles will be available within `event.authorization.roles.` To add roles to Organization members, read [Add Roles to Organization Members](/docs/manage-users/organizations/configure-organizations/add-member-roles).

</Callout>

Auth0は、接続に関連付けられたユーザーに対して、そのロールに基づき委任管理拡張機能（DAE）へのアクセスを付与します。DAEに特化したロールは以下の通りです。

<table class="table"><thead>
<tr>
<th>This role...</th>
<th>Grants permission to...</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Delegated Admin - User</code></td>
<td>Search for users, create users, open users, and execute actions on users (such as delete or block).</td>
</tr>
<tr>
<td><code>Delegated Admin - Administrator</code></td>
<td>Do everything that the Delegated Admin - User can, plus see all logs in the tenant and configure Hooks.</td>
</tr>
<tr>
<td><code>Delegated Admin - Auditor</code></td>
<td>Search for users and view user information, but not make changes. Action-based buttons are not visible to this role.</td>
</tr>
<tr>
<td><code>Delegated Admin - Operator</code></td>
<td>Access user management and logs, but not the extension configuration section.</td>
</tr>
</tbody>
</table>

When working with roles, we recommend that you use the [Authorization Core](/docs/manage-users/access-control/rbac) feature set:

1. [Create DAE roles](/docs/manage-users/access-control/configure-core-rbac/roles/create-roles). The names of the roles you create must match the names of the pre-defined DAE roles above.
2. [Assign DAE roles to a user manually](/docs/manage-users/access-control/configure-core-rbac/rbac-users/assign-roles-to-users).
3. Add user roles to the DAE namespace in the ID Token using [Actions](/docs/customize/actions)**:**

   ```text lines
   exports.onExecutePostLogin = async (event, api) => {
     const namespace = `https://{yourTenant}/auth0-delegated-admin`;
     if (event.client.client_id === 'CLIENT_ID' && event.authorization) {
       api.idToken.setCustomClaim(namespace, { "roles": event.authorization.roles });
     }
   };
   ```


   

   

Remember to replace the `CLIENT_ID` placeholder with your delegated admin application's **Client ID** andreplace `{yourTenant}` with your tenant name. For example, if your tenant's name is "tenant_name_example", the namespace would be: `https://tenant_name_example/auth0-delegated-admin`

To learn more about creating Actions, read [Write Your First Action](/docs/customize/actions/write-your-first-action)

<Warning>

Auth0 returns profile information in a structured claim format as defined by the [OpenID Connect (OIDC) specification](https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims). This means that custom claims added to ID tokens or access tokens must [conform to guidelines and restrictions](/docs/secure/tokens/json-web-tokens/create-custom-claims) to avoid possible collisions.

</Warning>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Using Authorization Core will define roles in the `context.authorization` object.

If you choose not to use Authorization Core, you should define DAE roles in one of the following fields on the user profile:

* `user.app_metadata.roles`
* `user.app_metadata.authorization.roles`

</Callout>

## これでアプリケーション、接続、およびユーザーの作成と構成が終わったので、[委任管理拡張機能をインストールして構成](/extensions/delegated-administration-extension/install-delegated-admin-extension)することができます。

Now that we've created and configured an application, a connection, and our user, we can [install and configure the Delegated Admin Extension](/docs/customize/extensions/delegated-administration-extension/install-delegated-admin-extension) itself.

## インストールしたら、委任管理拡張機能（DAE）を使用する準備が整います。

地域に応じた適切なログインリンクとテナントの拡張ランタイムを使って拡張機能へ移動します。

新しいタブが開いて、ログイン画面が表示されます。

<table class="table"><thead>
<tr>
<th>Location</th>
<th>Name</th>
<th>Login Link</th>
</tr>
</thead>
<tbody>
<tr>
<td>Australia</td>
<td>AU</td>
<td>`https://{yourTenant}.au.webtask.io/auth0-delegated-admin`</td>
</tr>
<tr>
<td>Europe</td>
<td>EU</td>
<td>`https://{yourTenant}.eu.webtask.io/auth0-delegated-admin`</td>
</tr>
<tr>
<td>Europe</td>
<td>EU-2</td>
<td>`https://{yourTenant}.eu.webtask.run/auth0-delegated-admin`</td>
</tr>
<tr>
<td>Japan</td>
<td>JP-1</td>
<td>`https://{yourTenant}.jp.webtask.run/auth0-delegated-admin`</td>
</tr>
<tr>
<td>UK</td>
<td>UK</td>
<td>`https://{yourTenant}.uk.webtask.run/auth0-delegated-admin`</td>
</tr>
<tr>
<td>USA</td>
<td>US-1</td>
<td>`https://{yourTenant}.us.webtask.io/auth0-delegated-admin`</td>
</tr>
<tr>
<td>USA</td>
<td>US-3</td>
<td>`https://{yourTenant}.us.webtask.run/auth0-delegated-admin`</td>
</tr>
</tbody>
</table>

この例では、構成時にデータベース接続のサインアップを無効にしたため、ログイン画面には**［Sign Up（サインアップ）］**オプションは表示されません。有効な資格情報を入力すると、カスタムの**［Delegated Administration Dashboard（委任管理ダッシュボード）］**ページにリダイレクトされます。このページには、指定された**タイトル**が上部に表示され、（カスタムCSSファイルを指定している場合は）デザインが反映されます。

Because (in this example) we disabled signups for the database connection while configuring it, the login screen does not display a **Sign Up** option.
Once you provide valid credentials, Auth0 directs you to your custom **Delegated Administration Dashboard** page, which has the **Title** you provided at the top of the page and (if you provided a custom CSS file), your design.

<Card title="Delegated Administration session timeout">

By default, token expiration time is 10 hours. However, for security reasons, when using Delegated Administration, Auth0 doesn't save a token to cookies or `sessionStorage`. You must start a new session on each page reload.

</Card>

## Learn more

* [Delegated Administration: Extension Hooks](/docs/customize/extensions/delegated-administration-extension/delegated-administration-hooks)
* [Delegated Administration: Manage Users](/docs/customize/extensions/delegated-administration-extension/delegated-administration-manage-users)