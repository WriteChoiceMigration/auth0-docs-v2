---
og:description: Learn how to configure the Authorization Extension.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 認可拡張機能の構成
og:url: https://auth0.com/docs/
permalink: configure-authorization-extension
title: 認可拡張機能の構成
twitter:description: Learn how to configure the Authorization Extension.
twitter:title: 認可拡張機能の構成
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0 provides two ways to implement role-based access control (RBAC), which you can use in place of or in combination with your API's own internal access control system:

* [Authorization Core](/docs/manage-users/access-control/rbac)
* [Authorization Extension](/docs/customize/extensions/authorization-extension)

The Authorization Core feature set matches the functionality of the Authorization Extension, improves performance and scalability, and provides a more flexible RBAC system than the Authorization Extension.

Currently, both implement the key features of RBAC and allow you to restrict the custom scopes defined for an API to those that have been assigned to the user as permissions.

</Callout>

Before the extension can enforce your authorization logic, you need to configure how it will behave during the login transaction. Your configuration settings will be captured in a [rule](/docs/customize/rules) that executes during runtime.

## 前提条件

[Install the Authorization Extension](/docs/customize/extensions/authorization-extension/migrate-to-authorization-extension-v2)

## 拡張機能を構成

1. Go to [Auth0 Dashboard > Extensions](https://manage.auth0.com/#/extensions), and select **Auth0 Authorization**.
2. Choose **Configuration** at the top right of the **Authorization Dashboard**.

   <Frame>![Dashboard - Authorization Extension Dashboard - Configuration](/images/cdy7uua7fh8z/r8Ic6OYMcVfXDvIKePLrb/ed9c75536d20c12149e8b8e62a8edc44/click-configuration.png)</Frame>
3. This brings you to the **Rule Configuration** section of the **Configuration** page. All of the changes you make in the sections under **Token Contents**, such as those related to groups, roles, and permissions, will be reflected in the rule you export at the completion of this step.

   <Frame>![Authorization Extension Configuration](/images/cdy7uua7fh8z/4ydHJBdKGs4XVLnRst66A3/1f61ad2e087252c6c3aa10add13d99cd/configuration0auth.png)</Frame>

### ApiKey（Apiキー）

ルールは、ApiKeyを使用してAuthorization Extension API（認可拡張機能API）と通信し、ポリシーを取得します。ApiKeyはルール構成として保存され、ルールが公開されると自動的に作成されます。ApiKeyを回転するには、**［Rotate（ローテーション）］**ボタンをクリックします。ApiKeyが回転すると、ルール構成が自動的に更新されます。

## 発行されたトークンに認可情報を追加

グループやロール、権限などの認可データを、Auth0発行の送信されるトークンに保管することができます。アプリケーションはトークンを検査してこの情報を利用し、ユーザーの現在の認可コンテキストに基づいて適切な処置を行うことができます。

送信トークンにグループ、ロール、および権限情報を追加するには、含めるオプションの横にあるスライダーを有効にします。

<Warning>

Storing too much data in the token may cause performance issues or even prevent the issuance of the token. Be sure to store only what you need. If you need a large amount of user data readily available, consider using persistence instead of adding the data to the token.

</Warning>

### IdPからの認可データのマージ

You might have users that receive groups, roles, or permissions from the <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+provider">identity provider</Tooltip> (IdP) you're using, such as Active Directory. If you want to merge these items (to preserve them) with the ones defined in the Authorization Extension, make sure you enable the appropriate **Passthrough** options. Enable the slider next to the appropriate merges you want enabled.

### ユーザープロファイルに認可情報を保存

認可コンテキストが大きい場合（たとえば、ユーザーが多くのグループに属している場合や、多くの権限が付与されている場合などです。）、認可コンテンツの一部をユーザーのプロファイルに保存すると便利な場合があります。これにより、トークンに保存する情報が少なくなり、パフォーマンス関連の問題やトークン発行の問題が発生する可能性が低くなります。**［Persistence（永続化）］**は、グループ、ロール、および権限情報をユーザーのプロファイルに保存するプロセスです。

The data will be stored in the user's `app_metadata` field, and you can then use the <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip> or the [Dashboard](https://manage.auth0.com/#/users) to retrieve this information after the user has logged in.

<Frame>![Authorization Extension - Configuration - Persistence](/images/cdy7uua7fh8z/5kfgcLhwwZkQ2Oh5uxaGxF/de5cf05429d1d1730a0165f4c61ac629/persistence.png)</Frame>

## ルールの変更を保存

ルールを構成したら、**［Publish Rule（ルールの公開）］**をクリックします。これにより、各ユーザーログイン後に実行されるテナントのルールが作成されます。

### ルールを表示

If you'd like to see the rule you've created, you can do so at [Auth0 Dashboard > Auth Pipeline > Rules](https://manage.auth0.com/#/rules).

ルールを開くと、正確なルール構成を確認できます。

## Learn more

* [Import and Export Authorization Extension Data](/docs/customize/extensions/authorization-extension/import-and-export-authorization-extension-data)
* [Enable API Access to Authorization Extension](/docs/customize/extensions/authorization-extension/enable-api-access-to-authorization-extension)
* [Use Rules with the Authorization Extension](/docs/customize/extensions/authorization-extension/use-rules-with-the-authorization-extension)
* [Set Up Users in Authorization Extension Dashboard](/docs/customize/extensions/authorization-extension/set-up-authorization-extension-users)
* [Troubleshoot Authorization Extension](/docs/troubleshoot/authentication-issues/troubleshoot-authorization-extension)
* [Migrate to Authorization Extension v2](/docs/customize/extensions/authorization-extension/migrate-to-authorization-extension-v2)