---
og:description: Learn how to configure custom domains where you are responsible for
  TLS (SSL) certificates, the reverse proxy to handle SSL termination, and forwarding
  requests to Auth0.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 自己管理証明書を使ってカスタムドメインを構成する
og:url: https://auth0.com/docs/
permalink: self-managed-certificates
title: 自己管理証明書を使ってカスタムドメインを構成する
twitter:description: Learn how to configure custom domains where you are responsible
  for TLS (SSL) certificates, the reverse proxy to handle SSL termination, and forwarding
  requests to Auth0.
twitter:title: 自己管理証明書を使ってカスタムドメインを構成する
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

You must have an Enterprise subscription to manage certificates in your custom domain. To learn more, read [Auth0 Pricing](https://auth0.com/pricing/) and [Login](/docs/authenticate/login).

</Callout>

If you choose to manage the certificates for your <Tooltip tip="Custom Domain: Third-party domain with a specialized, or vanity, name." cta="View Glossary" href="/docs/glossary?term=custom+domains">custom domains</Tooltip> without assistance from Auth0, you need to know how to manage your own proxy and certificates for inbound connections that require multiple DNS records on the domain. You have to purchase or provide the certificates and manage the renewals yourself. You will also need a reverse proxy where the certificate will be installed. Once the domain is verified, we will accept traffic from the proxy.

以下の操作を行うために、このオプションを選択してください。

* 証明書をより細かく制御する（独自のCAまたは証明書の有効期限を選択するなど）
* Auth0へのAPI呼び出しの詳細なモニタリングを有効にする

自己管理証明書を使ってカスタムドメインを設定するには、ドメイン名をAuth0に提供し、そのドメインを所有していることを確認し、リバースプロキシを構成する必要があります。カスタムドメインを設定したら、使い始められるようにAuth0機能を構成する必要があります。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Your proxy to Auth0 must use TLS (SSL) version 1.2 or newer.

</Callout>

## ドメイン名をAuth0に渡します。

1. Go to [Dashboard > Settings > Custom Domains](https://manage.auth0.com/#/tenant/custom_domains) or [Dashboard > Branding > Custom Domains](https://manage.auth0.com/#/custom_domains). Enter your custom domain in the provided box, and select **Self-managed Certificates** from the drop-down menu.
2. Choose **Add Domain**.
   所有権を確認する

## Auth0でドメインを使用するには、先にドメインを所有していることを確認する必要があります。

DNS設定によっては、ドメインが確認されるまで数分かかることがあります。

1. Go to [Dashboard > Branding > Custom Domains](https://manage.auth0.com/#/branding/custom_domains).

   <Frame>![Auth0 Branding Custom Domains Self-Managed Certificate Verify Domain](/images/cdy7uua7fh8z/4XhEmQwKfoqydOldfHnnud/c63a58c72f79b4d19cd417f70ba262cc/Custom_Domains_-_Self_-_English.png)</Frame>
2. Add the TXT verification information to your domain's DNS record.
   Auth0がドメイン名を正常に検証すると、確認の画面が表示されます。

   1. Keep the Auth0 custom domain page open in your browser so you can copy values.
   2. Log in to your domain management service.
   3. Create a new record, and save it with these settings:

      <table class="table"><thead>
      <tr>
      <th><strong>Parameter</strong></th>
      <th><strong>Value</strong></th>
      </tr>
      </thead>
      <tbody>
      <tr>
      <td>Record type</td>
      <td>TXT</td>
      </tr>
      <tr>
      <td>Name</td>
      <td>Copy and paste your domain's <strong>TXT Record</strong> value from Auth0.</td>
      </tr>
      <tr>
      <td>Time to Live (TTL)</td>
      <td>Use default value.</td>
      </tr>
      <tr>
      <td>Value</td>
      <td>Copy and paste your domain's <strong>TXT Content</strong> value from Auth0.</td>
      </tr>
      </tbody>
      </table>
3. Click **Verify** to proceed.

   この画面に入力された情報（具体的には`cname-api-key`値）を保存してください。この値を表示できるのはこのとき**だけ**です。

   検証プロセスが完了したら、1～2分以内にカスタムドメインが使用できるようになるはずです。3日以内に検証プロセスを完了できない場合は、これらの手順を繰り返してください。
   リバースプロキシを構成する

   <Callout icon="file-lines" color="#0EA5E9" iconType="regular">

   For security purposes, this value is hashed when stored, so it cannot be recovered. If you fail to capture the `cname-api-key` at this time, you will have to recreate the custom domains.

   </Callout>

   リバースプロキシサーバーは、アプリケーションに代わって1つまたは複数のサーバーからリソースを取得します。この後、これらのリソースはアプリケーションに返され、元々プロキシサーバー自体にあったかのように見えます。

## [ディストリビューション](#distribution-settings)

[Origin custom headers（オリジンのカスタムヘッダー）](#origin-custom-header-settings)

You can use a service such as [Cloudflare](/docs/customize/custom-domains/self-managed-certificates/configure-cloudflare-for-use-as-reverse-proxy), [Azure CDN](/docs/customize/custom-domains/self-managed-certificates/configure-azure-cdn-for-use-as-reverse-proxy), [Google Cloud Platform](/docs/customize/custom-domains/self-managed-certificates/configure-gcp-as-reverse-proxy), or [AWS Cloudfront](/docs/customize/custom-domains/self-managed-certificates/configure-aws-cloudfront-for-use-as-reverse-proxy) and configure settings for your custom domain. You will add the new CNAME value to your DNS for your custom domain pointing to the reverse proxy server domain name for distribution.

1. After you've created the reverse proxy settings on your service, go to [Auth0 Dashboard > Branding > Custom Domains](https://manage.auth0.com/#/branding/custom_domains) tab.
2. Add a new CNAME record to your DNS for your custom domain pointing to the service domain name for your distribution. You can find this by looking for the **Distribution ID** on your reverse proxy server configuration.
   [Default cache behavior（デフォルトのキャッシュ動作）](#default-cache-behavior-settings)
3. The way you configure the proxy server will vary depending on the service you use. You will likely need to configure the following types of settings:

* ディストリビューション設定
* オリジンのカスタムヘッダー設定
* オリジンのホスト名設定
* カスタムドメインの詳細を取得する方法については、「[カスタムドメイン構成を取得する]()」をご覧ください。

### デフォルトのキャッシュ動作設定

<table class="table"><thead>
<tr>
<th><strong>Setting</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Origin Domain Name</td>
<td>Set this to the <strong>Origin Domain Name</strong> value obtained from the Auth0 Dashboard during the Custom Domains setup process.</td>
</tr>
<tr>
<td>Origin ID</td>
<td>A description for the origin. This value lets you distinguish between multiple origins in the same distribution and therefore must be unique.</td>
</tr>
<tr>
<td>Origin Protocol Policy</td>
<td>Set to <code>HTTPS Only</code>.</td>
</tr>
<tr>
<td>Alternate Domain Names (CNAMEs)</td>
<td>Set to your custom domain name (the same one your configured in the Auth0 Dashboard).</td>
</tr>
</tbody>
</table>

### 特定のAuth0機能で使用するその他の手順

<table class="table"><thead>
<tr>
<th><strong>Setting</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Header Name</td>
<td>Set to <code>cname-api-key</code>.</td>
</tr>
<tr>
<td>Value</td>
<td>Set to the CNAME API Key value that you were given immediately after you verified ownership of your domain name with Auth0.</td>
</tr>
</tbody>
</table>

### 使用しているAuth0機能に応じて、完了しなければならない手順がほかにもあります。詳細については、「[カスタムドメインを使用するために機能を構成する](/custom-domains/configure-features-to-use-custom-domains)」をお読みください。

<table class="table"><thead>
<tr>
<th><strong>Setting</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Origin hostname</td>
<td>Enter <code>\{yourTenant}-&lt;CUSTOM_DOMAIN_ID&gt;.edge.tenants.us.auth0.com</code>, making sure to replace <code>&lt;CUSTOM_DOMAIN_ID&gt;</code> with the value of the Origin Domain Name (custom domain ID) you received from Auth0 when setting up the new custom domain. If your tenants are not in the US region, use one of the following: <ul><li>EU: <code>\{yourTenant}-&lt;CUSTOM_DOMAIN_ID&gt;.edge.tenants.eu.auth0.com</code></li><li>AU: <code>\{yourTenant}-&lt;CUSTOM_DOMAIN_ID&gt;.edge.tenants.au.auth0.com</code></li><li>JP: <code>\{yourTenant}-&lt;CUSTOM_DOMAIN_ID&gt;.edge.tenants.jp.auth0.com</code></li></ul> For example, if your CUSTOM_DOMAIN_ID is:<br/><br/> <code>cd_TXIdNgQ07HrAFVmz</code> <br/><br/>For a US tenant, then the Origin hostname should be:<br/><br/><code>US: {yourTenant}-cd-txIdngq07hrafvmz.edge.tenants.us.auth0.com</code></td>
</tr>
<tr>
<td>Host header</td>
<td>Use the name you provided for the Origin hostname.</td>
</tr>
</tbody>
</table>

For more information on retrieving the details of your custom domain, see [Get custom domain configurations](https://auth0.com/docs/api/management/v2/custom-domains/get-custom-domains).

### Default cache behavior settings

<table class="table"><thead>
<tr>
<th><strong>Setting</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Viewer Protocol Policy</td>
<td>Select <strong>Redirect HTTP to HTTPS</strong>.</td>
</tr>
<tr>
<td>Allowed HTTP Methods</td>
<td>Select <strong>GET, HEAD, OPTIONS, PUT, POST, PATCH, DELETE</strong>.</td>
</tr>
<tr>
<td>Cache Based on Selected Request Headers</td>
<td>Select <strong>Allow list</strong>.</td>
</tr>
<tr>
<td>Allow List Headers</td>
<td>The following headers should be allowed: <code>User-Agent</code>, <code>Origin</code>, <code>Referer</code>, <code>Authorization</code>, <code>Accept</code>, and <code>Accept-Language</code>.</td>
</tr>
<tr>
<td>Forward Cookies</td>
<td>Select <strong>All</strong>.</td>
</tr>
<tr>
<td>Query String Forwarding and Caching</td>
<td>Select <strong>Forward all, cache based on all</strong>.</td>
</tr>
</tbody>
</table>

## Additional steps for specific Auth0 features

There are additional configuration steps you must complete depending on which Auth0 features you are using. To learn more, read [Configure Features to Use Custom Domains](/docs/customize/custom-domains/configure-features-to-use-custom-domains).

Cloudflare uses a feature called CNAME Flattening, which affects Auth0 verification and certificate renewal in the way that it handles DNS records. We recommend that you turn off CNAME Flattening unless it's absolutely necessary. To learn more, read [Cloudflare documentation](https://support.cloudflare.com/hc/en-us/articles/200169056-Understand-and-configure-CNAME-Flattening).

Because this feature puts you in control of your own certificates, you need to design mitigation strategies (like a web application firewall) for blocking requests in case of attacks. For more information, read [our blog](https://auth0.com/blog/the-future-of-bot-protection-smarter-attacks-demand-a-layered-approach/) about the future of bot protection.

## Learn more

* [Configure Features to Use Custom Domains](/docs/customize/custom-domains/configure-features-to-use-custom-domains)
* [Configure Google Cloud Platform with Load Balancing as Reverse Proxy](/docs/customize/custom-domains/self-managed-certificates/configure-gcp-as-reverse-proxy)
* [Configure Cloudflare as Reverse Proxy](/docs/customize/custom-domains/self-managed-certificates/configure-cloudflare-for-use-as-reverse-proxy)
* [Configure AWS CloudFront as Reverse Proxy](/docs/customize/custom-domains/self-managed-certificates/configure-aws-cloudfront-for-use-as-reverse-proxy)
* [Configure Azure CDN as Reverse Proxy](/docs/customize/custom-domains/self-managed-certificates/configure-azure-cdn-for-use-as-reverse-proxy)
* [Configure Akamai as Reverse Proxy](/docs/customize/custom-domains/self-managed-certificates/configure-akamai-for-use-as-reverse-proxy)