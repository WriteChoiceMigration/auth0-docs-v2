---
og:description: Learn how to use Auth0 to secure access to API proxies developed and
  managed by Apigee Edge.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Auth0でApigeeを保護する
og:url: https://auth0.com/docs/
permalink: apigee
title: Auth0でApigeeを保護する
twitter:description: Learn how to use Auth0 to secure access to API proxies developed
  and managed by Apigee Edge.
twitter:title: Auth0でApigeeを保護する
---

Apigee Edgeを使用してバックエンドサービスAPIを開発および管理する場合、Auth0を使用してAPIプロキシへのアクセスを保護できます。

## 前提条件

開始する前に、以下が必要です。

1. Have an Apigee Edge API proxy that needs to be secured. To learn more, read Apigee's [Get Started](https://docs.apigee.com/api-platform/get-started/get-started) article.
2. [Sign up](https://auth0.com/signup) for an account with Auth0.

APIプロキシを構築するプロセスについては、本記事では扱いません。すでにお持ちのAPIプロキシを、Auth0を使ってセキュリティ保護する方法に焦点を当ててご説明します。

## カスタムAPIを作成する

First, [register your Apigee Edge API Proxy using the Dashboard](/docs/get-started/auth0-overview/set-up-apis). Auth0 needs to recognize Apigee as an <Tooltip tip="Audience: Unique identifier of the audience for an issued token. Named aud in a token, its value contains the ID of either an application (Client ID) for an ID Token or an API (API Identifier) for an Access Token." cta="View Glossary" href="/docs/glossary?term=audience">audience</Tooltip> to make sure that any <Tooltip tip="Audience: Unique identifier of the audience for an issued token. Named aud in a token, its value contains the ID of either an application (Client ID) for an ID Token or an API (API Identifier) for an Access Token." cta="View Glossary" href="/docs/glossary?term=Access+Tokens">Access Tokens</Tooltip> issued are issued with the correct audience. The user authenticates with Auth0 via the application, and the application specifies this audience value to make sure that the Access Token possesses the right scopes for the audience provided.

次のことをする必要があります。

1. Provide a name for your API (e.g., `apigee`).
2. Provide an identifier for your API: `urn:apigee:target:api`
3. Choose a signing algorithm: `RS256` (default)

Apigee Edge APIプロキシを登録すると、Auth0が**マシンツーマシン（M2M）**アプリケーションも自動作成し、登録されたAPIと一致する名前を付けます。このアプリケーションはテストに使用することができ、API呼び出しのために認可されるように自動的に構成されます。

## テストアプリケーションから変数をメモしておく

APIを登録する際に作成されたテストアプリケーションに切り替え、APIの登録プロセスや関連するM2Mアプリケーションの作成中に設定された変数をメモしてください。このチュートリアルの後続の手順で必要になります。

1. Navigate to the [Auth0 Dashboard > Applications](https://manage.auth0.com/#/applications)], and click the name of your test application.
2. Scroll down and make note of the following variables:

   * APIオーディエンス
   * Auth0ドメイン
   * クライアントID
   * 許可されているコールバックURL：認証後にユーザーがリダイレクトされるURL。複数のURLを指定するには、カンマで区切って入力します（これは通常、環境ごとにそれぞれ独自のリダイレクトが必要な場合に行います）。

## クライアントの資格情報フローを実装する

これで、クライアントの資格情報フローを実装し、Apigee Edgeに提供するアクセストークンを要求する準備が整いました。このシナリオでは、ApigeeをバックエンドサービスAPIと共に使用しており、これはマシンツーマシン（M2M）アプリケーションを表しているため、クライアント資格情報フローを使用します。他のシナリオでは異なるフローが必要になる場合があります。

To learn how to log in and get an Access Token that can be used to call Apigee Edge, see [Call API Using the Client Credentials Flow](/docs/get-started/authentication-and-authorization-flow/client-credentials-flow/call-your-api-using-the-client-credentials-flow).

## アクセストークンを検証する

Auth0にアクセストークンを要求して受け取ったら、それを使用してEdgeでセットアップしたAPIプロキシを呼び出すことができます。

When you [use your Access Token](https://docs.apigee.com/api-platform/security/oauth/using-access-tokens.html), the first thing Apigee Edge will do is [verify the token](https://docs.apigee.com/api-platform/security/oauth/using-access-tokens.html#addingaverifyaccesstokenpolicy).

Auth0 Access Tokens are <Tooltip tip="JSON Web Token (JWT): Standard ID Token format (and often Access Token format) used to represent claims securely between two parties." cta="View Glossary" href="/docs/glossary?term=JSON+Web+Tokens">JSON Web Tokens</Tooltip> (JWTs), so you can take advantage of Apigee Edge's Verify JWT policy to do this. To learn more, read Apigee's [Verify JWT policy signed with the RS256 algorithm](https://docs.apigee.com/api-platform/reference/policies/verify-jwt-policy#verify-a-jwt-signed-with-the-rs256-algorithm) article.

テスト

## 実装をテストするには、Auth0が発行したアクセストークンをヘッダーに含めたHTTP POST呼び出しをApigee Edgeに送信します。この方法は、Apigeeで「[保護されたAPIの呼び出し]()」を参照してください。

To test your implementation, make an HTTP POST call to Apigee Edge with the Auth0-issued Access Token included in the header of the call. You can learn how by reviewing Apigee's [Calling the protected API](https://docs.apigee.com/api-platform/security/oauth/oauth-20-client-credentials-grant-type.html#callingtheprotectedapi) article.

When you receive a successful response, extract the token and review it to verify the inclusion of required/requested user claims.