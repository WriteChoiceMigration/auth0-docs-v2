---
og:description: Learn how to use Amazon Web Services (AWS) Session Tags to implement
  role-based access control (RBAC) for AWS APIs and Resources.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ロールベースのアクセス制御にAmazon Web Servicesセッションタグを使用する
og:url: https://auth0.com/docs/
permalink: session-tags
title: ロールベースのアクセス制御にAmazon Web Servicesセッションタグを使用する
twitter:description: Learn how to use Amazon Web Services (AWS) Session Tags to implement
  role-based access control (RBAC) for AWS APIs and Resources.
twitter:title: ロールベースのアクセス制御にAmazon Web Servicesセッションタグを使用する
---

Amazon Web Services（AWS）セッションタグを使用すると、リソースにタグを付け、ユーザーにキーと値のペアを割り当てることができます。これにより、AWS APIとリソースにロールベースのアクセス制御（RBAC）を実装できます。

このガイドの例では、AWSリソースにAWSセッションタグをタグ付けし、AWS IAMロールのポリシーを作成します。これにより、このロールと適切なタグを持つユーザーがAWSリソースに対して特定のアクションを実行できるようになります。次に、Auth0でルールを作成し、AWS IAMロールと適切なAWSセッションタグをAuth0ユーザーに添付して、トークン内のSAMLアサーションを通じて渡します。この例は、[Amazon Web Servicesをシングルサインオン用に構成する](/integrations/aws/configure-amazon-web-services-for-sso)で提示されている例に基づいています。

AWS APIとリソースでAWSセッションタグを使用するには、次の操作を行います。

1. AWSインスタンスにタグを付ける。
2. 専用のAWS IAMロールを作成する。
3. Auth0ルールを作成する。
4. 構成をテストする。

## 前提条件

* 管理者である[Amazon Web Services（AWS）アカウント](https://portal.aws.amazon.com/billing/signup#/start)が必要です。[](/integrations/aws/configure-amazon-web-services-for-sso)
* [SSO用にAWSを設定する](/integrations/aws/configure-amazon-web-services-for-sso)[](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance)[](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance)
* [AWS VMインスタンスをいくつかセットアップします](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance)。このガイドの例では、3つの個別インスタンスを使用します。

### AWSインスタンスをタグ付けする

AWSリソースにタグを追加します。[Amazon Elastic Compute CloudユーザーガイドのLinuxインスタンス個々のリソースへのタグの追加および削除](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html#adding-or-deleting-tags)のステップに従ってください。。

3つのインスタンスが作成されているはずです。次のタグを追加します。



### 特殊なAWS IAMロールを作成する

前提条件中に設定したAWS SAML IDプロバイダーを使用してIAMロールを作成します。[AWS IdentityおよびAccess ManagementユーザーガイドSAML 2.0 Federation（コンソール）のロールを作成する](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html)のステップに従ってください。。

ロールを設定するときは、次のパラメーターを使用するようにしてください。



**アクセス許可ポリシーを添付**するよう求められたら、次 JSONを使用してポリシーを作成し、`VirtualMachineAccessByCostCenter`という名前を付けます。



ポリシーが作成されたら、ロールのポリシーリストを更新し、新しいポリシーをフィルタリングして選択します。

設定を確認するときは、次のパラメーターを必ず使用してください。



### Auth0ルールを作成する

AWSロールとタグをユーザーにマッピングするには、Auth0で[ルールを作成する](/rules/create-rules)必要があります。これらの値は、トークン内のSAMLアサーションを通じて渡されます。例:





### 構成をテストする

これで、Auth0ユーザーを使用してAWSコンソールにログインし、実装をテストできるようになります。

ログインするには、AWSコンソールのSSOログインが必要です。これを見つけるには:

1. [［Dashboard］>［Applications（アプリケーション）］>［Applications（アプリケーション）］](%24%7Bmanage_url%7D/#/applications)に移動し、アプリケーションの名前を選択して表示します。
2. **［Addons（アドオン）］**タブで**［SAML2 Web App（SAML2 Webアプリ）］**アドオンを有効にします。
3. **［Usage（使用状況）］**タブで、**［Identity Provider Login URL（IDプロバイダーのログインURL）］**を見つけます。
4. 表示されたURLに移動します。
5. サインインしたら、**EC2**から**インスタンス**を選択します。`マーケティング`の`CostCenter`でタグ付けされたインスタンスの1つをクリックし、**［Actions（アクション）］** > **［Instance State（インスタンス状態）］** > **［Stop（停止）］**をクリックします。アクションが正常に完了したことを確認します。
6. `エンジニアリング`の`CostCenter`でタグ付けされたインスタンスをクリックし、**［Actions（アクション）］** > **［Instance State（インスタンス状態）］** > **［Stop（停止）］**をクリックします。アクションがエラーで失敗したことを確認します。