---
og:description: How to secure the API Gateway Tutorial using Cognito instead of IAM
  roles and policies.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Cognitoを使用してAWS API Gatewayをセキュリティ保護する
og:url: https://auth0.com/docs/
permalink: aws-api-gateway-cognito
title: Cognitoを使用してAWS API Gatewayをセキュリティ保護する
twitter:description: How to secure the API Gateway Tutorial using Cognito instead
  of IAM roles and policies.
twitter:title: Cognitoを使用してAWS API Gatewayをセキュリティ保護する
---

IAMのロールとポリシーを使用してAPIをセキュリティ保護する代わりに、Amazon Cognitoのユーザープールを使用することができます。

Please [create the appropriate Amazon Cognito User Pools](http://docs.aws.amazon.com/cognito/latest/developerguide/setting-up-cognito-user-identity-pools.html) prior to beginning this tutorial.

## CognitoユーザープールをAPI Gateway APIと統合する

Go to the [Amazon API Gateway Console](https://console.aws.amazon.com/apigateway). Using the left-hand navigation bar, select the **SecurePets** API.

画面中央付近の［オーソライザー］列で**［作成］**を選択し、**［Cognitoユーザープールオーソライザー］**を作成することを示します。

オーソライザーを構成するには以下を行います。

オーソライザーの構成が終わったら、**［作成］**をクリックしてユーザープールをAPIに統合します。

1. Choose the **Cognito region** in which you created your User Pool.
2. Customize the **Authorizer name** field, if desired (it will be automatically populated with the name of the chosen User Pool, so you can opt to leave it as is)
3. Customize the **Identity token source** field. By default, this field is set to `method.request.header.Authorization`, which sets the name of the incoming request header containing the API caller's identity token to `Authorization`.
4. If desired, add a regular expression to the **App client ID regex** field to validate client IDs associated with the User Pool.

メソッドでユーザープールオーソライザーを有効にする

## ユーザープールをオーソライザーとして機能させるメソッドごとに、その特定のメソッドに対してユーザープールを有効にする必要があります。

ユーザープールオーソライザーを`GET`メソッドで有効にするには、以下を行います。

Cognitoユーザープールをオーソライザーとして機能させる追加のメソッドごとにこの手順を繰り返します（`/pets`の`GET`と`PURCHASE`、`/purchase`の`POST`）。

1. After selecting the SecurePets API, select the `GET` method listed under `/pets`.
2. Click on **Method Request**.
3. Under Authorization Settings, click on the **edit icon** next to the Authorization field.
4. Choose the appropriate Cognito User Pool authorizer from the list. Click the **checkmark icon** to save your selection.

Repeat this process for any additional methods for which you want the Cognito User Pool to act as an authorizer (`GET` and `PURCHASE` for `/pets`, as well as `POST` for `/purchase`).