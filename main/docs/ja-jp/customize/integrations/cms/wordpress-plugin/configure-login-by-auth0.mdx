---
og:description: How to configure WordPress as an application with Auth0
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Login by Auth0を構成する
og:url: https://auth0.com/docs/
permalink: configure-login-by-auth0
title: Login by Auth0を構成する
twitter:description: How to configure WordPress as an application with Auth0
twitter:title: Login by Auth0を構成する
---

Login by Auth0 can be configured using the Setup Wizard in the plugin or manually for more control over the process. To learn more, read [Install Login by Auth0](/docs/customize/integrations/cms/wordpress-plugin/install-login-by-auth0). The instructions below can also be used if the Setup Wizard did not complete or as part of troubleshooting login issues.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

You will need to be logged into your Auth0 account before starting the steps below. If you don't have one yet, [create one](https://auth0.com/signup).

</Callout>

## Auth0の構成

Your Auth0 tenant must be configured to accept login requests from your WordPress site and source user identities from at least one Connection, whether that's an Auth0 database, a social connection, or a business directory. To learn more about tenants, read [Create Tenants](/docs/get-started/auth0-overview/create-tenants). To learn more about connections, read [Identity Providers](/docs/authenticate/identity-providers).

### アプリケーションのセットアップ

1. Create an Application for your WordPress site:

* **If you're troubleshooting the Setup Wizard**, navigate to [Auth0 Dashboard > Applications > Applications](https://manage.auth0.com/#/applications), and look for an Application that is similar to your WordPress site name. If you don't find one, it means that an Application was not created by the Wizard. Restart the Setup Wizard in WordPress or follow the step just below to create an Application manually.
* **If you're configuring manually**, navigate to [Auth0 Dashboard > Applications > Applications](https://manage.auth0.com/#/applications), and select **Create**. Enter a name for the Application, select **Regular Web Applications**, and select **Create**.

1. Select the **Settings** view for the Application. You will see your Domain, Client ID, and Client Secret, which are used in **wp-admin > Auth0 > Settings** to connect to Auth0.
2. **Application Type** must be set to **Regular Web Application** and **Token Endpoint Authentication Method** must be set to **Post**
3. Scroll down to **Allowed Callback URLs** and provide the WordPress site URL with `?auth0=1` appended:

<Warning>

The Callback URL here **must not** be cached, or you might see an "Invalid state" error during login. To learn more, read [Troubleshoot WordPress Plugin Invalid State Errors](/docs/customize/integrations/cms/wordpress-plugin/troubleshoot-wordpress-plugin-invalid-state-errors).

</Warning>

1. Enter your WordPress site's **WordPress Address (URL)** (where the WordPress site appears publicly) and, if different, the **Site Address (URL)** (where wp-admin is served from) in the **Allowed Web Origins** field. Both of these values are found on your WordPress site's general settings screen.
2. Enter your WordPress site's login URL in the **Allowed Logout URLs** field
3. Leave the **Allowed Origins (CORS)** field blank (it will use the **Allowed Callback URLs** values from above)

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Make sure to match your site's protocol (http or https) and use the home URL as a base, found in **wp-admin > Settings > General > WordPress Address (URL)** for all URL fields above.

</Callout>

1. Scroll down and select **Show 高度 Settings**, then select the **OAuth** view and make sure **JsonWebToken Signature Algorithm** is set to RS256. If this needs to be changed later, it should be changed here as well as in wp-admin (see Settings > 基本 below).
2. Turn on **OIDC Conformant**.
3. Click the **Grant Types** tab and select at least **Authorization Code** and **Client Credentials**.
4. Click **Save Changes**.

### Management APIでアプリケーションを認可する

In order for your WordPress site to perform certain actions on behalf of your Auth0 tenant, you'll need to authorize the Application created above to access the <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>. This is not required but will enable retrieving complete user data on login (including `user_metadata` and `app_metadata`), email and password changes for users, and email verification re-sending when verified emails are required.

1. Make sure your Application allows the Client Credentials grant (step 10 in the section above).
2. Navigate to [Auth0 Dashboard > Applications > APIs](https://manage.auth0.com/#/apis).
3. Select **Auth0 Management API**, then the **Machine to Machine Applications** view.
4. Look for the WordPress Application and select **Unauthorized** to grant access.
5. In the panel that appears, select only the `read:users` and `update:users` scopes, then select **Update** (you can search using the **Filter scopes** field).

### データベース接続のセットアップ

Database Connections enable username and password login with user records stored at Auth0. This type of Connection is not required and can be skipped if you're using <Tooltip tip="Passwordless: Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=passwordless">passwordless</Tooltip>, social, or enterprise logins only.

1. If you used the wizard during setup, navigate to [Auth0 Dashboard > Authentication > Database](https://manage.auth0.com/#/connections/database) and look for a Connection that has a similar name to the アプリケーションのセットアップ above. Otherwise, you can create a new Connection, use an existing Connection, or use the default **Username-Password-Authentication**. Select an existing Connection name to view settings or select **Create DB Connection** and follow the steps.
2. Select the **Applications** view and activate the Application created above.

### ソーシャル接続のセットアップ

To learn how to activate and configure this login method, read [Social Identity Providers](/docs/authenticate/identity-providers/social-identity-providers).

### エンタープライズ接続のセットアップ

To learn how to activate and configure this login method, read [Enterprise Identity Providers](/docs/authenticate/identity-providers/enterprise-identity-providers).

## WordPressの構成

1. Go to [Auth0 Dashboard > Applications > Applications](https://manage.auth0.com/#/applications) and select the Application created above.
2. In a new tab/window, log in to wp-admin for your WordPress site and go to **wp-admin > Auth0 > Settings**.
3. Copy **Domain**, **Client ID**, and **Client Secret** from your Auth0 Application page to your WordPress settings using the **Copy to Clipboard** buttons next to each field.
4. Scroll down and select **Save Changes**.

## PHP定数の設定ストレージ

プラグインの設定 can be saved to the database (default) or they can be set using a specifically named PHP constant. This will allow for sensitive data like the <Tooltip tip="Client Secret: Secret used by a client (application) to authenticate with the Authorization Server; it should be known to only the client and the Authorization Server and must be sufficiently random to not be guessable." cta="View Glossary" href="/docs/glossary?term=client+secret">client secret</Tooltip>, API token, and migration token to be stored more securely (assuming that file they are defined in is stored securely; to learn more, read [Hardening WordPress on wordpress.org](https://wordpress.org/support/article/hardening-wordpress/)).

The constant **must** be defined before the plugin is loaded or it will not be used. This should happen in your `wp-config.php` file or in a must-use plugin. To learn more, read [Must Use Plugins on wordpress.org](https://wordpress.org/support/article/must-use-plugins/). If the constant is defined in your theme's `functions.php` or in a plugin that loads after Auth0, the value will be ignored.

PHP定数は次のように定義されます。

The default constant name should be `AUTH0_ENV_` followed by the option name to override in all caps (the prefix can be modified with the `auth0_settings_constant_prefix` filter; to learn more, read [Extend Login by Auth0 WordPress Plugin](/docs/customize/integrations/cms/wordpress-plugin/extend-login-by-auth0)). All plugin options can be overridden and their keys can be found in the `WP_Auth0_Options::defaults()` method. To see which options are available, [view WordPress Auth0 Lock Options in our GitHub repository](https://github.com/auth0/wp-auth0/blob/master/lib/WP_Auth0_Lock.php).

**Note:** The `migration_token` value is generated by the plugin when user migration is turned on. If there is already a value in the admin, make sure to set the constant to the same value. If that value needs to change, it also must be changed in the custom scripts for the database Connection being used in the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+dashboard">Auth0 dashboard</Tooltip>.

設定フィールドの表示は、この新しい値に基づいて変更され、使用されている定数を参照用に表示します。この値は自動的にプラグイン全体で使用されるようになります。

**重要：**定数の値を設定した後に設定ページを保存すると、設定された定数値が検証され（変更はされず）、データベースに保存されているオプション配列から削除されます。この機能性をテストしているだけの場合は、値を削除する準備ができるまで、設定をWordPressの管理画面ページに保存しないでください。

WordPressマルチサイトネットワークにあるすべてのサイトが同じ定数を使用することで、単一のアプリケーションとデータベース接続を使用してネットワークを簡単にセットアップできます。

## プラグインの設定

### 基本

* **Domain（ドメイン）：**ダッシュボードのアプリケーション設定からコピーされたドメイン。オプション名は`domain`です。
* **<Tooltip tip="Custom Domain: Third-party domain with a specialized, or vanity, name." cta="View Glossary" href="/docs/glossary?term=Custom+Domain">Custom Domain</Tooltip>:** The Custom Domain for your tenant, if one is configured. To learn more, read [Custom Domains](/docs/customize/custom-domains). Option name is `custom_domain`.
* **<Tooltip tip="Client ID: Identification value given to your registered resource from Auth0." cta="View Glossary" href="/docs/glossary?term=Client+ID">Client ID</Tooltip>:** The Client ID copied from the Application settings in your dashboard. Option name is `client_id`.
* **Client Secret:** The Client Secret copied from the Application settings in your dashboard. Option name is `client_secret`.
* **<Tooltip tip="JSON Web Token (JWT): Standard ID Token format (and often Access Token format) used to represent claims securely between two parties." cta="View Glossary" href="/docs/glossary?term=JWT">JWT</Tooltip> Signature Algorithm** The algorithm used for signing tokens from the 高度 Application Settings, <Tooltip tip="OAuth 2.0: Authorization framework that defines authorization protocols and workflows." cta="View Glossary" href="/docs/glossary?term=OAuth">OAuth</Tooltip> tab; default is RS256. Option name is `client_signing_algorithm`.
* **JWKS Cache Time (in minutes)（JWKSキャッシュ時間（分））：**RS256のJWT署名アルゴリズムを使用中にJWKS情報を保存すべき時間。オプション名は`cache_expiration`です。
* **Original Login Form on wp-login.php（wp-login.phpのオリジナルログインフォーム）：**WordPressコアログインページにアクセスする方法を提供したりブロックしたりします。オプション名は`wordpress_login_enabled`です。ログインページコードのオプション名は`wle_code`です。

  + **［Never（許可しない）］**は、WordPressコアログインフォームの表示を許可しません。
  + **［Via a link under the Auth0 form（Auth0フォームの下のリンク経由）］**は、`wp-login.php`のAuth0埋め込みフォームのすぐ下にWordPressコアログインフォームへのリンクを表示します。ログインページは、ログインURLに`?wle`を追加することで直接アクセスすることもできます。
  + **［When "wle" query parameter is present（"wle"クエリパラメーターがあるとき）］**は、ログインURLに`?wle`を追加することでログインページに直接アクセスすることを許可します。これは、ユニバーサルログインページのリダイレクトを迂回します。
  + **［When "wle" query parameter contains specific code（"wle"クエリパラメーターに特定のコードを含むとき）］**は、`?wle=`とコードをログインURLに追加することで、ログインページに直接アクセスすることを許可します。コードは自動生成され、この設定の制御画面の下に表示されます。これは、ユニバーサルログインページのリダイレクトを迂回します。
* **［Allow Signups（サインアップを許可）］：**ユーザーサインアップは、WordPressの「Anyone can register（誰でも登録できる）」オプションが有効な場合にのみ使用できます。この設定は、**［Settings（設定）］>［General（一般）］>［Membership（メンバーシップ）］**にあります。

### 機能

* **<Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip> Page:** Redirects the `wp-login.php` page to the Universal Login Page for <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=Single+Sign-on">Single Sign-on</Tooltip> (SSO) authentication using all active Connections for this Application. Option name is `auto_login`.
* **Auto Login Method（自動ログインメソッド）：****［Universal Login Page（ユニバーサルログインページ）］**が有効になっている場合に認証に使用される、単一のアクティブな接続です。ユニバーサルログインページにすべてのアクティブな接続を表示するには、ここを空欄にしておきます。オプション名は`auto_login_method`です。
* **Auth0 Logout（Auth0ログアウト）：**WordPressからログアウトするときにAuth0からもログアウトする場合は、このオプションを有効にします。オプション名は`singlelogout`です。
* **Override WordPress Avatars（WordPressアバターをオーバーライド）：**WordPressにAuth0のアバターを使用させます。オプション名は`override_wp_avatars`です。

### 埋め込み

Options here do not affect the Universal Login Page (To learn about customization options, read [Auth0 Universal Login](/docs/authenticate/login/auth0-universal-login)).

* **Passwordless Login（パスワードレスログイン）：**すべての埋め込みAuth0ログインフォームでパスワードレスログインを有効にする場合にこのオプションを有効にします。パスワードレス接続はAuth0 Dashboardで管理され、このアプリケーションでパスワードレスログインを機能させるには、少なくとも1つがアクティブで有効化されている必要があります。オプション名は`passwordless_enabled`です。
* **Icon URL（アイコンURL）：**埋め込みAuth0ログインフォームの上にアイコンを設定します。オプション名は`icon_url`です。
* **Form Title（フォームタイトル）：**埋め込みAuth0ログインフォームのタイトルを設定します。オプション名は`form_title`です。
* **Enable Gravatar Integration（Gravatar統合を有効化）：**ユーザーが自身のメールアドレスを入力すると、関連付けられているGravatarの写真が埋め込みAuth0ログインフォームに表示されます。オプション名は`gravatar`です。
* **Login Name Style（ログイン名のスタイル）：****［Email（メール）］**を選択すると、ユーザーがログインする際にメールアドレスの入力が必須になります。ユーザー名を有効なメールアドレスに限定しない場合は、**［Username（ユーザー名）］**に設定します。オプション名は`username_style`です。オプション名は`client_secret_b64_encoded`です。
* **Primary Color:** To learn more about this setting, read [Lock Configuration Options](/docs/libraries/lock/lock-configuration). Option name is `primary_color`.
* **Extra Settings（追加設定）：**ロックを呼び出すためのオプションを含む有効なJSONオブジェクトです。これは、上記で設定された他のすべてのオプションをオーバーライドします。利用できるオプションのリストは、Lock：ユーザーの構成可能なオプション（例：`{"disableResetAction": true }`）をご覧ください。オプション名は`extra_conf`です。
* **Use Custom Lock JS URL（カスタムのLock JS URLを使用）：**これが無効な場合、WordPressはテスト済みの最新バージョンのLock（Auth0埋め込みログインフォーム）を自動的に使用します。これが有効な場合、管理者はカスタムのLock URLを提供して使用させることができます。オプション名は`custom_cdn_url`です。
* **Custom Lock JS URL（カスタムLock JS URL）：**Lockのバーションをポイントする有効なURLです。**［Use Custom Lock JS URL（カスタムのLock JS URLを使用）］**が無効になっている場合、このフィールドは自動的に非表示になります。オプション名は`cdn_url`です。
* **Connections to Show:** List here each of the <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+providers">identity providers</Tooltip> you want to allow users to login with. If left blank, all enabled providers will be allowed. (To learn more, read [Lock UI Customization](/docs/libraries/lock/lock-ui-customization).) Option name is `lock_connections`.

  <Callout icon="file-lines" color="#0EA5E9" iconType="regular">

  If you have enabled Passwordless login, you must list here all allowed social identity providers. To learn more, read [.social(options, callback) in our GitHub repository](https://github.com/auth0/lock-passwordless#socialoptions-callback).

  </Callout>

### 高度

* **Require Verified Email（検証済みメールを必須にする）：**これを設定すると、ユーザーがログインする際に検証済みメールが必要になります。これにより、ユーザープロファイルデータにメールアドレスまたは`email_verified`フラグが指定されていない場合、一部の接続が正常に機能しない可能性があります。オプション名は`requires_verified_email`です。
* **Skip Strategies（戦略のスキップ）：**［Require Verified Email（検証済みメールを必須にする）］が有効になっている場合、この設定が表示されます。このフィールドには、ログインとアカウントの関連付けの際に検証済みメールの要件をスキップする戦略名を入力できます。これは、`email_verified`フラグを指定しない戦略に**のみ**使用してください。
* **Remember User Session（ユーザーセッションを記憶する）：**ユーザーセッションはデフォルトで2日間存続しますが、この設定を有効にすると14日間存続するようになります。オプション名は`remember_users_session`です。

  + This setting must be less than or equal to your tenant's [Inactivity Timeout](/docs/manage-users/sessions/session-lifetime-limits)docs/manage-users/sessions/session-lifetime-limits setting to ensure that the user's session is properly maintained.
* **Login Redirection URL（ログインリダイレクトURL）：**これを設定すると、ログイン後にユーザーを特定のURLにリダイレクトします。これは、`[auth0]`ショートコード経由でのログインには影響しません。オプション名は`default_login_redirection`です。ショートコードのリダイレクトを変更するには、次のように`redirect_to`属性を追加します。

  `[auth0 redirect_to="http://yourdomain.com/redirect-here"]`
* **Force HTTPS Callback（HTTPSコールバックを強制）：**このオプションは、サイトがHTTPSを許可しながらも強制する場合に有効にします。これにより、ホームURLがHTTPSに設定されていない場合に、Auth0コールバックがHTTPSに強制されます。オプション名は`force_https_callback`です。
* **Auto Provisioning（自動プロビジョニング）：**新規登録が許可されない場合、Auth0からの新規ユーザーをWordPressデータベースに保存する必要がありますか？このオプションは、Auth0経由でログインしたときに存在しないWordPressユーザーを作成します（たとえば、ユーザーがAuth0 Dashboardで作成される場合）。オプション名は`auto_provisioning`です。

  <Callout icon="file-lines" color="#0EA5E9" iconType="regular">

  If registrations are allowed in WordPress, new users will be created regardless of this setting.

  </Callout>
* **User Migration:** Enabling this option will expose the Auth0 migration web services. However, the Connection will need to be manually configured in the [Auth0 Dashboard](https://manage.auth0.com/#). To learn more about the migration process, read [User Migration in Login by Auth0 WordPress Plugin](/docs/customize/integrations/cms/wordpress-plugin/user-migration-in-login-by-auth0). The **Generate New Migration Token** button can be used to replace the saved token with a new one. Make sure to have your database Connection configuration page open to the **Custom Database** tab so you can replace the existing token with the new one in both scripts. Option name is `migration_ws`. Migration token option name is `migration_token`.
* **Migration IPs AllowList（移行IPのAllowList）：**リストにあるIPからの要求のみが、移行Webサービスへのアクセスを許可されます。オプション名は`migration_ips_filter`です。
* **Valid Proxy IP（有効なプロキシIP）：**プロキシまたはロードバランサーのIPアドレスをリストして、ログインおよび移行WebサービスのIPチェックを有効にします。オプション名は`valid_proxy_ip`です。
* **Auth0 Server Domain（Auth0サーバードメイン）：**セットアップウィザードがアカウント情報を取得するために使用するAuth0ドメイン。オプション名は`auth0_server_domain`です。

## Learn more

* [Integrate with WordPress](/docs/customize/integrations/cms/wordpress-plugin/integrate-with-wordpress)
* [Install Login by Auth0](/docs/customize/integrations/cms/wordpress-plugin/install-login-by-auth0)
* [Troubleshoot Login by Auth0 WordPress Plugin](/docs/customize/integrations/cms/wordpress-plugin/troubleshoot-login-by-auth0)
* [Extend Login by Auth0 WordPress Plugin](/docs/customize/integrations/cms/wordpress-plugin/extend-login-by-auth0)