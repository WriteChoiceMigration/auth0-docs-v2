---
og:description: Learn how to customize signup and login prompts for Universal Login
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: サインアップとログインプロンプトをカスタマイズする
og:url: https://auth0.com/docs/
permalink: customize-signup-and-login-prompts
sidebarTitle: サインアップとログインプロンプトをカスタマイズする
title: サインアップとログインプロンプトをカスタマイズする
twitter:description: Learn how to customize signup and login prompts for Universal
  Login
twitter:title: サインアップとログインプロンプトをカスタマイズする
---

**サインアップとログインプロンプトのカスタマイズ**機能によって、カスタムドメインとカスタムページテンプレートが有効になっている顧客は、カスタムフィールドとコンテンツをアプリのサインアップとログインプロンプトに追加することができます。

#### ユースケース

サインアップとログインプロンプトのカスタマイズでは、**custom content**と**data capture**という2つのユースケースに対応しています。

**カスタムコンテンツ**とは、テキストやリンク、画像などサインアップとログインプロンプトに直接配置された静的コンテンツのことです。

**データキャプチャー**は、サインアップとログインプロンプトに動的に追加されたフォーム要素を使用します。データキャプチャーは、ユーザーコンテンツや苗字などユーザーが生成したデータの収集と検証に役立ちます。データキャプチャーを利用できるのは、Passkeyを持っていないDatabase Connections認証ユーザーのみです。



**Prompt（プロンプト）**とは、ある認証フローでの特定のステップのことです。プロンプトにはそれぞれ、少なくとも1つの**Screen（スクリーン）**があり、テナントの構成に応じて、対応するスクリーンには4つか6つの**Entry Points（エントリーポイント）**カスタムコード（**Partials（パーシャル）**）が挿入可能なスクリーン内の場所を指します。

#### 用語

カスタマイズできるプロンプトは以下のとおりです。

パーシャルは、条件ロジックと動的変数を使用できるよう、HTML、CSS、Javascript、および[Liquid構文](https://github.com/Shopify/liquid/wiki/Liquid-for-Designers)に対応しています。さらに、[Page Template（ページテンプレート）](/login/universal-login/universal-experience/customize-templates)にあるLiquid変数も使用することができます。

* `signup`
* `signup-id`
* `signup-password`
* `login（ログイン）`
* `login-id `
* `login-password`
* `login-passwordless`

* `login-passwordless-sms-otp`
* `login-passwordless-email-code`

これらのエントリーポイントはデータベース接続が有効な場合に使用できます。

以下のエントリーポイントは、少なくとも1つのソーシャルまたはエンタープライズ接続が有効な場合に使用できます。

* `form-content-start`
* `form-content-end`
* `form-footer-start`
* `form-footer-end`



* `secondary-actions-start`
* `secondary-actions-end`

パーシャルは最大10,000文字で指定し、`/v2/prompts/{prompts_name}/partials`で[Auth0 Management API](https://auth0.com/docs/api/management/v2/prompts/put-partials)が管理することができます。プロンプトはそれぞれ、パーシャルを追加、更新、または削除するときに、`スクリーン`を指定する必要があります。以下の例は、プロンプトの既存のすべてのパーシャルを表示するために呼び出しを行ったものです。APIの呼び出しでエントリーポイントを参照する場合、`ulp-container`接頭辞が必要でないことに注意してください。

#### Management APIを使用してパーシャルを管理する

カスタムプロンプトは現在、[Auth0のDeploy CLIツール](https://auth0.com/docs/deploy-monitor/deploy-cli-tool)またはAuth0 CLIには対応していません。



サインアップとログインプロンプトのカスタマイズには、特定のHTMLフォーム要素に対して事前に構築されたスタイルとクライアント側の検証サポートが備わっています。以下の要素がサポートされています。

#### スタイルと検証フォームの入力

事前に構築された入力スタイルを使用するには、`<div>`内の希望するフォーム要素を`ulp-field`クラスでラップします。同様に、事前に構築されたエラースタイルを使用するために、`ulp-error`クラスを同じ`<div>`に追加します。`ulp-error-info`要素が存在する場合は、スタイル設定されたエラーメッセージも表示されます。

* `<input type="text">`
* `<input type="number">`
* `<input type="checkbox">`
* `<input type="password">`
* `<input type="email">`
* `<input type="tel">`
* `<input type="url">`
* `<select>`
* `<textarea>`

機能のクライアント側検証フレームワークを使用すると、顧客はHTML属性を使ってユーザー入力を検証し、1つ以上のカスタム検証機能を実行することができます。検証機能はパーシャルに直接含まれているか、ページテンプレートの`<head>`に含まれています。

#### クライアント側検証

クライアント側検証をフォーム要素に追加するには、以下のようにします。



* `<div class="ulp-error-info">`要素の`data-ulp-validation-function`属性を使用して、検証機能を参照します。
* どのDOMイベント上で、検証機能を`<div class="ulp-error-info">`要素の`data-ulp-validation-event-listeners`属性を使用して実行する必要があるかを宣言します。検証は提出時に自動的に実行されることに注意します。



パーシャルコンテンツをローカライズするには、[カスタムテキストAPI](/api/management/v2/prompts/put-custom-text-by-language)を使用して、新しいカスタムテキスト変数を定義します。スクリーン/言語の組み合わせごとに定義できるカスタムテキスト変数の数は最大30です。

#### コンテンツをローカライズする

カスタムテキストAPIは[こちら](/api/management/v2/prompts/get-custom-text-by-language)から入手でき、各変数は`var-<name>`命名規則に従っています。APIへの呼び出しは、カスタムテキスト変数を追加、更新、または削除するときに、Screen（スクリーン）を指定する必要があります。マークダウンリンクはサポートされており、ユーザーに表示される前にHTML `<a>`要素に変換されます。

##### カスタムテキスト変数を作成または更新する

以下は、利用規約チェックボックスのラベルのテキストの変数を英語とスペイン語で追加するための呼び出し例です。詳細については、Management APIを参照してください。



カスタムテキスト変数は、`prompts.screen.text`オブジェクトを使用して、パーシャルで参照されます。前のセクションで示した`var-tos`の例に対する参照は、`prompt.screen.texts.varTos`です。Signup ID Prompt,（サインアップIDプロンプト）のパーシャルで前に作成した変数を使用する方法の例については、以下を参照してください。Management APIの`var-tos`変数がパーシャルで`varTos`として参照されることに注意します。

##### カスタムテキスト変数をパーシャルで使用する



カスタムフォーム要素でキャプチャーしたデータはActions（アクション）で使用できます。Auth0では、収集したデータを検証することを推奨します。

#### キャプチャーしたデータを検証して保存する



Actionはそれぞれ、キャプチャしたデータを`event.request.body`上のオブジェクトとして受け取ります。顧客は、`api.validation.error`関数を使用して、検証エラーを返すことができます。



Actionから、キャプチャーされたデータは外部APIに送信されて検証および保管されるか、`api.user.setUserMetadata`を通じてユーザーの`user_metadata`に保存されます。

* サインアッププロンプトからのデータは、ユーザー登録前トリガーでアクセスできます。検証エラーが返さると、ユーザーは登録できません。
* ログインプロンプトからのデータは、ログイン後トリガーでアクセスできます。検証エラーが返されると、顧客のアプリケーションのエラーページに転送されます。



* サインアッププロンプトとログインプロンプトからのデータはどちらもログイン後トリガーでアクセスできます。検証エラーが返されると、顧客のアプリケーションのエラーページに転送されます。



##### ユーザーメタデータに保存する

取得したデータは検証と保管のためにActionから外部APIに送信されるか、`api.user.setUserMetadata`を通してユーザーの`user_metadata`に保存されます。