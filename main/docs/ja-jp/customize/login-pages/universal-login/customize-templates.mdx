---
og:description: Learn how to create login page templates for the Universal Login experience.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ユニバーサルログインのページテンプレートをカスタマイズする
og:url: https://auth0.com/docs/
permalink: customize-templates
title: ユニバーサルログインのページテンプレートをカスタマイズする
twitter:description: Learn how to create login page templates for the Universal Login
  experience.
twitter:title: ユニバーサルログインのページテンプレートをカスタマイズする
---

[Liquidテンプレート言語](https://shopify.github.io/liquid/basics/introduction/)で作成したページテンプレートを提供することで、ユニバーサルログインページをカスタマイズできます。ページテンプレートを使用して、ログインボックスやMFAチャレンジなどの、ユニバーサルログインプロンプトに関して表示するコンテンツを定義できます。同じページテンプレートがすべてのログインフローページに使用されるため、このカスタマイズ手法は、ユーザーに対して一貫性のあるブランドエクスペリエンスの実装を簡単にします。

カスタマイズされたページテンプレートを使用するには、テナントに対して[カスタムドメイン](/customize/custom-domains)を構成する必要があります。さらに、[Management API](/api/management/v2)を使用してのみ、ユニバーサルログインのページテンプレートを更新できます。



## ページテンプレートの要件

ユニバーサルログインのページテンプレートを作成する際は、以下のタグを含ませる必要があります。



プロンプトをページの中央に配置するには、`<body>`要素に`class="_widget-auto-layout"`を追加します。この属性を省略して、必要に応じてプロンプトを手動で配置できます。



##### **テンプレート例**：

以下の例は、必要なタグを使用して作成できる最もシンプルなユニバーサルログインのページテンプレートを示しています。





## ページテンプレートの変数

ページテンプレートは、ページのレンダリング方法に影響を与える様々なコンテキスト変数をサポートしています。

たとえば、これらの変数を以下のために使用できます。

* ログインフローに関連するアプリケーションによって、様々なコンテンツをレンダリングする。たとえば、異なるページデザインを必要とする2つのブランドを管理する場合。
* 特定のプロンプトによって、様々なコンテンツをレンダリングする。たとえば、ログインページにアプリケーションが提供する内容についての情報を追加したいが、MFAチャレンジプロンプトのみを表示するMFAフローを選びたい場合。
* サポートページや連絡先情報へのリンクなど、ユーザーサポート情報が記載されたフッターを追加する。

### 利用できる変数

ページテンプレートは以下の変数をサポートしています。

#### アプリケーション



#### ブランディング



#### テナント



#### Organizations

以下の変数は、[Auth0 Organizations](/organizations/organizations-overview)機能を参照します。



#### 現在のユーザー情報

認証後にレンダリングするページについては、以下の変数のみを使用できます。



#### 現在のウィンドウ情報



### プロンプト

`prompt`という用語は、ログインフローの特定の手順を意味します。特定のプロンプトは、1つ以上のウィンドウからなります。[Auth0 Dashboard](https://manage.auth0.com/#/custom_text)または[Management API](/api/management/v2)のプロンプトエンドポイントで、プロンプトを管理できます。

以下のセクションでは、利用できるそれぞれのプロンプトについて詳細を説明しています。 



### カスタムクエリパラメーター

また、コンテキスト内でクエリパラメーターを使用できます。認証要求の開始時にクエリパラメーターを`/authorize`エンドポイントに渡します。これらのカスタムクエリパラメーターには、接頭辞`ext-`を付ける必要があります。

以下の例では、ログインページのテンプレートに`ext-ga`および`ext-test`クエリパラメーターを使用しています。



カスタムサインアッププロンプトを使用する場合は、カスタムページテンプレートを有効にする必要があります。以下は、カスタムサインアッププロンプトのレンダリングを可能にする最低限のテンプレートです。

* `<body>`要素に`class="_hide-prompt-logo"`を追加して、テナントロゴを非表示にできます。
* `<body>`要素に`class="_use-custom-prompt-logo"`を追加して、カスタムロゴを指定できます。これにより、たとえば、アプリケーションによって、ログインページのロゴを変更できます。
* `ext-`パラメーター名は、ext-で始まり、[a-zA-z0-9_-]のみを含む、28文字以内のものでなければならない（例：`/^ext-[\w-]{1,28}$/`）
* `ext-`パラメーターの値は、[a-zA-Z0-9-.*~@+ /:]のみを含み、255文字以内で指定する必要がある（例：`/^[-\w.*~@+ /:]{1,255}$/`）

### カスタムサインアッププロンプト



詳細については、「[サインアップとログインプロンプトのカスタマイズ](/brand-and-customize/customize-signup-and-login-prompts)」を参照してください。

以下のテンプレートは、ログイン/サインアップページでログインボックスを左に、画像を右に表示します。残りのページは、デフォルトのものが表示されます。

## 例

### ログインボックス + 画像のレイアウト







### ページのフッター



ページテンプレートを設定するには、Management APIを使用する必要があります。まず最初に、`update:branding`、`read:branding`、`delete:branding`スコープでManagement APIトークンを取得する必要があります。トークンの生成に`API Explorer Application`を使用している場合は、これらのスコープが`Auth0 Management API`で有効になっていることを確認してください。

## ページテンプレートAPI

テンプレートを設定するには、以下のエンドポイントを使用する必要があります。



テンプレートを取得するには、以下のエンドポイントを使用する必要があります。



テンプレートを削除するには、以下のエンドポイントを使用する必要があります。



ページテンプレートの最大サイズは100KBです。これが十分でない場合は、画像/cssファイルをページテンプレートコードの外に出すことを検討してください。



## CSSのカスタマイズ





* ページテンプレートが適用されたログインページを示す[Storybook](https://storybook.js.org/)のブラウザーウィンドウ：

* `--prompt-width`を使用して、コンテナー幅を調整します。デフォルト値は400pxです。
* [フォーム](/forms)の場合：`--form-max-width`を使用して、フォームの最大幅を設定します。デフォルト値は500pxです。

* コードをフォームページのみに適用するには、`{% if prompt.name == "custom-form" %}`を\<head>要素に含めます。
* Googleフォントを使用するには、Googleフォントをインポートして、CSS変数の`--font-family`をオーバーライドします。
* テナントのロゴを非表示にするには、`class="_hide-prompt-logo"`を`<body>`要素に追加します。
* カスタムのロゴを指定するには、`class="_use-custom-prompt-logo"`を`<body>`要素に追加します。そうすることで、たとえば、アプリケーションに応じてログインページのロゴを変更できます。

現在の実装では、これ以上のCSSのカスタマイズはサポートしていません。生成されるHTMLを見ると、以下のようなコードが確認できます。



[Auth0 CLI](https://github.com/auth0/auth0-cli)を使用して、簡単にページテンプレートを更新できます。

## Auth0 CLIを使用する

Auth0 CLIで、以下を実行します。

`auth0 universal-login templates update`

Auth0 CLIが、2つのウィンドウを開きます。

これで、ページテンプレートコードを変更でき、ブラウザーウィンドウで変更をプレビューできます。

* ページテンプレートコードのデフォルトエディター：

* ページテンプレートコードのあるデフォルトのエディター：

ウィンドウを閉じると、テンプレートを保存するか尋ねられます。**［Yes（はい）］**と答えると、テンプレートがテナントにアップロードされます。

テンプレートが適用されない場合は、`{customDomain}/authorize`に進んでいるか確認してください。`${account.namespace}/authorize`に進んでいる場合、Auth0はページテンプレートをレンダリングしません。

## トラブルシューティング

テンプレートが適用されない場合は、`{customDomain}/authorize`に移動したかを確認してください。`${account.namespace}/authorize`に移動している場合、Auth0はページテンプレートをレンダリングしません。