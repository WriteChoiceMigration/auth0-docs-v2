---
og:description: Learn how to use Auth0 Actions to validate and store end-user data.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: サインアッププロンプトのカスタマイズが収集したエンドユーザーデータの検証と保管にアクションを使用する (1)
og:url: https://auth0.com/docs/
permalink: use-actions-to-validate-and-store-end-user-data-gathered-by-signup-prompt
title: サインアッププロンプトのカスタマイズが収集したエンドユーザーデータの検証と保管にアクションを使用する (1)
twitter:description: Learn how to use Auth0 Actions to validate and store end-user
  data.
twitter:title: サインアッププロンプトのカスタマイズが収集したエンドユーザーデータの検証と保管にアクションを使用する (1)
---

[サインアッププロンプトのカスタマイズ](/brand-and-customize/customize-signup-and-login-prompts)で`pre-user-registration`（ユーザー登録前）トリガーを使用すると、サインアッププロンプトでエンドユーザーが提供したデータ（ユーザーの電話番号や位置情報など）を`user_metadata`に追加することができます。このデータを任意で検証して、プロンプトに検証エラーを表示することもできます。

### 前提条件

* テナントに検証済の[カスタムドメイン](/custom-domains)がある
* テナントに[ページテンプレート](/login/universal-login/universal-experience/customize-templates)が設定されている

### サインアッププロンプトにフィールドを追加する

[入力ポイント](https://auth0.com/docs/sign-up-prompt-customizations#-signup-prompt-entry-points)を使ってプロンプトにカスタムフィールドを挿入するには、[Management API](https://auth0.com/docs/api/management/v2/prompts/put-custom-text-by-language)を使用します。この例では、以下のコンテンツを`ulp-container-form-content-start`の挿入ポイントに追加します。



その結果、サインアッププロンプトに［First Name（名）］セクションが含まれます。

### ユーザー登録前トリガーにアクションを作成する

カスタムのpre-user registration（ユーザー登録前）アクションを構築するには、[**［Actions（アクション）］ > ［Library（ライブラリー）］ > ［Build Custom（カスタムの構築）］**](https://manage.auth0.com/dashboard/us/dev-6endizjt/actions/library)**に移動します。**

コードエディターで、以下のように`onExecutePreUserRegistration`ハンドラーを更新します。



ユーザー入力を任意で検証し、`api.validation.error`を呼び出して検証エラーを送信してから、アクションをデプロイすることもできます。



### フローにアクションを追加する

[**［Actions（アクション）］ > ［Flows（フロー）］ > ［Pre User Registration（ユーザー登録前）］ > ［Add Action（アクションの追加）］ > ［Custom（カスタム）］**](https://manage.auth0.com/dashboard/us/dev-6endizjt/actions/flows/pre-user-signup/)に移動し、新しいアクションを登録フローにドラッグ&ドロップしてから、**［Apply（適用）］**を選択します。

### アクションをテストする

テストフローでアカウントにサインアップして、**［First Name（名）］**フィールドを空のままにします。送信すると、エラーが表示されます。

**［First Name（名）］**フィールドに名前を入力すると、送信が成功します。

### `user_metadata`にデータが保存されたことを確認する

[**［User Management（ユーザー管理）］ > ［Users（ユーザー）］**](https://manage.auth0.com/dashboard/us/dev-6endizjt/users)に移動し、［Details（詳細）］タブでデータが保存されていることを確認します。