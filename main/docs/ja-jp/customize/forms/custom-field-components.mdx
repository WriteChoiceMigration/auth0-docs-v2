---
og:description: Learn how to use custom components to create fields that require specific
  logic or UI using JavaScript, HTML and CSS.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: カスタムフィールドコンポーネント
og:url: https://auth0.com/docs/
permalink: custom-field-components
title: カスタムフィールドコンポーネント
twitter:description: Learn how to use custom components to create fields that require
  specific logic or UI using JavaScript, HTML and CSS.
twitter:title: カスタムフィールドコンポーネント
---

<Frame>![Dashboard > Actions > Forms > Custom field](/images/cdy7uua7fh8z/3bZUItvx7VQG1AUuTah1V0/6ba3b7e9909d189f418cdc85a5ed53b9/custom-field.png)</Frame>

カスタムコンポーネントを使用すると、フォームの外観や操作性を拡張したり、JavaScriptやHTML、CSSを用いて強力なロジックを追加したりできます。

カスタムフィールドには、フロントエンドやバックエンドの変数を追加し、フォーカスやぼかしなどをの共通イベントを処理するなど、フォームにデータを渡すための内部メソッドがあります。

カスタムフィールドは以下の作成に使用できます。

* カスタムデータ構造のあるフィールド

  + **例**：オブジェクト、文字列配列
* サードパーティーのウィジェットを使用するフィールド

  + **例**：Google Addressのオートコンプリート
* 他のフィールドを表示または非表示するロジックのあるフィールド
* 値の取得に外部のAPIが必要なフィールド

<Warning>

To use custom fields you need to enable [Custom Domains](/docs/customize/custom-domains). Rendering a form with a custom field outside a custom domain, will display an error.

</Warning>

## カスタムフィールドの設定

カスタムフィールドには以下の設定があります。

### Params

Add key-value pairs to reference in the custom field source code. Key-value pairs can include form field [variables](/docs/customize/forms/variables).

<Frame>![](/images/cdy7uua7fh8z/6VEtliKd20ZF4MJKhvB5Z0/e1b3b5df4860d013d1e3eb79d1174b35/params.png)</Frame>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Param values are only available after the form invokes the `init()` method.

</Callout>

**ソースコード**:：

ソースコード

```javascript lines expandable
function CustomComponent(context) {
  const input = document.createElement('input');
  let mask = null;

  function mountComponent() {
    /** getParams() method returns the params you've configured in your input */
    const config = context.custom.getParams();
    const { symbol, separator } = config;

    mask = IMask(input,
    {
      mask: `${symbol}num`,
      blocks: {
        num: {
          mask: Number,
          thousandsSeparator: separator,
        }
      }
    });
  }

  return {
    /** Invoked once when the field is created */
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      mountComponent();
      return input;
    },
    ...
  };
}
```






### カスタムフィールドにJavaScriptコードを追加します。

JSONスキーマ

<Frame>![](/images/cdy7uua7fh8z/TMuY21ILSxBiBWv792cTB/97e9855145d7b52fc33ed60249e86642/source-code.png)</Frame>

**ソースコード**:：

```javascript lines
function customInput() {
  const input = document.createElement('input');
  input.type = 'text';

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      return input;
    },

    現在のカスタムフィールドの値を受け取ります。 {
      input.disabled = true;
    },

    現在のカスタムフィールドに値を設定します。 {
      input.disabled = false;
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      return input.value;
    }
  };
}
```






### 複雑な検証要件に対応させるには、[フロー](/intro-to-flows)を使用することができます。

By default, the custom field accepts any value format. However, you can use [JSON Schema](https://json-schema.org/) to validate values server-side.

<Frame>![](/images/cdy7uua7fh8z/5iQfwWq8Scx11s1fcSONvK/d7af907f575095d66558ee2631c73113/json-schema.png)</Frame>

**ソースコード**:：

```json lines
{
  "type": "array",
  "items": {
    "type": "string"
  },
  "minItems": 2
}
```






To accommodate complex validation requirements, you can use a [flow](/docs/customize/forms/flows).

### 以下のハンドラーを使用すると、フィールドにカスタムの動作を追加することができます。

init(params?)

<Frame>![](/images/cdy7uua7fh8z/lC4w1THpVDD32Ke6IsXrl/e1371beeed09d5f12b6656d397c3b692/css.png)</Frame>

## update(params?)

現在のカスタムフィールドに値を設定します。

### フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。

getScripts()

フォーカスがカスタムフィールドのHTML要素から外れると呼び出されます。

**ソースコード**:：

```javascript lines
const input = document.createElement('input');
input.type = 'text';

フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
  return input;
}
```






### フォームがカスタムフィールド値の取得を1回以上必要とする場合に呼び出されます。これは通常、ユーザーがフォームの手順を送信したときに実行されます。クライアント側の検証が必要な場合には、エラーをスローして、ユーザーにカスタムエラーメッセージを表示することができます。

現在のカスタムフィールドの値を受け取ります。

カスタムフィールドをブロックしなければならない場合に呼び出されます。これは通常、ユーザーがフォームの手順を送信し、データが当方のバックエンドで処理されたときに実行されます。

### 現在のカスタムフィールドに値を設定します。

カスタムフィールドをブロック解除しなければならない場合に呼び出されます。これは通常、ユーザーがフォームの手順を送信した後か、検証エラーにより当方のバックエンドでデータの処理が停止したときに実行されます。

### getScripts()

コンテキストオブジェクト

### コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。

カスタムメソッド

context.custom.getValue()

```javascript lines
function customTextInput() {
  const input = document.createElement('input');
  input.type = 'text';

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      return input;
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      if (input.value !== 'Auth0') {
        throw new Error('The value must be Auth0')
      }

      return input.value;
    }
  };
}
```






### 現在のカスタムフィールドの値を受け取ります。

現在のフォームのルートHTML要素を返します。

### 現在のカスタムフィールドに値を設定します。

色の16進数値を返すカスタムフィールドです。

### 現在のカスタムフィールドの一意の識別子を返します。

続行する前にクライアント側の検証を用いて既存のフィールド値を評価します。フィールドが検証に合格しない場合には、エラーメッセージを表示します。

**ソースコード**:：

```js lines
現在のカスタムフィールドの一意の識別子を返します。 {
  return ['https://example.com/script_a.js', 'https://example.com/script_b.js'];
}
```






## フォームメソッド

フォームとやり取りして他のフィールドから値を集めたり、他のフォームの手順に移動したりしなければならない場合には、以下のフォームメソッドを使用することができます。

### context.form.getId()

#### 現在のフォームの一意の識別子を返します。

カスタムフィールドの例

#### 現在のフォームのルートHTML要素を返します。

範囲入力カスタムフィールド

**ソースコード**:：

```javascript lines
function customInput(context) {
  const input = document.createElement('input');
  input.type = 'text';

  input.addEventListener('change', () => {
    context.custom.setValue(input.value);
  });

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      return input;
    },
  };
}
```






#### 色の16進数値を返すカスタムフィールドです。

フォームがクライアント側の検証にすべて合格した場合にブール値を返します。

**ソースコード**:：

```javascript lines
function customInput(context) {
  const input = document.createElement('input');
  input.type = 'text';
  input.id = context.custom.createUid();

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      return input;
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      return input.value;
    }
  };
}
```






#### 続行する前にクライアント側の検証を用いて既存のフィールド値を評価します。フィールドが検証に合格しない場合には、エラーメッセージを表示します。

**ソースコード**:：

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Param values are only available after the form invokes the `init()` method.

</Callout>

**ソースコード**:：

```javascript lines
function customInput(context) {
  // Accessing parameters on the root of the function does NOT work
  // const { defaultValue } = context.custom.getParams();
  // console.log(defaultValue); // undefined

  function buildInput() {
    const { defaultValue } = context.custom.getParams();
    const input = document.createElement('input');
    input.type = 'text';
    input.value = defaultValue;

    return input;
  }

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      return buildInput();
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      return input.value;
    }
  };
}
```






### context.form.setHiddenField(id, value)

**ソースコード**:：

#### すべてのフィールドおよび隠しフィールド値を含むオブジェクトを返します。

ユーザーがフィールドを追加できるカスタムフィールドです。

#### カスタムフィールドの例

このセクションでは、フォームに追加できるカスタムフィールドの例を説明します。

#### 範囲入力カスタムフィールド

あらかじめ設定された範囲からの値を返すカスタムフィールドです。

#### **ソースコード**:：

色入力カスタムフィールド

#### 色の16進数値を返すカスタムフィールドです。

**ソースコード**:：

#### APIからの値を用いたオートコンプリート入力カスタムフィールド

サードパーティーのAPIを使用したオートコンプリート値を返すカスタムフィールドです。

#### **ソースコード**:：

APIからの値を用いた動的ドロップダウンカスタムフィールド

#### サードパーティーのAPIを使用した動的ドロップダウンリストからの値を返すカスタムフィールドです。

Sets a hidden field value.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>
<p>
<em>String</em>. The ID of the hidden field.
            </p>
</td>
</tr>
<tr>
<td><code>value</code></td>
<td>
<p>
<em>String</em>. The value of the hidden field.
            </p>
</td>
</tr>
</tbody>
</table>

#### **ソースコード**:：

＋ボタンでフィールドを追加できる動的入力カスタムフィールド

#### ユーザーがフィールドを追加できるカスタムフィールドです。

Returns an instance for the specified field.

* `getNode() | true` Returns the root HTML element of the field.
* `getValue()` Returns the field value.
* `setRequired(boolean)` Sets or unsets the field as required.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>
<p>
<em>String </em>. The ID field value.
            </p>
</td>
</tr>
</tbody>
</table>

**ソースコード**:：

```javascript lines
const fullName = context.form.getField('full_name');
const fullNameValue = fullName.getValue();
console.log(fullNameValue); // John Doe
```






<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

`setRequired()` only sets or unsets the field as required on the client-side. For example, if you unset a field as required, but it was marked as required in your field settings, the form will return an error if the field has no value.

</Callout>

## **CSSコード**：

The sections below provide example custom fields you can add to your forms:

### Range input custom field

A custom field that returns a value from a predetermined range.

<Frame>![](/images/cdy7uua7fh8z/4afLZWM9MAXXti4F3Cuc3D/c6c6d33c650b7b9fde3de011feb82192/range-input-custom-field.png)</Frame>

**Source code**:

```javascript lines
function rangeInput() {
  const input = document.createElement('input');
  input.type = 'range';
  input.min= '0';
  input.max= '100';
  input.value = '0';

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      return input;
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      return input.value;
    }
  };
}
```






### Color input custom field

A custom field that returns a color hex value.

<Frame>![](/images/cdy7uua7fh8z/5HAWLZJmCRlyl3dIrgzgWv/c602ccc1662d40d03898dcaa94d213dc/color-input-custom-field.png)</Frame>

**Source code**:

```javascript lines
function colorInput() {
  const input = document.createElement('input');
  input.type = 'color';
  input.value = '#20c5a0';

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      return input;
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      return input.value;
    },
  };
}
```






### Autocomplete input custom field using values from API

A custom field that returns an autocomplete value using a third-party API.

<Frame>![](/images/cdy7uua7fh8z/l0lvyJgPLrHrLT8rpR6IF/800868d966ef5b64effbb6a3b0cabf94/autocomplete-api.png)</Frame>

**Source code**:

```javascript lines expandable
function textInputWithAutocomplete(context) {
  const input = document.createElement('input');
  input.type = 'text';

  function populateInputValue(json) {
    const { city } = json;

    input.value = city;
  }

  function fetchIpInfo() {
    const url = 'https://ipinfo.io/json';
    fetch(url)
      .then((res) => res.json())
      .then((json) => populateInputValue(json));
  }

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      fetchIpInfo();
      return input;
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      return input.value;
    },
  };
}
```






### Dynamic dropdown custom field using values from API

A custom field that returns a value from a dynamic dropdown list using a third-party API.

<Frame>![](/images/cdy7uua7fh8z/6gwOMuZaYi3dh0bkrxnKy9/33172d00e3933c74954a8ac3befaff7f/dropdowncustomfield.png)</Frame>

**Source code**:

```javascript lines expandable
function dynamicDropdown() {
  const select = document.createElement('select');
  select.classList.add('af-stringField-input');

  function buildOption(data) {
    const { name: { first } } = data;
    const option = document.createElement('option');
    option.value = first;
    option.innerText = first;

    return option;
  }

  function populateNames(json) {
    const { results } = json;

    results.forEach((o) => {
      const option = buildOption(o);

      select.appendChild(option);
    });
  }

  function fetchNames() {
    const url = 'https://randomuser.me/api/?results=10&inc=name';
    fetch(url)
      .then((res) => res.json())
      .then((json) => populateNames(json));
  }

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      fetchNames();
      return select;
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      return select.value;
    },
  };
}
```






### Dynamic input custom field with a (+) button to add more fields

A custom field that allows users to add more fields.

<Frame>![](/images/cdy7uua7fh8z/7xM41qqb1zYjLAPG16wxGc/a33a3dd624222643e3f967ff35acbbac/Screenshot_2024-09-12_at_09.32.35.png)</Frame>

**Source code**:

```javascript lines expandable
function DynamicInputs(context) {
  const DEFAULT_INITIAL_INPUTS = 2;
  const DEFAULT_PLACEHOLDER = 'jane.doe@example.com';
  const DEFAULT_ADD_BUTTON_TEXT = 'Add new item';
  const DEFAULT_INPUT_TYPE = 'email';
  const STATE_VALUE = {};
  const FIELD_ID = context.custom.createUid();
  let UUID_COUNTER = 0;
  let INPUTS_COUNTER = 0;

  const container = document.createElement('div');

  const inputsContainer = document.createElement('div');
  container.appendChild(inputsContainer);

  function buildAddNewItem() {
    const config = context.custom.getParams();
    const { add_button_text } = config;

    const ADD_BUTTON_TEXT = add_button_text || DEFAULT_ADD_BUTTON_TEXT;

    const addInputButton = document.createElement('button');
    addInputButton.type = 'button';
    addInputButton.classList.add('af-dynamic-input-add-button');
    addInputButton.id = `${FIELD_ID}_add-input-button`;
    addInputButton.onclick = buildInputContainer.bind(this);

    const addInputButtonIcon = document.createElement('span');
    addInputButtonIcon.classList.add('af-button', 'af-dynamic-input-add-button-icon');
    addInputButtonIcon.innerText = '+';

    const addInputButtonText = document.createElement('span');
    addInputButtonText.classList.add('af-dynamic-input-add-button-text');
    addInputButtonText.innerText = ADD_BUTTON_TEXT;

    addInputButton.appendChild(addInputButtonIcon);
    addInputButton.appendChild(addInputButtonText);
    container.appendChild(addInputButton);
  }

  function removeInput(container, input) {
    delete STATE_VALUE[input.name];
    container.remove();
  }

  function buildRemoveInputButton(container, input) {
    const button = document.createElement('button');
    button.type = 'button';
    button.classList.add('af-button', 'af-dynamic-input-remove-button');
    button.innerText = '-';
    button.onclick = removeInput.bind(this, container, input);

    INPUTS_COUNTER--;

    return button;
  }

  function buildInput() {
    const config = context.custom.getParams();
    const { placeholder, input_type } = config;

    const PLACEHOLDER = placeholder || DEFAULT_PLACEHOLDER;
    const INPUT_TYPE = input_type || DEFAULT_INPUT_TYPE;

    const input = document.createElement('input');
    input.type = INPUT_TYPE;
    input.placeholder = PLACEHOLDER;
    input.classList.add('af-stringField-input');
    input.name = `${FIELD_ID}_${UUID_COUNTER}`;
    input.id = input.name;
    input.addEventListener('change', () => {
      STATE_VALUE[input.name] = input.value;
    });

    UUID_COUNTER++;

    return input;
  }

  function buildInputContainer() {
    const container = document.createElement('div');
    container.classList.add('af-dynamic-input-container');

    const input = buildInput();
    container.appendChild(input);

    const removeButton = buildRemoveInputButton(container, input);
    container.appendChild(removeButton);

    inputsContainer.appendChild(container);

    INPUTS_COUNTER++;
  }

  function initComponent() {
    const config = context.custom.getParams();
    const { initial_inputs } = config;

    const INITIAL_INPUTS = initial_inputs || DEFAULT_INITIAL_INPUTS;
    INPUTS_COUNTER = INITIAL_INPUTS

    for (let i = 0; i < INITIAL_INPUTS; i++) {
      buildInputContainer();
    }
  }

  function blockFields(value) {
    const inputKeys = Object.keys(STATE_VALUE);

    inputKeys.forEach((o) => {
      const selector = document.getElementById(o);
      selector.disabled = value;
    });
  }

  return {
    フォーカスがカスタムフィールドのHTML要素に移動すると呼び出されます。 {
      buildAddNewItem();
      initComponent();
      return container;
    },

    現在のカスタムフィールドの値を受け取ります。 {
      blockFields(true);
    },

    現在のカスタムフィールドに値を設定します。 {
      blockFields(false);
    },

    コンテキストオブジェクトを渡す際には、以下のメソッドを使用して、フォームやコンポーネントのロジックを扱うことができます。 {
      return Object.values(STATE_VALUE);
    },
  };
}
```






**CSS code:**

```css lines expandable
.af-button.af-dynamic-input-remove-button {
  width: 48px;
  color: var(--button-font-color);
  background: var(--button-background-color);
}

.af-dynamic-input-container {
  display: flex;
  margin-bottom: var(--spacing-1);
}

.af-dynamic-input-container input {
  margin-right: var(--spacing-1);
}

button.af-dynamic-input-add-button {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  margin-top: var(--spacing-1);
  display: inline-flex;
  cursor: pointer;
  align-items: center;
}

.af-button.af-dynamic-input-add-button-icon {
  background: var(--primary-color);
  width: 24px;
  padding: 0;
  height: 24px;
  border-radius: .3em;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #fff;
  margin-right: var(--spacing-1);
}

.af-dynamic-input-add-button-text {
  color: var(--label-font-color);
  font-size: var(--label-font-size);
}

.af-dynamic-input-add-button:focus {
  outline: none;
}

.af-dynamic-input-add-button:hover .af-button {
  transition: filter var(--transition-normal), box-shadow var(--transition-normal);
  filter: brightness(1.1);
  box-shadow: 0 0 0 var(--outline-width) var(--outline-color), 0px 4px 8px -4px var(--shadow-color), 0px 16px 24px var(--shadow-color);
}

.af-dynamic-input-add-button:focus .af-button {
  box-shadow: 0 0 0 var(--outline-width) var(--outline-color), 0px 4px 8px -4px var(--shadow-color), 0px 16px 24px var(--shadow-color);
}
```