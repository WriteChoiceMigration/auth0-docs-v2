---
og:description: Learn how you can render Forms using Actions.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Actionsを使用したフォームの表示
og:url: https://auth0.com/docs/
permalink: render
title: Actionsを使用したフォームの表示
twitter:description: Learn how you can render Forms using Actions.
twitter:title: Actionsを使用したフォームの表示
---

Once you create a form, you can render it with [Actions](/docs/customize/actions) using the `api.prompt.render()` method:

```javascript lines
// Example using the post-login trigger

exports.onExecutePostLogin = async (event, api) => {
  api.prompt.render(':form_id');
}

exports.onContinuePostLogin = async (event, api) => {
  // Add your logic after completing the form
}
```






form_id部分をフォームIDで置き換えます。IDは、フォームのURLに、`ap_pUMG...`のように表示されます。または、フォームエディターの**［Embed（組み込み）］**タブで選択してください。[Actionsコードエディター](/docs/customize/actions/write-your-first-action#create-an-action)では、ビジネスロジックを定義して、フォーム表示のタイミングと方法を決定することができます。
ユーザーを[リダイレクト](/signup-and-login-triggers/login-trigger/redirect-with-actions)して、同じアクションでフォームを表示することはできません。両方使用する必要がある場合は、別のアクションの使用を検討してください。

```javascript lines
exports.onExecutePostLogin = async (event, api) => {

  // Only render the form if user is missing company_name metadata
  if (!event.user.user_metadata.company_name) {
    api.prompt.render(':form_id');
  }
}

exports.onContinuePostLogin = async (event, api) => {
  // Add your logic after completing the form
}
```






アクションごとに1つのフォームしか表示できません。複数のフォームを表示する必要がある場合は、別のアクションでフォームを表示しなければなりません。

* [Event Object](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger/post-login-event-object): Learn about the Event objects and properties.
* [API object](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger/post-login-api-object): Learn about the API objects and methods.

## 既存のフィールドと非表示のフィールドの値を入力したい場合は、`api.prompt.render()`メソッドが`fields`プロパティを使用した第二引数をサポートしています。下記の例では、IDが`first_name`のフィールドに、`Jane`という値が入力されます。

カスタムデータを、クライアント側に表示することなく注入する必要がある場合は、`vars`プロパティを使用することができます。

共有変数によるカスタムデータの注入（サーバー側）

```javascript lines
exports.onExecutePostLogin = async (event, api) => {
  api.prompt.render(':form_id', {
    fields: {
      first_name: 'Jane',
    }
  });
}

exports.onContinuePostLogin = async (event, api) => {
  // Add your logic after completing the form
}
```






<Warning>

Do not populate sensitive information, populated values are exposed to the browser (client-side).

</Warning>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Make sure that the field `ID` referenced in the second argument is available client-side in your [nodes and components](/docs/customize/forms/nodes-and-components); otherwise, the value will not populate.

</Callout>

## 下記の例では、`123456789`の値を使って`external_user_id`変数を注入します。

制約と制限

フォーム内で、収集されたフィールドと共有変数データは自動的に現在のアクションのresume関数の`event.prompt`で利用可能になります。

```javascript lines
exports.onExecutePostLogin = async (event, api) => {
  api.prompt.render(':form_id', {
    vars: {
      external_user_id: '123456789',
    }
  });
}

exports.onContinuePostLogin = async (event, api) => {
  // Add your logic after completing the form
}
```






<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Shared variables `{{vars.*}}` do not have data type restrictions.

Shared variables `{{vars.*}}` are always automatically masked.

Unlike when populating `{{fields.*}}` variables, the `{{vars.*}}` property does not need to exist in your form before injecting values.

You can use the `{{vars.*}}` property to reference shared variables in your Forms and its linked Flows. To learn more, read [Variables](/docs/customize/forms/variables).

</Callout>

## `id`プロパティはレンダリング対象のプロンプトIDを定義します。

Fields and shared variables data collected, in your forms, is automatically available with the `event.prompt` in the resume function of the current action:

* `vars`オブジェクトにはすべての共有変数データがあります。
* 以下の例では、`api.user.setUserMetadata`にフォームから収集された`event.prompt.fields.company_name`プロパティのある`user_metadata`の`company_name`属性が入力されます。
* 制約と制限



<Accordion title="Example of event.prompt object">

```json lines
{
  "id": "ap_fuVuFiiQWN3mTEujWTy966",
  "fields": {
    "first_name": "Jane",
    "company_name": "Okta"
  },
  "vars": {
    "external_crm_uuid": "f8f32e6f-2329-49bd-bf21-fa8b0bea2652",
    "api_hostname": "api.example.com"
  }
}
```






</Accordion>



In the example below, the `api.user.setUserMetadata` populates the `user_metadata` `company_name` attribute with the `event.prompt.fields.company_name` property that was collected from your form.

```javascript lines
exports.onExecutePostLogin = async (event, api) => {
  api.prompt.render(':form_id');
}

exports.onContinuePostLogin = async (event, api) => {
  api.user.setUserMetadata('company_name', event.prompt.fields.company_name);
}
```






## 1つのアクションからは1つのフォームのみをレンダリングできます。複数のフォームをレンダリングしなければならない場合は、別のアクションを使用します。

* You cannot [redirect](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger/redirect-with-actions) a user and render a form in the same Action. If you need to use both, consider using different Actions.
* たとえば、1つの`post-login`トリガーに2つのアクションがある場合、両方のアクションで同じフォームはレンダリングできません。それぞれのアクションに別のフォームを作成する必要があります。
* `fields`プロパティのサイズは24 KBが上限です。
  `api.prompt.render()`メソッドは以下のトリガーで利用できます。
* [post-login](/signup-and-login-triggers/login-trigger/post-login-api-object)
* [post-challenge](/post-challenge-api-object)

  + [post-login](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger/post-login-api-object)
  + [post-challenge](/docs/customize/actions/explore-triggers/password-reset-triggers/post-challenge-trigger/post-challenge-api-object)