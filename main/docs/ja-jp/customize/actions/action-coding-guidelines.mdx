---
og:description: Write clear, concise, and secure Actions code with our coding guidelines.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Actionsのコーディングガイドライン
og:url: https://auth0.com/docs/
permalink: action-coding-guidelines
title: Actionsのコーディングガイドライン
twitter:description: Write clear, concise, and secure Actions code with our coding
  guidelines.
twitter:title: Actionsのコーディングガイドライン
---

以下のガイドラインに従って、効率の良い、安全かつ明確なActionsコードを記述し、合理化された運用環境を実現します。

## Actionsの基本事項

* できるだけ最小限のHTTP要求ト数を使用し、妥当なタイムアウト（10秒未満）を設定してログイン中に要求が蓄積されないようにします。
* Use [application metadata](/docs/get-started/applications/configure-application-metadata) to filter for specific applications to determine if an Action should be run.

  + 検証の実施やMFAのトリガーを行うアクションが、意図せずまたは悪意のある方法でバイパスされることがないようにします。
* コーディングの基本事項

  + 受信データまたは保存データを使って、厳密等価演算子`===`のチェックを行います。
* Use [transaction metadata](/docs/customize/actions/transaction-metadata) to share data between [post-login triggers](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger) during the same execution.

  + [ESLint]()などのコードリンターや[Semgrep]()などの解析ツールを実行してコード品質を高め、問題を自動検出します。
* セキュリティの基本事項

  + シークレットや機微コードアーティファクトをアクションコードの一部としてテキスト形式で記述しないでください。代わりに、[シークレットマネージャー]()を使用するか、独自のマネージャーをアクションコード内で統合して利用します。
* Ensure that Actions, which provide verification or trigger <Tooltip tip="Multi-factor authentication (MFA): User authentication process that uses a factor in addition to username and password such as a code via SMS." cta="View Glossary" href="/docs/glossary?term=MFA">MFA</Tooltip>, cannot be bypassed unintentionally or maliciously.
* リダイレクトとAPI呼び出しには、必ずHTTPS URLを使用します。
* Use `event.request.hostname` for the domain used in Authentication API calls; this could be the default Auth0 tenant domain or a [custom domain](/docs/customize/custom-domains).

## （URLパラメーター、ユーザーエージェントなどの）受信データが改ざんされていないか注意します。

* 防御的コーディング
* [エラーをキャッチ]()して、必要に応じて対処します。
* Run a code linter, like [ESLint](https://eslint.org), and an analyzer, like [Semgrep](https://semgrep.dev/docs/getting-started/), to improve code quality and find issues automatically.

## ロギング

* Do not write secrets or sensitive code artifacts in plain text as part of your Actions code. Instead, use the [Secrets Manager](/docs/customize/actions/write-your-first-action#add-a-secret) or leverage your own manager by integrating it within the Actions code.
* アクションごとにログされる文字数は最大256文字です。
* 依存関係
* 管理された信頼できるパッケージを使用します。
* [`npm`の監査機能]()またはリポジトリに接続された依存関係チェッカーを使用して、未解決CVEがないか調べます。

## 可能な場合、最新バージョンのパッケージを使用します。

* [Catch errors](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Control_flow_and_error_handling#exception_handling_statements) and handle as necessary.
* メールが機密性または高い安全性が要求される状況下で使用されている場合、`event.user.email_verified`で検証されているかどうかを確認します。

## 接続ごとに提供されるユーザープロファイルデータもさまざまです。唯一保証されている[ユーザープロファイルフィールド](/users/user-profiles/user-profile-structure)は`user_id`です。

* ログインフローのリダイレクトアクション
* `api.redirect.encodeToken`によって返されるトークンは署名されますが、暗号化されません。そのため、機微データやPIIはペイロードに含めないでください。

## ログインに成功した後、以下を含むログインフローが実行されます。

* SSO（ログインフォームは表示されない）
* Check for outstanding CVEs using [`npm`'s audit feature](https://docs.npmjs.com/cli/v6/commands/npm-audit) or an automated dependency checker connected to a repository.
* リフレッシュトークン交換（ユーザーインタラクションなし）

## ROパスワード付与（資格情報はアプリケーションから収集され、トークンエンドポイントと交換される）

* リダイレクトするアクションは上記を考慮に入れ、インタラクションが必要な場合にアクセスを拒否するか、バイパスを意図的に許可する必要がありますが、これによってログインを要求するアプリケーションに負担がかかってきます。
* Different Connections provide different user profile data; the only guaranteed [user profile field](/docs/manage-users/user-accounts/user-profiles/user-profile-structure) is the `user_id`.

## Redirect Actions in the Login Flow

* The token returned by `api.redirect.encodeToken` is signed but not encrypted, so sensitive data or PII should not be included in the payload.
* The Login Flow runs after a successful login, which includes:

  + SSO (no login form shown)
  + silent authentication (checking a session using `prompt=none` in the authorization URL)
  + refresh token exchange (no user interaction)
  + RO password grants (credentials gathered from an application and exchanged with the token endpoint)
* Actions that redirect need to take the above cases into account and either deny access if interaction is required or intensionally allow bypassing, which puts the burden on the application requesting login.