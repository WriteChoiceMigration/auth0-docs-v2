---
og:description: Learn about the pre-user-registration Action trigger's API object.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: アクショントリガー：ユーザー登録前 - APIオブジェクト
og:url: https://auth0.com/docs/
permalink: pre-user-registration-api-object
title: アクショントリガー：ユーザー登録前 - APIオブジェクト
twitter:description: Learn about the pre-user-registration Action trigger's API object.
twitter:title: アクショントリガー：ユーザー登録前 - APIオブジェクト
---

ユーザー登録前アクショントリガーのAPIオブジェクトには以下が含まれます。

## `api.access`

登録試行の拒否など、ログインしているユーザーのアクセスを修正します。

### `api.access.deny(reason, userMessage)`

ユーザーが登録することを拒否します。このアクションの完了後、サインアップフローはすぐに停止し、以降のアクションは実行されません。

拒否されたユーザー登録に対するカスタムのエラーメッセージを構築します。

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reason</code></td>
<td>
<p>
<em>String</em>. An internal reason describing why this registration attempt is being denied. This value
   will appear in tenant logs.
          </p>
</td>
</tr>
<tr>
<td><code>userMessage</code></td>
<td>
<p>
<em>String</em>. A human-readable explanation for rejecting the registration attempt. This may be presented
   directly in end-user interfaces.
          </p>
</td>
</tr>
</tbody>
</table>

## 実行間で維持されるデータの保管と取得を行います。

提供されたkeyにキャッシュ済みの値が存在する場合は、それを記述したレコードを削除します。

### 提供されたkeyにキャッシュ済みの値が存在する場合は、それを記述したレコードを削除します。

値がキャッシュから削除されると、`CacheWriteResult`オブジェクトに`type: "success"`を含めて返します。操作に失敗すると、`type: "error"`を返します。エラーの場合には、返すオブジェクトに`code`プロパティを含めて、失敗の詳細を示します。

Returns a `CacheWriteResult` object with  `type: "success"` if a value was removed from the cache. A failed operation returns `type: "error"`. For errors, the returned object will have a
`code` property that indicates the nature of the failure.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>key</code></td>
<td>
<p><em>String</em>. The key of the record stored in the cache.</p>
</td>
</tr>
</tbody>
</table>

### 提供された`key`にキャッシュ済みの値が存在する場合は、それを記述したレコードを取得します。レコードが見つかった場合には、返されたオブジェクトの`value`プロパティにキャッシュ済みの値があります。

Retrieve a record describing a cached value at the supplied
`key`, if it exists. If a record is found, the cached value can
be found at the `value` property of the returned object.

Returns a cache record if an item is found in the cache for the supplied
`key`. Cache records are objects with a
`value` property holding the cached value as well as an
`expires_at` property indicating the maximum expiry of
the record in milliseconds since the Unix epoch.

**Important:**
This cache is designed for short-lived, ephemeral data. Items may not be
available in later transactions even if they are within their supplied their
lifetime.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>key</code></td>
<td>
<p><em>String</em>. The key of the record stored in the cache.</p>
</td>
</tr>
</tbody>
</table>

### 指定されたkeyのキャッシュに文字列値を保管または更新します。

このキャッシュに保管された値は、それを設定するトリガーにスコープが限定されます。これは[アクションのキャッシュ制限]()の対象になります。

Values stored in this cache are scoped to the Trigger in which they are set.
They are subject to the
[Actions Cache Limits](/docs/customize/actions/limitations).

Values stored in this way will have lifetimes of up to the specified
`ttl` or `expires_at` values. If no lifetime is
specified, a default of lifetime of 15 minutes will be used. Lifetimes may
not exceed the maximum duration listed at
[Actions Cache Limits](/docs/customize/actions/limitations).

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>key</code></td>
<td>
<p><em>String</em>. The key of the record stored in the cache.</p>
</td>
</tr>
<tr>
<td><code>value</code></td>
<td>
<p><em>String</em>. The value of the record to be stored.</p>
</td>
</tr>
<tr>
<td><code>options</code></td>
<td>
<p><em>Optional object</em>. Options for adjusting cache behavior.</p>
</td>
</tr>
<tr>
<td><code>options.expires_at</code></td>
<td>
<p>
<em>Optional number</em>. The absolute expiry time in milliseconds
            since the unix epoch. While cached records may be evicted earlier,
            they will never remain beyond the the supplied
            <code>expires_at</code>.
          </p>
<p>
<em>Note:</em> This value should not be supplied if a value was also
            provided for <code>ttl</code>. If both options are supplied, the
            earlier expiry of the two will be used.
          </p>
</td>
</tr>
<tr>
<td><code>options.ttl</code></td>
<td>
<p>
<em>Optional number</em>. The time-to-live value of this cache entry
            in milliseconds. While cached values may be evicted earlier, they
            will never remain beyond the the supplied <code>ttl</code>.
          </p>
<p>
<em>Note:</em> This value should not be supplied if a value was also
            provided for <code>expires_at</code>. If both options are supplied,
            the earlier expiry of the two will be used.
          </p>
</td>
</tr>
</tbody>
</table>

## 登録しているユーザーのメタデータの変更を行います。

登録しているユーザーのメタデータを設定します。user_metadataに保存されたデータは、ユーザーが視覚的に確認でき、編集することができます。

### 登録しているユーザーのメタデータを設定します。user_metadataに保存されたデータは、ユーザーが視覚的に確認でき、編集することができます。

注意：このトリガーはManagement APIを呼び出し、Management APIレート制限を消費します。この要求がレート制限に達し、タイムアウト制限時間内に再試行できなかった場合、APIは`Deadline Exceeded`エラーを返します。

`api.valdation.error(errorCode, errorMessage)`

拒否されたユーザー登録に対するカスタムのエラーメッセージを構築します。

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>
<p>
<em>String</em>. The name of metadata property.
          </p>
</td>
</tr>
<tr>
<td><code>value</code></td>
<td>
<p><em>Any value</em>. The value of the metadata property. This may be set to `null` to remove the metadata property.</p>
</td>
</tr>
</tbody>
</table>

### `api.user.setAppMetadata(name, value)`

注意：このトリガーはManagement APIを呼び出し、Management APIレート制限を消費します。この要求がレート制限に達し、タイムアウト制限時間内に再試行できなかった場合、APIは`Deadline Exceeded`エラーを返します。

`api.valdation.error(errorCode, errorMessage)`

拒否されたユーザー登録に対するカスタムのエラーメッセージを構築します。

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>
<p>
<em>String</em>. The name of metadata property.
          </p>
</td>
</tr>
<tr>
<td><code>value</code></td>
<td>
<p><em>Any value</em>. The value of the metadata property. This may be set to `null` to remove the metadata property.</p>
</td>
</tr>
</tbody>
</table>

## `api.validation`

拒否された登録試行に対するカスタムエラーコードとユーザーへのメッセージを定義します。

### `api.validation.error(errorCode, errorMessage)`

Define custom error codes and user messaging for denied registration attempts.

When a user's attempt to register is denied, the signup flow immediately stops following the completion of the current Action and no further Actions are executed.

<table class="table">
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>errorCode</code></td>
<td>
<p>
<em>String</em>. A custom error code that describes why a registration attempt was denied. This value appears in tenant logs. 
          </p>
</td>
</tr>
<tr>
<td><code>errorMessage</code></td>
<td>
<p><em>String</em>. A custom error message presented to users when their registrations are deinied.</p>
</td>
</tr>
</tbody>
</table>