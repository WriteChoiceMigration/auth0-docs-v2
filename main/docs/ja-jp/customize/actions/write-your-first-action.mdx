---
og:description: Learn how to write an Action, which includes choosing a flow, creating
  an Action and configuring it, and binding it to the flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 初めてのActionを作成する
og:url: https://auth0.com/docs/
permalink: write-your-first-action
title: 初めてのActionを作成する
twitter:description: Learn how to write an Action, which includes choosing a flow,
  creating an Action and configuring it, and binding it to the flow.
twitter:title: 初めてのActionを作成する
---

This guide will walk you through how to create and deploy your first Action using the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip>. When you finish, you should understand the basic functionality that you will use with all Actions and you will be familiar with the programming model. What you will learn constitutes the foundation of writing any Action, regardless of its purpose or the flow.

## 目標：ユーザーのログインをSlackで通知する

ユーザーがログインしたときにSlackチャンネルにメッセージを送信するアクションを作成してみましょう。このチュートリアルではPost Loginトリガーを使用しますが、ここで提供する情報はどの種類のトリガーでも役に立ちます。

To accomplish this task, you will do the following:

* このタスクを遂行するには、以下の作業が必要です。
* [アクションを作成する](#create-an-action)
* [シークレットを追加する](#add-a-secret)
* [依存性を追加する](#add-a-dependency)
* [下書きを保存する](#save-the-draft)
* [カスタムロジックを追加する](#add-custom-logic)
* [アクションをテストする](#test-an-action)
* [アクションをデプロイする](#deploy-the-action)
* [アクションをフローにアタッチする](#attach-the-action-to-a-flow)

## [アクションの結果をテナントログで確認する](#observe-actions-in-tenant-logs)

Because this Action will be sending messages to a Slack channel, you need to [create an Incoming Webhook for a Slack Workspace](https://api.slack.com/messaging/webhooks). Once you have a Slack Webhook URL, you may continue with this guide.

## このアクションによってメッセージがSlackチャンネルに送信されるため、[Slack WorkspaceのIncoming Webhookを作成する]()必要があります。Slack Webhook URLを作成してから、このガイドの手順に戻ってください。

アクションを作成する

1. Navigate to [Auth0 Dashboard > Actions > Library,](https://manage.auth0.com/#/actions/library) then select **Create Action** > **Build from scratch**.
2. Enter a **Name** and select the **Login / Post Login** trigger since you’ll be adding an Action to the Login flow, then select **Create.**

特定のフローでアクションを機能させるには、アクションを作成してフローに追加する必要があります。

<Frame>![Actions Code Editor](/images/cdy7uua7fh8z/12Q8OEuDI39eWuWsrVVwN0/ff7dd385d33aee704e1cb603f43c679b/2025-02-28_13-27-14.png)</Frame>

## Actionsコードエディターが表示されます。

テンプレートからアクションを作成する

1. Navigate to [Auth0 Dashboard > Actions > Library](https://manage.auth0.com/#/actions/library), then select **Create Action.**
2. Select **Choose from template**.
3. Select the template that you would like to use for building an Action.
4. You should now see a read-only preview of the code within the template. To proceed, select **Use this template**.
5. Enter a name, and select **Create**.

## Actionsテンプレートギャラリーには、アクションの作成に役立つ多種多様なスターターテンプレートを取り揃えています。テンプレートからアクションを作成するには、以下の手順で行います。

Each Action can contain Secret values, which are suitable for holding sensitive information, such as <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=Access+Tokens">Access Tokens</Tooltip> and API Keys. Let’s store the Slack Webhook URL as a Secret.

1. Select the Key Icon from the code editor's left sidebar
2. Select **Add Secret**.
3. Give the Secret the following name: `SLACK_WEBHOOK_URL`.
4. Paste in the Webhook URL provided by Slack and select **Create**.

アクションにはそれぞれシークレット値を含めることができ、アクセストークンやAPIキーなどの機密情報を保管するのに適しています。Slack Webhook URLをシークレットとして書き込んでみましょう。

<Frame>![Actions Code Editor - Your Secret has been added in the Secrets section.](/images/cdy7uua7fh8z/4FyFtKRSIYuigxE9U8TkEJ/9598b5909694631ca673f748abf2268a/Screen_Shot_2022-02-09_at_3.24.05_PM.png)</Frame>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Once a Secret has been created, its value will never be revealed. Auth0 encrypts all Secrets and stores them securely.

</Callout>

## シークレットがアクションに追加されました。新しいシークレットは、インテリジェントなコード補完機能に「`event.secrets`」と入力して使用することができます。

You’ll be using the [`@slack/webhook` `npm` package](https://www.npmjs.com/package/@slack/webhook) to make it easy to send a message to Slack. You can use nearly any public `npm` package in an Action as long as it can be installed without relying on [native add-ons](https://www.npmjs.com/package/node-gyp).

依存関係を追加するには、以下を行います。

1. Select the Dependency icon (cube icon) in the sidebar.
2. For **Name**, enter `@slack/webhook`.

   デフォルトで、アクションは、依存関係が追加された時点で最新版の依存関係を使用します。
3. Select **Create**, and the Dependency should be added to the Action:

   <Frame>![Actions Code Editor: Your dependency has been added.](/images/cdy7uua7fh8z/Jmzvgydo204pBLikzuDJy/1d9a614b4c92f27afbbdd2b2af3b3c0b/Screen_Shot_2022-02-23_at_11.28.41_AM.png)</Frame>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

When you save this Action, the latest version of your dependency will be resolved and replaced with a specific version number to keep future updates to the package from breaking your Action.

</Callout>

## 下書きを保存する

**［Save Draft（下書きの保存）］**を選択します。アクションは保存されますが、フローの一環としてはまだ実行されません。Actionsを使用すると、Auth0テナントでトラフィックに影響を与えることなく、アクションを作成し、編集してテストすることができます。アクションの動作が思い通りになったら、アクションをデプロイして、後でフローに追加します。

## カスタムロジックを追加する

アクションにシークレットと依存関係を構成し終わったので、次はコードを書いてみましょう！

Every Action has an event object that contains read-only, contextual information relevant to the associated trigger. If you start typing `event.` in the Editor, you should be presented with all the available properties of the event. To learn more about which information is available on each trigger, read [Explore Flows and Triggers](/docs/customize/actions/explore-triggers).

アクションを使って早速Slackに通知してみましょう！アクションに以下のコードを追加します。

```javascript lines
const { IncomingWebhook } = require('@slack/webhook');

exports.onExecutePostLogin = async (event, api) => {
    const url = event.secrets.SLACK_WEBHOOK_URL;
    const webhook = new IncomingWebhook(url);

    // Send the notification
    await webhook.send({ text: "Logging In..." });
};
```






**［Save Draft（下書きの保存）］**を選択し、アクションを保存します。

## アクションをテストする

実際のトラフィックを使ってテナントでアクションを実行する前にテストして、期待通りに動作することを確認します。

1. Select the Test (triangle) icon in the sidebar. In the Payload section, you’ll see editable JSON data relevant to the trigger that you selected when you created the Action.

   <Frame>![Actions Code Editor: Test Runner panel](/images/cdy7uua7fh8z/4MSu8EfpMLNJpcYtrwP7Jf/66480a0434c89eadb809012bca890037/Screen_Shot_2022-02-10_at_10.01.10_AM.png)</Frame>
2. Select the **Run** button, and you should see a message appear in your Slack channel.

## アクションをデプロイする

アクションが期待通りに動作していることが確認できたら、いよいよデプロイです。

**［Deploy（導入）］**を選択します。アクションをデプロイすると、その時点でのアクションのスナップショットが作成され、**［Action Version（アクションのバージョン）］**として記録されます。

**［Version History（バージョン履歴）］**を選択すると、アクションが「Version 1」として記録されているのが分かります。

<Frame>![Actions: Version History](/images/cdy7uua7fh8z/53sn70cXoxUHibc3Bmk7Og/193af512ac2b58f3d60ab36ca5499d90/Screen_Shot_2022-02-10_at_10.02.47_AM.png)</Frame>

これで、「Version 1」のアクションに影響を与えることなく、アクションを自由に更新して保存することができます。Auth0は現在デプロイされているバージョンのアクションを実行するため、アクションがもう一度デプロイされるまでは「Version 1」のアクションが実行されます。

## Attach the Action to a Flow

新しいアクションを構成する最後の手順は、フローにアタッチすることです。これを行うと、アクションがテナントのトラフィックの一部として実行されるようになります。

1. Navigate to [Auth0 Dashboard > Actions > Flows](https://manage.auth0.com/#/actions/flows) to see a list of the available Flows:
2. Select the [Login flow](/docs/customize/actions/explore-triggers/signup-and-login-triggers/login-trigger) and drag `my-slack-action` into the flow.

   <Frame>![Actions Flows: Login Flow](/images/cdy7uua7fh8z/6hU7sKWtGzSx9Z8dhsXbvp/0253fb4e9eac1133cc9626385622c54e/Login_Action_-_English.png)</Frame>
3. Select **Apply**.

The Action is now running for real user traffic within your tenant. If you’d like a more robust testing environment, consider [setting up multiple Auth0 environments](/docs/get-started/auth0-overview/create-tenants/set-up-multiple-environments).

## テナントログでアクションを観察する

Now that your Action is running as part of the Login flow, Auth0 captures information about each Action execution in the tenant logs. To view this, navigate to [Auth0 Dashboard > Monitoring > Logs](https://manage.auth0.com/#/logs), and select a **Successful Login** event.

**［Action Details（アクションの詳細）］**ビューに、フローで実行されたアクションについての情報が表示されます。

<Frame>![Tenant Logs: Action Details view](/images/cdy7uua7fh8z/61k82wmsXSb9M3wOExM4jH/51fae3a36a8ecddeec08bc45da468e2b/Action_logs_-_English.png)</Frame>

## 次の手順

Now that you’ve written your first Action, check out [Explore Flows and Triggers](/docs/customize/actions/explore-triggers) to learn how to perform some common tasks with Actions.