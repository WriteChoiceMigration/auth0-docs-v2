---
og:description: Learn how to set up a code-based custom email provider.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: カスタムメールプロバイダーを構成する
og:url: https://auth0.com/docs/
permalink: configure-a-custom-email-provider
sidebarTitle: カスタムメールプロバイダーを構成する
title: カスタムメールプロバイダーを構成する
twitter:description: Learn how to set up a code-based custom email provider.
twitter:title: カスタムメールプロバイダーを構成する
---

カスタムメールプロバイダを使用して、任意のメールプロバイダーをセットアップできます。デフォルトのメールプロバイダーでは非対応のメールプロバイダーにメッセージを送信するには、[Actionsコードエディター](/actions/actions-overview)を活用できます。また、メール配信プロセスを完全に制御することで、以下のようなユースケースに対応できます。

* 再試行の失敗
* 受信者の変更
* メッセージペイロードの変更
* Organization固有のロジックの作成



## Auth0 Dashboardでカスタムメールプロバイダーを構成する

1. [［Auth0 Dashboard］>［Branding（ブランディング）］>［Email Provider（メールプロバイダー）］](%24%7Bmanage_url%7D/#/templates/provider)に移動します。
2. **［Use my own email provider（独自のメールプロバイダーを使用する）］**を有効にします。
3. **［Email Provider（メールプロバイダー）］**セクションで、**［Custom Provider（カスタムプロバイダー）］**を選択します。
4. **［From（差出人）］**フィールドに、メールの送信元となるデフォルトのメールアドレスを入力します。
5. コードエディターで、カスタムメールプロバイダーにメッセージを送信するための適切なアクションコードを追加します。プロバイダーのAPIにメッセージを送信する方法については、プロバイダーのドキュメントを参照してください。他のアクションと同様に、[Management API](https://auth0.com/docs/api/management/v2/actions/get-actions)を使用して、アクションとその[バージョン](/actions/manage-versions)を管理します。
6. 左側のメニューでキーをクリックして、APIでの認証に必要な[シークレット](/actions/write-your-first-action)を追加します。
7. 左側のメニューでボックスをクリックして依存関係を追加します。



8. **［Edit in Expanded Editor（拡張エディターで編集）］**をクリックします。拡張エディターでは、シークレットや依存関係を追加したり、アクションをテストしたりできます。過去にデプロイされたアクションのバージョン履歴にアクセスすることもできます。`custom-email-provider`アクションの書き方については、「[custom-email-providerアクションの例](#example-custom-email-provider-action)」を参照してください。

9. アクションをデプロイするには、拡張エディターの右上にある**［Deploy（デプロイ）］**をクリックします。

10. 拡張エディターの左上にある**［Back to Email Provider（メールプロバイダーに戻る）］**をクリックします。**［Provider Configuration（プロバイダーの構成）］**セクションに緑のチェックマークと**［Enabled（有効）］**が表示されるはずです。

11. **［Save（保存）］**をクリックして、カスタムメールプロバイダーの構成を確定します。**［Save（保存）］**をクリックすると、アクションが自動的に保存されてデプロイされます。

12. 運用環境で使い始める前に、**［Send Test Email（テストメールの送信）］**をクリックして、カスタムメールプロバイダーをテストします。カスタムメールプロバイダーの構成を保存するまで、テストメールは送信できません。



## アクションを削除する

アクションを削除するには、まず[［Auth0 Dashboard］>［Branding（ブランディング）］>［Email Provider（メールプロバイダー）］](%24%7Bmanage_url%7D/#/templates/provider)で**［Custom Email Provider（カスタムメールプロバイダー）］**を無効にしてからアクションを削除することで、メール配信の失敗を防ぐことができます。

## `custom-email-provider`アクションの例

以下のサンプルコードでは、メール通知の送信にトリガーされた`onExecuteCustomEmailProvider`関数が2つの引数を取ります。

1. `event`：ユーザーと通知のコンテキストに関する情報を含みます。詳細については、「[アクショントリガー：custom-email-providerイベントオブジェクト](https://auth0.com/docs/customize/email/configure-a-custom-email-provider/action-triggers-custom-email-provider-event-object)」を参照してください。
2. `api`：通知送信中のカスタム動作にヘルパーメソッドを提供します。詳細については、「[アクショントリガー：custom-email-provider API オブジェクト](https://auth0.com/docs/customize/email/configure-a-custom-email-provider/action-triggers-custom-email-provider-api-object)」を参照してください。





アクションの書き方やデプロイメントについては。「[アクションを初めて作成する](/customize/actions/write-your-first-action)」をお読みください。