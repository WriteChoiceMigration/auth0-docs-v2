---
og:description: Learn how to customize email flow and control when and how emails
  are sent.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: メールのハンドリングをカスタマイズする
og:url: https://auth0.com/docs/
permalink: manage-email-flow
title: メールのハンドリングをカスタマイズする
twitter:description: Learn how to customize email flow and control when and how emails
  are sent.
twitter:title: メールのハンドリングをカスタマイズする
---





デフォルトのメールフローは、ほとんどのアプリケーションの要件に対応することができますが、以下のようなものを実装する場合は、より柔軟な対応が求められることがあります。

* ローカリゼーション
* ユーザーまたはテナントに基づいたカスタム**［Redirect To（リダイレクト先）］**URL
* アプリケーションやテナントに応じて異なるメールテンプレート

Auth0 Management APIは、メールフローを管理してメールの送信タイミングと方法をコントロールするためのエンドポイントを提供します。必要な場合、独自のカスタムメールエンドポイントを実装し、Auth0 Management APIエンドポイントを使用して残りのフローを管理することもできます。

## 確認メール

確認メールは、`email_verified`プロパティが`false`に設定されたすべてのユーザーに対して送信されます。通常は、データベース接続内のユーザーであったり、新規ユーザー登録時にメールアドレスを検証しないソーシャルプロバイダーを認証するユーザーであったりします。

確認メールは複数の方法で送信できます。



### ログインに確認済みメールを必須にする

ルールでログインする前に、ユーザーにメール確認を必須にすることができます。



### カスタムリダイレクト

カスタムリダイレクトは、ユーザー属性またはテナントに基づいて、ユーザーを特定のURLに移動したい場合に便利です。Auth0 Management APIには、ユーザーごとに確認リンクを生成する[メール確認チケットの作成エンドポイント](/api/management/v2/#!/Tickets/post_email_verification)が表示されます。このエンドポイントを使用して`result_url`を指定することができます。ユーザーは、確認メールのリンクをクリックしてメールアドレスを確認した後、この指定した値にリダイレクトされます。

[Auth0 Dashboard](%24%7Bmanage_url%7D/#/templates/provider)でURLを許可リストに登録されることをお勧めします。詳細については、「[AllowListにアドレスを追加する](/security/data-security/allowlist)」を参照してください。

## ウェルカムメール

ユーザーがメールアドレスを確認した後、ウェルカムメールがユーザー宛てに送信されます。

### 独自のAPIを使用してウェルカムメールを送信する

[ルール](/rules)を使用して、APIを呼び出し、ユーザーのメールアドレスが確認され、メールが以前に送信されていない場合にのみ、ウェルカムメールを送信することができます。



## パスワードリセットメール

Auth0 Management APIの[パスワード変更チケットの作成](/api/management/v2/#!/Tickets/post_password_change)エンドポイントを使用してパスワードの変更チケットを作成し、メールにパスワード変更チケットのURLを入れてユーザーに送信することができます。ユーザーはリンクをクリックすると、ユニバーサルログインフローを介してパスワードをリセットするよう求められます。