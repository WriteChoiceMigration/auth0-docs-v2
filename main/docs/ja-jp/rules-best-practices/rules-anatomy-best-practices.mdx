---
og:description: Learn about best practices for building Auth0 rules.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ルールの構造に関するベストプラクティス
og:url: https://auth0.com/docs/
permalink: rules-anatomy-best-practices
title: ルールの構造に関するベストプラクティス
twitter:description: Learn about best practices for building Auth0 rules.
twitter:title: ルールの構造に関するベストプラクティス
---



ルールは基本的に、`user`オブジェクト、`context`オブジェクト、`callback`関数の3つのパラメーターが渡されるJavaScriptの無名関数です。



関数宣言の末尾にセミコロンを追加**しない**でください。ルールの実行が中断されます。無名関数は、例外的なエラー条件の結果として生成されたコールスタックの解釈を困難にします。診断分析を容易にするため、簡潔で一意の命名規則を使用してください（例：`function MyRule1 (user, context, callback) {...}`）。詳細については、「[エラー処理のベストプラクティス](/not-found/70zpztJMDHy4q0bwO4Xzgn/error-handling-best-practices)」をお読みください。

ルールは、Auth0エンジン全体の一部を形成する、真正性のアーティファクト生成に関連するパイプラインで実行されます。パイプラインが実行されると、有効なすべてのルールがリストされている順序でパッケージ化され、1つのコードBlobとして送信され、Auth0のサーバーレスWebtaskとして実行されます。Auth0エンジン全体を確認するには、「[Auth0エンジンの内側。](https://cdn.auth0.com/blog/auth0-raises-100m-to-fuel-the-growth/inside-the-auth0-engine-high-res.jpg)」をダウンロードしてください。

## サイズ

有効なすべてのルールの実装では、総サイズが100 KBを上回らないようにすることを推奨します。Auth0のサーバーレスWebtaskプラットフォームでパッケージングと転送が処理されるため、サイズが大きいほど遅延が長くなります。そして、これはシステムの性能にも影響を与えます。100 KBの制限には、`require`ステートメントの一部として参照された可能性のある`npm`モジュールは含まれません。

## Order（順序）

Auth0 Dashboardに表示されるルールの順序によって、ルールが実行される順序が決まります。あるルールが複数の定義を作成し、実行に関連付けられた環境内で別のルールがその定義に依存していることがあるため、この順序は重要です。この場合、定義を作成するルールを、その定義を使用するルールの前に実行する必要があります。詳細については、「[ルール環境のベストプラクティス](/rules-best-practices/rules-environment-best-practices)」をお読みください。

API（Auth0 Management APIを含む）を呼び出す、負荷の大きいルールは、できるだけ後で実行します。他に負荷が小さく、`unauthorized`アクセスの判断につながる可能性のあるルールがある場合は、そのようなルールを先に実行する必要があります。