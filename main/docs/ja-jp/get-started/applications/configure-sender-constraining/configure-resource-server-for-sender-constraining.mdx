---
og:description: Overview of how to configure Sender Constraining for your Auth0 tenant.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 送信者制約を構成する
og:url: https://auth0.com/docs/
permalink: configure-resource-server-for-sender-constraining
title: 送信者制約を構成する
twitter:description: Overview of how to configure Sender Constraining for your Auth0
  tenant.
twitter:title: 送信者制約を構成する
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Sender constraining tokens using Demonstrating Proof-of-Possession (DPoP) is currently in Early Access. To request access to this feature, contact your Auth0 representative.

</Callout>

[Sender constraining](/docs/secure/sender-constraining) is an <Tooltip tip="" cta="View Glossary" href="/docs/glossary?term=OAuth+2.0">OAuth 2.0</Tooltip> and <Tooltip tip="" cta="View Glossary" href="/docs/glossary?term=OpenID">OpenID</Tooltip> Connect (OIDC) security mechanism that cryptographically binds access and <Tooltip tip="" cta="View Glossary" href="/docs/glossary?term=refresh+tokens">refresh tokens</Tooltip> to the specific client application that obtained them, preventing token theft and misuse.

Auth0 supports mTLS sender constraining and Demonstrating Proof-of-Possession (DPoP). If you enable sender constraining for a client application, then you must also enforce it for the <Tooltip tip="" cta="View Glossary" href="/docs/glossary?term=resource+server">resource server</Tooltip> you’re making API calls to.

Highly Regulated Identityは、「mTLSトークンバインディング」としても知られる[相互TLSクライアント証明書バインドアクセストークン]()を通じてトークン制約機能を提供します。送信者制約の構成方法の詳細は、以下を参照してください。

* [送信者制約用にクライアントを構成する](/configure-client-for-sender-constraining)
* [Sender Constraining用にリソースサーバーを構成する](/configure-sender-constraining/configure-resource-server-for-sender-constraining)

## アクセストークンが証明書にバインドされる仕組み

<Tooltip tip="" cta="View Glossary" href="/docs/glossary?term=Access+tokens">Access tokens</Tooltip> are sender constrained in Auth0 depending on how you configure sender constraining for your client application and resource server:

1. **Requested audience:** In a token request, whether the requested audience is `/userinfo` only, or only intended to be used with the [`/userinfo`](https://auth0.com/docs/api/authentication/user-profile/get-user-info) endpoint, or is a custom API that may include `/userinfo` when you also request the openid scope, affects whether access tokens are sender constrained.
2. **Client application:** Whether you set sender constraining as `required` by the client application.
3. **Resource server:** Whether you configure sender constraining for the resource server:

   1. `none`: You have not configured sender constraining for the resource server.
   2. `allowed`: You have configured sender constraining for the resource server by setting a sender constraining method.
   3. `required`: You have configured sender constraining as required for the resource server, meaning that access tokens must be sender-constrained to an application. Requires a sender constraining method.

* トークンの検証

  + mTLSトークンバインディングが有効になると、アクセストークンは、これらを要求したアプリケーション（つまり「送信者」アプリケーション）の制約を受けることになります。リソースサーバーは、要求で送信されたクライアント証明書がアクセストークントークンに含まれるものと同じサムプリントを持っていることを検証する責任があります。これは「Proof-of-possession（所有の証明）」の検証とも呼ばれています。
  + アプリケーションが証明書にバインドされたアクセストークントークンを使用する権限があることを検証するために、リソースサーバーは要求で使用されたクライアント証明書のサムプリントを生成し、それを`cnf`クレームのサムプリントと比較する必要があります。`cnf`クレームの形式と証明書のサムプリントの生成方法に関する詳細は、RFC 8705の「[JWT Certificate Thumbprint Confirmation Method（JWT証明書サムプリント確認方法）]()」に関するセクションを参照してください。

アプリケーションが要求にクライアント証明書を送信しなかった場合、またはクライアント証明書のサムプリントが一致しなかった場合、リソースサーバーは、`HTTP 401`ステータスコードおよび`invalid_token`エラーコードを使用して、その要求を拒否します。

<table class="table"><thead>
<tr>
<th><strong>Requested Audience Type</strong></th>
<th><strong>Client Requires PoP?</strong></th>
<th><strong>Proof-of-Possession (PoP) Sent by Client?</strong></th>
<th><strong>Auth0 Resource Server Policy: None</strong></th>
<th><strong>Auth0 Resource Server Policy: Allowed (Not Required)</strong></th>
<th><strong>Auth0 Resource Server Policy: Required</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Userinfo Only</td>
<td>No</td>
<td>No</td>
<td>Issued, Not Sender-Constrained</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>Userinfo Only</td>
<td>No</td>
<td>Yes</td>
<td>Issued, Sender-Constrained</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>Userinfo Only</td>
<td>Yes</td>
<td>No</td>
<td>Not Issued</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>Userinfo Only</td>
<td>Yes</td>
<td>Yes</td>
<td>Issued, Sender-Constrained</td>
<td>N/A</td>
<td>N/A</td>
</tr>
<tr>
<td>Custom Audience (may contain Userinfo)</td>
<td>No</td>
<td>No</td>
<td>Issued, Not Sender-Constrained</td>
<td>Issued, Not Sender-Constrained</td>
<td>Not Issued</td>
</tr>
<tr>
<td>Custom Audience (may contain Userinfo)</td>
<td>No</td>
<td>Yes</td>
<td>Issued, Not Sender-Constrained</td>
<td>Issued, Sender-Constrained</td>
<td>Issued, Sender-Constrained</td>
</tr>
<tr>
<td>Custom Audience (may contain Userinfo)</td>
<td>Yes</td>
<td>No</td>
<td>Not Issued</td>
<td>Not Issued</td>
<td>Not Issued</td>
</tr>
<tr>
<td>Custom Audience (may contain Userinfo)</td>
<td>Yes</td>
<td>Yes</td>
<td>Not Issued</td>
<td>Issued, Sender-Constrained</td>
<td>Issued, Sender-Constrained</td>
</tr>
</tbody>
</table>

## 以下の表は、[アプリケーション](/get-started/applications/configure-mtls/configure-mtls-for-a-client)（OAuthクライアント）と[API](/get-started/applications/configure-mtls/set-up-resource-server-for-token-binding)（OAuthリソースサーバー）のmTLS設定に基づいて、発行されたトークンが送信者制約を受けているかどうかを説明したものです。この表は、以下のシナリオに対応しています。

要求されたオーディエンスのタイプ：`userinfo`のみ、または`userinfo`を含むカスタムオーディエンス

送信者制約がクライアントによって`required`とされているかどうか

You can configure sender constraining for a client application with the <Tooltip tip="" cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip> or <Tooltip tip="" cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>.

<Tabs><Tab title="Auth0 Dashboard">

1. Go to [Dashboard > Applications > Applications](https://manage.auth0.com/#/applications). Select the application you want to configure.
2. Under **Settings**, scroll to **Token Sender-Constraining**.
3. Toggle on to **Require Sender Constraining**. Toggle off to remove the requirement for Sender Constraining for the application.

<Frame>![](/images/cdy7uua7fh8z/3BoGW9NEYKPBkfk2tPBL7l/0f884ac3f64f17b23fd6a0e9436bb472/Screenshot_2024-07-23_at_1.30.19_PM.png)</Frame>

</Tab><Tab title="Management API">

To configure a client for Sender Constraining, use the [Management API](https://auth0.com/docs/api/management/v2).

To require Sender Constraining for a client, send a PATCH request to [update the client's settings](https://auth0.com/docs/api/management/v2/clients/patch-clients-by-id). Set the `require_proof_of_possession` parameter to `true`.

```json lines
"require_proof_of_possession": true
```






To remove the requirement for Sender Constraining, set the `require_proof_of_possession` parameter to `false`.

```json lines
"require_proof_of_possession": false
```






</Tab></Tabs>

## `none`：リソースサーバーに対して送信者制約が設定されていません。

`allowed`：mTLSを送信者制約メソッドとして設定することで、リソースサーバーに対して送信者制約が構成されています。

`required`：リソースサーバーに対して送信者制約が必須とされています。つまりアクセストークンは、アプリケーションに対する送信者制約を受けている必要があります。送信者制約メソッドが必要です。

<Tabs><Tab title="Auth0 Dashboard">

To enable Token Binding or sender constraining, configure the **API Settings** of your API.

1. Navigate to [Auth0 Dashboard > Applications > APIs](https://manage.auth0.com/#/apis).
2. Select the API you want to configure.
3. Under the **Settings** tab, find the **Token Sender-Constraining** section.
4. Configure the following:

   1. Sender Constraining Method:

      1. **None:** Don’t enable a sender constraining method for your resource server.
      2. **mTLS**: Enable mTLS as the sender constraining method for your resource server.
      3. **DPoP:** Enable DPoP as the sender constraining method for your resource server.

B. Toggle on **Require Token Sender Constraining**. All access tokens issued to an application for this API will be constrained to that application.

<Frame>![Auth0 Dashboard > APIs > Settings > Token binding](/images/cdy7uua7fh8z/3Dv98iZosdpJMcZXfXyurn/823fa368ab874218fbb737aacac9b262/Screenshot_2025-07-28_at_3.59.01â__PM.png)</Frame>

</Tab><Tab title="Management API">

To enable Sender Constraining with the Management API, send a PATCH request to [update the resource server](https://auth0.com/docs/api/management/v2/resource-servers/patch-resource-servers-by-id). Set the parameters of the `proof_of_possession` object to the following:

<table class="table"><thead>
<tr>
<th><strong>Parameter</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>mechanism</code></td>
<td>Sets the sender-constraining method: <code>none</code>, <code>mtls</code>, or <code>dpop</code>.</td>
</tr>
<tr>
<td><code>required</code></td>
<td>When set to <code>true</code>, all access tokens issued to an application for this API will be constrained to that application. When set to <code>false</code>, sender constraining is not required for the application.</td>
</tr>
</tbody>
</table>

The following code sample is an example request body that configures a resource server for mTLS Sender Constraining:

```json lines
"proof_of_possession": {
    "mechanism": "mtls",
    "required": true
  }
```






</Tab></Tabs>