---
og:description: Describes how to configure mTLS Authentication for a tenant.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: テナントのmTLS認証の構成
og:url: https://auth0.com/docs/
permalink: configure-mtls-for-a-tenant
title: テナントのmTLS認証の構成
twitter:description: Describes how to configure mTLS Authentication for a tenant.
twitter:title: テナントのmTLS認証の構成
---

テナントのmTLS認証を構成する方法を説明します。



まず最初に、[カスタムドメイン](/custom-domains)を構成して検証する必要があります。

### カスタムドメインを作成する

[Management API](https://auth0.com/docs/api/management/v2)でmTLSヘッダーを受け入れるための[カスタムドメイン](/custom-domains)をテナントレベルで構成する必要があります。[カスタマーエッジ](/configure-mtls/set-up-the-customer-edge)はクライアント証明書を検証する責任を負うため、POST要求で`type`を`self_managed_certs`に設定します。



要求に成功すると、カスタムドメインを検証するために使われる識別子が返されます。詳しくは、APIドキュメントの[「新規カスタムドメインの構成」](https://auth0.com/docs/api/management/v2/custom-domains/post-custom-domains)をご覧ください。

### 既存のカスタムドメインをパッチする

[Management API](https://auth0.com/docs/api/management/v2)でmTLSヘッダーを受け入れるための既存のカスタムドメインを構成できます。しかし、すでに存在するカスタムドメインの`type`は変更できません。



以下のPOST要求でmTLSヘッダーを受け入れるための既存のカスタムドメインを構成します。



詳しくは、APIドキュメントの[「カスタムドメイン構成の更新」](https://auth0.com/docs/api/management/v2/custom-domains/patch-custom-domains-by-id)をご覧ください。

### カスタムドメインを検証する

Auth0は、カスタムドメインの作成と更新要求を受け入れる前に、まずドメインを検証する必要があります。[Management API](https://auth0.com/docs/api/management/v2)を使って以下のPOST要求を送り、カスタムドメインを検証します。



`status`フィールドで検証ステータスを確認します。検証が完了後、カスタムドメインが要求を受け入れ始めるまで最大10分かかる場合があります。

Auth0がこのカスタムドメインを初めて検証した場合、応答には`cname_api_key`が含まれます。これはエッジ/リバースプロキシを構成する際に必要です。このキーは秘密にしておく必要があり、転送された要求の検証に使われます。

詳しくは、APIドキュメントの[「カスタムドメインの検証」](https://auth0.com/docs/api/management/v2/custom-domains/patch-custom-domains-by-id)をご覧ください。

### mTLSエンドポイントエイリアスを有効にする

mTLSハンドシェイクでクライアントからのクライアント証明書が要求される場合、Webブラウザーはユーザーに証明書を選択するためのモーダルダイアログを表示します。これではユーザーエクスペリエンスに摩擦が生じるため、`/authorize`エンドポイントのようにmTLSが不要なエンドポイントでは回避すべきです。結果として、異なるドメインでmTLSトラフィックと非mTLSトラフィックに対応するお客様は、mTLSエンドポイントエイリアスを有効にするべきです。

mTLSエンドポイントエイリアスは、クライアントがOIDCディスカバリードキュメントの`mtls_endpoint_aliases`プロパティで指定するエンドポイントにmTLSトラフィックを送るべきであることを示します。クライアントは非mTLSトラフィックを通常のエンドポイントに送ります。`mtls_endpoint_aliases`プロパティに関する詳細は、[「リソースサーバーの呼び出し」](/get-started/authentication-and-authorization-flow/authenticate-with-mtls#call-the-resource-server)をお読みください。

mTLSエンドポイントエイリアスは、Auth0 DashboardとManagement APIで有効にすることができます。