---
og:description: Describes best practices for how to use Auth0 to secure your multi-tenant
  applications.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: マルチテナントアプリケーションのベストプラクティス
og:url: https://auth0.com/docs/
permalink: multi-tenant-apps-best-practices
title: マルチテナントアプリケーションのベストプラクティス
twitter:description: Describes best practices for how to use Auth0 to secure your
  multi-tenant applications.
twitter:title: マルチテナントアプリケーションのベストプラクティス
---

マルチテナントは、サーバー上で実行され、複数のユーザーグループがアクセスできるソフトウェアの単一インスタンスを特徴とする、アーキテクチャアプローチです。マルチテナントを使用すると、特性を共有するユーザーをグループに分割し、アプリケーションに対する個別のアクセス許可とアクセスレベルを付与できます。これにより、さまざまな顧客、事業単位、またはその他の定義されたユーザーグループに合わせてカスタマイズされたエクスペリエンスを作成、維持できます。

In Auth0, the best method for implementing multi-tenancy is [Auth0 Organizations](/docs/manage-users/organizations/organizations-overview). If necessary, other legacy solutions can be used to accommodate distinct business use cases. If you offer a [business-to-business (B2B)](/docs/get-started/architecture-scenarios/business-to-business) product or service, setting up multi-tenancy for your business users may be beneficial for your use case.

以下のセクションでは、Auth0でマルチテナントを実装するために使用できるオプションについて概説します。

<Warning>

This article uses the software architecture term "tenant" to refer to a group of users who can access your application. When referring to your Auth0 instance, the term "Auth0 tenant" is used.

</Warning>

## Auth0 Organizations

ほとんどのマルチテナントユースケースでは、Auth0 Organizationsは貴社と貴社のユーザーにとって理想的なソリューションです。Auth0 Organizationsは、エンドユーザーがアクセスできる1つ以上のアプリケーションを持つ企業間（B2B）の実装をサポートします。

一般的なB2Bの統合には以下のような特徴があります。

* 従業員が別の企業にライセンスされた製品を使用する
* 独自のフェデレーションと認証エクスペリエンスの軽量ブランディングを必要とする複数の組織。
* ユーザーグループごとに異なるレベルのアプリケーションアクセス。

With Auth0 Organizations, you can create unique groups of users and tailor their experiences with [role-based access control](/docs/manage-users/access-control/rbac), [customized login pages and email templates](/docs/manage-users/organizations/create-first-organization#customize-prompts-and-email-templates), and more.

To learn more about using Auth0 Organizations to implement multi-tenancy, review [Multiple Organization Architecture](/docs/get-started/architecture-scenarios/multiple-organization-architecture).

## レガシーソリューション

If Auth0 Organizations does not satisfy the requirements of your use case, please reach out to our [Professional Services](/docs/get-started/professional-services) team to develop a solution that ensures your success.

レガシーソリューションの例には、以下のようなものがあります：

* 各テナントを表すためにAuth0接続を使用すること。
* 各テナントを表すためにAuth0アプリケーションを使用すること。
* 各テナントを表すためにAuth0テナントを使用すること。
* ユーザーのプロファイルにテナントの詳細を保管すること。

### Auth0接続を使用する

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Entity limits may apply. To learn more, read [Entity Limit Policy](/docs/troubleshoot/customer-support/operational-policies/entity-limit-policy). If you have an Enterprise subscription, you will not be constrained due to entity limits, but you may be constrained by a connection that already has thousands of enabled clients.

</Callout>

各テナントは、個別のAuth0接続で表すことができます。

このアプローチでは、以下のようなシナリオをサポートできます：

* テナントごとに異なるパスワードポリシーなど、異なる接続レベルの要件がある場合。
* You have user pools from different connections. For example, one tenant could require users to provide username/password credentials, while another tenant could require users to log in through an enterprise <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=IdP">IdP</Tooltip>.

To prompt a user to log in through a specific connection, call the [Auth0 Authentication API Login endpoint](https://auth0.com/docs/api/authentication#login), and include the `connection` parameter.

<Warning>

If you use [Lock](/docs/libraries#lock) in your application, note that it supports a maximum of 50 database connections per application. Social and enterprise connections are not affected by this limit, but are still subject to the [Entity Limit Policy](/docs/troubleshoot/customer-support/operational-policies/entity-limit-policy).

</Warning>

### Auth0アプリケーションを使用する

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Entity limits may apply. To learn more, read [Entity Limit Policy](/docs/troubleshoot/customer-support/operational-policies/entity-limit-policy). If you have an Enterprise subscription, you will not be constrained due to entity limits, but you may be constrained by a connection that already has thousands of enabled clients.

</Callout>

各テナントは、個別のAuth0アプリケーションで表すことができます。

このアプローチにより、使用可能な接続など、さまざまなテナント要件に基づいて各Auth0アプリケーションを一意に構成できます。

アプリケーション内でユーザーが属するテナントは、追跡する必要があります。ユーザーがアプリケーションにログインしたら、その情報を読み取り、認証を完了するために適切なAuth0アプリケーションにそのユーザーを誘導する必要があります。

To enable a connection for multiple applications with the Auth0 <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>, call the [Update a Connection endpoint](https://auth0.com/docs/api/management/v2/#!/Connections/patch_connections_by_id), and pass the relevant <Tooltip tip="Client ID: Identification value given to your registered resource from Auth0." cta="View Glossary" href="/docs/glossary?term=Client+IDs">Client IDs</Tooltip> to the `enabled_clients` parameter.

### Auth0テナントを使用する

各テナントは、個別のAuth0テナントで表すことができます。

This approach allows you to share access to the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip> with users, restricted by tenant, but requires you to configure Auth0 individually for each tenant.

This means that, in addition to managing the features of each Auth0 tenant individually (such as Branding, Actions, and <Tooltip tip="Attack Protection: Features that Auth0 provides to detect and mitigate attacks, including brute-force protection, suspicious IP throttling, breached password detection, bot detection, and adaptive multi-factor authentication." cta="View Glossary" href="/docs/glossary?term=Attack+Protection">Attack Protection</Tooltip>), your application will have to support multiple Auth0 configurations.

### ユーザーのプロファイルにテナントの詳細情報を保管する

テナントの詳細情報をユーザーのプロファイルに保管し、ユーザーのログイン後にアプリケーションでその情報を読み取ることができます。

このアプローチでは、所属するテナントにかかわらず、すべてのユーザーが統一された構成（利用可能な接続など）でログインできるようになります。

これを実装するために、任意の識別子（`"tenant":"customer-group-12345"`など）を使用して、`app_metadata`オブジェクトにあるユーザーのAuth0プロファイルにテナントの詳細を保管することができます。ユーザーがログインすると、アプリケーションは`tenant`変数を取得し、返された値に適切なバージョンを表示します。