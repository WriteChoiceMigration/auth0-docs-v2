---
og:description: The Python implementation of the server cron job for the Server Client
  + API architecture scenario
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: サーバーアプリ＋API：Pythonによるcronジョブの実装
og:url: https://auth0.com/docs/
permalink: cron-implementation-python
title: サーバーアプリ＋API：Pythonによるcronジョブの実装
twitter:description: The Python implementation of the server cron job for the Server
  Client + API architecture scenario
twitter:title: サーバーアプリ＋API：Pythonによるcronジョブの実装
---

[サーバー＋APIアーキテクチャシナリオ](https://auth0.com/docs/architecture-scenarios/application/server-api)」のドキュメントを参照してください。

Pythonでのサーバープロセス実装で使用する全ソースコードは、[こちらのGitHubリポジトリ](https://github.com/auth0-samples/auth0-pnp-exampleco-timesheets/tree/master/timesheets-cron/python)でご覧いただけます。

## アクセストークン取得する

HTTP要求をAuth0の`/oauth/token` APIエンドポイントに行うため、`json`、`urllib`、および`urllib2`のライブラリーを使用します。

以下が実装例です。



テストするには、コードを変更して`access_token`変数を表示し、`python cron.py`を使用してプロセスを実行します。

## APIを呼び出す

以下の手順で実装を行います。

* タイムシートデータを含むJSONオブジェクトを構築し、`timesheet`変数に割り当てます。
* `urllib2.Request`を使用して、API URLと`timesheet`変数コンテンツを要求本文に追加します。
* `Authorization`ヘッダーを要求に追加します。
* `Content-Type`ヘッダーを`application/json`に設定します。
* `urllib2.urlopen`を使用してAPIを呼び出し、いくつかのエラー処理を追加します。`json.loads`を使用して応答を取得し、コンソールに表示します。

以下が実装例です（簡潔にするため一部のコードを省略しています）。



これをテストするには、APIが稼働しており、`python cron.py`を使用してプロセスを実行していることを確認してください。

以上で完了です。