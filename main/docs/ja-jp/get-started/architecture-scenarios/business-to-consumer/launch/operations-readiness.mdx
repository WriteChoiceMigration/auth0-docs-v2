---
og:description: Operations checks to perform before launch of your B2C IAM implementation.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 運用準備（B2C）
og:url: https://auth0.com/docs/
permalink: operations-readiness
title: 運用準備（B2C）
twitter:description: Operations checks to perform before launch of your B2C IAM implementation.
twitter:title: 運用準備（B2C）
---

## ステータス

運用スタッフがAuth0サービスのステータスを監視する方法を知っており、Auth0ステータスの更新を購読する手段をセットアップしていることを確認する必要があります。

The Auth0 [status dashboard](https://status.auth0.com/) together with the Auth0 [uptime dashboard](http://uptime.auth0.com/) shows current and past status of the Auth0 service in a human-readable format. If any monitoring alerts are triggered, and as a first step in troubleshooting, your operations staff should check the status dashboard to see if there is a current outage. The public cloud status page also provides a facility for subscribing to outage notifications, and we also recommend that you check the status of any third-party [external services](/docs/deploy-monitor/monitor/check-external-services-status) you depend on, such as Social Providers. Having this information handy can help quickly eliminate possible causes when troubleshooting an issue and should be at the top of a troubleshooting checklist for developers as well as the help desk staff.

<Info>
### Best Practice

Information on how to check the status of Auth0 as well as any dependent services (such as Social Providers) should be at the top of a troubleshooting checklist for both developers and helpdesk staff, and we recommend you subscribe via the Auth0 status page to set up notification of any status updates.
</Info>

パブリッククラウドサービスが停止すると、Auth0は根本原因分析（RCA）を行い、その結果をAuth0のステータスページで公開します。Auth0は停止後に、根本原因の特定、寄与要因、再発防止方法などを含めた徹底的な調査を行うため、RCAドキュメントの公開には数週間かかることがあります。

## メールプロバイダーのセットアップ

サインアップ、メールの検証、アカウントの回復などのために顧客に送信される可能性のある実運用における大量のメールをサポートするように、独自のメールプロバイダーをセットアップしていることを再確認する必要があります。

Auth0 sends [emails](/docs/customize/email) to users for events such as signup welcome, email validation, breached password, and password reset events. You can customize the email templates for each type of event, and advanced customization of email handling is also possible. Auth0 provides a test email provider with limited capacity for basic testing, but you must set up your own email provider for production use, and customization of email templates will not work until you have established your own provider.

<Info>
### Best Practice

The default Auth0 email provider does not support sending production volumes of email or customization of email templates. You should therefore configure your own email provider before deploying to production.
</Info>

## インフラストラクチャ

### ファイアウォール

If custom code executing in Auth0 (such as in an Action, Rule, Hook, or Custom DB scripts) will call a service inside your network, or if you configure an on-premise SMTP provider in Auth0, then you may need to configure your firewall to allow [inbound traffic from Auth0](/docs/secure/security-guidance/data-security/allowlist). The IP addresses to allow through the firewall are specific to each region and are listed on the Rules, Hooks, custom database scripts, and email provider configuration screens in your <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+dashboard">Auth0 dashboard</Tooltip>.

## NTP

If this is not handled automatically by your hosting environment, you should have scripts which will automatically restart NTP (Network Time Protocol) if it fails and alerts that will notify someone if NTP is not running. Authentication transactions rely on accurate system time because <Tooltip tip="Security Token: Digitally-signed artifact used to prove that the user was successfully authenticated." cta="View Glossary" href="/docs/glossary?term=security+tokens">security tokens</Tooltip> may be evaluated as expired when received if there are time discrepancies between sending and receiving systems.

## LoadBalancerのタイムアウトをチェック

If you use the AD/LDAP connector, you should check the load balancer settings in your environment to see if they terminate long running connections that are inactive. If they do, you can modify the [Auth0 AD/LDAP Connection settings](/docs/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/ad-ldap-connector-to-auth0) to use the `LDAP_HEARTBEAT_SECONDS` setting to send periodic heartbeat messages to keep the connection open.

## LoadBalancerの構成

アプリケーションがサーバー状態を維持し、ユーザーを特定のサーバーにルーティングするためにスティッキーロードバランシングに依存する場合は、すべてのロードバランサー構成が正しいことを再確認することを勧めします。プール内の1つのロードバランサーが同期していないと、トラブルシューティングが困難な断続的なエラーが発生する可能性があります。ロードバランサーの設定をすばやくチェックすることで、そのような問題を未然に防ぐことができます。

## ログ

ログデータをキャプチャする機能がセットアップされていること、ログがデータ保持ポリシーの対象となっていること、およびログデータの保持制限を適用するメカニズムがあることを確認する必要があります。また、開発、サポート、およびセキュリティチームが、トラブルシューティングとフォレンジックの目的でログデータにアクセスする方法を知っていることを確認する必要があります。包括的な分析を提供するサービスにログファイルをエクスポートすると、使用傾向やエラーなどのパターンを特定するのに役立ちます。

Auth0 provides extensive capability when it comes to the logging of events, and also in the scanning of logs in order to identify event anomalies (see [logs documentation](/docs/deploy-monitor/logs) for further details). Standard log retention period for Auth0 logs is determined by subscription level with the shortest period being two days and the longest period being only 30 days. Leveraging Auth0 support for integrating with external logging services will allow you to retain logs outside of this, and will also provide for log aggregation across your organization.

<Info>
### Best Practice

You should leverage one of the log streaming solutions to send log data to an external log analytics service. This will enable keeping data for longer periods of time and provide advanced analytics on the log data.
</Info>

You should review the log data [retention period](/docs/deploy-monitor/logs/log-data-retention) for your subscription level, and implement a log data export service to send log data to an external log analytics service. You can use one of our [log streaming solutions](https://marketplace.auth0.com/features/log-streaming) in Auth0 Marketplace.

Development teams can use log files for troubleshooting and detecting intermittent errors that may be hard to find via QA tests. Security teams will probably want log data in case forensic data is ever needed. Exporting log files to services that provide comprehensive analytics can help you see patterns such as usage trends and <Tooltip tip="Attack Protection: Features that Auth0 provides to detect and mitigate attacks, including brute-force protection, suspicious IP throttling, breached password detection, bot detection, and adaptive multi-factor authentication." cta="View Glossary" href="/docs/glossary?term=attack+protection">attack protection</Tooltip> triggers.

### レート制限とその他のエラー

Auth0 provides a unique error code for errors reported when the [rate limit is exceeded](/docs/troubleshoot/customer-support/operational-policies/rate-limit-policy). You should set up automatic scanning of logs to check for rate limit errors so you can proactively address activity that hits rate limits before it causes too much trouble for your users. Auth0 also publishes error codes for other types of errors, and you will find it helpful to scan logs for [authentication errors](/docs/libraries/common-auth0-library-authentication-errors) as well as errors from Auth0 <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip> calls (Management API error codes are shown below each call in the [Management API Explorer](https://auth0.com/docs/api/management/v2)).

<Info>
### Best Practice

Calling the Management API to retrieve user profile information from within a Rule is a common cause of rate limit errors because such API calls can execute for every login as well as periodic session checks.
</Info>

## 監視

Auth0サービスのプロアクティブな監視と、アプリケーションを介したエンドツーエンド認証をセットアップしてください。

You should establish mechanisms for [monitoring Auth0 implementations](/docs/deploy-monitor/monitor), so your support or operations team receives the timely information needed to proactively handle service outages. Auth0 provides monitoring endpoints that can be incorporated into your monitoring infrastructure. These endpoints are designed to provide a response suitable for consumption by monitoring services. It should be noted that they only provide data on Auth0. For complete end-to-end monitoring, which is essential for checking the ability of users to log in, we recommend that you set up synthetic transaction monitoring. This will provide greater granularity for your monitoring and enable you to detect outages unrelated to Auth0 as well as degradation of performance, so you can respond more proactively.

<Info>
### Best Practice

You should set up the ability to send synthetic login transactions to facilitate end-to-end monitoring of authentication. You can do this with a simple application that uses the [Resource Owner Password Grant](/docs/get-started/authentication-and-authorization-flow/resource-owner-password-flow/call-your-api-using-resource-owner-password-flow) in combination with a test user that has no privileges, and don’t forget about [Auth0 rate limiting policies](/docs/troubleshoot/customer-support/operational-policies/rate-limit-policy) too.
</Info>

## 重要なアナウンスや変更点を常に把握するため、以下のAuth0からの通信チャネルをすべて監視していることを確認する必要があります。

Auth0からの注意を払うべき通知にはいくつかの異なる種類があり、テナントやプロジェクトに影響を与えかねない重要な情報が含まれています。

Dashboardの通知

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Proactive security notifications and other operational announcements are sent by Auth0 to dashboard administrators. You should ensure that the people who need to receive such messages are dashboard administrators.

</Callout>

### Auth0は時々、テナントに関する重要な告知を送信します。サービスについてのこれらの告知はAuth0 Dashboardに送信され、告知内容の重要度によっては、登録済のAuth0 Dashboard管理者にメールで通達されます。Dashboardには定期的にログインし、画面上部のベルアイコンで重要なお知らせが届いていないかを確認してください。また、Auth0からのメールには対処が必要な変更についての重要情報が含まれていることがある、必ず適時に確認してください。

Auth0のセキュリティ情報

### Auth0は定期的にセキュリティ関連のテストを行います。問題を発見すると、事前対処として特定し、セキュリティ関連の変更が必要な顧客に通知します。ただし、Auth0製品には拡張性があり、影響を受ける顧客をすべて特定することが不可能かもしれないため、Auth0の[セキュリティ速報](/security)は定期的に確認してください。組織のセキュリティ連絡先がサポートセンターに記載されていることを確認する必要があります。

Auth0 regularly conducts a number of security-related tests, and if any issues are found, will proactively identify and notify customers who need to make security-related changes. Due to the extensible nature of the Auth0 product, however, it may not be possible for Auth0 to identify every impacted customer, so you should regularly check Auth0 [security bulletins](/docs/secure). You should make sure a security contact for your organization is listed in Support Center.

<Info>
### Best Practice

It is a best practice to check the Auth0 [Security Bulletins](/docs/secure/security-guidance/security-bulletins) page periodically and take the recommended action if you are impacted by any security bulletins.
</Info>

### Auth0はサービスに対する変更の情報をAuth0の[変更履歴]()に記載します。Auth0の変更履歴は定期的に確認し、変更内容を理解するようにしてください。サポートチームが問題を調査するときには変更履歴を確認し、最近の変更の中でも特に互換性のない変更への関連性を判断するのに役立つかもしれません。開発チームにとっても、有益な新機能を見つけるには変更履歴が便利です。

Auth0 provides information on changes to the service in the Auth0 [change log](https://auth0.com/changelog). You should make a regular practice of reviewing Auth0 change logs to be aware of changes. Support teams researching an issue may find it useful to review the change log to determine if recent changes might be related, especially if these are breaking changes. Development teams will also want to review the change logs to identify new features that may be beneficial.

In addition, you should periodically check the [Auth0 migrations page](/docs/troubleshoot/product-lifecycle/deprecations-and-migrations) for news about upcoming deprecations that might require your team to make changes.

## 必須ではありませんが、導入の自動化をセットアップすることを強くお勧めします。開発、テスト、および運用環境に変更を導入して元に戻す機能を自動化しておくと、起動後に変更を加える必要がある場合に、より効率的に対応できます。

変更管理と[QA](/architecture-scenarios/b2c/quality-assurance)のベストプラクティスを採用するだけでなく、成功する顧客はAuth0の資産管理を自動化された導入プロセスの一部として統合します。[SDLCサポート](/architecture-scenarios/b2c/architecture#sdlc-support)のアーキテクチャセクションで説明されているように、開発・テスト・運用環境用に個別のAuth0テナントを構成し、各環境でのテナントの構成がほぼ同じであるようにします。導入を自動化すれば、各環境のテナントが確実に同じ構成になるため、環境間での構成の不一致に起因するバグがほとんど生じなくなります。

In addition to adopting best practices for change management and [QA](/docs/get-started/architecture-scenarios/business-to-consumer/quality-assurance), successful customers will also integrate Auth0 collateral management as part of some automated deployment process. As discussed in the Architecture section under [SDLC support](/docs/get-started/architecture-scenarios/business-to-consumer/architecture#sdlc-support), you will want to ensure you configure separate Auth0 tenants for development, testing, and production environments, and you will want that configuration to be almost identical for the tenant in each environment. Using deployment automation helps ensure this, so that each environment tenant is configured the same, and you will be less likely to see bugs show up as a result of mismatched configurations between environments.

<Info>
### Best Practice

However you configure deployment automation, we’d recommend you unit test your rules, custom DB scripts, and hooks prior to deployment, and run some integration tests against your tenant post-deployment too. For more details regarding this, see the [Quality Assurance](/docs/get-started/architecture-scenarios/business-to-consumer/quality-assurance) guidance provided.
</Info>

[Auth0 Deploy CLIツーリング](/deploy/deploy-cli-tool)では、使いやすいスクリプトを利用して既存の継続的統合/継続的導入（CI/CD）パイプラインと簡単に統合できます。

* The [Auth0 Deploy CLI tooling](/docs/deploy-monitor/deploy-cli-tool) provides you with an easy-to-use script that can help you integrate with your existing Continuous Integration/Continuous Deployment (CI/CD) pipeline.
* If you can’t integrate directly with, or for some reason you don’t have a CI/CD pipeline, then the Auth0 [Source Control Extensions](/docs/customize/extensions) can provide an easy-to-set-up basic automation process with very low maintenance.

<Warning>

Note that both the Deploy CLI Tool and source control extensions can cause destructive changes; manual changes made directly in the dashboard between automated deployments could be lost! For this reason, if either is used, then **all** changes should be deployed from the source control subsystem referenced via the tooling and not made manually.

</Warning>

Each environment may also need some environment-specific configuration—Application <Tooltip tip="Client ID: Identification value given to your registered resource from Auth0." cta="View Glossary" href="/docs/glossary?term=Client+ID">Client ID</Tooltip>’s and <Tooltip tip="Client Secret: Secret used by a client (application) to authenticate with the Authorization Server; it should be known to only the client and the Authorization Server and must be sufficiently random to not be guessable." cta="View Glossary" href="/docs/glossary?term=Client+Secrets">Client Secrets</Tooltip> will be different between the Auth0 tenants, for example—so you’re going to want some way of being able to dynamically reference this rather than having hard-coded values. Auth0 provides support for handling environment-specific configuration information through one of the following two approaches:

* Auth0 Deploy CLIツールを使用している場合、[キーワード置換](/configure-the-deploy-cli)を使用する
* Use [keyword replacement](/docs/deploy-monitor/deploy-cli-tool/configure-the-deploy-cli) if using the Auth0 Deploy CLI tool

## Auth0を使用すると、カスタム[拡張性](/extensions)内から使用できる変数を構成できます。これらは、Auth0テナントの環境変数とみなすことができます。ハードコード化された参照は、開発・テスト・運用環境間で移動すると変わってしまうため、代わりに、テナントで構成され、カスタムの拡張コードによって参照される変数名を使用することができます。コードが変数を参照すれば、実行時にテナント固有の値が書き込まれるため、同じカスタムコードを異なるテナントで問題なく使用できます。

Auth0 allows you to configure variables that are available from within custom [extensibility](/docs/customize/extensions); these can be thought of as environment variables for your Auth0 tenant. Rather than hard code references that change when moving code between development, test, and production environments, you can use a variable name that is configured in the tenant and referenced by the custom extensibility code. This makes it easier for the same custom code to function, without changes, in different tenants as the code can reference variables which will be populated with tenant-specific values at execution time:

* For use of variables in Actions, see [Write Your First Action](/docs/customize/actions/write-your-first-action) to learn how to configure secrets in the editor
* For use of variables in Rules, see how to [configure values](/docs/customize/rules/configuration)
* For use of variables in Hooks, see how to configure [secrets](/docs/customize/hooks/hook-secrets) in the editor
* For use of variables in Custom DB Scripts, see the [configuration parameters](/docs/authenticate/database-connections/custom-db/create-db-connection#step-3-add-configuration-parameters)

<Info>
### Best Practice

It’s a recommended best practice to use variables to contain tenant-specific values as well as any sensitive secrets that should not be exposed in your custom code. If your custom code is deployed in GitHub/Gitlab/Bitbucket/VSTS, then using a tenant-specific variable avoids exposure of sensitive values via your repository.
</Info>

## プロジェクトに必要なバックアップ/復元機能をサポートするための計画とメカニズムを用意しておく必要があります。これは、データ用のAuth0 Management APIと、Auth0構成の自動デプロイメントに関するセクションで説明されている自動デプロイメント機能を使用して行うことができます。

Auth0 [［Data Tenant Restore policy（データテナントリストアポリシー）］](/support/policies)と[［Data Transfer policy（データ転送ポリシー）］](/support/policies/data-export-and-transfer-policy)に記載されているように、Auth0 は削除されたテナントのリストアやテナント間のデータ移動は行いません。Auth0は、Auth0 Management APIを提供し、必要に応じてデータのバックアップ、復元、移動を行う柔軟な機能を提供します。バックアップ目的でAuth0からデータを取得するスクリプトを作成したり、Auth0構成のあらゆる側面を復元するために自動導入機能で使用するスクリプトを作成したりすることができます。

As noted in the Auth0 [Data Tenant Restore policy](/docs/troubleshoot/customer-support/operational-policies) and [Data Transfer policy](/docs/troubleshoot/customer-support/operational-policies/data-export-and-transfer-policy), Auth0 does not restore deleted tenants or move data between tenants. Auth0 provides the Auth0 Management API to provide customers a completely flexible capability to backup, restore and move data as needed. Customers can write scripts to retrieve data from Auth0 for backup purposes, and similarly write scripts for use with the Automated Deployment capability to restore any aspect of their Auth0 configuration.

## アプリケーションスタック内のすべてのテクノロジーと、ユーザーが使用するブラウザーのバージョンが最新のバージョンであることを再確認する必要があります。これは、問題が発生した場合にAuth0がサポートを提供する能力に影響します。

[［Auth0 dashboard settings（Auth0ダッシュボードの設定）］](/tenant-settings)で、サポートされている最新バージョンのnode.jsを使用していることを確認します。

* Check you are using the latest supported version of node.js in [Auth0 dashboard settings](/docs/get-started/tenant-settings).
* Check you are using a version of SDK/Libraries supported by Auth0 per the [Auth0 Support Matrix](/docs/troubleshoot/customer-support/product-support-matrix).

## 証明書はID導入で使用できます。証明書の有効期限切れが突然発生しないようにするには、環境内の証明書のリストと有効期限、有効期限が近づいたときに通知する方法、証明書のロールオーバープロセスの動作方法を用意しておく必要があります。

SAML接続

### SAML接続の場合は、IdPから証明書を取得し、Auth0 DashboardのIdPのSAML接続にアップロードします。これらの証明書のいずれかの有効期限が切れそうになると、Auth0はダッシュボード管理者に有効期限が近づいていることを警告するメールを送信します。新しい証明書を取得し、接続構成画面を使用してアップロードできます。

For <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=SAML">SAML</Tooltip> connections, you obtain a certificate from the <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=IdP">IdP</Tooltip> and upload it to a SAML connection for the IdP in your Auth0 dashboard. When one of these certificates is about to expire, Auth0 will send email to dashboard administrators warning of the upcoming expiration. You can obtain the new certificate and upload it using the connection configuration screen.

### WS-Fed接続の場合、ADFSURLを指定して構成すると、すべての変更が毎日の更新で取得されます。Auth0 Dashboardの接続設定ページにアクセスし、［Save（保存）］を実行することで、手動で更新をトリガーできます。リモートIdPで証明書が変更された場合、Auth0はそれらのメカニズムによって、または同じ接続設定画面で新しいメタデータファイルをアップロードすることによって更新することができます。

For <Tooltip tip="Web Service Federation (WS-Fed): Protocol for managing user identities across domains." cta="View Glossary" href="/docs/glossary?term=WS-Fed">WS-Fed</Tooltip> connections, if you configure them by specifying an ADFS URL, any changes will be picked up by a daily update. You can trigger an update manually by visiting the connection configuration page in the Auth0 dashboard and doing a Save. If a certificate is changed at the remote IdP, Auth0 can be updated by those mechanisms or by uploading a new metadata file in the same connection configuration screen.

## 開始前の絶対要件ではありませんが、システムの停止や、重要なスタッフが配置されている地域を襲う自然災害など、さまざまな種類の災害に直面した場合にビジネス継続性を確保するために、Disaster Recovery計画を実施しておくことは有用です。

プロセスの文書化

## 絶対的な要件ではありませんが、推奨されるもう1つの項目は、Auth0 に関連するすべてのプロセスが文書化されていることを確認することです。これには、次のものが含まれます。

構成の変更管理

* 新しい変更の導入と使用される自動導入メカニズム、問題が見つかった場合に以前のバージョンに戻す方法
* 証明書ロールオーバープロセス（存在する場合）
* 新しいIDプロバイダーの追加または削除（該当する場合）
* Auth0内またはAuth0が取得するディレクトリ内のユーザープロファイル構造の変更
* アプリケーションまたはAPIの追加または削除
* ログの取得とエクスポート
* 実装したバックアップ/復元プロセス
* ユーザー管理（パスワード忘れ、電話の紛失）
* インシデント発生後の根本原因分析
* Root cause analysis after an incident

## Project Planning Guide

We provide planning guidance in PDF format that you can download and refer to for details about our recommended strategies.

[B2C IAM Project Planning Guide](https://assets.ctfassets.net/cdy7uua7fh8z/3er1aEQ7Ul0q3c9leJWczR/b1f18b4c16abb7e78b01e4eb2b52bb8e/B2C_Project_Planning.pdf)