---
og:description: How to operationalize your Auth0 tenant environments.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 操作方法（B2B）
og:url: https://auth0.com/docs/
permalink: operations
title: 操作方法（B2B）
twitter:description: How to operationalize your Auth0 tenant environments.
twitter:title: 操作方法（B2B）
---

利用可能な状態にするには、インフラストラクチャーを構成またはセットアップして、ビジネスの継続性において求められるスケーラブルで、測定可能、そして定量化が可能な運用に対応する必要があります。Auth0には、サポートサービスの手配（メールプロバイダーなど）、デプロイメントの監視サービス、異常状態の検出に加え、本番環境において問題が発生した際に、迅速かつスムーズにリカバリーするための対処方法を準備することが含まれています。

成功しているお客様によれば、効果的な運用動作を確立することでそれに見合った利益がもたらされることが分かっています。また、ワークフローに目を向ければ、検討すべき事項がいくつも出てきます。

* 不具合を積極的に検出するには、どうしたら良いでしょうか？
* Auth0の操作上のステータスに関するデータは、どのようにしたら取得できるでしょうか？
* Auth0サービスに関連するAuth0のセキュリティ情報については、どのように対応したら良いでしょうか？
* Auth0には、Auth0サービスでは近い将来予定されている変更に関する情報は用意されていますか？
* Auth0から送られてくる重要なお知らせは、どのように確認したら良いでしょうか？
* Auth0ログデータを利用して、その内容を分析したり、Auth0で制限されているデータ保持期間よりも長く保存するには、どうしたら良いでしょうか？
* Auth0ログをスキャンして、アプリケーション内のピーク負荷がレート制限やその他のエラーを引き起こしていないかどうかを見極める方法を教えてください。
* ユーザーに送信するメール数に対応するには、どのメールサービスを使用したら良いでしょうか？現在の本番環境で、すぐに使用できるAuth0のメールプロバイダーは利用可能ですか？
* ファイアウォールを構成したり、Auth0からの情報を受け取る必要がある社内サービス用（カスタムデータサービス、Webサービス、メールサービスなど）に、どのファイアウォールポートを開くのかを知る必要がありますか？
* 新しい組織をどのようにプロビジョニングしますか？
* Do you need to provide self-service provisioning for your customer so that they can configure their own organizational <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=IdPs">IdPs</Tooltip>?

Auth0では、Auth0サービスオペレーションの[監視](#monitoring)に加え、Auth0[サービスステータス](#service-status)に関する情報も提供しています。また、Auth0ではさまざまな[通知](#notifications)を介して、セキュリティ関連情報に加え、Auth0サービスに関して今後予定されている変更情報を入手することができます。Auth0[ログイン](#logging)サービスには、レート制限や過大な負荷にゆる制限も含め、運用上の異常を追跡および特定するための機能も豊富に用意されています。

Auth0には、すぐに使用できるメール配信サービスが用意されており、統合を加速します。ただし、このサービスは、本番環境における本格的な利用を対象としたものではありません。また、メールの配信において、特定のサービスレベルや保証をお勧めするものではありません。推奨されるベストプラクティスは、お客様が通常行うものがあり、独自の[メールサービスプロバイダー](#email-provider-setup)を構成することです。

また場合によっては、Auth0との統合をサポートし、Auth0の拡張性に対応するには[インフラストラクチャー](#infrastructure)構成を変更する必要があります。たとえば、内部または外部のインフラストラクチャー（Actions、Rules、またはHooks内で外部APIコールを呼び出したり、既存のレガシーIDストレージを活用する必要がある場合には、カスタムデータスクリプトを経由したりなど）にもコールバックを提供する必要がある場合には、ファイアウォールを構成しなければならないことがあります。

Once you know how you want organizations to be represented in your system, you will want too consider how you are going to provision the organization itself. See [Provisioning organizations](#provisioning-organizations) for more information.

加えて、当社のお客様の大半が顧客の組織管理者が使用するために、複数のセルフサービスポータルを開発しており、独自の[IdP](#self-service-idp-provisioning)を構成するためのセルフサービス機能を提供しています。

## サービスステータス

The Auth0 [status dashboard](https://status.auth0.com/) together with the Auth0 [uptime dashboard](http://uptime.auth0.com/) shows current and past status of the Auth0 service in a human-readable format. If any monitoring alerts are triggered, and as a first step in troubleshooting, your operations staff should check the status dashboard to see if there is a current outage. The public cloud status page also provides a facility for subscribing to outage notifications, and we also recommend that you check the status of any third-party [external services](/docs/deploy-monitor/monitor/check-external-services-status) you depend on, such as Social Providers. Having this information handy can help quickly eliminate possible causes when troubleshooting an issue and should be at the top of a troubleshooting checklist for developers as well as the help desk staff.

<Info>
### Best Practice

Information on how to check the status of Auth0 as well as any dependent services (such as Social Providers) should be at the top of a troubleshooting checklist for both developers and helpdesk staff, and we recommend you subscribe via the Auth0 status page to set up notification of any status updates.
</Info>

パブリッククラウドサービスの停電が発生した場合、Auth0は根本原因分析（RCA）を実行し、Auth0ステータスページにて結果を公開します。Auth0は、停電後徹底的な調査を行います。この中には、根本原因の究明に加え、その要因、ならびに再発防止策も含まれます。そのため、結果的にRCAドキュメントが公開されまでに数週間を要する場合もあります。

## メールプロバイダーのセットアップ

Auth0 sends [emails](/docs/customize/email) to users for events such as signup welcome, email validation, breached password, and password reset events. You can customize the email templates for each type of event, and advanced customization of email handling is also possible. Auth0 provides a test email provider with limited capacity for basic testing, but you must set up your own email provider for production use, and customization of email templates will not work until you have established your own provider.

<Info>
### Best Practice

The default Auth0 email provider does not support sending production volumes of email or customization of email templates. You should therefore configure your own email provider before deploying to production.
</Info>

## インフラストラクチャ

### ファイアウォール

If custom code executing in Auth0 (such as in an Action, Rule, Hook, or custom database scripts) will call a service inside your network, or if you configure an on-premise SMTP provider in Auth0, then you may need to configure your firewall to allow [inbound traffic from Auth0](/docs/secure/security-guidance/data-security/allowlist). The IP addresses to allow through the firewall are specific to each region and are listed on the Rules, Hooks, custom database scripts, and email provider configuration screens in your <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+dashboard">Auth0 dashboard</Tooltip>.

## ロギング

Auth0 provides extensive capability when it comes to the logging of events, and also in the scanning of logs in order to identify event anomalies (see [logs documentation](/docs/deploy-monitor/logs) for further details). Standard log retention period for Auth0 logs is determined by subscription level with the shortest period being 2 days and the longest period being only 30 days. Leveraging Auth0 support for integrating with external logging services will allow you to retain logs outside of this, and will also provide for log aggregation across your organization.

<Info>
### Best Practice

You should leverage one of the log streaming solutions to send log data to an external log analytics service. This will enable keeping data for longer periods of time and provide advanced analytics on the log data.
</Info>

You should review the log data [retention period](/docs/deploy-monitor/logs/log-data-retention) for your subscription level, and implement a log data export extension to send log data to an external log analytics service. You can use one of our [log streaming solutions](https://marketplace.auth0.com/features/log-streaming) in Auth0 Marketplace.

Development teams can use log files for troubleshooting and detecting intermittent errors that may be hard to find via QA tests. Security teams will probably want log data in case forensic data is ever needed. Exporting log files to services that provide comprehensive analytics can help you see patterns such as usage trends and <Tooltip tip="Attack Protection: Features that Auth0 provides to detect and mitigate attacks, including brute-force protection, suspicious IP throttling, breached password detection, bot detection, and adaptive multi-factor authentication." cta="View Glossary" href="/docs/glossary?term=attack+protection">attack protection</Tooltip> triggers.

### レート制限とその他のエラー

Auth0 provides a unique error code for errors reported when the [rate limit is exceeded](/docs/troubleshoot/customer-support/operational-policies/rate-limit-policy). You should set up automatic scanning of logs to check for rate limit errors so you can proactively address activity that hits rate limits before it causes too much trouble for your users. Auth0 also publishes error codes for other types of errors, and you will find it helpful to scan logs for [authentication errors](/docs/libraries/common-auth0-library-authentication-errors) as well as errors from Auth0 <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip> calls (Management API error codes are shown below each call in the [Management API Explorer](https://auth0.com/docs/api/management/v2)).

<Info>
### Best Practice

Calling the Management API to retrieve user profile information from within a Rule is a common cause of rate limit errors because such API calls can execute for every login as well as periodic session checks.
</Info>

## 監視

You should establish mechanisms for [monitoring Auth0 implementations](/docs/deploy-monitor/monitor), so your support or operations team receives the timely information needed to proactively handle service outages. Auth0 provides monitoring endpoints that can be incorporated into your monitoring infrastructure. These endpoints are designed to provide a response suitable for consumption by monitoring services. It should be noted that they only provide data on Auth0. For complete end-to-end monitoring, which is essential for checking the ability of users to log in, we recommend that you set up synthetic transaction monitoring. This will provide greater granularity for your monitoring and enable you to detect outages unrelated to Auth0 as well as degradation of performance, so you can respond more proactively.

<Info>
### Best Practice

You should set up the ability to send synthetic login transactions to facilitate end-to-end monitoring of authentication. You can do this with a simple application that uses the [Resource Owner Password Grant](/docs/get-started/authentication-and-authorization-flow/resource-owner-password-flow/call-your-api-using-resource-owner-password-flow) in combination with a test user that has no privileges, and don’t forget about [Auth0 rate limiting policies](/docs/troubleshoot/customer-support/operational-policies/rate-limit-policy) too.
</Info>

## Auth0からは数種類の通知が発せられます。通知には、テナントやプロジェクトに影響を与える可能性がある重要な情報が記載されているため、見落とさないように注意する必要があります。

ダッシュボード通知

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Proactive security notifications and other operational announcements are sent by Auth0 to dashboard administrators. You should ensure that the people who need to receive such messages are dashboard administrators.

</Callout>

### 適時、Auth0からテナントに関連する重要なお知らせが送られてくることがあります。サービスに関するこれらのお知らせは、Auth0 Dashboardに届きます。お知らせする内容の重要度に応じて、Auth0 Dashboardに登録されている管理者にメールで通知されます。Dashboardには定期的にログインし、画面上部のベルアイコンで重要なお知らせが届いていないかを確認してください。また、Auth0からのメールは適時に確認する必要があります。メールには、対処すべき変更や実行すべきアクションに関する重要な情報が記載されている場合があります。

Auth0のセキュリティ情報

### Auth0では、複数のセキュリティ関連のテストを定期的に実行します。何らかの問題が見つかった場合は、事前に特定した上で、セキュリティ関連の変更を行う必要があるお客様に通知します。Auth0製品は拡張性を備えていますが、Auth0では影響が及ぶすべてのお客様を特定することは難しいため、Auth0[セキュリティ情報](/security)を定期的に確認する必要があります。

Auth0 regularly conducts a number of security-related tests, and if any issues are found, will proactively identify and notify customers who need to make security-related changes. Due to the extensible nature of the Auth0 product, however, it may not be possible for Auth0 to identify every impacted customer, so you should regularly check Auth0 [security bulletins](/docs/secure).

<Info>
### Best Practice

It is a best practice to check the Auth0 [Security Bulletins](/docs/secure/security-guidance/security-bulletins) page periodically and take the recommended action if you are impacted by any security bulletins.
</Info>

### Auth0では、Auth0[変更ログ]()内でサービスの変更に関する情報を確認できます。変更内容を把握しておくために、Auth0変更ログは定期的に確認しておく必要があります。問題をリサーチするサポートチームは、最新の変更が関連しているかを判断する上で、変更ログを確認することが有効な場合があります。特に、[破壊的変更](/product-lifecycle/deprecations-and-migrations)の場合には有効です。開発チームも、変更ログを確認して、有益と思われる新しい機能を特定したいと考えるはずです。

Auth0 provides information on changes to the service in the Auth0 [change log](https://auth0.com/changelog). You should make a regular practice of reviewing Auth0 change logs to be aware of changes. Support teams researching an issue may find it useful to review the change log to determine if recent changes might be related, especially if these are [breaking changes](/docs/troubleshoot/product-lifecycle/deprecations-and-migrations). Development teams will also want to review the change logs to identify new features that may be beneficial.

## 組織のプロビジョニングでは、以下を考慮する必要があります。

### best practice

What you need to do when provisioning an organization will depend on how organizations are represented in your system. This can take some time to step back and consider how users of those organizations will be interacting with your applications. See [Multiple Organization Architecture](https://cdn2.auth0.com/docs/1.14516.0/media/articles/architecture-scenarios/planning/Multiple-Organization-Architecture-Multitenancy-Overview.pdf) to determine how to configure organizations for your IAM system.

独自のアプリケーションの構成とデータベースの両方または片方に組織の追加が必要になります。

* 使用しているAuth0の構成を変更する必要があります。これには、以下の一部またはすべてが含まれます。
* You will need to make changes to your Auth0 configuration. This will include doing some or all of the following:

  + データベース接続を追加する（組織ごとにユーザーを分離する場合）
  + この組織にエンタープライズ接続を追加する
  + これには、レガシー組織でない場合に、組織について、既存の構成を更新するか、Auth0テナントに構成を追加する作業が含まれます。

    - 組織の管理者をプロビジョニングする
  + 間違いを防ぐために、[組織管理者ポータル](#organization-admin-portal)を作成して、新しい組織をプロビジョニングしやすくすることをお勧めします。
* 組織管理者ポータル

### 組織管理者ポータルでは、管理者が組織の作成、編集、削除を行えます。独自のシステムとAuth0テナントの両方で、複数の作業を実行する必要があります。このポータルは、システム内のデータストアと構成にアクセスできるよう、独自のシステム内に必要となる可能性があります。ただし、Auth0は[Auth0 Management API](/api/management/v2)を提供しているため、独自のシステム内で変更を行うと同時に、変更内容をAuth0テナントに反映することができます。

An organization admin portal is a portal that allows your administrators to create, modify, and remove organizations. There are multiple activities that need to be done both in your own system and your Auth0 tenant. This portal will likely need to exist in your own system so it has access to your datastores and configuration. However, Auth0 provides the [Auth0 Management API](https://auth0.com/docs/api/management/v2) so that you can incorporate changes to your Auth0 tenant at the same time that you create the changes in your own system.

There are two main approaches that can be taken for creating a new organization. The one you choose depends highly on your tolerance for how long it would take to deploy a new organization.

* **Live Updates to your Auth0 Tenant**: If you want to be able to create new organizations in real-time, then you will likely want to make the changes directly to your Auth0 tenant using the Auth0 Management API. This allows the changes to take place in real-time and allow the addition of a new organization to take effect immediately.

<Warning>

Live Updates do come with some things to consider. There are certain operations that must be done in serial to avoid issues. Enabling clients on a connection, adding callback URL's to an Application are two examples. Any operation in the Management API where you must retrieve an entire list and re-submit the entire list with the new value added to it are operations that must be done in serial to avoid two parallel operations overwriting one of the values.

</Warning>

* **Change the Repository and Re-deploy**: If you are taking advantage of the Deploy CLI (or a custom CLI) as part of your [CI/CD pipeline](/docs/get-started/architecture-scenarios/business-to-business/deployment), you may prefer to push your changes directly to your repository and then kickoff a new deployment instead. This can take a little more time, but it has benefits associated with version history and the ability to backout a change by re-deploying the previous version.

<Info>
### Best Practice

You may want to have a separate repository just for the items that the organizations need so that you don't have to re-deploy other common components and risk making an error.
</Info>

## Auth0[接続](/identityproviders)を利用すると、IdPを簡単に構成することができる一方で、オンボードの顧客組織IdPには時間がかかる工程となる可能性があります。定期的に新規顧客組織やIdP要件を変更中の既存組織に販売する場合には、いっそう時間を要します。そのため、顧客の組織管理者用にセルフサービスのポータルを構築することは意義があると、多くのお客様が答えています。結果的に、顧客が自社専用のIdPを構成できるようになるからです。その結果、IT部署の作業負荷を削減することになります。[Auth0 Management API](/api/management/v2)には、これを実現する上で必要となる[接続管理機能](/api/management/v2#!/Connections/get_connections)がすべて用意されています。

While Auth0 [connections](/docs/authenticate/identity-providers) make it easy to configure IdPs, it can be a time-consuming process to onboard customer organization IdPs especially if you are selling to new customer organizations on a regular basis or existing organizations have changing IdP requirements. As a result, many of our customers have found it worthwhile to build a self-service portal for their customers' organization admins so that they can configure their own IdPs. This cuts down on your IT department's workload. The [Auth0 Management API](https://auth0.com/docs/api/management/v2) provides all necessary [connection management functionality](https://auth0.com/docs/api/management/v2#!/Connections/get_connections) to achieve this.

## Project Planning Guide

We provide planning guidance in PDF format that you can download and refer to for details about our recommended strategies.

[B2B IAM Project Planning Guide](https://assets.ctfassets.net/cdy7uua7fh8z/63F0WOPJdVzsPMxV1Xvp8x/7a329487c5e890d8e820f6a48983b46a/B2B_Project_Planning.pdf)

## Multiple Organization Architecture (Multitenancy)

Many B2B platforms implement some form of isolation and/or branding for their customers' organization, and this can add complexity to any Identity and Access Management (IAM) system. If this applies to you, then we recommend you take some time to read through our guidance and best practice advice for this type of environment.

[Multiple Organization Architecture](/docs/get-started/architecture-scenarios/multiple-organization-architecture)