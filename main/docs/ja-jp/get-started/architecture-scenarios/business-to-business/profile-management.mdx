---
og:description: User profile management planning considerations for your B2B IAM implementation.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: プロファイル管理（B2B）
og:url: https://auth0.com/docs/
permalink: profile-management
title: プロファイル管理（B2B）
twitter:description: User profile management planning considerations for your B2B
  IAM implementation.
twitter:title: プロファイル管理（B2B）
---

いずれかの時点で、ユーザーの[プロファイル](/not-found/3MdCE7aOAk34wCaR7Do709)に保存されている情報を変更する必要が生じることがあります。ユーザーのプロファイル（ユーザーアカウントとも呼ばれる）はAuth0に保存されており、さまざまな理由でその情報に変更を加えることが必要になる場合があります。

* セルフサービスでの情報の更新
* 組織の利用規約に関する必須の更新
* 規制順守に伴う更新



[IDプロバイダー](/connections)は、ログインプロセス中に提供されたデータを使用してユーザープロファイルに情報を自動入力します。これを[正規化ユーザープロファイル](/users/user-profiles/normalized-user-profiles)と呼びます。



デフォルトでは、各ユーザーIDに対して1つのユーザープロファイルが作成されますが、考慮すべき点がいくつかあります。

* ユーザーエクスペリエンスをカスタマイズするために情報を保存する必要がある場合、何をすべきか？
* IDプロバイダー由来ではないユーザー情報を保存する必要がある場合、どうすればいいか？
* ユーザーが変更できないユーザー関連情報を保存する必要があるのはなぜか？
* ユーザーが変更できないユーザー関連情報を保存する必要がある場合、どうすればいいか？
* ユーザーがパスワードを忘れた場合、どうなるのか？
* ユーザーは、パスワードを変更したい場合に何をすべきか？
* サードパーティー組織の管理者にユーザーを管理する機能を提供するにはどうすればいいか？

Auth0には、ユーザープロファイルに対するメタデータのストレージがあるため、これによって言語やアクセシビリティの好みなどの追加情報を取得し、ユーザーエクスペリエンスを向上させることができます。メタデータは、ユーザーが変更できる情報と、変更できない情報の両方を保存するために使用できます。後者の情報を使うと、既存の実装を変更することなく、ユーザープロファイルを既存のシステム内のレコードに関連付けることができます。

パスワードを忘れたユーザーや、既存のセルフサービスのメカニズム（または計画したセルフサービスのメカニズム）を使ってパスワードを変更することが許可されているユーザーに対しては、Auth0が提供する[パスワードリセット](#password-reset)機能を活用することができます。これは既存の実装と統合することができ、[ユニバーサルログイン](/login/universal-login)を含む既成のAuth0 UIウィジェットにもすでに組み込まれています。

また、常に[検証済みのユーザーアカウント](#account-verification)で作業していることを確認する必要があります。Auth0では、そのための既成のメカニズムも用意されています。また、EU市民のプライバシーを守り、データ侵害から市民を保護するために非常に具体的な要件を設けている、[GDPR](https://eugdpr.org/)などの[規制順守](/compliance)も考慮すべきです。

Auth0では現在、一元化された既成のプロファイル管理ポータルを提供していませんが、セルフサービスによるプロファイル管理を目的として、Auth0 Management APIを使用する独自のUIを構築したり、すでに構築済みのUIを利用したりすることができます。Management APIエンドポイントについて解説しているAuth0の[コミュニティガイダンス](https://community.auth0.com/t/how-to-allow-the-end-user-to-update-their-own-profile-information/6228)を参照してください。Management APIへのすべての呼び出しには、[アクセストークン](/security/tokens/access-tokens)を使用する必要があります。



あるいは、Auth0 Dashboardを使用して、[ユーザーのプロファイル要素を管理する](/users/manage-users-using-the-dashboard)こともできます。Auth0 Dashboardを通じたユーザープロファイルの管理は、主に管理目的のプロビジョニングであり、運用環境におけるセルフサービス型のプロファイル管理に**使用すべきではありません**。ただし、Dashboardで提供されるインターフェイスを使うと、ユーザーのプロファイル情報を迅速かつ簡単に操作できるため、開発時に非常に便利です。

お客様の資格情報をこちらのシステムに保管しているときに、管理者が自分のユーザーを管理できる方法をお客様に提供する必要がある場合は、自分で作成するか、Auth0拡張機能を利用することができます。詳しくは、「[管理者ポータル](#admin-portal)」を参照してください。

## Metadata（メタデータ）

正規化ユーザープロファイル情報に加えて、[メタデータ](/users/metadata)もAuth0のユーザープロファイルに保存することができます。」メタデータは、IDプロバイダー由来ではない情報を保管する方法、またはIDプロバイダーから提供された情報を上書きする情報を保管する方法を提供します。



メタデータは、Auth0 Management APIとAuth0 Authentication APIの両方を通じて操作できます。正規化ユーザープロファイルを管理する場合と同様に、メタデータを操作するためにManagement APIを呼び出す際には、[アクセストークン](/api/management/v2/tokens)の使用が必要になります。



### ユーザーメタデータ

ユーザーメタデータ（`user_metadata`とも呼ばれる）は、ユーザープロファイルに対して保存できる情報で、ユーザーはセルフサービス型のプロファイル管理の一環として、読み取りおよび更新することができます。ユーザーメタデータには、ユーザーの敬称、使用する言語などが含まれており、Auth0から送信する[メールのカスタマイズ](/brand-and-customize/email/customize-email-templates)に使用されます。



### アプリメタデータ

一方、アプリメタデータ（`app_metadata`とも呼ばれる）は、ユーザープロファイルと一緒に保存することができる情報ですが、**適切な認可がなければ読み込んだり更新したりすることができません**。`app_metadata`はユーザーが直接アクセスできるものではありません。アプリメタデータには、ユーザーが最後に承認した有効な利用規約のセットを示すフラグや、ユーザーがこれをいつ承認したかを示す日時などが含まれます。

## パスワードリセット

パスワードを忘れたユーザーや、既存のセルフサービスのメカニズムを使ってパスワードを変更することが許可されているユーザーに対して、Auth0は[パスワードリセット](/connections/database/password-change)機能を提供しています。これは既存の実装と統合することができ、[ユニバーサルログイン](/login/universal-login)の一部として既成のAuth0 UIウィジェットにもすでに組み込まれています。



Auth0ユニバーサルログインには、Auth0 Authentication API機能を使用したパスワードリセットのUXサポートが組み込まれています。別の方法として、お使いの開発環境に適したAuth0 SDKのいずれかを通じて、[Auth0 Authentication API](/connections/database/password-change#use-the-authentication-api)を使用することもできます。パスワードリセットのワークフローで使用されるメールテンプレートは、Auth0の既成のUIウィジェットを使用する場合でも、カスタマイズされたユニバーサルログインを使用する場合でも、完全にカスタマイズが可能です。

一方で、Auth0 Management APIを使用すると、データベース接続タイプで定義されたユーザーIDの[パスワードを直接変更する](/connections/database/password-change#directly-set-the-new-password)ことができます。Auth0 Management APIを、セルフサービス型プロファイル管理の実装の一部として、また、[パスワード変更ページのカスタマイズ](/architecture-scenarios/b2b/branding)の一部として使用することができます。

## アカウントの検証

常に検証済みのユーザーアカウントを使用し、Auth0が提供するメカニズムを利用する必要があります。また、EU市民のプライバシーを守り、データ侵害から市民を保護するために非常に具体的な要件を設けている、[GDPR](https://eugdpr.org/)などの規制順守も考慮すべきです。

Auth0には、アカウントを検証するためにユーザーのメールアドレスに[検証メール](/brand-and-customize/email/manage-email-flow)を送信する既成の機能があります。デフォルトでは、Auth0は[セルフサインアップ](/architecture-scenarios/b2b/provisioning#self-sign-up)の一環として作成された[データベース接続](/connections/database)のIDに対して、自動的に検証メールを送信します。ただし、Auth0は、ユーザー登録時にソーシャルプロバイダーによるメールアドレスの検証が行われない場合に、検証メールの送信に使用できる[Management APIエンドポイント](/api/v2#!/Tickets/post_email_verification)も提供しています。

## ユーザーのブロック

Auth0で[ユーザーアクセスをブロックする](/users/block-and-unblock-users)ことで、特定の条件下でのユーザーのアプリケーションへのログインを防ぐことができます。デフォルトでは、Auth0 Dashboardには、すべてのアプリケーションへのユーザーアクセスをブロックおよびブロック解除できる機能を管理者に提供する既成のメカニズムがあります。この機能は、[Auth0 Management API](/api/management/v2#!/Users/patch_users_by_id)を使用して実装することもできます。また、Auth0の拡張性を利用して、[特定のアプリケーションへのユーザーアクセスを無効にしたり](/users/manage-user-access-to-applications)、よりきめ細かい[アクセス制御](/architecture-scenarios/b2b/authorization)を行ったりすることもできます。

さらに、Auth0 Management APIには、正しくない資格情報の使いすぎによって無効にされたユーザーの[ブロックを解除](/api/management/v2#!/User_Blocks/delete_user_blocks_by_id)する機能もあります。

## 管理者ポータル

管理者ポータルは、新しいユーザーを作成したり、ユーザープロファイルを編集したり、ユーザーに関するアクティビティを確認したりできるアプリケーションです。このアプリケーションは、管理者のみがアクセスできるようにする必要があります。Auth0は管理ダッシュボードを提供していますが、管理ダッシュボードへのアクセスを多くの人に許可することは推奨されません。誰かが意図せずにAuth0テナントを壊してしまう方法が数多くあるからです。Auth0では、代わりに他のオプションを2つ提供しています。

* [**Auth0 Management API**](/api/management/v2)：Management APIを使うと、管理者にユーザーを管理する機能を提供するアプリケーションを簡単に構築することができます。これを管理者向けにすでに存在する既存のアプリケーションに組み込むか、または現在のアプリケーションと一致するUIを持つ新しいアプリケーションを作成することができます。
* [**Auth0委任管理拡張機能**](/extensions/delegated-administration-extension)：この強力で柔軟な拡張機能を使うことにより、ユーザー管理エクスペリエンスをカスタマイズすることができます。この拡張機能をカスタマイズすることで、お客様の管理者がログインし、自分たちの組織内のユーザーだけを表示および管理できるようにすることができます。