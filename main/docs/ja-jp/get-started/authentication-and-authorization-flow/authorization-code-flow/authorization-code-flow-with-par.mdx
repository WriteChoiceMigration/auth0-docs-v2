---
og:description: Learn how to use Pushed Authorization Requests (PAR) with the Authorization
  Code Flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Pushed Authorization Requests（PAR）を使った認可コードフロー
og:url: https://auth0.com/docs/
permalink: authorization-code-flow-with-par
title: Pushed Authorization Requests（PAR）を使った認可コードフロー
twitter:description: Learn how to use Pushed Authorization Requests (PAR) with the
  Authorization Code Flow.
twitter:title: Pushed Authorization Requests（PAR）を使った認可コードフロー
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

To use Highly Regulated Identity features, you must have an Enterprise Plan with the Highly Regulated Identity add-on. Refer to [Auth0 Pricing](https://auth0.com/pricing/) for details.

</Callout>

[Pushed Authorization Request (PAR)](https://datatracker.ietf.org/doc/html/rfc9126) is a backend protocol to push authorization requests directly to the <Tooltip tip="Authorization Server: Centralized server that contributes to defining the boundaries of a user’s access. For example, your authorization server can control the data, tasks, and features available to a user." cta="View Glossary" href="/docs/glossary?term=authorization+server">authorization server</Tooltip>. It is a technical component of the [Financial-Grade API (FAPI) Security Profile 1.0](https://openid.net/specs/openid-financial-api-part-2-1_0.html) tasked with protecting APIs in high-value scenarios.

## 仕組み

PAR allows your application to push the parameters for <Tooltip tip="OAuth 2.0: Authorization framework that defines authorization protocols and workflows." cta="View Glossary" href="/docs/glossary?term=OAuth+2.0">OAuth 2.0</Tooltip> authorization requests directly to the authorization server’s PAR endpoint **(1)**. In response, the authorization server sends a request URI value, `request_uri` **(2)**, to use when you call the `/authorize` endpoint **(3)**. The `request_uri` is a reference to the stored authorization requests at the `/par` endpoint so these requests are not exposed **(4)**. To learn more, read [Configure Push Authorization Requests](/docs/get-started/applications/configure-par).

<Frame>![](/images/cdy7uua7fh8z/6ivWNzZR7pnV79AXtjhJca/ad707b701d2a6d8b965ca3afe8846868/Template_for_Docs_-_Authorization_Code_Flow_with_PAR.png)</Frame>

## メリット

One benefit of using PAR is early validation. In other OAuth 2.0 flows, such as the [Authorization Code Flow](/docs/get-started/authentication-and-authorization-flow/authorization-code-flow), end users are redirected to the authorization server for validation. In PAR, request parameters are validated at the beginning of the authorization request before the end user is redirected. It is not ideal to redirect users to show them an error page.

PARは、バックチャネルでも認可要求を渡します。フロントチャネル通信は、追加されたHTTPSクエリパラメーター（GET、POST）を介して、ブラウザーなどの仲介役を使用します。メッセージは直接送信されません。バックチャネル通信は、認可されたバックエンド要求の本文で渡されるため、より直接的なアプローチができます。

プッシュ認可要求は、バックチャネルを介して送信されることから、次のことがいえます。

* 認可サーバーは要求の送信元を信頼することができ、要求はエンドユーザーによって変更されていない。
* 要求の詳細はブラウザーバーや履歴に公開されておらず、プライバシーが過程のこの地点で保護される。
* URLの長さに関する制限は強制ではない。

## 制限事項

* 要求ペイロードの最大サイズは10 KBです。
* Public applications are not currently supported. To learn more, read [Public and Confidential Applications](/docs/get-started/applications/confidential-and-public-applications).

## PARエンドポイントを呼び出す

### 要件

PARエンドポイントへの呼び出しを行うには、以下の操作が必要です。

* 要求のコンテンツタイプを`application/x-www-form-urlencoded`に設定する。
* 渡されるすべてのパラメーターに文字列を使用する。
* Include an additional parameter for the application authentication method in the request. Only <Tooltip tip="Confidential Client: A client (application) that can hold credentials securely by using a trusted backend server. Examples include a web application with a secure backend and a machine-to-machine (M2M) application." cta="View Glossary" href="/docs/glossary?term=confidential+clients">confidential clients</Tooltip> support PAR, so the following [application authentication methods](https://auth0.com/docs/api/authentication#authentication-methods) are available: <Tooltip tip="Client Secret: Secret used by a client (application) to authenticate with the Authorization Server; it should be known to only the client and the Authorization Server and must be sufficiently random to not be guessable." cta="View Glossary" href="/docs/glossary?term=Client+Secret">Client Secret</Tooltip>, Private Key <Tooltip tip="Client Secret: Secret used by a client (application) to authenticate with the Authorization Server; it should be known to only the client and the Authorization Server and must be sufficiently random to not be guessable." cta="View Glossary" href="/docs/glossary?term=JWT">JWT</Tooltip>, and mTLS. You must use the same application authentication method for the `/token` endpoint when retrieving an <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=access+token">access token</Tooltip>.

### 対応しているパラメーター

保存・処理されるPARエンドポイントは以下のものに限られます。

* 標準OAuth 2.0パラメーターと該当の拡張子（認可ポイントで認識される）
* 接頭辞が`ext-`のカスタム認可パラメーター（最大10個）

PAR ignores additional custom authorization parameters. Custom authorization parameters are not available in [Auth0 Actions](/docs/customize/actions) and [Logs](/docs/deploy-monitor/logs).

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

If you use custom authorization parameters in Actions, you must prefix them with `ext-`. Otherwise, they will not be available.

</Callout>

### PAR要求の例

```bash lines
curl --location --request POST https://$tenant/oauth/par \
  -H "content-type: application/x-www-form-urlencoded" \
  -d "client_id=CLIENT_ID"\
"&client_secret=CLIENT_SECRET"\
"&redirect_uri=https://jwt.io"\
"&audience=urn:my-notes-api"\
"&scope=openid%20profile%20read:notes"\
"&response_type=code"
```






### PAR応答の例

以下のPAR応答の例をご覧ください。

* `request_uri`は、保存された認可要求の参照です。要求の値は`request_uri`パラメーターとしてGET `/authorize`エンドポイントに渡されます。
* `expires_in`は、`request_uri`が有効な秒数です。この時間を過ぎて未使用の場合、`request_uri`は期限切れになります。30秒の有効期限は静的な値で、設定することはできません。

```json lines
HTTP/1.1 201 Created
 Content-Type: application/json

 {
  "request_uri":
    "urn:ietf:params:oauth:request_uri:6esc_11ACC5bwc014ltc14eY22c",
  "expires_in": 30
 }
```






### レート制限

For Essential, Professional, and Enterprise production tenants, calls to the PAR endpoint are included in the standard Authentication API rate limit. For more information, see [Rate Limit Configurations](/docs/troubleshoot/customer-support/operational-policies/rate-limit-policy/rate-limit-configurations) and click your subscription type. Then, click **Authentication API**.

## 認可エンドポイントを呼び出す

Your application uses the `request_uri` value returned from the `/oauth/par` endpoint in the authorization request and redirects the user agent to the authorization endpoint. To learn more about the `request_uri` parameter, read [Configure Push Authorization Requests](/docs/get-started/applications/configure-par).

以下の例では、次のHTTP要求を行うようユーザーエージェントに指示を出しています。

```http wrap lines
GET /authorize?client_id=CLIENT_ID&request_uri=urn%3Aietf%3Aparam...qrwSI HTTP/1.1 Host: TENANT.auth0.com
```






In the case of a valid `request_uri`, the rest of the <Tooltip tip="Authorization Flow: Authorization grant (or workflow) specified in the OAuth 2.0 framework." cta="View Glossary" href="/docs/glossary?term=authorization+flow">authorization flow</Tooltip> looks the same.

### PARは、その他の認可要求と同様に、この段階で認可サーバーによって再度検証されます。

* `request_uri`の値を使用できるのは1回のみです。
* 期限切れの`request_uri`は、認可サーバーによって却下されます。
* テナントまたはクライアントレベルでPARが必要な場合、PAR以外の要求は拒否されます。
* A non-PAR request is rejected if PAR is required either on the tenant or client level.

## Learn more

* [Configure Pushed Authorization Requests (PAR)](/docs/get-started/applications/configure-par)