---
og:description: Learn how to add login to your regular web application using the Authorization
  Code Flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 認可コードフローを使用してログインを追加
og:url: https://auth0.com/docs/
permalink: add-login-auth-code-flow
title: 認可コードフローを使用してログインを追加
twitter:description: Learn how to add login to your regular web application using
  the Authorization Code Flow.
twitter:title: 認可コードフローを使用してログインを追加
---

認可コードフローを使用すると、ログインを通常のWebアプリケーションに追加することができます。フローの仕組みと使用すべき理由については、[認可コードフロー](/login/flows/authorization-code-flow)をお読みください。通常のWebアプリからAPIを呼び出すには、[認可コードフローを使用してAPIを呼び出す](/login/flows/call-your-api-using-the-authorization-code-flow)をお読みください。

認可コードフローの実装に、Auth0は以下のリソースを提供しています。

* [Regular Web App Quickstarts](/quickstart/webapp)：フローを実装する最も簡単な方法。
* [Authentication API](/api/authentication)：独自のソリューションを構築したい場合は、このまま読み続けて、APIを直接呼び出す方法を学習してください。

ログインに成功すると、アプリケーションがユーザーのIDトークンとアクセストークンにアクセスします。IDトークンには基本的なユーザープロファイル情報が含まれており、アクセストークンはAuth0の`/userinfo`エンドポイントまたは独自の保護されたAPIを呼び出すために使用できます。IDトークンの詳細については、「[IDトークン](/security/tokens/id-tokens)」をお読みください。アクセストークンの詳細については、「[アクセストークン](/security/tokens/access-tokens)」をお読みください。

ユーザーの認可を要求し`authorization_code`を使用してアプリにリダイレクトします。そして、トークンのコードを交換します。

## 前提条件

アプリをAuth0に登録する必要があります。詳しくは、[通常のWebアプリケーションを登録する](/get-started/create-apps/regular-web-apps)をお読みください。

* **［Application Type（アプリケーションタイプ）］**として**［Regular Web App（通常のWebアプリ）］**を選択します。
* `**${account.callback}**`の**［Allowed Callback URL（許可されているコールバックURL）］**を追加します。
* アプリケーションの**［Grant Types（付与タイプ）］**に**［Authorization Code（認可コード）］**が必ず含まれていることを確認してください。詳細については、「[付与タイプを更新する](/applications/update-grant-types)」をお読みください。

## ユーザーを認可する



ユーザーを認可するには、アプリがユーザーを[認可URL](/api/authentication#authorization-code-flow)に送信する必要があります。

### 認可URLの例



### パラメーター







### 応答





## トークンを要求する



### トークンURLへのPOSTの例



### パラメーター



### 応答

すべてが成功すると、`access_token`、`refresh_token`、`id_token`、および`token_type`の値を含むペイロードとともに、HTTP 200の応答を受信します。









## ユースケース

### 基本的な認証要求

この例では、手順1でユーザーを認可する際に行う最も基本的な要求について説明します。Auth0のログイン画面を表示して、構成されている接続でユーザーがサインインできるようにします。トークンを要求する際に、IDトークンには最も基本的なクレームが含まれます。IDトークンをデコードする際には、以下のようになります。

### ユーザーの名前とプロファイルの写真を要求する

通常のユーザー認証に加えて、この例では名前や写真など、追加のユーザー詳細情報を要求する方法について説明します。

ユーザーの名前や写真を要求するには、ユーザーを認可する際に、適切なスコープを追加する必要があります。トークンを要求する際に、IDトークンには要求された名前と写真のクレームが含まれます。IDトークンをデコードする際には、以下のようになります。

### GitHubでのユーザーログインを要求する

通常のユーザー認証に加えて、この例では、ユーザーをGitHubなどのソーシャルIDプロバイダーへ直接送る方法について説明します。まず、[Auth0 Dashboard > Authentication ［Authentication（ 認証）］> Social](%24%7Bmanage_url%7D/#/connections/social)で適切な接続を構成し、**［Settings（設定）］**タブから接続名を取得する必要があります。

ユーザーをGitHubログイン画面に直接送信するには、ステップ1でユーザーを認証するときに、`connection`パラメーターを渡し、その値を接続名（この場合は`github`）に設定する必要があります：これで、トークンを要求すると、IDトークンにはGitHubから返されたユーザーの一意のIDを含む`sub`クレームが含まれるようになります。IDトークンをデコードする際には、以下のようになります。