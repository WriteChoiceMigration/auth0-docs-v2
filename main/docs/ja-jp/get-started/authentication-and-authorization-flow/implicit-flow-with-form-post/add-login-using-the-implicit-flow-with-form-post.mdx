---
og:description: Learn how to add login to your single-page application (SPA) using
  the Implicit Flow with Form Post.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: フォームPOSTを使った暗黙フローでログインを追加する
og:url: https://auth0.com/docs/
permalink: add-login-using-the-implicit-flow-with-form-post
title: フォームPOSTを使った暗黙フローでログインを追加する
twitter:description: Learn how to add login to your single-page application (SPA)
  using the Implicit Flow with Form Post.
twitter:title: フォームPOSTを使った暗黙フローでログインを追加する
---

You can add login to your single-page application (SPA) using the Implicit Flow with Form Post. To learn how the flow works and why you should use it, read [Implicit Flow with Form Post](/docs/get-started/authentication-and-authorization-flow/implicit-flow-with-form-post).

Use the Implicit Flow with Form Post for login-only use cases; if you need to request <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=access+tokens">access tokens</Tooltip> while logging the user in so you can call your API, use the Authorization Code Flow with PKCE. To learn more, read [Authorization Code Flow with Proof Key for Code Exchange (PKCE](/docs/get-started/authentication-and-authorization-flow/authorization-code-flow-with-pkce)).

フォームPOSTを使った暗黙フローを実装するには、以下のリソースを使用することができます。

* [Express OpenID Connect SDK](https://www.npmjs.com/package/express-openid-connect): The easiest way to implement the flow, which will do most of the heavy-lifting for you. If you use our Javascript SDK, please ensure you are implementing mitigations that are appropriate for your architecture. To learn more, read [Auth0.js v9 Reference](/docs/libraries/auth0js).
* [Authentication API](https://auth0.com/docs/api/authentication): If you prefer to build your own solution, keep reading to learn how to call our API directly.

Following a successful login, your application will have access to the user's [ID token](/docs/secure/tokens/id-tokens). The <Tooltip tip="ID Token: Credential meant for the client itself, rather than for accessing a resource." cta="View Glossary" href="/docs/glossary?term=ID+token">ID token</Tooltip> will contain basic user profile information.

## 前提条件

Register your app with Auth0. To learn more, read [Register Single Page Applications](/docs/get-started/auth0-overview/create-applications/single-page-web-apps).

* **［Single-Page App（シングルページアプリ）］**を**［Application Type（アプリケーションタイプ）］**として選択します。
* Add an **Allowed Callback URL** of `{https://yourApp/callback}`.
* Make sure your application's **Grant Types** include **Implicit**. To learn more, read [Update Grant Types](/docs/get-started/applications/update-grant-types).

## ユーザーを認可する

ユーザーの認可を要求しすると、アプリにリダイレクトされます。フローを開始するには、ユーザーの認可が必要です。この手順には、以下のようなプロセスが含まれます。

* ユーザーを認証する
* Redirecting the user to an <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=Identity+Provider">Identity Provider</Tooltip> to handle authentication;
* Checking for active <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=Single+Sign-on">Single Sign-on</Tooltip> (SSO) sessions;
* 以前に同意を得ていない場合は、要求された権限レベルについてユーザーの同意を得る

ユーザーを認可するには、アプリがユーザーに認可URLを送信する必要があります。

### 認可URLの例

```http lines
https://{yourDomain}/authorize?
    response_type=YOUR_RESPONSE_TYPE&
    response_mode=form_post&
    client_id={yourClientId}&
    redirect_uri={https://yourApp/callback}&
    scope=SCOPE&
    state=STATE&
    nonce=NONCE
```






### パラメーター

<table class="table"><thead>
<tr>
<th>Parameter Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>response_type</code></td>
<td>Denotes the kind of credential that Auth0 will return (code or token). For the Implicit Flow, the value can be <code>id_token</code>, <code>token</code>, or <code>id_token token</code>. Specifically, <code>id_token</code> returns an ID Token, and <code>token</code> returns an Access Token.</td>
</tr>
<tr>
<td><code>response_mode</code></td>
<td>Specifies the method with which response parameters should be returned. For security purposes, the value should be <code>form_post</code>. In this mode, response parameters will be encoded as HTML form values that are transmitted via the HTTP POST method and encoded in the body using the <code>application/x-www-form-urlencoded</code> format.</td>
</tr>
<tr>
<td><code>client_id</code></td>
<td>Your application's Client ID. You can find this value at your <a href="https://manage.auth0.com/#/applications/{yourClientId}/settings">Application's Settings</a>.</td>
</tr>
<tr>
<td><code>redirect_uri</code></td>
<td>The URL to which Auth0 will redirect the browser after authorization has been granted by the user. You must specify this URL as a valid callback URL in your <a href="https://manage.auth0.com/#/Applications/{yourClientId}/settings">Application Settings</a>. <br/> <br/> <strong>Warning:</strong> Per the <a href="https://tools.ietf.org/html/rfc6749#section-3.1.2">OAuth 2.0 Specification</a>, Auth0 removes everything after the hash and does <em>not</em> honor any fragments.</td>
</tr>
<tr>
<td><code>scope</code></td>
<td>Specifies the <a href="/docs/get-started/apis/scopes">scopes</a> for which you want to request authorization, which dictate which claims (or user attributes) you want returned. These must be separated by a space. You can request any of the <a href="https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims">standard OpenID Connect (OIDC) scopes</a> about users, such as <code>profile</code> and <code>email</code>, <a href="/docs/secure/tokens/json-web-tokens/json-web-token-claims#custom-claims">custom claims</a> conforming to a <a href="/docs/secure/tokens/json-web-tokens/create-custom-claims">namespaced format</a>, or any scopes supported by the target API (for example, <code>read:contacts</code>).</td>
</tr>
<tr>
<td><code>state</code></td>
<td>(recommended) An opaque arbitrary alphanumeric string that your app adds to the initial request and Auth0 includes when redirecting back to your application. To see how to use this value to prevent cross-site request forgery (CSRF) attacks, see <a href="/docs/secure/attack-protection/state-parameters">Mitigate CSRF Attacks With State Parameters</a>.</td>
</tr>
<tr>
<td><code>nonce</code></td>
<td>(required for <code>response_type</code> containing  <code>id_token token</code>, otherwise recommended) A cryptographically random string that your app adds to the initial request and Auth0 includes inside the ID Token, <a href="/docs/get-started/authentication-and-authorization-flow/implicit-flow-with-form-post/mitigate-replay-attacks-when-using-the-implicit-flow">used to prevent token replay attacks</a>.</td>
</tr>
<tr>
<td><code>connection</code></td>
<td>(optional) Forces the user to sign in with a specific connection. For example, you can pass a value of <code>github</code> to send the user directly to GitHub to log in with their GitHub account. When not specified, the user sees the Auth0 Lock screen with all configured connections. You can see a list of your configured connections on the <strong>Connections</strong> tab of your application.</td>
</tr>
<tr>
<td><code>organization</code></td>
<td>(optional) ID of the organization to use when authenticating a user. When not provided, if your application is configured to <strong>Display Organization Prompt</strong>, the user will be able to enter the organization name when authenticating.</td>
</tr>
<tr>
<td><code>invitation</code></td>
<td>(optional) Ticket ID of the organization invitation. When <a href="/docs/manage-users/organizations/configure-organizations/invite-members">inviting a member to an Organization</a>, your application should handle invitation acceptance by forwarding the <code>invitation</code> and <code>organization</code> key-value pairs when the user accepts the invitation.</td>
</tr>
</tbody>
</table>

たとえば、アプリにログインを追加する際の認可URLのHTMLスニペットは、以下のようになります。

```html lines
<a href="https://{yourDomain}/authorize?
  response_type=id_token token&
  response_mode=form_post&
  client_id={yourClientId}&
  redirect_uri={https://yourApp/callback}&
  scope=read:tests&
  state=xyzABC123&
  nonce=eq...hPmz">
  Sign In
</a>
```






### 応答

すべてが成功すると`、HTTP 302`応答を受け取ります。要求された資格情報は本文にエンコードされます。

```json lines
HTTP/1.1 302 Found
Content-Type: application/x-www-form-urlencoded
id_token=eyJ...acA&
state=xyzABC123
```






返される値は、`response_type`として何を要求したかによって異なります。

<table class="table"><thead>
<tr>
<th>Response Type</th>
<th>Components</th>
</tr>
</thead>
<tbody>
<tr>
<td>id_token</td>
<td>ID Token</td>
</tr>
<tr>
<td>token</td>
<td>Access Token (plus <code>expires_in</code> and <code>token_type</code> values)</td>
</tr>
<tr>
<td>id_token token</td>
<td>ID Token, Access Token (plus <code>expires_in</code> and <code>token_type</code> values)</td>
</tr>
</tbody>
</table>

Auth0は、認可URLへの呼び出しに含めた状態値も返します。

<Warning>

Validate your tokens before saving them. To learn how, read [Validate ID Tokens](/docs/secure/tokens/id-tokens/validate-id-tokens) and [Validate Access Tokens](/docs/secure/tokens/access-tokens/validate-access-tokens).

</Warning>

ID tokens contain user information that must be decoded and extracted.

## IDトークンには、デコードして抽出する必要があるユーザー情報が含まれています。

### ユースケース

基本的な認証要求

```http lines
https://{yourDomain}/authorize?
    response_type=id_token&
    response_mode=form_post&
    client_id={yourClientId}&
    redirect_uri={https://yourApp/callback}&
    nonce=NONCE
```






この例では、手順1でユーザーを認可する際に行う最も基本的な要求について説明します。Auth0のログイン画面を表示して、構成されている接続でユーザーがサインインできるようにします。

### これによってIDトークンが返され、リダイレクトURLから解析することができます。

ユーザーの名前とプロファイルの写真を要求する

通常のユーザー認証に加えて、この例では名前や写真など、追加のユーザー詳細情報を要求する方法について説明します。

```http lines
https://{yourDomain}/authorize?
    response_type=id_token token&
    response_mode=form_post&
    client_id={yourClientId}&
    redirect_uri={https://yourApp/callback}&
    scope=openid%20name%20picture&
    state=STATE&
    nonce=NONCE
```






ユーザーの名前や写真を要求するには、ユーザーを認可する際に、適切なスコープを追加する必要があります。

```json lines
{
  "name": "jerrie@...",
  "picture": "https://s.gravatar.com/avatar/6222081fd7dcea7dfb193788d138c457?s=480&r=pg&d=https%3A%2F%2Fcdn.auth0.com%2Favatars%2Fje.png",
  "iss": "https://auth0pnp.auth0.com/",
  "sub": "auth0|581...",
  "aud": "xvt...",
  "exp": 1478113129,
  "iat": 1478077129
}
```






### これで、IDトークンには要求された名前と写真のクレームが含まれます。IDトークンをデコードする際には、以下のようになります。

In addition to the usual user authentication, this example shows how to send users directly to a social identity provider, such as GitHub. For this example to work, you need to go to [Auth0 Dashboard > Authentication > Social](https://manage.auth0.com/#/connections/social) and configure the appropriate connection. Get the connection name from the **Settings** tab.

通常のユーザー認証に加えて、この例では、ユーザーをGitHubなどのソーシャルIDプロバイダーへ直接送る方法について説明します。この例を利用するには、[［Auth0 Dashboard］>［Authentication（認証）］>［Social（ソーシャル）］](%24%7Bmanage_url%7D/#/connections/social)の順に移動し、適切な接続を構成します。**［Settings（設定）］**タブから接続名を取得します。

```http lines
https://{yourDomain}/authorize?
    response_type=id_token token&
    response_mode=form_post&
    client_id={yourClientId}&
    redirect_uri={https://yourApp/callback}&
    scope=openid%20name%20picture&
    state=STATE&
    nonce=NONCE&
    connection=github
```






ユーザーをGitHubログイン画面に直接送るには、ユーザーを認可する際に`connection`パラメーターを渡し、その値を接続名（この場合、`github`）に設定する必要があります。

```json lines
{
  "name": "Jerrie Pelser",
  "nickname": "jerriep",
  "picture": "https://avatars.githubusercontent.com/u/1006420?v=3",
  "iss": "https://auth0pnp.auth0.com/",
  "sub": "github|100...",
  "aud": "xvt...",
  "exp": 1478114742,
  "iat": 1478078742
}
```






## Learn more

* [OAuth 2.0 Authorization Framework](/docs/authenticate/protocols/oauth)
* [OpenID Connect Protocol](/docs/authenticate/protocols/openid-connect-protocol)
* [Tokens](/docs/secure/tokens)
* [Mitigate Replay Attacks When Using the Implicit Flow](/docs/get-started/authentication-and-authorization-flow/implicit-flow-with-form-post/mitigate-replay-attacks-when-using-the-implicit-flow)
* [Register Single-Page Web Applications](/docs/get-started/auth0-overview/create-applications/single-page-web-apps)
* [Update Grant Types](/docs/get-started/applications/update-grant-types)