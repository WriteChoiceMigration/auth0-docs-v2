---
og:description: Learn how to configure Rich Authorization Requests (RAR) for a resource
  server.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Rich Authorization Requests（RAR）を構成する
og:url: https://auth0.com/docs/
permalink: configure-rich-authorization-requests
title: Rich Authorization Requests（RAR）を構成する
twitter:description: Learn how to configure Rich Authorization Requests (RAR) for
  a resource server.
twitter:title: Rich Authorization Requests（RAR）を構成する
---



## 前提条件

APIのRich Authorization Requests（RAR）構成する前に、以下をセットアップします。

* [カスタムドメイン](/custom-domains)
* [カスタムのユニバーサルログインページ](/login/universal-login/universal-experience/customize-templates)テンプレートManagement APIを使用してユニバーサルログインページのテンプレートをカスタマイズする方法については、「[ページテンプレートAPI](/customize/universal-login-pages/universal-login-page-templates#page-templates-api)」をお読みください。

## リソースサーバーを構成する

### 同意ポリシーを設定する

同意ポリシーは、Auth0がいつ、どのようにして同意プロンプトをエンドユーザーに提示するかを定めます。

Auth0テナントに登録されているリソースサーバー（すなわちAPI）は、Rich Authorization Request（RAR）を承認する際にどの同意ポリシーを適用するかを事前に定義する必要があります。

デフォルトの同意ポリシーは、`null`または未定義です。Auth0は同意ポリシーの`transactional-authorization-with-mfa`もサポートしており、これは、リソース所有者（すなわちエンドユーザー）の明示的同意が常に必要なトランザクション認可のユースケースに対応します。Auth0の同意ポリシーの動作を下の表にまとめました。





### `authorization_details`タイプを登録する

リソースサーバーは、許可されたスコープの登録と同様に、承認された`authorization_details`タイプを登録しなければなりません。`authorization_details`が以下の要件を満たしていることを確認してください。

* 5Kbが上限です
* 有効なJSONでなければなりません
* オブジェクトの配列でなければなりません
* 配列には5エントリが上限です
* すべてのオブジェクトには`type`プロパティが必要です（APIに事前登録）
* オブジェクトあたりのプロパティは10個が上限です
* プロパティ名の長さは255文字が上限です
* プロパティ値の長さは255文字が上限です
* ネストされたオブジェクトは5レベルが上限です
* プロパティ名には次の文字のみを使用できます：`a-zA-Z0-9_.-`

``

`authorization_details`タイプの登録には、[Auth0 Dashboard](https://manage.auth0.com/)または[Management API](https://auth0.com/docs/api/management/v2)を使用できます。



### Rich Authorization Requestsのリソースサーバーを作成する

以下のPOST要求はRich Authorization Requests（リッチ認可要求）を受け取るリソースサーバーを作成して構成します。



## カスタマイズされた同意プロンプトを設定して認可詳細を表示する

Rich Authorization Requests（リッチ認可要求）の認可詳細を同意画面に表示するには、適切なテンプレートのパーシャルを使用して`customized-consent`プロンプトを構成する必要があります。

以下のPUT要求は、カスタマイズされた同意のパーシャルを構成します。



カスタマイズされた同意テンプレートは、Auth0がエンドユーザーに表示する以下の同意プロンプト内に認可詳細をレンダリングします。

同意プロンプトをカスタマイズする方法については、「[新しいユニバーサルログインページをカスタマイズする](/login/universal-login/universal-experience/customize-templates)」と「[ノーコードエディターで新しいユニバーサルログインをカスタマイズする](/customize-themes)」をお読みください。