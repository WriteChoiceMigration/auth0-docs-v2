---
og:description: Describes how to add scopes to your IdP connection.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: IDプロバイダーのAPIを呼び出すためにスコープ/権限を追加する
og:url: https://auth0.com/docs/
permalink: adding-scopes-for-an-external-idp
title: IDプロバイダーのAPIを呼び出すためにスコープ/権限を追加する
twitter:description: Describes how to add scopes to your IdP connection.
twitter:title: IDプロバイダーのAPIを呼び出すためにスコープ/権限を追加する
---

Once a user is logged in, you can get their user profile and then the associated `accessToken` to call the <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=Identity+Provider">Identity Provider</Tooltip> (IdP) APIs as described in [Call an Identity Provider API](/docs/authenticate/identity-providers/calling-an-external-idp-api).

しかし、IdPのAPI呼び出しで`Access Denied`（アクセス拒否）を受け取った場合には、ログインでユーザーの正しい権限が要求されていなかった可能性があります。正しい許可を要求するには、2つの方法があります。

## IDプロバイダーの設定を変更する

To configure the scopes/permissions needed from the user, go to [Auth0 Dashboard > Authentication > Social](https://manage.auth0.com/#/connections/social), and select an IdP. You can select the required permissions listed on the configuration screen.

たとえば、**Google / Gmail**接続を選択すると、Google特有の権限を構成することができます。

<Frame>![Permissions for Google](/images/cdy7uua7fh8z/61ACa6hnMtO5aUjus0fCb7/31411373a18463f272107e1124445c60/dashboard-connections-social-create_google.png)</Frame>

## スコープを認可エンドポイントに渡す

You can also pass the scopes/permissions you wish to request as a comma-separated list in the `connection_scope` parameter when calling the [authorize endpoint](https://auth0.com/docs/api/authentication#login). For example, if you want to request the `https://www.googleapis.com/auth/contacts.readonly` and `https://www.googleapis.com/auth/analytics` scopes from Google, you can pass these along with the `connection` parameter to ensure the user logs in with their Google account:

```sh lines
https://{yourDomain}/authorize
  ?response_type=id_token
  &client_id={yourClientId}
  &redirect_uri={https://yourApp/callback}
  &scope=openid%20profile
  &connection=google-oauth2
  &connection_scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fanalytics%2Chttps%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcontacts.readonly
  &nonce=abc
```






<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Please note that in the example request above, the value of the `connection_scope` parameter is URL encoded. The decoded value that is passed to Google is `https://www.googleapis.com/auth/analytics, https://www.googleapis.com/auth/contacts.readonly`

</Callout>