---
og:description: Learn how to connect your app to Microsoft Azure Active Directory
  using an enterprise connection with the Resource Owner flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: リソース所有者フローを使ってMicrosoft Entra IDにネイティブアプリを接続する
og:url: https://auth0.com/docs/
permalink: azure-active-directory-native
title: リソース所有者フローを使ってMicrosoft Entra IDにネイティブアプリを接続する
twitter:description: Learn how to connect your app to Microsoft Azure Active Directory
  using an enterprise connection with the Resource Owner flow.
twitter:title: リソース所有者フローを使ってMicrosoft Entra IDにネイティブアプリを接続する
---

In addition to the WS-Federation and <Tooltip tip="OpenID: Open standard for authentication that allows applications to verify users' identities without collecting and storing login information." cta="View Glossary" href="/docs/glossary?term=OpenID">OpenID</Tooltip> Connect flows, it's also possible to use the [Resource Owner](/docs/get-started/authentication-and-authorization-flow/resource-owner-password-flow) flow with Azure AD. This flow allows you to capture and validate a user's credentials (email and password) instead of showing the Azure AD login page. For security and <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=Single+Sign-on">Single Sign-on</Tooltip> (SSO) reasons, this is not the recommended approach; still, the <Tooltip tip="Resource Owner: Entity (such as a user or application) capable of granting access to a protected resource." cta="View Glossary" href="/docs/glossary?term=Resource+Owner">Resource Owner</Tooltip> flow can be useful in Native mobile scenarios or to batch-process authentication with Azure AD.

この構成には、WebアプリケーションとWeb API、ネイティブアプリケーションという2つのアプリケーションが必要です。Microsoft Entra IDの観点からすれば、ユーザーはネイティブアプリケーションによる認証を通じて、WebアプリケーションとWeb APIにアクセスします。

<Frame>![Overview Diagram of Azure AD Apps using Resource Owner flow](/images/cdy7uua7fh8z/6Uy9Q35rn0d9rankvlJuBT/6a5fa5175db76fd1cab35b79f0a213ea/azure-ad-native-app.png)</Frame>

## 前提条件

[Register your Application with Auth0](/docs/get-started/auth0-overview/create-applications):

1. Select **Native** for the **Application Type**.
2. Add an **Allowed Callback URL**. Your callback URL format will vary depending on your platform. For details about the format for your platform, see our [Native Quickstarts](/docs/quickstart/native).
3. Ensure your Application's [Grant Types](/docs/get-started/applications/update-grant-types) include the appropriate flows.

## ステップ

リソース所有者フローを使ってアプリケーションを接続するには、以下を行う必要があります。

1. [Set up your applications in the Microsoft Azure portal](#set-up-your-applications-in-the-microsoft-azure-portal).
2. [Create an enterprise connection in Auth0](#create-an-enterprise-connection-in-auth0).
3. [Enable the enterprise connection for your Auth0 Application](#enable-the-enterprise-connection-for-your-auth0-application).
4. [Test the connection](#test-the-connection).

<Card title="Microsoft Azure account">

Before proceeding, you will need a valid Microsoft Azure account and must have **your own** Microsoft Azure AD directory for which you are a Global administrator.

If you don't have a Microsoft Azure account, you can [sign up for free](https://azure.microsoft.com/en-us/free); then, if necessary, set up an Azure AD directory by following Microsoft's [Quickstart: Create a new tenant in Azure Active Directory - Create a new tenant for your organization](https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-access-create-new-tenant#create-a-new-tenant-for-your-organization).

Alternatively, if you have an Office 365 account, you can use the account's Azure AD instance instead of creating a new one. To access your Office 365 account's Azure AD instance:

1. [Sign in to Office 365](https://portal.office.com), and navigate to the [Office 365 Admin Center](https://portal.office.com/adminportal/home#/homepage).
2. Open the **Admin centers** menu drawer located in the left menu, and click on **Azure AD**.

</Card>

## Microsoft Azureポータルでアプリケーションをセットアップする

<Warning>

Before proceeding, you must have already set up **your own** Microsoft Azure AD directory for which you are a Global administrator. To learn how, follow Microsoft's [Quickstart: Create a new tenant in Azure Active Directory - Create a new tenant for your organization](https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-access-create-new-tenant#create-a-new-tenant-for-your-organization).

</Warning>

### 新規Webアプリケーションを登録する

To learn how to register your application with Azure AD, read [Quickstart: Register an application with the Microsoft identity platform on Microsoft Docs](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app).

<Warning>

If you have more than one Azure AD directory, make sure you are in the correct directory when you register your app.

</Warning>

アプリケーションのセットアップ中に、以下の設定を必ず使用してください。

* 外部組織（他のEntra IDディレクトリなど）からユーザーを許可したい場合は、**［Supported account types（サポートされているアカウントの種類）］**の設定時に、**［Accounts in any organizational directory (Any Azure AD directory - Multitenant)（任意の組織ディレクトリ内のアカウント（任意のMicrosoft Entra ID - マルチテナント））］**を選択します。
* When asked to set a **Redirect URI**, select **Web** and enter your callback URL: `https://{yourDomain}/login/callback`.

<Card title="Find your Auth0 domain name for redirects">

If your Auth0 domain name is not shown above and you are not using our [custom domains](/docs/customize/custom-domains) feature, your domain name is a concatenation of your tenant name, your regional subdomain, and `auth0.com`, separated by the dot (`.`) symbol.

For example, if your tenant name is `exampleco-enterprises`, and your tenant is in the US region, your Auth0 domain name would be `exampleco-enterprises.us.auth0.com` and your **Redirect URI** would be `https://exampleco-enterprises.us.auth0.com/login/callback`.

However, if your tenant is in the US region and was created before June 2020, then your Auth0 domain name would be `exampleco-enterprises.auth0.com` and your **Redirect URI** would be `https://exampleco-enterprises.auth0.com/login/callback`.

If you are using [custom domains](/docs/customize/custom-domains), your **Redirect URI** would be `https://<YOUR CUSTOM DOMAIN>/login/callback`.

</Card>

このプロセス中に、後のチュートリアルで必要になるため、アプリケーション用に生成される**［Application (client) ID（アプリケーション（クライアント）ID）］**を記録しておきます（このIDは、アプリケーションの**［Overview（概要）］**画面に表示されます）。

### APIを公開するためにWebアプリケーションを構成する

To learn how to configure your Web application to expose an API with Azure AD, read [Quickstart: Configure an application to expose web APIs on Microsoft Docs](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-configure-app-expose-web-apis).

アプリの構成中に、以下の設定を必ず使用してください。

* **［Scope name（スコープ名）］**を設定するよう求められたら、`API.Access`と入力します。

このプロセス中に、後のチュートリアルで必要になるため、アプリケーション用に生成される**［Application ID URI（アプリケーションID URI）］**を記録しておきます。

### 新規ネイティブアプリケーションを登録する

To learn how to register a native application in Azure, read [Quickstart: Register an application with the Microsoft identity platform on Microsoft Docs](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app).

<Warning>

If you have more than one Azure AD directory, make sure you are in the correct directory when you register your app.

</Warning>

アプリのセットアップ中は、以下の設定を必ず使用してください。

* 外部組織（他のEntra IDディレクトリなど）からユーザーを許可したい場合は、**［Supported account types（サポートされているアカウントの種類）］**の設定時に、**［Accounts in any organizational directory (Any Azure AD directory - Multitenant)（任意の組織ディレクトリ内のアカウント（任意のMicrosoft Entra ID - マルチテナント））］**を選択します。
* When asked to set a **Redirect URI**, select `Public client/native (mobile & desktop)` and enter your callback URL. Your callback URL format will vary depending on your platform. For details about the format for your platform, read [Native Quickstarts](/docs/quickstart/native).

このプロセス中に、後のチュートリアルで必要になるため、アプリケーション用に生成される**［Application (client) ID（アプリケーション（クライアント）ID）］**を記録しておきます（このIDは、アプリケーションの**［Overview（概要）］**画面に表示されます）。

### ネイティブアプリケーション用にクライアントシークレットを作成する

To learn how to create a <Tooltip tip="Client Secret: Secret used by a client (application) to authenticate with the Authorization Server; it should be known to only the client and the Authorization Server and must be sufficiently random to not be guessable." cta="View Glossary" href="/docs/glossary?term=client+secret">client secret</Tooltip>, read [Quickstart: Configure a client application to access web APIs - Add Credentials to your web application on Microsoft Docs](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-configure-app-access-web-apis#add-credentials-to-your-web-application).

Generate a **Client secret** and record its value. You will need it later in the tutorial.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

If you configure an expiring secret, make sure to **record the expiration date**; you will need to renew the key before that day to avoid a service interruption.

</Callout>

### ネイティブアプリケーションに権限を追加する

To learn how to add permissions for your **Native** application, read [Quickstart: Configure a client application to access web APIs - Add permissions to access web APIs on Microsoft Docs](https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-configure-app-access-web-apis#add-permissions-to-access-web-apis).

Auth0 requires that you enable the least privileged permissions necessary (for the Microsoft Graph API and for the Web application you configured to expose an API) for this configuration to work properly. To learn more about Microsoft Graph API permissions, read [Microsoft Graph permissions reference on Microsoft Docs](https://learn.microsoft.com/en-us/graph/permissions-reference).

アクセス許可のセットアップ中は、Microsoft Graph APIに以下の設定を必ず使用してください。

* アクセス許可の種類を求められたら、**［Delegated permissions（委任されたアクセス許可）］**を選択します。

  + **［User（ユーザー）］**で**［User.Read］**を選択し、ユーザーをアプリにサインインさせ、サインインしたユーザーのプロファイルを読み取れるようにします。
  + **［Directory（ディレクトリ）］**で**［Directory.Read.All］**を選択し、アプリがサインインしたユーザーの代理としてディレクトリデータを読み取れるようにします。

APIを公開するように構成したWebアプリに対しては、以下の設定を必ず使用してください。

* アクセス許可の種類を求められたら、**［Delegated permissions（委任されたアクセス許可）］**を選択します。

  + **［API］**で**［API.Access］**を選択し、アプリがユーザーの代理としてAPIにアクセスできるようにします。

## Auth0で接続を構成する

Microsoft Entra IDで両方のアプリケーションを作成したら、Auth0の接続を構成することができます。

1. Navigate to [Auth0 Dashboard > Authentication > Enterprise](https://manage.auth0.com/#/connections/enterprise), locate **Microsoft Azure AD**, and select the add (**+**) button.

   <Frame>![Dashboard - Connections - Enterprise](/images/cdy7uua7fh8z/1fSTcrZpkgkPR64NnI1lr8/b3454e60a4463e99353603fd11a71983/Enterprise_Connections_-_EN.png)</Frame>
2. Enter details for your connection, and select **Create**:

<table class="table"><thead>
<tr>
<th><strong>Field</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Connection name</strong></td>
<td>Logical identifier for your connection; it must be unique for your tenant. Once set, this name can't be changed.</td>
</tr>
<tr>
<td><strong>Microsoft Azure AD Domain</strong></td>
<td>Your Azure AD domain name. You can find this on your Azure AD directory's overview page in the Microsoft Azure portal.</td>
</tr>
<tr>
<td><strong>Client ID</strong></td>
<td>Unique identifier for your registered Azure AD application. Enter the saved value of the <strong>Application (client) ID</strong> for the Native application you registered in Azure AD.</td>
</tr>
<tr>
<td><strong>Client Secret</strong></td>
<td>String used to gain access to your registered Azure AD application. Enter the saved value of the <strong>Client secret</strong> for the Native app you registered in Azure AD.</td>
</tr>
<tr>
<td><strong>Use common endpoint</strong> (optional)</td>
<td>When enabled, your application will dynamically accept users from new directories. Typically enabled if you selected a multitenant option for <strong>Supported account types</strong> for the application you registered in Azure AD. When enabled, Auth0 will redirect users to Azure's common login endpoint, and Azure will perform <em>Home Realm Discovery</em> based on the domain of the user's email address.</td>
</tr>
<tr>
<td><strong>Identity API</strong></td>
<td>API used by Auth0 to interact with Azure AD endpoints. Learn about the differences in behavior in Microsoft's <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/azure-ad-endpoint-comparison">Why update to Microsoft identity platform (v2.0)</a> doc. Select <code>Azure Active Directory (v1)</code>, and for <strong>App ID URI</strong>, enter the saved value of the <strong>Application ID URI</strong> that was created when you configured your Web application to expose an API.</td>
</tr>
<tr>
<td><strong>Attributes</strong></td>
<td>Basic attributes for the signed-in user that your app can access. Indicates how much information you want stored in the Auth0 User Profile.</td>
</tr>
<tr>
<td><strong>Extended Attributes</strong> (optional)</td>
<td>Extended attributes for the signed-in user that your app can access.</td>
</tr>
<tr>
<td><strong>Auth0 APIs</strong> (optional)</td>
<td>When selected, indicates that you require the ability to make calls to the Azure AD Users API.</td>
</tr>
<tr>
<td><strong>Sync user profile attributes at each login</strong></td>
<td>When enabled, Auth0 automatically syncs user profile data with each user login, thereby ensuring that changes made in the connection source are automatically updated in Auth0.</td>
</tr>
<tr>
<td><strong>Email Verification</strong></td>
<td>Choose how Auth0 sets the <code>email_verified</code> field in the user profile. To learn more, see <a href="/docs/authenticate/identity-providers/enterprise-identity-providers/azuread-adfs-email-verification">Email Verification for Azure AD and ADFS</a>.</td>
</tr>
</tbody>
</table>

   <Frame>![Create new Azure AD connection](/images/cdy7uua7fh8z/1r6WTgLJUlbiV9jligIwER/55904e9d3c1eec62c2e8421b71cff94b/Enterprise_Connection_-_MSFT_-_English.png)</Frame>

## Auth0アプリケーションでエンタープライズ接続を有効化する

To use your new Azure AD enterprise connection, you must [enable the connection](/docs/authenticate/identity-providers/enterprise-identity-providers/enable-enterprise-connections) for your Auth0 Applications.

## 接続をテストする

Now you're ready to [test your connection](/docs/authenticate/identity-providers/enterprise-identity-providers/test-enterprise-connections).

## グループメンバーシップと詳細なプロファイル情報

In this native flow, Auth0 will receive an <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=Access+Token">Access Token</Tooltip> from Azure AD which has been issued for your Azure AD Web application. As a result, features like loading group memberships and advanced profile information will no longer work because the Access Token received by Azure AD can no longer be used to query the Azure AD Graph API for this additional information.

ただし、グループメンバーシップと詳細なプロファイル情報を使用している場合は、ニーズに合わせて構成を変更することができます。

1. In Azure, configure your Native application with additional permissions for the Microsoft Graph API:

   * アクセス許可の種類を求められたら、**［Delegated permissions（委任されたアクセス許可）］**を選択します。

     + **［Directory（ディレクトリ）］**で**［Directory.AccessAsUser.All］**を選択し、アプリがサインインしたユーザーとしてディレクトリにアクセスできるようにします。
2. In Auth0, modify your Azure AD enterprise connection:

   * **［Identity API］**で`［Microsoft Entra ID (v1)］`を選択します。**［App ID URI（アプリIDのURI）］**には、Microsoft Entra ID Graph APIのURIを入力します。

     ```text lines
     https://graph.windows.net
     ```

     

     

## 次の手順

* [Integrate with Auth0 using one of our libraries](/docs/libraries)
* [Integrate with Auth0 using our Authentication API](https://auth0.com/docs/api/authentication)
* [Read more about the authentication flow](/docs/get-started/authentication-and-authorization-flow)
* [Pass additional parameters to the Identity Provider](/docs/authenticate/identity-providers/pass-parameters-to-idps)
* [Re-prompt users for permissions](/docs/authenticate/identity-providers/social-identity-providers/reprompt-permissions)