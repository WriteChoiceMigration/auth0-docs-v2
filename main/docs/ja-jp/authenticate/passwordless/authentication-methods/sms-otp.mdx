---
og:description: Learn how to use Passwordless connections with the SMS authentication
  method.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: SMSでのパスワードレス認証
og:url: https://auth0.com/docs/
permalink: sms-otp
title: SMSでのパスワードレス認証
twitter:description: Learn how to use Passwordless connections with the SMS authentication
  method.
twitter:title: SMSでのパスワードレス認証
---

パスワードレス接続を構成して、SMS経由でユーザーにワンタイムパスワード（OTP）を送信し、認証を完了できます。

詳細については、「[パスワードレス認証にメールまたはSMSを構成する](/login/universal-login/configure-universal-login-with-passwordless/email-or-sms)」をお読みください。

Auth0は、[Twilio](https://www.twilio.com)とカスタムSMSゲートウェイを使用したOTPの送信をサポートしています。カスタムSMSゲートウェイを使用する場合は、「[パスワードレス接続用にカスタムSMSゲートウェイを設定する](/use-sms-gateway-passwordless)」をお読みください。

## 仕組み

新しいユーザーがコードを受け取り、アプリケーションで初めて入力すると、Auth0によって認証される前に、`sms`接続でユーザープロファイルが作成されます。

OTPが送信された電話番号が既存のユーザーと一致する場合、Auth0はユーザーを認証します。

### 埋め込みログイン

### ユニバーサルログイン

### カスタムSMSゲートウェイ

埋め込みログインまたはユニバーサルログイン用にカスタムSMSゲートウェイを構成することもできます。

## 接続を構成する

1. Auth0 Dashboardで、[[Authentication（認証）]>[Passwordless（パスワードレス）]](%24%7Bmanage_url%7D/#/connections/passwordless)に移動し、**[SMS]**トグルを有効にします。
2. **[SMS]**を選択して構成ウィンドウを開きます。

### Twilio設定を構成する

[TwilioアカウントSID](https://www.twilio.com/docs/glossary/what-is-a-sid)と[Twilio認証トークン](https://www.twilio.com/help/faq/twilio-basics/what-is-the-auth-token-and-how-can-i-change-it)が必要になります。これらは、Auth0がユーザーにSMSを送信するために使用するTwilio API資格情報です。

1. **TwilioアカウントSID**と**Twilio認証トークンを入力します。
**
2. **SMSソース**を選択し、**TwilioメッセージングサービスSID**または**送信元**電話番号を入力します。ユーザーには、SMSの送信者として入力したものが表示されます。



### カスタムSMSゲートウェイを構成する

独自のSMSゲートウェイを使用する場合は、パスワードレス接続を作成し、Auth0 Management APIを使用して変更する必要があります。詳細については、「[パスワードレス接続用にカスタムSMSゲートウェイを設定する](/use-sms-gateway-passwordless)」をお読みください。

### パスワードレスSMS設定を構成する

1. **メッセージ**に、SMSの本文を入力します。
2. **OTPの有効期限**と**OTPの長さ**の設定を調整します。

* 最後に発行されたワンタイムパスワード（またはリンク）のみが受け入れられます。最新のパスワードが発行されると、他のパスワードは無効になります。最新のパスワードも、一度使用すると無効になります。
* ワンタイムパスワードの入力は、3回しか試行できません。その後は、新しいコードを要求する必要があります。
* 発行されたワンタイムパスワードは、期限が切れるまで（デフォルトでは）3分間有効です。
* ワンタイムパスワードの有効期限を延長する場合は、ワンタイムパスワードコードの長さも延長する必要があります。そうしないと、攻撃者が短いコードを推測しようとする時間が長くなります。
3. **サインアップを無効にする**かどうかを決定します。この設定を有効にすると、既存のユーザーのみにパスワードレスアクセスを許可できますが、アプリケーションがユーザー列挙攻撃の脅威にさらされる可能性があります。詳細については、「[パスワードレス接続のベストプラクティス](/best-practices)」をお読みください。
4. **［Save（保存）］**を選択します。

#### 多言語サポート

**メッセージ**領域は複数の言語をサポートしています。

言語を指定するには、[Auth0 Authentication API Get CodeまたはLinkエンドポイント](https://auth0.com/docs/api/authentication#get-code-or-link)を呼び出して、`x-request-language`ヘッダーの値を設定します。このヘッダーが設定されていない場合、言語はブラウザによって自動的に設定される`accept-language`ヘッダーから抽出されます。

#### メッセージ構文

**メッセージ**領域はLiquid構文を受け入れます。この構文をパラメーター値と組み合わせて使用​​して、プログラムでメッセージの要素を構築できます。

たとえば、`request_language`パラメーターを参照してメッセージの言語を変更できます。



メッセージテンプレートを定義するときに使用できるパラメーターは次のとおりです。



Liquidの使用について詳しくは、[「Liquid for Designers on GitHub」](https://github.com/Shopify/liquid/wiki/Liquid-for-Designers)をご覧ください。

### アプリケーションを有効にする

**アプリケーション**ビューに切り替えて、パスワードなしの SMS を使用するアプリケーションを有効にします。