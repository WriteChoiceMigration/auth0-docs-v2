---
og:description: Learn how how to use Passwordless connections with the email authentication
  factor.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: メールでのパスワードレス認証
og:url: https://auth0.com/docs/
permalink: email-otp
title: メールでのパスワードレス認証
twitter:description: Learn how how to use Passwordless connections with the email
  authentication factor.
twitter:title: メールでのパスワードレス認証
---

You can configure a <Tooltip tip="Passwordless: Form of authentication that does not rely on a password as the first factor." cta="View Glossary" href="/docs/glossary?term=Passwordless">Passwordless</Tooltip> connection to send a one-time password (OTP) to a user through email to complete authentication.

To learn more, read [Configure Email or SMS for Passwordless Authentication](/docs/authenticate/login/auth0-universal-login/passwordless-login/email-or-sms).

## 仕組み

新しいユーザーがOTPを受け取って初めてWebサイトで入力すると、Auth0によって認証される前に、`email`接続でユーザープロファイルが作成されます。

OTPが送信されたメールアドレスが既存のユーザーと一致する場合、Auth0はユーザーを認証します。

### 埋め込みログイン

<Frame>![Passwordless email workflow diagram with embedded login](/images/cdy7uua7fh8z/3HMLxPTq9eCsq1eR21s0bL/ad401ee9fbe0716250d49ea04993a056/SMS_Email_Flow_Updated.png)</Frame>

### ユニバーサルログイン

<Frame>![Passwordless email workflow diagram with universal login](/images/cdy7uua7fh8z/5p3cKrJwmc7MxpQ7pbXsjC/285f3b54caba8a05075b6a0036990aaa/Screenshot_2024-10-29_at_11.54.03.png)</Frame>

## 接続を構成する

1. Navigate to [Auth0 Dashboard > Authentication > Passwordless](https://manage.auth0.com/#/connections/passwordless), and enable the **Email** toggle.
2. Select **Email** to open the configuration window, switch to the **Settings** view, and then enter your email's **From**, **Subject**, and **Message** text.

   <Callout icon="file-lines" color="#0EA5E9" iconType="regular">

   You must change the **From** value to an email address that does not use the `auth0.com` domain for Auth0 to send your custom email templates. If you do not, Auth0 sends the default email template.

   </Callout>
3. Configure **OTP Expiry** and **OTP Length.**

   * 最後に発行されたOTP（またはリンク）のみが受け入れられます。最新のものが発行されると、他のものは無効になります。一度使用すると最新のものも無効になります。
   * OTPの入力の失敗は3回まで許可されます。この後は、新しいコードを要求する必要があります。
   * 発行されたOTPは、期限が切れるまで3分間有効です（デフォルト）。
   * OTPの有効期限を延長する場合は、OTPの長さも延長する必要があります。そうしないと、攻撃者が短いコードを推測しようとする時間が長くなってしまいます。
4. Decide if you want to **Disable Sign Ups**. If you enable this setting, you can allow passwordless access for only existing users, but may expose your application to the threat of user enumeration attacks. To learn more, read [Passwordless Connections Best Practices](/docs/authenticate/passwordless/best-practices).
5. Select **Save**.

### 多言語サポート

**［Message（メッセージ）］**領域は複数の言語をサポートしています。

To specify a language, call the [Auth0 Authentication API Get Code or Link endpoint](https://auth0.com/docs/api/authentication#get-code-or-link) and set the value of the `x-request-language` header. When this header is not set, the language is extracted from the `accept-language` header, which is automatically set by the browser.

### メッセージの構文

**［Message（メッセージ）］**領域はLiquid構文を受け入れます。この構文をパラメータ値と組み合わせて使用​​することで、メッセージの要素をプログラムで構築できます。

たとえば、`request_language`パラメータを参照してメッセージの言語を変更できます：

```liquid lines
{% if request_language contains 'dutch' %}
   Hier is uw verificatie code: {{ code }}
{% endif %}
{% if request_language contains 'fr-FR' %}
   Ceci est votre code: {{ code }}
{% endif %}
```






メッセージテンプレートを定義するときに使用できるパラメータは次のとおりです：

<table class="table"><thead>
<tr>
<th><strong>Parameter</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>code</code></td>
<td>The password to use.</td>
</tr>
<tr>
<td><code>link</code></td>
<td>The generated sign-in link.</td>
</tr>
<tr>
<td><code>application.name</code></td>
<td>The name of the application with which the user is signing up.</td>
</tr>
<tr>
<td><code>request_language</code></td>
<td>The requested language for message content.</td>
</tr>
<tr>
<td><code>operation</code></td>
<td>Indicates when the template has been triggered by an update to a user's email through the API. When triggered, the value is <code>change_email</code>, otherwise it is <code>null</code>.</td>
</tr>
</tbody>
</table>

If the user is logged in through an [Organization](/docs/manage-users/organizations/organizations-overview), the following parameters are also available:

* `organization.id`
* `organization.display_name`
* `organization.name`
* `organization.metadata`
* `organization.branding.logo_url`
* `organization.branding.colors.primary`
* `organization.branding.colors.page_background`

For more information on these parameters and their values, read the Auth0 <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip> [Get organization](https://auth0.com/docs/api/management/v2#!/Organizations/get_organizations_by_id) endpoint.

## アプリケーションの有効化

**［Applications（アプリケーション）］**ビューに切り替えて、パスワードレスメールを使用するアプリケーションを有効にします。

## メールプロバイダー

Auth0は、デフォルトで独自のSMTPプロバイダーからメールを送信します。Auth0の組み込みメールプロバイダーはテスト目的のみに設計されており、メールテンプレートのカスタマイズはサポートされていません。

[Configure your own SMTP email provider](/docs/customize/email/smtp-email-providers) to manage, monitor, and troubleshoot your email communications, and customize email templates.

Auth0は次のメールプロバイダーをサポートします：

* [Mandrill](/docs/customize/email/smtp-email-providers/configure-mandrill-as-external-smtp-email-provider)
* [Amazon SES](/docs/customize/email/smtp-email-providers/configure-amazon-ses-as-external-smtp-email-provider)
* [Azure Communication Services](/docs/customize/email/smtp-email-providers/configure-azure-comm-service-as-smtp-email-provider)
* [SendGrid](/docs/customize/email/smtp-email-providers/configure-sendgrid-as-external-smtp-email-provider)
* [SparkPost](/docs/customize/email/smtp-email-providers/configure-sparkpost-as-external-smtp-email-provider)
* [Mailgun](/docs/customize/email/smtp-email-providers/configure-mailgun-as-external-smtp-email-provider)
* [Custom SMTP external email provider](/docs/customize/email/smtp-email-providers/configure-custom-external-smtp-email-provider)