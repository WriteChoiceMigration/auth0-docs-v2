---
og:description: Learn how the OIDC-conformant pipeline affects the Authorization Code
  Flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: OIDCを使った認可コードフロー
og:url: https://auth0.com/docs/
permalink: oidc-adoption-auth-code-flow
title: OIDCを使った認可コードフロー
twitter:description: Learn how the OIDC-conformant pipeline affects the Authorization
  Code Flow.
twitter:title: OIDCを使った認可コードフロー
---

[認可コードフロー](/login/flows/authorization-code-flow)は、シークレットを安全に保存できるサーバー側アプリケーション、またはネイティブアプリケーションが、[PKCEを使った認可コードフロー](/login/flows/authorization-code-flow-with-proof-key-for-code-exchange-pkce)を介して使用します。

OIDC準拠のパイプラインが認可コードフローに影響を与える領域は以下のとおりです。

* 認証要求
* 認証応答
* コード交換要求
* コード交換応答
* IDトークンの構造
* アクセストークンの構造

## 認証要求

### 旧



`device`パラメーターは、`offline_access`スコープを渡してリフレッシュトークンを要求する場合にのみ必要です。詳細については、「[リフレッシュトークン](/security/tokens/refresh-tokens)」をお読みください。

### OIDC準拠



* `favorite_color`は有効なスコープ値ではなくなりました。
* `device`パラメーターは削除されています。
* `audience`パラメーターは任意です。

## 認証応答

Auth0からの応答は両方のパイプラインで同じです。



## コード交換要求 - 認可コードフロー

認可コードは両方のパイプラインで同じ方法で交換できます。



## コード交換要求 - PKCEを使った認可コードフロー

認可コードは両方のパイプラインで同じ方法で交換できます。



## コード交換応答

### 旧



* 返されるアクセストークンは、[`/userinfo`](/api/authentication#get-user-info)エンドポイントの呼び出しに対してのみ有効です。
* リフレッシュトークンは、`device`パラメーターが渡され、`offline_access`スコープが要求された場合にのみ返されます。

### OIDC準拠



* 返されるアクセストークンは、`audience`パラメーターおよび[`/userinfo`](/api/authentication#get-user-info)エンドポイントで指定されたAPIの呼び出しに対してオプションで有効です（APIが[署名アルゴリズム](/applications/signing-algorithms)として`RS256`を使用し、`openid`が`scope`パラメーターとして使用されている場合）。独自のリソースサーバー（API）を実装していない場合、`https://{$account.namespace}/userinfo`を`audience`パラメーターとして使用でき、これは不透明なアクセストークンを返します。
* リフレッシュトークンは、`offline_access`スコープが付与された場合にのみ返されます。

## IDトークンの構造

### 旧



### OIDC準拠



`favorite_color`クレームはAuth0アクションを通じて追加する必要があります。詳細については、「[カスタムクレームを作成する](/security/tokens/json-web-tokens/create-custom-claims)」をお読みください。

## アクセストークンの構造（任意）

### 旧



返されるアクセストークンは不透明で、[`/userinfo`](/api/authentication#get-user-info)エンドポイントの呼び出しに対してのみ有効です。

### OIDC準拠



返されるアクセストークンは、`audience`パラメーターおよび[`/userinfo`](/api/authentication#get-user-info)エンドポイントで指定されたAPIの呼び出しに対してオプションで有効です（APIが署名アルゴリズムとして`RS256`を使用し、`openid`が`scope`パラメーターとして使用されている場合）。

独自のリソースサーバー（API）を実装していない場合、`https://{$account.namespace}/userinfo`を`audience`パラメーターとして使用でき、これは不透明なアクセストークンを返します。