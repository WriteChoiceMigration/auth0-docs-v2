---
og:description: Learn how the OIDC-conformant pipeline affects the Implicit Flow.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: OIDCを使った暗黙フロー
og:url: https://auth0.com/docs/
permalink: oidc-adoption-implicit-flow
title: OIDCを使った暗黙フロー
twitter:description: Learn how the OIDC-conformant pipeline affects the Implicit Flow.
twitter:title: OIDCを使った暗黙フロー
---

[暗黙フロー](/login/flows/implicit-flow-with-form-post)は従来、シークレットを安全に保存できないアプリケーションで使用されていましたが、このフローの使用はアクセストークンを要求するためのベストプラクティスとはみなされなくなりました。新しい実装では、[PKCEを使った認可コードフロー](/login/flows/authorization-code-flow-with-proof-key-for-code-exchange-pkce)を使用してください。ただし、アプリケーションがユーザー認証にIDトークンのみを必要とする場合、フォームPOST応答モードと併用することでワークフローが効率化します。この場合は、[ハイブリッドフロー](/login/flows/hybrid-flow)の一部として使用します。

認証に暗黙フローを使用すると、リフレッシュトークンは返されなくなります。

さらに、OIDC準拠のパイプラインが認証要求、認証応答、IDトークンの構造、およびアクセストークンの構造の領域で暗黙フローに影響を与えます。

## 認証要求

### 旧



`device`パラメーターは、`offline_access`スコープを渡してリフレッシュトークンを要求する場合にのみ必要です。詳細については、「[リフレッシュトークン](/security/tokens/refresh-tokens)」をお読みください。

### OIDC準拠



* `response_type`は、アクセストークンとIDトークンの両方を受け取りたいことを示します。
* リフレッシュトークンは暗黙的付与では許可されていません。代わりに、`prompt=none`を使用してください。詳細については「[サイレント認証を構成する](/login/configure-silent-authentication)」をお読みください。
* `favorite_color`は有効なスコープでなくなりました。
* `audience`は任意です。
* `nonce`は暗号学的に安全なランダム文字列でなければなりません。詳細については、「[暗黙フロー使用時にリプレイ攻撃を軽減する](/login/flows/mitigate-replay-attacks-when-using-the-implicit-flow)」をお読みください。

## 認証応答

### 旧



* 返されるアクセストークンは、[`/userinfo`](/api/authentication#get-user-info)エンドポイントの呼び出しに対して有効です。
* リフレッシュトークンは、`device`パラメーターが渡され、`offline_access`スコープが要求された場合にのみ返されます。

### OIDC準拠



* 返されるアクセストークンは、[`/userinfo`](/api/authentication#get-user-info)エンドポイント（`audience`パラメーターで指定したAPIが`RS256`を[署名アルゴリズム](/applications/signing-algorithms)として使用していることを条件とする）と、`audience`パラメーターで指定したリソースサーバー（任意）の呼び出しに対してのみ有効です。
* `response_type=id_token`を使用する場合は、IDトークンのみが返されます。リフレッシュトークンは暗黙的付与では許可されていません。代わりに、`prompt=none`を使用してください。

## IDトークンの構造

### 旧



### OIDC準拠



* `favorite_color`クレームには名前空間が存在し、ルールを通じて追加される必要があります。詳細については、「[名前空間カスタムクレームを作成する](/security/tokens/json-web-tokens/create-custom-claims)」をお読みください。
* IDトークンを検証したら、アプリケーションはリプレイ攻撃を軽減するためにnonceを検証する必要があります。

## アクセストークンの構造（任意）

### 旧



返されるアクセストークンは不透明で、`/userinfo`の呼び出しに対してのみ有効です。

### OIDC準拠



* 返されるアクセストークンは、`/userinfo`（`audience`パラメーターで指定したAPIが`RS256`を[署名アルゴリズム](/applications/change-application-signing-algorithms)として使用していることを条件とする）と、`audience`パラメーターで指定したリソースサーバーの呼び出しに対してのみ有効です。
* `/userinfo`が唯一指定されたオーディエンスである場合でも、不透明なアクセストークンが返されることがあります。