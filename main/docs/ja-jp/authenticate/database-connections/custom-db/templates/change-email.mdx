---
og:description: Describes the custom database action script for changing a user's
  email.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: メール変更スクリプトのテンプレート
og:url: https://auth0.com/docs/
permalink: change-email
title: メール変更スクリプトのテンプレート
twitter:description: Describes the custom database action script for changing a user's
  email.
twitter:title: メール変更スクリプトのテンプレート
---

メール変更スクリプトは、ユーザーのメールアドレスやその検証ステータスが変わった際に、定義済みの関数を実行します。この関数の名前を`changeEmail`にすることをお勧めします。

このスクリプトは[レガシー認証シナリオ ](/overview-custom-db-connections)でのみ使用され、ユーザーのメールアドレス（もしくはメールアドレス検証ステータス）をAuth0と外部データベースで同時に更新したい場合には必須です。

メール変更スクリプトは、Auth0 Dashboardでは構成できません。このスクリプトを管理するには、Auth0 Management APIの[接続の作成](https://auth0.com/docs/api/management/v2#!/Connections/post_connections)または[接続の更新](https://auth0.com/docs/api/management/v2#!/Connections/patch_connections_by_id)エンドポイント、または[Auth0 Deploy CLI](/deploy/deploy-cli-tool)を使用する必要があります。



## ChangeEmail関数

changeEmail関数は以下を行います。

* 外部データベースでユーザーのメールアドレスを更新します。
* 処理の失敗やエラーが発生した場合にはエラーを返します。

### 定義

`changeEmail`関数は、4つのパラメーターを受け取り、`コールバック`関数を返します。





### 例

これは疑似JavaScriptを使った例で、どのようにすれば`changeEmail`関数を実装できるかがわかります。



## コールバック関数

`callback`関数は2つのパラメーターを受け取り、1つの関数を返します。

### 定義





### 成功の場合

メールアドレス変更操作が成功した場合、`callback`関数を返し、`error`パラメーターには`null`を、`operationResult`パラメーターには`true`を渡します。



### 失敗の場合

メールアドレス変更操作が失敗した場合、`callback`関数を返し、`error`パラメーターには`null`を、`operationResult`パラメーターには`false`を渡します。



### エラーの場合

エラーが発生した場合は、`callback`関数を返し、`error`パラメーターに関連するエラー情報を渡します。