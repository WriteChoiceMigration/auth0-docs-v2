---
og:description: Describes custom database action script templates for changing a user's
  password.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: パスワード変更スクリプトのテンプレート
og:url: https://auth0.com/docs/
permalink: change-password
title: パスワード変更スクリプトのテンプレート
twitter:description: Describes custom database action script templates for changing
  a user's password.
twitter:title: パスワード変更スクリプトのテンプレート
---

パスワード変更スクリプトは、外部データベース内の指定されたユーザーパスワードを変更するために、定義された関数を実装します。この関数の名前は`changePassword`にすることをお勧めします。

このスクリプトは[レガシーの認証シナリオ](/overview-custom-db-connections)でのみ使用され、外部データベースのユーザーパスワードを変更したい場合には必須です。ユーザーが[パスワードリセットワークフロー](/brand-and-customize/customize-password-reset-page)を実行するか、パスワード変更フローがAuth0 DashboardまたはAuth0 Management APIから開始されるときに実行されます。

## ChangePassword関数

`changePassword`関数は以下を行います。

* 外部データベースでユーザーパスワードを更新します。
* パスワード変更操作が成功した場合、`true`（または`last_password_reset`プロパティを含むオブジェクト）を返します。オブジェクトに`last_password_reset`プロパティがある場合は、ユーザーのプロファイルで更新されます。
* パスワード変更操作が失敗した場合、`false`を返します。
* 外部データベースにリーチできなかった場合は、エラーを返します。

### 定義

`changePassword`関数は3つのパラメーターを受け取り、`callback`関数を返します。





### 例

これは疑似JavaScriptを使った例で、どのようにすれば`changePassword`関数を実装できるかがわかります。言語固有の例については、「[言語固有のスクリプトの例](#language-specific-script-examples)」をお読みください。



### Encryption（暗号化）



潜在的なデータ漏洩を防ぐために、`bcrypt`などの暗号学的ハッシュ関数の暗号化ライブラリを使用してパスワード値を暗号化します。

#### 例



## コールバック関数

`callback`関数は2つのパラメーターを受け取り、エラーデータを渡すか、操作の結果を示すために使用されます。

### 定義





### 成功の場合

パスワード変更操作が成功した場合、`callback`関数を返し、`error`パラメーターには`null`を、`operationResult`パラメーターには`true`を渡します。

#### 例



### 成功を返し、last_password_reset属性を更新する

パスワード変更操作が成功した場合、`callback`関数を返し、`error`パラメーターには`null`を、`profile`パラメーターにはオブジェクト値を渡します。オブジェクトに`last_password_reset`属性がある場合は、ユーザーのプロファイルで更新されます。

#### 例



### 失敗の場合

パスワード変更操作が失敗した場合、`callback`関数を返し、`error`パラメーターには`null`を、`operationResult`パラメーターには`false`を渡します。

#### 例



### エラーの場合

エラーが発生した場合は、`callback`関数を返し、関連するエラー情報を`error`パラメーターとして渡します。

#### 例



## 言語固有のスクリプトの例

Auth0は、以下の言語や技術で使用できるサンプルスクリプトを提供しています。

* [JavaScript](#javascript)
* [ASP.NET Membership Provider（MVC3 - Universal Providers）](#asp-net-membership-provider-mvc3-universal-providers-)
* [ASP.NET Membership Provider（MVC4 - Simple Membership）](#asp-net-membership-provider-mvc4-simple-membership-)
* [MongoDB](#mongodb)
* [MySQL](#mysql)
* [PostgreSQL](#postgresql)
* [SQL Server](#sql-server)
* [Windows Azure SQL Database](#windows-azure-sql-database)



### JavaScript



### ASP.NET Membership Provider（MVC3 - Universal Providers）



### ASP.NET Membership Provider（MVC4 - Simple Membership）



### MongoDB



### MySQL



### PostgreSQL



### SQL Server



### Windows Azure SQL Database