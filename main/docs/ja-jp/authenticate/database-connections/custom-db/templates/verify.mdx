---
og:description: Describes custom database action script templates for user email verification.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 検証スクリプトのテンプレート
og:url: https://auth0.com/docs/
permalink: verify
title: 検証スクリプトのテンプレート
twitter:description: Describes custom database action script templates for user email
  verification.
twitter:title: 検証スクリプトのテンプレート
---

検証スクリプトは、ユーザーのメールアドレスが外部データベースにある場合に、検証ステータスを検証済みにする関数を実装します。この関数の名前は`verify`にすることをお勧めします。

このスクリプトはレガシーの認証シナリオでのみ使用され、ユーザーのメールアドレス検証に対応する必要があります。メールアドレスが検証済みであることは、Auth0にあるいくつかのワークフローのシナリオでは不可欠であるため、このスクリプトを実装しておけば、そのままでそれらのシナリオに対応できます。

有効化されると、ユーザーがAuth0から受け取った確認メールのリンクをクリックしたときに、このスクリプトが実行されます。

## 検証関数

`verify`関数は以下を行います。

* 外部データベースにあるユーザープロファイルの`email_verified`（またはそれと同等の）属性を更新します。
* 更新のアクションが成功した場合には、`true`を返します。
* 更新のアクションが失敗した場合には、エラーを返します。

### 定義

`verify`関数は2つのパラメーターを受け取り、`callback`関数を返します。





### 例

これは疑似JavaScriptを使った例で、どのようにすれば`login`関数を実装できるかがわかります。言語固有の例については、「[言語固有のスクリプトの例](https://auth0.com/docs/authenticate/database-connections/custom-db/templates/verify#language-specific-script-examples)」をお読みください。



## コールバック関数

`callback`関数は、パイプラインを通してユーザープロファイルデータやエラーデータを渡すのに使用されます。

### 定義

`callback`関数は2つまでのパラメーターを受け取り、1つの関数を返します。





### 成功の場合

外部データベースでユーザーの検証ステータスが正常に更新された場合には、`null`値を`error`パラメーターで、`true`値を`verified`パラメーターで渡します。



#### 例



### エラーの場合

エラーが発生した場合には、何が起きたかについての関連情報が`error`パラメーターに含まれるようにします。

#### 例



## 言語固有のスクリプトの例

Auth0は、以下の言語や技術で使用できるサンプルスクリプトを提供しています。

* [JavaScript](#javascript)
* [ASP.NET Membership Provider（MVC3 - Universal Providers）](#asp-net-membership-provider-mvc3-universal-providers-)
* [ASP.NET Membership Provider（MVC4 - Universal Providers）](#asp-net-membership-provider-mvc4-simple-membership-)
* [MongoDB](#mongodb)
* [MySQL](#mysql)
* [PostgreSQL](#postgresql)
* [SQL Server](#sql-server)
* [Windows Azure SQL Database](#windows-azure-sql-database)

### JavaScript



### ASP.NET Membership Provider（MVC3 - Universal Providers）



### ASP.NET Membership Provider（MVC4 - Universal Providers）



### MongoDB



### MySQL



### PostgreSQL



### SQL Server



### Windows Azure SQL Database