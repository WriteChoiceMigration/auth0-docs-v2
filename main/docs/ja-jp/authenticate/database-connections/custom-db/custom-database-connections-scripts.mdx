---
og:description: Learn about best practices for custom database connections and database
  action scripts.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: カスタムデータベース接続とアクションスクリプトのベストプラクティス
og:url: https://auth0.com/docs/
permalink: custom-database-connections-scripts
title: カスタムデータベース接続とアクションスクリプトのベストプラクティス
twitter:description: Learn about best practices for custom database connections and
  database action scripts.
twitter:title: カスタムデータベース接続とアクションスクリプトのベストプラクティス
---

<Card title="Availability varies by Auth0 plan">

Both your specific login implementation and your Auth0 plan or custom agreement affect whether this feature is available. To learn more, read [Pricing](https://auth0.com/pricing).

</Card>

拡張機能により、管理者はAuth0にカスタムログインを追加し、IDおよびアクセス管理（IdAM）のラストマイルソリューションを構築する手段として利用できます。それぞれの拡張機能のタイプは、Node.jsを使用し、Auth0テナントのAuth0プラットフォームで実行されます。

Auth0の拡張機能は複数の形式で提供されます。

* [Actions](/docs/customize/actions): Actions are secure, tenant-specific, versioned functions written in Node.js that execute at certain points within the Auth0 platform. Use actions to customize and extend Auth0's capabilities with custom login.
* [Rules](/docs/customize/rules): Run when artifacts for user authenticity are generated. For example:

  + OpenID Connect（OIDC）のIDトークン
  + OAuth 2.0のアクセストークン
  + SAMLのアサーション
* [Hooks](/docs/customize/hooks): Provide additional extensibility when there is an exchange of non-user-related artifacts and when user identities are created such as pre-user registration and post-user registration.

以下は、Auth0の拡張機能製品を使用する際のベストプラクティスです。

* Scripts for both custom database connections and migrations are used to integrate with an existing user identity store or where automatic user migration from an independent or legacy identity store are required. For more more configuration information, review [Create Custom Database Connections.](/docs/authenticate/database-connections/custom-db/create-db-connection)
* ユーザーの重複を避けるため、返される各ユーザープロファイルに一貫した`user_id`を設定してください。さらに、`get_user`または`login`スクリプトで、2人の異なるユーザーに同じメールアドレスを返さず、両スクリプトが同じユーザーに返されることを確認してください。
* 後方互換性を確保するために、カスタムDBスクリプトでは`app_metadata`を`metadata`と呼びます。データ転送が中断される可能性があるため、欠落している場合は、アクションを使用して`app_metadata`または`user_metadata`に含むべきメタデータを取得してください。
* Ensure you restrict access to the <Tooltip tip="Audience: Unique identifier of the audience for an issued token. Named aud in a token, its value contains the ID of either an application (Client ID) for an ID Token or an API (API Identifier) for an Access Token." cta="View Glossary" href="/docs/glossary?term=audience">audience</Tooltip> with an [Action](/docs/customize/actions).

Auth0の拡張機能は、IdAM操作をカスタマイズするための包括的かつ高度な機能ですが、データベースが不適切または意図しない使用にさらされる可能性もあります。このセクションの文書は、設計者と実装者の両方に対するベストプラクティスを強調しています。Auth0の使用を始めている場合でも、少なくとも一度は全体を通して読むことをお勧めします。

## Learn more

* [Custom Database Connection Anatomy Best Practices](/docs/authenticate/database-connections/custom-db/custom-database-connections-scripts/anatomy)
* [Custom Database Action Script Environment Best Practices](/docs/authenticate/database-connections/custom-db/custom-database-connections-scripts/environment)
* [Custom Database Action Script Execution Best Practices](/docs/authenticate/database-connections/custom-db/custom-database-connections-scripts/execution)
* [Custom Database Connection Security Best Practices](/docs/authenticate/database-connections/custom-db/custom-database-connections-scripts/connection-security)
* [Error Handling Best Practices](/docs/troubleshoot/error-handling-best-practices)
* [Rules Testing Best Practices](/docs/rules-best-practices/rules-testing-best-practices)