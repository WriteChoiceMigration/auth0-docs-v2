---
og:description: Describes how Auth0 works with the Web Services Federation (WS-Fed)
  protocol.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Webサービスフェデレーションプロトコル
og:url: https://auth0.com/docs/
permalink: ws-fed-protocol
title: Webサービスフェデレーションプロトコル
twitter:description: Describes how Auth0 works with the Web Services Federation (WS-Fed)
  protocol.
twitter:title: Webサービスフェデレーションプロトコル
---

Web Services Federation (WS-Federation or <Tooltip tip="Web Service Federation (WS-Fed): Protocol for managing user identities across domains." cta="View Glossary" href="/docs/glossary?term=WS-Fed">WS-Fed</Tooltip>) is part of the larger WS-Security framework and an extension to the functionality of WS-Trust. The features of WS-Federation can be used directly by SOAP applications and web services. WS-Fed is a protocol that can be used to negotiate the issuance of a token. You can use this protocol for your applications (such as a Windows Identity Foundation-based app) and for <Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+providers">identity providers</Tooltip> (such as Active Directory Federation Services or Azure AppFabric Access Control Service).

## アプリケーションの場合

Auth0でアプリケーションを登録すると、以下の形式でWS-Fedエンドポイントが自動的に割り当てられます。

`https://{yourDomain}/wsfed/{yourClientId}`

You can find all available options for configuring WS-Fed under the [advanced settings](https://manage.auth0.com/#/applications/{yourClientId}/settings) area for your application.

You will need to configure the **<Tooltip tip="Relying Party: Entity (such as a service or application) that depends on a third-party identity provider to authenticate a user." cta="View Glossary" href="/docs/glossary?term=Relying+Party">Relying Party</Tooltip>**, which can be done using the following metadata endpoint:

`https://{yourDomain}/wsfed/FederationMetadata/2007-06/FederationMetadata.xml`

You can also use the **samlConfiguration** object, available in [rules](/docs/customize/rules), to configure claims sent via the token, as well as other lower-level WS-Fed and <Tooltip tip="Security Assertion Markup Language (SAML): Standardized protocol allowing two parties to exchange authentication information without a password." cta="View Glossary" href="/docs/glossary?term=SAML">SAML</Tooltip>-P settings.

たとえば、任意のパラメーターを使ったURLは以下のようになります。

<table class="table"><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wa=wsignin1.0</code></td>
<td>Whether Auth0 should issue a token for the relying party (default)</td>
</tr>
<tr>
<td><code>wa=wsignout1.0</code></td>
<td>Whether Auth0 should clear the user session/log the user out</td>
</tr>
<tr>
<td><code>wreply={callback_URL}</code></td>
<td>Where the response should be sent</td>
</tr>
<tr>
<td><code>wctx={state}</code></td>
<td>Your application's state</td>
</tr>
<tr>
<td><code>whr={connection_name}</code></td>
<td>Connection to be used (allows users to skip the Auth0 login page)</td>
</tr>
<tr>
<td><code>wfresh=0</code></td>
<td>Whether the user must re-authenticate, even if there's a session in place (<code>0</code> requires re-authentication)</td>
</tr>
</tbody>
</table>

IDプロバイダー

`https://{yourDomain}/wsfed/{yourClientId}?whr=google-oauth2`

## WS-Fedプロトコル（Active Directoryフェデレーションサービス、Azure AppFabricアクセスコントロールサービス、IdentityServerなど）を用いたIDプロバイダーをAuth0で使用するには、DashboardでADFS接続タイプを作成して使用すると、統合を最も簡単にセットアップできます。これを行うには次の2つの方法があります。

フェデレーションメタデータファイルをインポートする

* フェデレーションメタデータエンドポイントを有効にして変更を確認する
* フェデレーションメタデータファイルをインポートする

### ADFSを用いた接続をセットアップするには、Auth0にフェデレーションメタデータエンドポイントを提供するか、フェデレーションメタデータファイルをインポートしてからアップロードして、必要なパラメーターをインポートすることができます。

統合の構成を完了するのに必要な手順が表示されます。

<Frame>![Protocols WS-Fed Import Federation Metadata File ADFS Connection Screen](/images/cdy7uua7fh8z/35pGg8AnNcx2ZIfQIixt1J/49f48c2e55a80de53964a356fb5fbbb9/ADFS_Create_-_English.png)</Frame>

フェデレーションメタデータエンドポイントを有効にする

### フェデレーションメタデータファイルには、IDプロバイダーの証明書に関する情報が含まれます。フェデレーションメタデータエンドポイント（通常は末尾が`/FederationMetadata/2007-06/FederationMetadata.xml`の形式）を提供すると、Auth0はロールオーバーの準備として追加された新しい署名証明書の追加など、構成の変更を毎日確認できます。そのため、スタンドアロンのメタデータファイルを提供するよりも、フェデレーションメタデータエンドポイントを有効にする方が効率的になります。スタンドアロンメタデータファイルを提供した場合は、証明書の有効期限が近づくと通知のメールが届きます。

フェデレーションメタデータにプライマリ証明書とセカンダリ証明書の両方が含まれている場合には、Auth0でその両方を使用することができます。

フェデレーションメタデータエンドポイントを使って証明書をロールオーバーするには、以下を行います。

または、AAuth0 Dashboardにログインし、適切なADFS接続に移動して**［Save（保存）］**をクリックして、この手順を手動で完了することもできます。そうすると、即座にAuth0が証明書をダウンロードします。

1. Generate a new certificate, and add it as the secondary certificate for your ADFS environment. This should be done at least **two days** before the expiration of your active primary certificate.
2. Allow Auth0 to obtain your new certificate from the Federation Metadata endpoint. Auth0 checks your endpoints once a day, so be sure to allow sufficient time for Auth0 to complete this step.
   Alternatively, you can manually complete this step by logging in to the Auth0 Dashboard, navigating to the appropriate ADFS connection, and click **Save**. This action results in Auth0 downloading the certificates immediately.
3. Set the now-secondary certificate as the primary certificate before the existing primary certificate expires in your ADFS environment.

##

## Learn more

* [Configure WS-Fed Applications](/docs/get-started/applications/configure-ws-fed-applications)