---
og:description: Describes layers created when users log in.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: セッションレイヤー
og:url: https://auth0.com/docs/
permalink: session-layers
title: セッションレイヤー
twitter:description: Describes layers created when users log in.
twitter:title: セッションレイヤー
---

ユーザーのログインで作成可能なセッションレイヤーには通常、以下の3種類があります。

* **アプリケーションセッションレイヤー**：このレイヤーはアプリケーションの内部セッションです。アプリケーションがユーザーの認証にAuth0を使用していても、アプリケーションへのユーザーのログインはアプリケーションによって追跡されます。例えば、通常のWebアプリケーションでは、クッキー内にこの情報を保存することで追跡できます。
* **Auth0 Session Layer**: Auth0 also maintains a session on the <Tooltip tip="Authorization Server: Centralized server that contributes to defining the boundaries of a user’s access. For example, your authorization server can control the data, tasks, and features available to a user." cta="View Glossary" href="/docs/glossary?term=Authorization+Server">Authorization Server</Tooltip> for the user and stores their user information inside a cookie. This layer is used so that the next time a user is redirected to Auth0 for login the user's information will be remembered. This session layer makes the <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=SSO">SSO</Tooltip> experience possible for inbound SSO implementations.
* **<Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=Identity+Provider">Identity Provider</Tooltip> Session Layer**: When users attempt to sign in using an identity providers such as Facebook or Google, and they already have a valid sign-in (with whichever provider they choose) they will not be prompted again to sign in though they may be asked to give permission to share their information with Auth0 and, in turn, your application.

### セッションからのログアウト

Auth0実装のコンテキストでは、ログアウトは認証済みセッションを終了することになります。不要になったセッションを終了するのは、認可されていない第三者による乗っ取りを防ぐためのベストプラクティスです。

Auth0はユーザーがログアウトしやすくなるツールを提供します。これには、異なるレベルのログアウトを行うオプションや、ログアウト完了後のユーザーの行先を決定するオプションが含まれます。

* **アプリケーションセッションレイヤーのログアウト**：アプリケーションからユーザーをログアウトさせることは、一般的にユーザーのアプリケーションセッションが消去されることになり、これをお使いのアプリケーションで処理する必要があります。アプリケーションセッションレイヤーの場合、セッション終了を円滑化するためにAuth0テナントで使用しなければならないものはありません。このため、お使いのアプリケーションのセッションスタックを利用して、セッション関連の情報をすべて消去することが必要になります。Auth0 SDKの中には、アプリケーションセッションをサポートしているものもあるので、ローカルSDKセッションの削除が必要かどうかは、ドキュメントを確認してください。
* **Auth0セッションレイヤーのログアウト**：Auth0セッションレイヤーからユーザーをログアウトするには、ユーザーをAuth0のログアウトエンドポイントにリダイレクトさせ、Auth0がSSOクッキーをクリアできるようにします。

  <Callout icon="file-lines" color="#0EA5E9" iconType="regular">

  Generally, you clear an Auth0 session by diverting users to the `/logout` endpoint. However, if you call the [Update a User](https://auth0.com/docs/api/management/v2/#!/Users/patch_users_by_id) endpoint to reset user attributes (passing values `email`, `email_verified`, `phone_number`, and `password`), `auth0.checkSession` does not renew the session, and the user must re-login.

  </Callout>
* **IDプロバイダーセッションレイヤーのログアウト**：このセッションレイヤーからユーザーをログアウトさせる必要はありませんが、必要であれば、Auth0を使って強制的にログアウトさせることができます。

#### リダイレクトURL

Logging out of your Auth0 Session Layer will require you to redirect the user to `https://{yourCNAME}` or `{yourTenant}.auth0.com/oidc/logout` - typically performed via use of the appropriate method in the Auth0 SDK for your technology stack. This will clear your Auth0 session. You will also want to add a query parameter for that request called `id_token_hint` - this parameter should contain a URL that has been pre-registered and protects you against open redirect attacks.

Auth0はログアウト後に、許可リスト登録されたURLにのみリダイレクトします。これらを設定できる場所は2つあります。設定できる1つ目の場所は、Auth0テナントレベルにあります。ここで、すべてのアプリケーションで共有されるログアウトURLセットを設定できます。2つ目の場所は、アプリケーション設定にあります。各アプリケーションごとに異なるリダイレクトが必要な場合は、アプリケーション設定でURLを許可リストに登録できます。これにより、アプリケーション固有のコンテキストでログアウトURLを設定することができます。

#### セッションのライフタイムとセッションのタイムアウト

You can set the behavior in cases where a user doesn’t explicitly log out of your application. Auth0 provides [session lifetime](/docs/manage-users/sessions/session-lifetime-limits) limits to deal with Auth0 session termination in this scenario.

#### フェデレーションログアウト

You can also log the users out of the identity provider session layer. While this is not recommended, for many providers, Auth0 provides this behavior by having you add the `federated` query parameter to the redirect to `/oidc/logout`. This redirects the user to their identity provider and logs them out there as well. To learn more about federated logout, review the article [Log Users Out of Identity Providers](/docs/authenticate/login/logout/log-users-out-of-idps).

## Learn more

* [Session Lifetime Limits](/docs/manage-users/sessions/session-lifetime-limits)