---
og:description: Learn how to export lists of users and user metadata.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 一括ユーザーエクスポート
og:url: https://auth0.com/docs/
permalink: bulk-user-exports
title: 一括ユーザーエクスポート
twitter:description: Learn how to export lists of users and user metadata.
twitter:title: 一括ユーザーエクスポート
---

`POST /api/v2/jobs/users-exports`エンドポイントを使用して、[接続](/identityproviders)に関連付けられているすべてのユーザー、またはテナント内のすべてのユーザーをエクスポートするジョブを作成できます。

エクスポートできるユーザープロファイルフィールドのリストについては、「[ユーザープロファイル構造](/users/user-profiles/user-profile-structure)」を参照してください。

ジョブを作成するときは、次の情報を提供する必要があります。

* ユーザーをエクスポートする[接続のID](/get-started/dashboard/locate-the-connection-id)（オプション）
* エクスポートファイルの形式（CSVまたはJSON互換）
* エクスポートするユーザーレコードの最大数（オプション、省略するとすべてのレコードがエクスポートされます）
* エクスポートに含めるユーザー関連フィールド（ユーザーIDや名前など）

有効な[Management APIアクセストークン](/api/management/v2/tokens)も必要です。

## **要求本文を作成する**

必要に応じて、Auth0 Dashboardで`connection_id`とAuth0テナントドメイン名を見つけます。以下の要求本文を含む新しいテキストファイルを作成します。

`connection_id`をデータベース接続IDで更新するか、削除してテナント内のすべてのユーザーをエクスポートします。

## 要求例

必要なスコープ：`read:users`

````

応答はこのようになっているはずです。



## エクスポートされたCSVにユーザーメタデータを含める

ユーザーデータをCSV形式でエクスポートし、メタデータ情報を含める場合は、エクスポートする各メタデータフィールドを指定します。最大30個のフィールドをエクスポートできます。



たとえば、メタデータが次のように構造化されている場合。



エクスポート要求（3つのフィールドすべて）は次のようになります。







### JSON互換形式

データをJSON互換形式でエクスポートする場合は、ルートプロパティのみを指定する必要があります。個々の内部プロパティは自動的に含められるため、名前を付ける必要はありません。

Auth0のエクスポートファイルは、エクスポートファイルのサイズが大きいため[NDJSON](https://github.com/ndjson/ndjson-spec)形式を使用しますが、インポート機能ではJSONファイルが必要です。

Auth0によって生成されたエクスポートを使用してユーザーをインポートする前に、任意のライブラリ（[jq](https://stedolan.github.io/jq/)など）を使用して、ファイルをNDJSONからJSONに変換する必要があります。

この場合、前に使用したのと同じ例では、要求は次のようになります。



## エクスポートステータスの確認

ユーザーをエクスポートするジョブを作成したら、[Get a Jobエンドポイント](/api/management/v2#!/Jobs/get_jobs_by_id)を使用してそのステータスを確認できます。

ジョブのID（ジョブの作成時に応答で受け取ったID）を指定します。以下のサンプル要求を使用している場合は、プレースホルダー`{yourJobId}`をIDの値に置き換えます。

必要なスコープ: `create:users`, `read:users`, `create:passwords_checking_job`

````

次のような応答が返されます。



## エクスポートデータの検索

**location**パラメータの値として提供されたURLを使用することで、エクスポートファイルにアクセスできます。テナントの名前は、ファイルの名前でもあります。たとえば、テナント名が`auth0docs`の場合、ファイルは`auth0docs.csv`または`auth0docs.json`になります。URLに移動すると、ファイルのダウンロードが自動的に開始されます。

ダウンロードリンクは60秒間有効です。この期間が経過した場合、ジョブが期限切れになる前に24時間以内に再度呼び出すことができます。

## ジョブのクリーンアップ

ジョブ関連データはすべて24時間後に自動的に削除され、その後はアクセスできなくなります。そのため、**選択したストレージメカニズムを使用してジョブの結果を保存することを強くお勧めします**。