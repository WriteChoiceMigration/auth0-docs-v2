---
og:description: Describes what cookies are and how they can be used with sessions
  to track user authentication.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: クッキー
og:url: https://auth0.com/docs/
permalink: cookies
sidebarTitle: クッキー
title: クッキー
twitter:description: Describes what cookies are and how they can be used with sessions
  to track user authentication.
twitter:title: クッキー
---

クッキーはWebサーバーがブラウザーに送信するデータ列です。ブラウザーがその後、そのWebサーバーに要求を送信する際には、要求と一緒に同じデータ列が送信されます。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Previously in Auth0, the `samesite` cookie attribute options were `true`, `false`, `strict` or `lax`. If you didn't set the attribute manually, Auth0 would use the default value of `false`.
Effective February 2020, Google Chrome v80 changed the way it handles cookies. To that end, Auth0 implemented the following changes to how it handles cookies:

* Cookies without the `samesite` attribute set will be set to `lax`.
* Cookies with `sameSite=none` must be secured, otherwise they cannot be saved in the browser's cookie jar.

The goal of these changes are to improve security and help mitigate CSRF attacks.

</Callout>

Webサイトは通常クッキーを使って、ユーザーがページを移動しても確実に認識されるようにします。これで、ページを移動するたびに毎回ログインする必要がなくなります。また、Webサイトはクッキーを使って、ユーザーが入力した情報を記憶します。たとえば、Eコマースサイトは、カートに入れられた商品を覚えておくためにクッキーを使用します。

ユーザーは、ブラウザーの設定を変更して、クッキーの受け入れを選択することができます。

## クッキーベースの認証

Typically, single-page apps (such as React, Vue, and AngularJS + Node), native mobile apps (such as iOS and Android), and web APIs (written in Node, Ruby, ASP.NET, or a mix of those) benefit most from token-based authentication. Traditional, server-side web applications have traditionally used cookie-based authentication.

Webプラットフォームはそれぞれ、クッキーベースの認証を異なる方法で実装していますが、結局のところ、認証済みのユーザーを表すのに（サーバー上のセッションに紐づけられた）何らかのクッキーを設定しています。それぞれの要求についてそのクッキーが送信され、何らかのストア（1台のサーバーであればメモリ内、サーバーファームであれば何らかの永続ストレージ）からセッションが非直列化されます。Auth0ではほとんどのプラットフォーム用にSDKを提供して、対応する認証サブシステム（nodeのpassport、.NETやJavaのIPrincipalなど）と結び付けます。

認証を要求するアプリケーションの構築では、それぞれの要求時にユーザーが認証済みかを判断するために、セッションやクッキーを使用することができます。クッキーはステートフルとステートレスから選ぶことができます。

### ステートフルクッキー

ステートフルクッキーには、セッション情報を保管するデータベースレコードへのポインターが含まれます。

**Pros**:

* 保管するセッション情報の量に制限がありません。
* データベースからレコードを削除するだけで、ユーザーのセッションを簡単にクリアできます。

**Cons**:

* セッションデータをデータベースに保管する必要があります（ただし、ほとんどのWebアプリケーションはすでにこれを行っています）。
* ユーザーがHTTP要求を行うたびにセッションを読み取る（時には書き込む）のにデータベースを呼び出す必要があるため、遅延が増加します。
* ユーザーの数が多く、データベースに対する読み取りや書き込みが多くなる場合には、規模の調整が困難なこともあります。

### ステートレスクッキー

ステートレスクッキーは自己完結型で、クライアントにある必要なセッション情報（認証済みのユーザーではユーザーID）がすべて含まれています。外部からの改ざんを防ぐために、ステートレスクッキーは必ず暗号化（少なくとも署名）されなければなりません。

**Pros**:

* 手軽に実装できます。特別なバックエンドは必要ありません。
* データベースを呼び出す必要がないため、遅延が低減されます。
* 規模の調整が簡単です。

**Cons**:

* クッキーにはサイズ制限（ほとんどのブラウザーで最大4KB）があるため、保管されるセッション情報を制約する必要があります。セッション情報を複数のクッキーに分割することもできますが、推奨されません。
* データベースに削除可能なレコードがないため、セッションの取り消しが困難になります。セッションを強制的にクリアする別の方法を用意する必要があります。
* 複数のWebサーバーを使用している場合には、クッキーの暗号化と復号化や署名に使用する鍵がすべてのサーバーになくてはなりません。

## Learn more

* [Sessions](/docs/manage-users/sessions)
* [Authentication API Cookies](/docs/manage-users/cookies/authentication-api-cookies)
* [SameSite Cookie Attribute Changes](/docs/manage-users/cookies/samesite-cookie-attribute-changes)
* [Secure](/docs/secure)