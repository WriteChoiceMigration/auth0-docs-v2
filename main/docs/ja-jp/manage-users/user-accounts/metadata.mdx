---
og:description: Describes Auth0 user, application, and client metadata. Learn how
  you can use metadata to store information that does not originate from an identity
  provider.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ユーザープロファイルでのメタデータの使い方
og:url: https://auth0.com/docs/
permalink: metadata
sidebarTitle: ユーザープロファイルでのメタデータの使い方
title: ユーザープロファイルでのメタデータの使い方
twitter:description: Describes Auth0 user, application, and client metadata. Learn
  how you can use metadata to store information that does not originate from an identity
  provider.
twitter:title: ユーザープロファイルでのメタデータの使い方
---

Auth0は包括的システムを提供して、Auth0ユーザープロファイルにメタデータを保管できるようにしています。メタデータは以下に使用できます。

* アプリケーション特定のデータをユーザープロファイルに保管する
* ユーザーに対して特定の操作が発生したかを記録する
* ユーザープロファイルに関する負荷の大きい処理の結果をキャッシュして、将来のログインで再利用する
* IDプロバイダー以外から提供された情報を保管する、または、IDプロバイダーから提供された情報を上書きする情報を保管する

メタデータは、ユーザーのログインフローの一部として変更されても構いません。

接続の同期を構成して、ユーザープロファイルの作成時にのみユーザーのルート属性がIDプロバイダーによって更新されるようにします。ルート属性は、個別または一括インポートで編集できます。詳細については、「[ユーザープロファイルの更新に向けてIDプロバイダー接続を構成する](/users/user-profiles/configure-connection-sync-with-auth0)」をお読みください。

## メタデータの種類

Auth0は3種類のメタデータを使って、特定の情報を保管します。



## メタデータを管理する

メタデータの作成や更新には、ルール、Authentication API、Management API、Auth0 Dashboard、ロックライブラリーを使うことができます。

カスタムソーシャル接続のカスタムDBスクリプトと`fetchUserProfile`スクリプトでは、メタデータの作成と更新に`metadata`オブジェクトを使うことができます。

### アクションを使用する

[アクション](/actions)は安全でテナント固有のバージョン管理された関数で、Node.jsで記述され、Auth0プラットフォームにある特定の拠点で実行されます。アクションは、カスタムロジックでAuth0の機能をカスタマイズおよび拡張するために使用されます。[ユーザープロファイルを強化](/customize/actions/flows-and-triggers/login-flow#enrich-the-user-profile)するために使うこともできます。

たとえば、カスタムクレームを使用する`post-login`アクションを作成して、`user_metadata`プロパティーをIDトークンにコピーするのに使うことができます。その際に、ユーザーの`user_metadata`はAuthentication APIの[ユーザー情報取得](https://auth0.com/docs/api/authentication#get-user-info)エンドポイントを介して取得されます。

詳細については、「[ログイン後のアクショントリガーでユーザーメタデータを管理する](/signup-and-login-triggers/login-trigger/manage-user-metadata)」をお読みください。

### Management APIを使用する

ユーザーは、適切なスコープを指定してアクセストークンを要求し、以下の[Management API](/api/management/v2)エンドポイントを使って`user_metadata`の表示や作成、更新を行ったり、MFAの構成を削除したりできます。



Auth0 Management APIを呼び出すのに、アクセストークンは必須です。詳細については、「[Management APIのアクセストークン](/api/management/v2/tokens)」と「[SPAにManagement APIのトークンを取得する](/api/management/v2/get-access-tokens-for-spas)」をお読みください。

### Dashboardを使用する

Auth0 Dashboardを使用すると、キーと値のペアを含むアプリケーションメタデータを構成することができます。詳細については、「[アプリケーションメタデータを構成する](/applications/configure-application-metadata)」をお読みください。

### ロックライブラリーを使用する

[ロック](/libraries/lock)ライブラリーは、`user_metadata`の定義、追加、読み取り、更新に使うことができます。`user_metadata`プロパティは、他のユーザープロファイルのプロパティと同じ方法で読み取ります。たとえば、以下のコードのスニペットでは、`user_metadata.hobby`に関連付けられた値が取得され、ページにある要素に割り当てられます。



ユーザーのサインアップフォームにカスタムフィールドを追加するには、`additionalSignUpFields`を使用します。ユーザーがカスタムフィールドにデータを追加すると、Auth0は入力された値をユーザーの`user_metadata`に保管します。サインアップ時の`user_metadata`の追加については、「[追加のサインアップフィールド](/libraries/lock/v10/customization#additionalsignupfields-array-)」を参照してください。

## カスタムデータベース接続とメタデータ

[カスタムデータベース接続](/connections/database#using-your-own-user-store)がある場合には、Authentication APIの[`/dbconnections/signup`](/api/authentication?shell#signup)エンドポイントを使って、ユーザーに`user_metadata`を設定することができます。カスタムサインアッププロセスでのメタデータの扱いについては、「[カスタムサインアップ](/libraries/custom-signup)」をお読みください。

`user_metadata`フィールドをAuthentication APIの`/dbconnections/signup`エンドポイントを使って設定する際には、最大10の文字列フィールド、最大500文字までに制限されます。

## カスタムメールとメタデータ

メタデータを使用して、Auth0メールのカスタマイズに使いたい情報を保管します。たとえば、ユーザーがフィールドの値を変更できるようにするには、`user_metadata.lang`を使って、メールの言語をカスタマイズする情報を使用します。詳細については、「[メールテンプレートをカスタマイズする](/brand-and-customize/email/customize-email-templates)」をお読みください。

ロックで問題が発生した場合には、「[非推奨エラー](/troubleshoot/troubleshoot-basic/check-deprecation-errors)」を確認してください。Management APIで問題が発生した場合には、「[API呼び出しをチェックする](/troubleshoot/troubleshoot-authentication/check-api-calls)」を参照してください。