---
og:description: Learn how to manage with app metadata, user metadata, and client metadata
  using Rules.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ルールを使用してメタデータを管理
og:url: https://auth0.com/docs/
permalink: manage-metadata-rules
title: ルールを使用してメタデータを管理
twitter:description: Learn how to manage with app metadata, user metadata, and client
  metadata using Rules.
twitter:title: ルールを使用してメタデータを管理
---



[Auth0ルール](/rules)を使用して、メタデータの読み取り、更新、削除を行うことができます。以降のセクションでは、ユーザーとその情報が次のJSONスニペットで表されるこの例について説明します。



## メタデータの読み取り

Management APIでルールを使用してメタデータを読み取ることができます。次のように、`user_metadata`でプロファイル関連の情報を検索することもできます。

* `名前`
* `ニックネーム`
* `given_name`
* `family_name`



例として、電子メールアドレスが`jane.doe@example.com`のユーザーに対して次のメタデータが保存されているとします。



上記のメタデータの例を使用すると、次のように[Auth0ルール](/rules)または[Management API](/users/guides/manage-user-metadata)の呼び出しでデータセットから特定の項目を参照できます。



任意の有効なJSONスニペットをメタデータとして使用できますが、`user.app_metadata`は既定で`未定義`であることに注意してください。

使用可能なメタデータを読み取るには、適切なユーザープロパティにアクセスする必要があります。

### アプリメタデータの読み取り

ユーザーのロールに基づいて決定を行うことができます。



### ユーザーメタデータの読み取り

色の好みなど、特定の設定に基づいて決定を下すことができます。



### アプリケーションメタデータの読み取り（clientMetadata）

アプリケーションメタデータ（`clientMetadata`）は、`コンテキスト`オブジェクトのオプションの最上位プロパティです。既存のアプリケーションには、このプロパティの値はありません。



## メタデータの更新



### アプリメタデータの更新

管理者ロールをユーザーに追加するには:



これにより、ユーザープロファイルの詳細が次のJSON表記になります。

### ユーザーメタデータの更新

ユーザーの`fontSize`設定をユーザープロファイルに追加するには:



これにより、ユーザープロファイルの詳細が次のJSON表記になります。

### アプリとユーザーのメタデータを同時に更新

ルールの処理時間を短縮するには、同じルールで`app_metadata`と`user_metadata`の両方を更新します。



これにより、ユーザープロファイルの詳細が次のJSON表記になります。



## メタデータの削除

### アプリメタデータのプロパティと値を削除します

プロパティを削除するには、プロパティの値を`null`に設定します。

#### ユーザーのロールの削除の例

ユーザーのロールを削除するには、次のサンプルルールを使用します。



これにより、ユーザープロファイルが次のJSON表記になります。



#### 単一のプロパティ値の削除の例

プロパティの単一の値を削除するには、その特定の値を削除します。たとえば、ユーザープロファイルから`ライター`ロールを削除するには:



これにより、ユーザープロファイルが次のJSON表記になります。



`ロール`プロパティはまだ存在しますが、値が含まれていないことに注意してください。

### ユーザーメタデータのプロパティと値を削除

ユーザーの色の設定を削除するには:



これにより、ユーザープロファイルの詳細が次のJSON表記になります。