---
og:description: Learn how to use user metadata to change a user's picture field and
  how to change the default picture for all users.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ユーザーの画像を変更する
og:url: https://auth0.com/docs/
permalink: change-user-picture
title: ユーザーの画像を変更する
twitter:description: Learn how to use user metadata to change a user's picture field
  and how to change the default picture for all users.
twitter:title: ユーザーの画像を変更する
---

Auth0は、ユーザープロファイル内の共通プロファイルプロパティを正規化します。これには、`name`や`picture`フィールドなどが含まれます。画像フィールドには、ソーシャルプロバイダーのプロフィール画像、またはユーザーのメールアドレスに関連付けられたGravatar画像のいずれかが入力されます。

デフォルトでは、すべてのデータベースユーザーにイニシャルの入ったプレースホルダー画像が設定されます。ユーザーの認証では、この画像フィールドは`user.picture`と呼ばれます。

## Management APIを使用する

`user.picture`属性がGoogle、Facebook、Xなど、Auth0以外のIDプロバイダーによって提供されている場合には直接編集できません。この属性を編集するには、ユーザープロファイルの作成時にのみIDプロバイダーからユーザー属性が更新されるように、Auth0との接続同期を構成する必要があります。詳細については、「[ユーザープロファイルの更新にIDプロバイダー接続を構成する](/users/user-profiles/configure-connection-sync-with-auth0)」をお読みください。そうすれば、ルート属性を個別に編集したり、Management APIを使用して一括インポートしたりできます。詳細については、「[ユーザーを一括してインポートする](/users/import-and-export-users/bulk-user-imports)」をお読みください。

または、メタデータを使用してユーザーの画像属性を保管することもできます。たとえば、アプリにプロフィール画像をアップロードする方法がある場合は、画像をアップロードすれば、`user.user_metadata.picture`でURLを画像に設定できます。



## アクションを使用する

`user_metadata`からの画像がIDトークンで返されるようにするには、`event.user.user_metadata.picture`属性の存在を確認する[新しいアクションを作成](/actions/write-your-first-action)し、存在する場合は`user.picture`属性をその値に置き換える必要があります。そうすると、`user_metadata`からの画像がIDトークンの`picture`クレームで返されます。

1. [［Auth0 Dashboard］>［Actions（アクション）］>［Library（ライブラリー）］](https://manage.auth0.com/#/actions/library)に移動して、**［Build Custom（カスタムの構築）］**を選択します。
2. アクションにわかりやすい**名前**（`Change user pictures`など）を入力し、［`Login / Post Login`（ログイン/ログイン後）］のトリガー（アクションをログインフローに追加することになるため）を選択してから**［Create（作成）］**を選択します。
3. Actionsコードエディターを見つけて、次のJavaScriptコードをコピーし、**［Save Draft（下書きを保存）］**を選択して変更を保存します。
4. Actionsコードエディターのサイドバーから、［Test（テスト）］（再生アイコン）を選択してから、**［Run（実行）］**を選択し、[コードをテスト](/actions/test-actions)します。
5. アクションを稼働する準備ができたら、**［Deploy（デプロイ）］**を選択します。

最後に、作成したアクションを[ログインフロー](%24%7Bmanage_url%7D/#/actions/flows/login/)に追加します。フローにアクションをアタッチする方法については、「[アクションを初めて作成する](/actions/write-your-first-action)」の「アクションをフローにアタッチする」セクションをお読みください。

## すべてのユーザーのデフォルト画像を変更する

プロフィール画像を設定していないすべてのユーザーのデフォルト画像を変更するには、アクションを使用できます。例：



このアクションでは、カスタム画像がIDトークンで返され、Googleなどの外部IDプロバイダーのログインから適用されるかもしれない`picture`プロパティを上書きします。

## 制限事項

Auth0データストアには制限があるため、アプリケーションのデータが制限を超えないようにするには、ユーザー画像の保管に外部データベースの使用をお勧めします。そうすることで、Auth0データストアを小さく保ち、より効率的な外部データベースを使用して追加データを保持できるようになります。詳細については、「[ユーザーデータストレージ](/security/data-security/user-data-storage)」をお読みください。