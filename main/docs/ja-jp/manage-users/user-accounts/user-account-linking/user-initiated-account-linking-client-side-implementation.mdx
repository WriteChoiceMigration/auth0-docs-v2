---
og:description: Learn how to provide a client-side UI that allows users to authenticate
  to their other accounts and link these to their primary account using a SPA.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ユーザー起点のアカウントのリンク：クライアント側実装
og:url: https://auth0.com/docs/
permalink: user-initiated-account-linking-client-side-implementation
title: ユーザー起点のアカウントのリンク：クライアント側実装
twitter:description: Learn how to provide a client-side UI that allows users to authenticate
  to their other accounts and link these to their primary account using a SPA.
twitter:title: ユーザー起点のアカウントのリンク：クライアント側実装
---

Auth0は、様々なIDプロバイダーのユーザーアカウントのリンクをサポートします。この機能を実装する方法の1つは、ユーザーがアカウントを明示的にリンクできるようにすることです。このシナリオでは、ユーザーはシングルページアプリケーション（SPA）のUIを通じて認証を行い、後でリンクまたはボタンを使用して別のアカウントを最初のアカウントにリンクすることができます。このリンク/ボタンを押すと、アプリケーションが呼び出しを行い、ユーザーが2番目のプロバイダーでログインするときに、2番目のアカウントが最初のアカウントにリンクされます。

アカウントのリンクを始めるときに、プライマリアカウントとして使用するIDと、セカンダリアカウントとして使用するIDをそれぞれ選択することができます。プライマリアカウントからの属性のみが保持されるため、プライマリプロファイルにどの属性を保持したいかに応じて選択してください。

[GitHubで](https://github.com/auth0-samples/auth0-link-accounts-sample/tree/master/SPA)このプロジェクトを使用してサンプルのReactシングルページアプリケーションを作成します。

このプロジェクトの`auth_config.json`ファイルをテキストエディターで開き、詳細を入力してドメインと`client_id`を更新します。

［Allowed Callback URL（許可されているコールバックURL）］、［Allowed Logout URLs（許可されているログアウトURL）］、［Allowed Web Origins（許可されているWebオリジン）］に`http://localhost:3000`を追加します。

1. ユーザーをアプリケーションにログインさせます。

ユーザーは[ユニバーサルログイン](/login/universal-login)を使用してSPAに対して認証し、[Management APIのアクセストークン](/api/management/v2/get-access-tokens-for-spas)を要求します。

通常のSPAログインでは、コールバックは同じページのクライアント側で処理され、認証に成功した後にJWTを受け取ります。詳細については、「[シングルページアプリのQuickstart](/quickstart/spa)」をお読みください。
2. ユーザーがアカウントリンクを始めます。SPAはユーザーに、他のアカウントへのリンクを始めるためのUIを提供する必要があります。たとえば、SPAにユーザーの設定ページを含めることができます。

ユーザーが**［Link Account（アカウントのリンク）］**ボタンをクリックすると、ユーザーはユニバーサルログインページにリダイレクトされ、リンクしたい接続でログインします。正しく認証したら、取得したトークンを使用してアカウントをリンクします。

また、接続ごとにボタン（［Link Facebook Account（Facebookアカウントのリンク）］、［Link Google Account（Googleアカウントのリンク）］など）を追加し、`connection`パラメーターセット（例：`/authorize?connection=facebook`）を使ってユーザーを`/authorize`にリダイレクトすることもできます。
3. Auth0 Management APIの[ユーザーアカウントのリンクエンドポイント](/api/v2#!/Users/post_identities)を呼び出してアカウントをリンクします。
4. `linkAccount`関数で、Management APIを呼び出します。アクセストークンであるプライマリJWTを使用してAPIで認証を行い、プライマリユーザーのIDと、セカンダリユーザーのIDトークンであるセカンダリJWTを使用してリンクします。