---
og:description: Understand how to link user accounts from various identity providers,
  so your users can authenticate from any account and be recognized by your app.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: ユーザーアカウントをリンクする
og:url: https://auth0.com/docs/
permalink: link-user-accounts
title: ユーザーアカウントをリンクする
twitter:description: Understand how to link user accounts from various identity providers,
  so your users can authenticate from any account and be recognized by your app.
twitter:title: ユーザーアカウントをリンクする
---

ユーザーアカウントをリンクして、プライマリとセカンダリの関係を形成します。リンクが成功すると、エンドポイントはプライマリアカウントIDの新しい配列を返します。

Auth0は、様々なIDプロバイダーのユーザーアカウントのリンクをサポートします。これにより、ユーザーはどのアカウントからでも認証でき、アプリによって認識され、同じユーザープロファイルに関連付けられます。



Auth0 は、デフォルトですべてのIDを個別のものとして扱います。たとえば、ユーザーが最初にAuth0データベースにログインし、次にGoogle またはFacebook経由でログインした場合、Auth0ではこれら2つの試行は2人の別々のユーザーとして表示されます。

アカウントのリンクには3つの方法があります。

* アカウントリンク拡張機能の使用
* Management APIの使用
* Auth0.jsの使用

各オプションの詳細を確認するには、下のタブを使用してください。



## ルールを使用して不足している情報を追加する

ユーザーがログインすると、アプリは**プライマリID**からユーザー情報を受け取ります。Auth0は、セカンダリIDの情報を使用して、不足しているプロファイルフィールドを自動的に補完しようとしません。たとえば、プライマリIDがデータベース接続から取得され、`given_name`プロパティと`family_name`プロパティが欠落しており、セカンダリIDがユーザーの姓名を含むGoogleソーシャル接続から取得されている場合、アプリケーションは2番目のIDに含まれるデータを受信**しません**。

セカンダリIDの情報を使用してプライマリIDに不足している情報を追加するには、次の例のようなルールを記述します。





## Actionsを使ったアカウントリンク

Auth0 Actionsを使用して、Management APIを呼び出してユーザーアカウントをリンクできます。Auth0 は、アカウントのリンク後に正しいプライマリユーザーに自動的に変更されないため、アカウントのリンクが成功したらアクションコード内で変更してください。



### Actionsを使ったアカウントリンクの例

基本的なアカウントリンクの実装は次のとおりです。



1. アクションにリンクする可能性のあるユーザーアカウントを識別します。
2. [アクションのリダイレクト機能](/signup-and-login-triggers/login-trigger/redirect-with-actions)とトークンを使用して、外部リンクアプリにリダイレクトします。
3. リンクするすべてのアカウントに対して、ユーザーの資格情報を使用して認証することを要求します。
4. 署名済みJWTにエンコードされた認証の結果を使用してアクションにリダイレクトし、そのトークンの信頼性と内容を検証します。
5. 結果に基づいて、Management API呼び出しでアカウントリンクを実行します。
6. アクションを使用して、トランザクションの残りの部分をプライマリユーザーに切り替えます。

これらの手順を実行するために、ログイン後のアクションの例には次の内容が含まれます。