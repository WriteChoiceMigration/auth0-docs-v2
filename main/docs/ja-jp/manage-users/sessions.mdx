---
og:description: Describes what sessions are and how the are used in Auth0.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: セッション
og:url: https://auth0.com/docs/
permalink: sessions
sidebarTitle: セッション
title: セッション
twitter:description: Describes what sessions are and how the are used in Auth0.
twitter:title: セッション
---

セッションとは、特定の期間におけるユーザーおよびアプリケーション間の一連のインタラクションです。1つのセッションは複数のアクティビティ（ページビュー、イベント、ソーシャル インタラクション、eコマーストランザクションなど）で構成され、ユーザーが接続している間、この情報は一時的に保存できます。

With a standard Set-Cookie header implementation, a session ends when a user leaves a website or closes their browser. To prevent users from having to log in every time, applications can extend sessions by setting a maximum lifetime for the <Tooltip tip="Session Cookie: Entity that, when present, allows the user to be considered authenticated." cta="View Glossary" href="/docs/glossary?term=session+cookie">session cookie</Tooltip>. Sessions end when a user logs out or a session lifetime limit is reached.

To learn more, review [Auth0 Privacy and Cookie Policy](https://auth0.com/privacy).

## セッションのユースケース

Auth0は、アプリケーションを通じて認証するすべてのユーザーのログインセッションを維持します。ユーザーが新しい標準ログインを実行すると、Auth0はログインセッションをリセットします。パスワード、メール、電話番号を更新すると、ユーザーのAuth0セッションも期限切れになります。

When you build an application requiring authentication, you can use sessions to determine whether a user is authenticated each time a request occurs. Depending on how your app has been built, different <Tooltip tip="Authorization Flow: Authorization grant (or workflow) specified in the OAuth 2.0 framework." cta="View Glossary" href="/docs/glossary?term=authorization+flows">authorization flows</Tooltip> are recommended to support a more secure experience for users.

For example, consider an OIDC-compliant (<Tooltip tip="OpenID: Open standard for authentication that allows applications to verify users' identities without collecting and storing login information." cta="View Glossary" href="/docs/glossary?term=OpenID">OpenID</Tooltip> Connect) website called storezero.io.

<Frame>![Example e-commerce website Storezero.io](/images/cdy7uua7fh8z/5XXxdX4fuApQtAapQfZU1b/2fd9161af60962e3de3fc951d95b83d1/use-case-storezero.png)</Frame>

Storezero.ioでは、購入を完了するためにユーザーがログインする必要はありません。ただし、サイトの［My Account（マイアカウント）］セクションを表示するには、ユーザーがログインする必要があります。

以下にリストされているユースケースでは、ユーザーがチェックアウトする前に以前の注文を確認したいシナリオを考えてみましょう。そのためには、［My Account（マイアカウント）］セクションの［All Orders（すべての注文）］ページに移動し、ログインするように求められます。

### ログインフロー

Most types of applications (such as web apps, single-page apps, and native apps) should use the [Authorization Code Flow with PKCE](/docs/get-started/authentication-and-authorization-flow/authorization-code-flow-with-pkce) to facilitate login authentication. This flow involves exchanging an authorization code for tokens.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

The Authorization Code Flow with PKCE replaces the prior use of implicit flow for single-page apps without a backend. New developments must use this flow to ensure optimal security. Migrating existing apps using implicit flow to the PKCE-enhanced authorization code flow is also highly recommended.

</Callout>

#### ユーザーはユーザー名とパスワードを使用してログインします

この例では、ユーザーはユーザー名とパスワードを使用して手動でログインします。

1. Auth0's SDK creates a local session and redirects the user to the Auth0 authorization server (`/authorize` endpoint).
2. The authorization server creates a session, then redirects the user to the login and authorization prompt.
3. The user authenticates using their username and password.
4. The Auth0 authorization server updates the user’s previously-created session to indicate they are logged in.
5. Depending on the flow used, the authorization server returns the user to your application, along with either an ID token or an authorization code.
6. Your application exchanges the token or authorization code for an access token and completes the flow.

このフローでは、次の2つのセッションが作成されます。

* 1つ目は、**ローカルセッション**（storezero.io）で、ユーザーが認証されているかどうかをアプリケーションに示します。
* The **<Tooltip tip="Authorization Server: Centralized server that contributes to defining the boundaries of a user’s access. For example, your authorization server can control the data, tasks, and features available to a user." cta="View Glossary" href="/docs/glossary?term=authorization+server">authorization server</Tooltip> session** (storezero.auth0.com), which indicates to the server whether a user is authenticated. The server session can also optionally track details about the authentication.

  + For example, the authorization server can track if a user leveraged [multi-factor authentication (MFA)](/docs/secure/multi-factor-authentication). This information can then be used to determine whether a user should be prompted to log in or use MFA the next time they arrive at the authorization server.

#### ユーザーがIDプロバイダーを使用してログインする

この例では、ユーザーはユーザー名とパスワードの代わりにFacebookでログインすることを選択します。

1. Auth0's SDK creates a local session and redirects the user to the Auth0 authorization server (`/authorize` endpoint).
2. The authorization server creates a session, then redirects the user to the login and authorization prompt.
3. Upon choosing to log in with Facebook, the authorization server redirects the user to Facebook.
4. Facebook creates a session and authenticates the user. Facebook then updates its session to indicate the user is logged in.
5. Facebook returns the user to the Auth0 authorization server. The authorization server then updates its session to indicate the user is logged in.
6. Depending on the flow used, the authorization server returns the user to your application, along with either an ID token or an authorization code.
7. Your application exchanges the token or authorization code for an access token and completes the flow.

In this scenario, three sessions are created: the **local session** (storezero.io), the **authorization server session** (storezero.auth0.com), and an **<Tooltip tip="Identity Provider (IdP): Service that stores and manages digital identities." cta="View Glossary" href="/docs/glossary?term=identity+provider">identity provider</Tooltip> (IdP) session** (facebook.com).

The IdP session on Facebook's server authenticates the user and provides a seamless <Tooltip tip="Single Sign-On (SSO): Service that, after a user logs into one applicaton, automatically logs that user in to other applications." cta="View Glossary" href="/docs/glossary?term=SSO">SSO</Tooltip> experience. As there is a high probability that users are already logged in to Facebook, users are often authenticated without having to manually provide their Facebook credentials.

### SPAのセッション管理

前の例では、ユーザーがいずれかのログインフローを開始すると、ローカルセッションが作成されます。このローカルセッションは、ユーザーのログイン状態を維持し、再認証が必要になるタイミングを決定できます。

However, local sessions are not available for applications without backends, such as single-page apps (SPAs). Instead, these applications use a different approach known as [silent authentication](/docs/authenticate/login/configure-silent-authentication) to keep users logged in.

サイレント認証では、認可サーバー上のセッションを使用して、ユーザーが再認証する必要があるタイミングを判断します。非表示のiframeは、`prompt=none`パラメーターとともに認証要求を認可サーバーにリダイレクトします。このパラメータにより、サーバーはユーザーに入力を求めなくなります。

* If the session on the authorization server has not expired, the transaction continues seamlessly. The server sends an <Tooltip tip="Access Token: Authorization credential, in the form of an opaque string or JWT, used to access an API." cta="View Glossary" href="/docs/glossary?term=access+token">access token</Tooltip> through WMRM (Web Message Response Mode), which leverages `postMessage`.
* 認可のセッションが期限切れになっているか、ユーザーがログアウトした場合、iframe内のリダイレクトはエラーを返します。その後、アプリケーションはユーザーを認可サーバーに誘導して再認証を行う必要があります。

## Learn more

* [Session Layers](/docs/manage-users/sessions/session-layers)
* [Session Lifetime Limits](/docs/manage-users/sessions/session-lifetime-limits)
* [Configure Session Lifetime Settings](/docs/manage-users/sessions/configure-session-lifetime-settings)
* [Cookies](/docs/manage-users/cookies)
* [SameSite Cookie Attribute Changes](/docs/manage-users/cookies/samesite-cookie-attribute-changes)
* [Authenticate Single-Page Apps With Cookies](/docs/manage-users/cookies/spa-authenticate-with-cookies)