---
og:description: Describes how to use the pagination parameters for specific Management
  API v2 endpoint queries.
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Management API v2エンドポイントの移行：クエリのページネーション
og:url: https://auth0.com/docs/
permalink: migrate-to-paginated-queries
title: Management API v2エンドポイントの移行：クエリのページネーション
twitter:description: Describes how to use the pagination parameters for specific Management
  API v2 endpoint queries.
twitter:title: Management API v2エンドポイントの移行：クエリのページネーション
---

After **26 January 2021** (or Private Cloud version 2202), requests to <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip> v2 endpoints will return a maximum of 50 items for tenants in the Public Cloud. To retrieve more items, you must include the `page` and `per_page` parameters. Beginning on **21 July 2020** (or Private Cloud version 2108), Auth0 will display tenant logs and a migration toggle to help you prepare for this change.

以下の基準に当てはまるテナントが影響を受けます。

* **2020年7月21日より前**に作成されたパブリッククラウドテナントまたはバージョン2108で導入のプライベートクラウド。
* Actively making calls to the affected endpoints without passing the `per_page` parameter for queries that can return more than 1 result.

以下のテナントは、デフォルトで新しいページネーション動作が有効になっており、2021年1月26日より後も現在と同じように動作します。

* **2020年7月21日以後**に作成されたパブリッククラウドテナントまたはバージョン2108以降で導入のプライベートクラウド。
* 影響を受けるエンドポイントを使用していない。
* 影響を受けるエンドポイントを使用しており、かつ`per_page`パラメーターを渡している、または単一の結果を常に返すクエリを実行している。

## 影響を受けるエンドポイント

以下のManagement API v2 エンドポイントへの呼び出しは、影響を受けます。

* [`GET /api/v2/clients`](https://auth0.com/docs/api/management/v2#!/Clients/get_clients)
* [`GET /api/v2/client_grants`](https://auth0.com/docs/api/management/v2#!/Clients/client_grants)
* [`GET /api/v2/grants`](https://auth0.com/docs/api/management/v2#!/Clients/grants)
* [`GET /api/v2/connections`](https://auth0.com/docs/api/management/v2#!/Clients/connections)
* [`GET /api/v2/device-credentials`](https://auth0.com/docs/api/management/v2#!/Clients/device_credentials)
* [`GET /api/v2/resource-servers`](https://auth0.com/docs/api/management/v2#!/Clients/resource_servers)
* [`GET /api/v2/rules`](https://auth0.com/docs/api/management/v2#!/Clients/rules)

廃止通知は、異なるクライアントおよびエンドポイントについて、現在複数アイテムを返すページネーションオプションなしの要求すべてに対して、１時間に１回、テナントログに記録されます。

## アクション

1. Replace all calls to the affected endpoints by providing the `page` and `per_page` parameters.

<table class="table"><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>page</code></td>
<td>Integer</td>
<td>Page index of the results to return. First page is 0.</td>
</tr>
<tr>
<td><code>per_page</code></td>
<td>Integer</td>
<td>Number of results per page. Paging is disabled if the parameter is not sent.</td>
</tr>
</tbody>
</table>
2. Confirm that you are no longer seeing deprecation notices in your tenant logs. Check if a request returned more than 50 items. Look at the `details.size_exceeded` field and check if it's `true`.

   1. Use the following log query to return all calls without pagination options with more than 1 result:
      `type:depnote AND description:*Unpaginated*`
   2. Use the following log query to return all calls without pagination options with more than 50 results:
      `type:depnote AND description:*Unpaginated* AND details.size_exceeded:true`

   要求を行うアプリケーションを特定するために、要求を行うために使用される`client_id`がログに含まれます。また、ログの`details.path`フィールドで使用されるエンドポイントを見つけることもできます。
3. Disable Management API unpaginated requests for your tenant. Go to [Dashboard > Tenant Settings > Advanced > Migration](https://manage.auth0.com/#/tenant/advanced). This will simulate the expected behavior after the migration window closes, causing calls to affected endpoints to return up to 50 results. You will be able to re-enable unpaginated requests any time before that date.

### 拡張機能の更新

You may need to update from previous versions of [Auth0 Extensions](/docs/customize/extensions) and custom extensions to the latest versions to make sure they are only performing paginated queries.

1. Check your tenant logs for deprecation notices for clients with an ID matching an extension URL. It means you will need to update that extension.
2. Go to [Dashboard > Extensions](https://manage.auth0.com/#/extensions), select **Installed Extensions**, and click on the extension's **Update** link if present.

### Deploy CLIツールの更新

If you are using the `auth0-deploy-cli` tool, you must update to version **5.3.0 or later**. To learn more, see [Deploy CLI Tool](/docs/deploy-monitor/deploy-cli-tool).