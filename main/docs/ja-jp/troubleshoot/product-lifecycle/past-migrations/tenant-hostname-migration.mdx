---
og:description: Describes how to check tenant logs for deprecation notices so you
  can migrate your application domain
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: 移行テナントホスト名の確認
og:url: https://auth0.com/docs/
permalink: tenant-hostname-migration
title: 移行テナントホスト名の確認
twitter:description: Describes how to check tenant logs for deprecation notices so
  you can migrate your application domain
twitter:title: 移行テナントホスト名の確認
---

パブリッククラウドでは2022年6月9日、プライベートクラウドでは2022年9月9日の時点で、Auth0はAuthentication API （認証API）に検証レイヤーを追加しています。アプリケーションからAuthentication API （認証API）への呼び出しがこの変更の影響を受ける可能性があることをAuth0が検出した場合は、テナントログに非推奨の通知と、この変更に備えた移行フラグが用意されています。

### 影響を受けるエンドポイント

パブリッククラウドでは2022年6月9日、プライベートクラウドでは2022年9月9日の時点で、適切に検証されていない以下のAuthentication API （認証API）エンドポイントへの呼び出しはすべて拒否されます。Auth0では、その日付けよりもかなり前に、アプリケーションドメインURLまたはAPI呼び出し識別子を同じテナントに移行するアクションを実行することをお勧めします。

影響を受けるエンドポイントは次のとおりです。

* `/oauth/トークン`
* `/co/authenticate`
* `/userinfo`
* `/login`
* `/oauth/revoke`
* `/mfa/challenge`
* `/p/<connection-type>/<ticket>` (Enterprise connection provisioning endpoint)

## テナントログの確認

まず、テナントログで非推奨の通知を確認し、アプリケーションを移行する必要があるかどうかを確認します。

1. Navigate to [Dashboard > Monitoring > Logs](https://manage.auth0.com/#/logs).

   1. Search the logs for `type:depnote AND description:ignore*request*host*header*` to find the deprecation notice regarding which applications are affected and need to be migrated. The log entry includes the ID for any impacted applications and the following message:
      `Ignore request Host header: This feature is being deprecated. Please see https://auth0.com/docs/product-lifecycle/deprecations-and-migrations``/tenant-hostname-migration.`
   2. Find the **Details > Raw** section of the log. There you can identify the `client_id` of the application to update, or the `connection_id` in the case of a provisioning endpoint.

      <Callout icon="file-lines" color="#0EA5E9" iconType="regular">

      Also check the `tenant_from_host` field. This field contains the Auth0 tenant identified from the domain received in your API calls.

      </Callout>
2. Modify all applicable applications.

   1. If any misalignments of tenant and domain tenant exist, you need to modify the sent identifiers, or domain URL, along with other misconfigured request parameters.
   2. The domain tenant should match the tenant associated with the `client_id` or `connection_id`.

該当するすべてのテナントの移行が完了すると、テナントログには、この移行に関連付けられている非推奨の通知が表示されなくなります。

## 移行を確認

アプリケーションを移行し、未検証のホスト名を設定したら、2022年6月9日または2022年9月9日より前の任意の時点で廃止の動作を無効にして変更を確認します。

1. Navigate to [Dashboard > Tenant Settings > Advanced > Migrations](https://manage.auth0.com/#/tenant/advanced).
2. Disable the **Ignore request Host header** toggle**.** Deactivating this toggle enforces validation for your tenant and completes the migration.

このトグルを無効にした後にホスト名の確認が期待どおりに機能しない場合は、`client_id`または`connection_id`に関連付けられているドメインテナントとテナントが同じではないことを示す4xxエラーが表示されます。

すべてのアプリケーションの移行が正常に実行され、運用環境で確認されたら、スイッチを完全に無効にして、廃止の機能を使用できないようにすることができます。パブリッククラウドでは2022年6月9日、プライベートクラウドでは2022年9月9日以降、Auth0によってホスト名の確認が強制され、関連付けられているスイッチはテナント設定から削除されます。