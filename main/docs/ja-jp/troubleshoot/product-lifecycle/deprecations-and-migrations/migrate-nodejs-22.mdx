---
og:description: Describes Auth0 Actions items affected by the Node.js 18
og:image: https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
og:title: Node 18からNode 22への移行
og:url: https://auth0.com/docs/
permalink: migrate-nodejs-22
title: Node 18からNode 22への移行
twitter:description: Describes Auth0 Actions items affected by the Node.js 18
twitter:title: Node 18からNode 22への移行
---

一般的な考慮事項

### アクションにあるモジュールレベルのコードは、アクションのインスタンスあたり1回だけ起動され、多くの実行で必要に応じて何度も実行されます。

* 新しいランタイムに含まれる利用可能なモジュールについては、「[必要かを判断する：Auth0の拡張性]()」を参照してください。
* For available modules in the new runtime, you can reference [Can I require: Auth0 Extensibility](https://auth0-extensions.github.io/canirequire/).
* ファイルシステムへの書き込みアクセスが無効になりました。
* Marketplaceの統合

### ソーシャル接続の統合

#### Nodeランタイムバージョンの変更が影響を与える可能性があるソーシャル接続の全リストを確認するには、[Management API](/api/management/v2)を使用します。特に、カスタムソーシャル接続として明示的に作成されたものか、Marketplaceを通して最初に追加されたものかを問わず、影響を受ける可能性があるソーシャル接続はすべて、`oauth1`か`oauth2`のいずれかの値の`strategy`属性を持ちます。

Use the [Management API](https://auth0.com/docs/api/management/v2) to identify a complete list of social connections impacted by a Node runtime version change. In particular, all potentially impacted social connections, either explicitly created as a custom social connection or initially added through the Marketplace, have the `strategy` attribute with a value of either `oauth1` or `oauth2`.

You can then paginate through all the existing custom social connections in a given tenant using the [GET all connections](https://auth0.com/docs/api/management/v2#!/Connections/get_connections) endpoint. For example, the following query options returns the names and identifiers of up to 100 custom social connections:

```http wrap lines
/api/v2/connections?strategy=oauth1&strategy=oauth2&include_totals=true&fields=name&per_page=100
```






The <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip> does not allow updating the scripts for custom social connections added through the Marketplace. If a script change is required to be compatible with Node 22, you must use the <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>.

## 新しいカスタムアクションを作成する

### Node 22で新たにカスタムアクションを作成するには、Auth0 Dashboardで以下を行います。

既存のカスタムアクションをアップグレードする

1. Navigate to [Auth0 Dashboard > Actions > Library](https://manage.auth0.com/#/dashboard/actions/library).
2. Select **Create Action > Build from scratch**.
3. In the **Runtime\*** field, select **Node 22 (Recommended)**.
4. Write your custom Actions in Node 22, test, and deploy when ready.

### Node 12、16、18で作成した既存のカスタムアクションをそれぞれNode 22にアップグレードできる他にも、古いランタイムを使用して[前のバージョンに戻す](/customize/actions/manage-versions#revert-actions)ことができます。アクションをNode 22にアップグレードするには、必要な変更を既存の実装に加えて新しいバージョンの作成とデプロイを行い、ランタイムとしてNode 22の使用を設定します。

You can individually upgrade existing custom Actions built on Node 12, 16, or 18 to Node 22 and [revert to the previous version](/docs/customize/actions/manage-versions#revert-actions) using the older runtime. Upgrade Actions to Node 22 by creating and deploying a new version of the existing implementation with any required changes and set to use Node 22 as the runtime.

### 残りの（Actions以外の）拡張オファリングに使用されるランタイムは、テナントの詳細設定レベルでグローバルに定義されます。この設定を変更すると、同時に以下の機能性に影響を及ぼします。

ルール

* フック
* カスタムデータベーススクリプト
* カスタムソーシャル接続スクリプト
* テナントの拡張性ランタイムの設定を変更するには、Auth0 Dashboardで以下を行います。

これはグローバルな設定で複数の拡張性に同時に影響与えるため、まず開発テナントで変更してから、関連するすべての拡張機能をテストして、問題が認められなかった場合にのみ運用テナントで変更することをお勧めします。

1. Navigate to **Dashboard > Settings > Advanced**.
2. Scroll to the **Extensibility** section.
3. For **Runtime**, select **Node 22**.
4. For **Legacy Extensibility**, select the Runtime version if applicable.

特にカスタムデータベーススクリプトに関しては[こちらのページにある手順](/custom-database-connections-scripts/environment)に従って、特定のランタイムのバージョンでスクリプトを個別に検証してから、グローバルにランタイムのバージョンを変更してください。

Specifically for Custom DB scripts you can [follow the steps as explained on this page](/docs/authenticate/database-connections/custom-db/custom-database-connections-scripts/environment) to individually verify a script against a specific runtime version before proceeding to change the global runtime version.